/*! @permutive/javascript-sdk v20.17.0 (web) (built 2024-10-29T14:08:47.511Z) */(()=>{"use strict";var __webpack_modules__={2865:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},3939:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(2275),s=r(9727);function i(e){return(0,n.zG)((0,s.Y3)((()=>JSON.parse(e))),(0,s.fS)(n.gn))}},1819:(e,t,r)=>{r.r(t),r.d(t,{CleanRoomAddon:()=>m,load:()=>_});var n=r(3636),s=r(2865),i=r(366),o=r(1385),a=r(2275),c=r(9727),u=r(9246),l=r(5460),d=r(7387),f=r(731),p=r(6707);class g{prefix="[clean_room]";api;sessionManager;permutive;logger;clientContext;viewId;async putOrResetUnprocessed(e){return(0,a.zG)(e,c.g_((()=>u.Y3((()=>this.unprocessedPrebidAuctions.reset()),s.w)),(e=>u.Y3((()=>this.unprocessedPrebidAuctions.put(e)),s.w))),u.vx((e=>(this.reportError(`Unprocessed auctions failed to put. Got ${e}`),u.F2((0,a.Q1)())))),(e=>e()))}unprocessedPrebidAuctions;debouncedPutOrResetUnprocessed=this.setupUnprocessedPrebidAuctions();stagedAuctions={};trackableAuctions={};get allAuctions(){return{...this.stagedAuctions,...this.trackableAuctions}}trackAuctionsInterval=null;constructor(e){this.permutive=e.permutive,this.api=e.api,this.logger=e.logger,this.unprocessedPrebidAuctions=e.unprocessedEvents.PrebidAuctions,this.sessionManager=e.sessionManager,this.clientContext=e.clientContext,this.viewId=e.viewId,(0,a.zG)(e.pbjs,l.UI(c.EQ((()=>{this.logInfo("Waiting for PrebidJS to start PrebidAuctions tracking...")}),(e=>this.startPrebidAuctions(e)))))}async startPrebidAuctions(e){await this.trackUnprocessedPrebidAuctions(),this.logDebug("Starting PrebidAuctions tracking",{prebid:e});const t=(0,p.zi)(e),r=e=>0===e.bidsReceived.length&&0===e.noBids.length?null:(0,a.zG)(this.mapToStagedAuctions(e),o.tS((()=>o.Y3((()=>e.bidsReceived.forEach((e=>{var r;("rendered"===(r=e).status||"targetingSet"===r.status)&&this.setBidToWon(t,e)}))),(e=>{const t=`Failed to process auction. Got ${(0,s.w)(e)}`;return this.reportError(t),(0,s.w)(t)})))));e.onEvent("auctionEnd",(e=>{r(e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const n=r=>{const n=(0,d.qh)(r);this.logDebug("Processing setTargeting event",{adUnitCodes:n});const s=o.DT((e=>{let[t,r]=e;return!!t&&!!r.hb_adid}),(()=>new Error("Missing targeting data"))),c=(0,a.ls)(s,o.tS((t=>{let[r,{hb_adid:n}]=t;return(0,a.zG)(e.getAllPrebidWinningBids(),(0,i.Ew)((e=>e.adId===n&&e.adUnitCode===r)),o.Yo((()=>new Error("Prebid winning bid does not exist"))))})),o.UI((e=>{this.setBidToWon(t,e)})));return n.forEach(c)};e.onEvent("setTargeting",(e=>{n(e),this.storeAuctionsAsUnprocessed(this.allAuctions)})),e.onEvent("bidWon",(e=>{this.setBidToWon(t,e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const c=(e,r)=>{this.logDebug("Processing render event",{isRendered:e,props:r}),r.bid&&(e&&this.setBidToRendered(t,r.bid),this.promoteAuctionToTrackable(r.bid),this.storeAuctionsAsUnprocessed(this.allAuctions),this.trackEligibleAuctions())};e.onEvent("adRenderSucceeded",(e=>{c(!0,e)})),e.onEvent("adRenderFailed",(e=>{c(!1,e)})),e.getEvents().forEach((e=>"auctionEnd"===e.eventType?r(e.args):"setTargeting"===e.eventType?n(e.args):"bidWon"===e.eventType?this.setBidToWon(t,e.args):"adRenderSucceeded"===e.eventType?c(!0,e.args):"adRenderFailed"===e.eventType?c(!1,e.args):void 0)),this.storeAuctionsAsUnprocessed(this.allAuctions,{debounced:!1}),(0,d.aT)((async()=>{this.trackAuctionsInterval=null;const e=this.allAuctions;this.stagedAuctions={},this.trackableAuctions={},await this.trackPrebidAuctions(e,{useBeacon:!0}),await this.storeAuctionsAsUnprocessed(null,{debounced:!1})}))}trackUnprocessedPrebidAuctions(){return(0,a.zG)(u.Y3((async()=>(0,a.zG)(await this.unprocessedPrebidAuctions.getIfPresent(),c.g_((()=>this.logDebug("No unprocessed PrebidAuctions found")),(e=>{let{props:t,...r}=e;return this.logDebug("Found unprocessed PrebidAuctions",{props:t,unprocessedData:r}),Promise.all([this.permutive.track("PrebidAuctions",t,{unprocessedData:r}),this.unprocessedPrebidAuctions.reset()])})))),(e=>{const t=`Failed to track unprocessed PrebidAuctions. Got ${(0,s.w)(e)}`;return this.reportError(t),(0,s.w)(t)})),(e=>e()))}setupUnprocessedPrebidAuctions(){const e=new f.b(1e3,2500),t=this.putOrResetUnprocessed.bind(this);return e.schedule(t)}async storeAuctionsAsUnprocessed(e){let{debounced:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logDebug("Store auctions as unprocessed",{auctionsToStore:e,debounced:t});const r=u.Y3((async()=>{const t=(0,d.qh)(e??{}).map((e=>{let[t,r]=e;return{...r,auction_id:t}})),r=await this.clientContext.getClient();return(0,a.zG)(t,c.DT((e=>e.length>0)),c.UI((e=>({client:r,props:this.makePrebidAuctionProperties({auctions:e}),viewId:this.viewId.get(),sessionId:this.sessionManager.getSessionId()}))))}),s.w);return(0,a.zG)(r,u.EQ((e=>{this.reportError(`Failed to process auctions: ${e}`)}),(e=>{const r=this.debouncedPutOrResetUnprocessed(e);return t?r:Promise.all([this.putOrResetUnprocessed(e),r])})),(e=>e()))}mapBidProperties(e,t){var r;return{ad_id:t.adId,ad_unit_code:t.adUnitCode,advertiser_domains:(0,p.Cg)(t),advertiser_id:(e=>{var t,r;const n=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||(null==e||null===(t=e.meta)||void 0===t?void 0:t.buyerId)||(null==e||null===(r=e.meta)||void 0===r?void 0:r.advertiserId);return n?`${n}`:void 0})(t),advertiser_name:(e=>{var t,r,n;const s=(null===(t=e.meta)||void 0===t?void 0:t.clickUrl)||(null===(r=e.adomain)||void 0===r?void 0:r[0])||(null===(n=e.meta)||void 0===n?void 0:n.advertiserName);return s?`${s}`:void 0})(t),bid_available:"string"==typeof t.statusMessage&&t.statusMessage.indexOf("empty")<0,bidder:t.bidder,bidder_timeout:(0,d.rH)(e.bidderTimeout),brand_id:(e=>{var t;const r=null===(t=e.meta)||void 0===t?void 0:t.brandId;return r?`${r}`:void 0})(t),brand_name:(e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.brandName})(t),cpm:(0,p.Qd)(t),creative_id:`${t.creativeId}`,deal_id:(0,p.$7)(t),dsp_id:(0,p.cs)(t),hb_pb:null===(r=t.adserverTargeting)||void 0===r?void 0:r.hb_pb,height:(0,d.rH)(t.height),request_timestamp:t.requestTimestamp,response_timestamp:t.responseTimestamp,time_to_respond:t.timeToRespond,width:(0,d.rH)(t.width)}}collectAdUnitCodes(e){const t=new Set;return e.reduce(((e,r)=>{let{adUnitCode:n}=r;return!n||t.has(n)||(t.add(n),e.push({ad_unit_code:n})),e}),[])}mapToStagedAuctions(e){return o.Y3((()=>{const{auctionId:t,bidsReceived:r,noBids:n}=e,s=this.collectAdUnitCodes(r),i=this.collectAdUnitCodes(n);return this.stagedAuctions[t]={bids:s,no_bids:i},this.logDebug("Added auction",this.stagedAuctions[t]),this.stagedAuctions[t]}),(e=>{const t=`Failed to map auction. Got ${(0,s.w)(e)}`;return this.reportError(t),(0,s.w)(t)}))}findAuction(e){return(0,a.zG)(this.getStagedAuction(e.auctionId),o.vx((()=>this.getTrackableAuction(e.auctionId))),o.vx((()=>this.mapToStagedAuctions({auctionId:e.auctionId,bidsReceived:[e],bidderRequests:[],noBids:[]}))))}setBidByOperation(e,t,r){const n=e=>e.hasOwnProperty("ad_id"),c=(r,c)=>{const u=e=>e.ad_id===r.adId,l=e=>e.ad_unit_code===r.adUnitCode,[d,f]=(0,a.zG)(c,(0,i.uK)((e=>n(e)&&u(e)&&l(e))),(e=>[e.left,e.right]));this.logDebug(`Bids for ${t}`,{nonMatching:d,matching:f});const p=(0,a.ls)(o.DT((e=>1===e.length),(()=>new Error("No matching bids"))),o.UI((e=>{let[r]=e;return this.logDebug(`Found bid for ${t}`,{found:r}),{found:r,others:d}}))),g=o.DT((e=>e.length<=1),(()=>new Error("Ad ID is not unique"))),h=(0,a.ls)(p,o.vx((()=>o.Y3((()=>{const s=this.mapBidProperties(e,r),i=d.filter((e=>!(!l(e)||!n(e))||!l(e)));return this.logDebug(`Creating bid for ${t}`,{created:s,others:i}),{found:s,others:i}}),(e=>(0,s.w)(`Failed to create bid. Got ${(0,s.w)(e)}`))))));return(0,a.zG)(f,g,o.tS(h))};return(0,a.ls)((e=>(0,a.zG)(this.findAuction(e),o.tS((n=>(0,a.zG)(c(e,n.bids),o.tS((e=>{let{found:t,others:n}=e;return o.Y3((()=>({updated:r(t),others:n})),s.w)})),o.UI((e=>{let{updated:r,others:s}=e;const i=[r,...s];n.bids=i,this.logDebug(`Bid operation ${t} successful`,r,i)}))))))),o.Vn((e=>{const r=`Failed bid operation ${t}. Got ${(0,s.w)(e)}`;return this.reportError(r),(0,s.w)(r)})))}setBidToWon(e,t){return this.setBidByOperation(e,"setWon",(e=>({...e,winning_bid:!0})))(t)}setBidToRendered(e,t){return this.setBidByOperation(e,"setRendered",(e=>({...e,winning_bid:!0,is_rendered:!0,rendered_timestamp:(new Date).getTime()})))(t)}promoteAuctionToTrackable(e){let{auctionId:t}=e;const r=this.stagedAuctions[t];if(r){if(this.trackableAuctions[t])return this.logError("Auction is already promoted to trackable",{auction:this.trackableAuctions[t]});this.trackableAuctions[t]=r,delete this.stagedAuctions[t],this.logDebug("Auction promoted to trackable",{auctionId:t,trackableAuctions:this.trackableAuctions})}}trackEligibleAuctions(){if(this.trackAuctionsInterval)return;this.trackAuctionsInterval=(0,d.PQ)((async()=>{if(!this.trackAuctionsInterval)return;this.trackAuctionsInterval=null;const e=this.trackableAuctions;this.trackableAuctions={},await this.trackPrebidAuctions(e),await this.storeAuctionsAsUnprocessed(this.stagedAuctions,{debounced:!1})}),{timeout:5e3})}async trackPrebidAuctions(e,t){const r=(0,d.qh)(e).map((e=>{let[t,r]=e;return{...r,auction_id:t}}));r.length&&(await this.permutive.track("PrebidAuctions",this.makePrebidAuctionProperties({auctions:r}),t),this.logDebug("Tracked auctions",{auctions:r}))}makePrebidAuctionProperties(e){return{aggregations:e,isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"}}getStagedAuction(e){return(0,a.zG)(this.stagedAuctions[e],o.DT(Boolean,(()=>new Error("Staged auction not found"))),o.Vn((t=>(this.logError(t,{auctionId:e}),t))))}getTrackableAuction(e){return(0,a.zG)(this.trackableAuctions[e],o.DT(Boolean,(()=>new Error("Trackable auction not found"))),o.Vn((t=>(this.logError(t,{auctionId:e}),t))))}reportError(e){return this.api.reportError(`${this.prefix} ${e}`)}logInfo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(this.prefix,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const h="clean_room",_=e=>{(0,n.Hn)(h)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[h,{}]})};class m extends g{}},1371:(e,t,r)=>{r.r(t),r.d(t,{contextualService:()=>f,load:()=>p});var n=r(936),s=r(5460),i=r(2275),o=r(1385),a=r(9727),c=r(1583),u=r(7054),l=r(7387),d=r(1228);const f=function(e,t){return n.K4((()=>{const[r,n]=(0,i.zG)(t.viewId,s.UI((()=>s.Ue(a.bM()))),(e=>(0,i.bc)((0,i.zG)(e,s.VS((e=>e[0]))),(t=>e.current[1](a.G(t))))));return(0,i.zG)(t.consent,s.YP((t=>(0,i.zG)(g(e.namespace),a.tS(a.it((e=>e.consent(t?(0,d.qA)():(0,d.vk)())))))))),{addon:t=>((0,i.zG)(t,a.DT(l.Kn),a.tS(u.P5("cohorts")),a.tS(a.DT((e=>Array.isArray(e)&&e.every(l.HD)))),a.fS((()=>c.cS)),(0,l.bw)((r=>{e.logger.debug("[Contextual]","Received input",{sanitised:r,unvalidated:t}),n(r)}))),{}),cohorts:r}}))};const p=function(e){(0,i.zG)(o.Y3((()=>{(t=>{const r=(0,i.ls)(o.it((e=>e()),o.KC),(0,l.bw)(o.Vn((t=>e.api.reportError(`Contextual CMD threw error: ${t}`)))));t.forEach((e=>r(e))),t.push=function(e){return r(e),Array.prototype.push.call(this,e)}})((0,i.zG)(g(e.namespace),a.fS((()=>({}))),(0,l.bw)((t=>{t.cmd=t.cmd||[],window[e.namespace.getNamespacedStorageKey("permutiveContextual")]=t}))).cmd)}),o.KC),(0,l.bw)(o.Vn((t=>e.api.reportError(`contextual addon threw error on load: ${t}`)))))};function g(e){return(0,i.zG)(a.Y3((()=>window[e.getNamespacedStorageKey("permutiveContextual")])),a.tS(a.ij))}},3775:(e,t,r)=>{r.r(t),r.d(t,{SspAddon:()=>$,filterCohortsUsedInTargeting:()=>A,load:()=>L,realService:()=>M,sspService:()=>T,stubService:()=>R});var n=r(5460),s=r(3636),i=r(2275),o=r(1583),a=r(936),c=r(2925),u=r(7560),l=(r(1890),r(1385)),d=r(1717),f=(r(3812),r(1586));const p=e=>[e,d.of(e)],g=f.li,h=f.Yg,_=e=>p(l.F2(e));var m=r(9727);const v="RefEventual",b=e=>t=>n.vP((0,i.zG)(t,n.UI(g),n.UI(e)),(0,i.zG)(t,n.UI(h),n.UI(d.UI(e)))),w=e=>t=>n.vP((0,i.zG)(n.vP((0,i.zG)(e,n.UI(g)),(0,i.zG)(t,n.UI(g))),n.UI((e=>{let[t,r]=e;return r(t)}))),(0,i.zG)(n.vP((0,i.zG)(e,n.UI(h)),(0,i.zG)(t,n.UI(h))),n.UI((e=>{let[t,r]=e;return d.ap(t)(r)})))),y=n.UI(g),k={URI:v,map:(e,t)=>b(t)(e)},I={URI:v,map:k.map,ap:(e,t)=>w(t)(e)},S="RefEventualEither",E=e=>n.a9(_(e)),P=u.UI(k,l.dO),G=c.ap(I,l.G5),x=e=>(e=>t=>{const r=t();return(0,i.zG)(n.fF((()=>r)),n.UI(m.fS((()=>e))),n.UI((e=>(0,i.bc)(e,(()=>r)))))})(l.F2(e)),U={URI:S,map:(e,t)=>P(t)(e)},z={URI:S,map:U.map,ap:(e,t)=>G(t)(e)};r(817);var q=r(7387);const C=(e,t)=>r=>({all:(0,i.zG)(r,P(e)),byAdServer:(0,q.mQ)((0,i.ls)(t,m.UI((e=>(0,i.zG)(r,P(e))))))});var D=r(9246),O=r(7029);const T=M;function R(e,t,r,s,i){return a.of({cohorts:m.YP,externalData:{[B]:n.a9(m.YP)}})}function M(e,t,r,u,l){const d=(0,s.Hn)(j),f=d("ssps",o.cS),p=d("all_cohort_mapping",{}),g=f.includes("google_pps"),h=d("affinity_enabled",!1);return(0,i.zG)(l.consent,a.KD([[e=>!e,a.of(E(m.YP))],a.K4((s=>{let{stopped:a}=s;u.debug("[ssp] Addon started, affinity enabled: ",h);const d=(0,i.zG)(l.cohorts,P((0,i.ls)(o.hX((e=>e in p)),o.tS((e=>p[e]))))),f=(0,i.zG)(n.vP(l.url,a),n.UI((e=>{let[t,r]=e;return(0,i.zG)(t,m.hX((()=>h&&!r)))})),n.UI(m.UI((r=>D.Y3((()=>e.req({method:"GET",url:t.getEndpointUrl("/standard-audiences/v1/affinity",m.YP,[["url",r]]),withCredentials:!1,dataType:"json"})),String)))),n.UI(m.UI(D.Vn((0,q.bw)((e=>r(`Failed to fetch affinity cohorts: ${e}`)))))),n.UI(m.UI(D.UI((e=>e.affinity_values)))),n.UI(m.fS((()=>D.of(o.bM())))),n.VS(x(o.bM())));return(0,i.zG)((0,c.gz)(z)(d,f),P(o.xH),P((e=>[...new Set(e)])),P(m.G))}))]),a.UI(n.xH),a.UI((e=>({cohorts:(0,i.zG)(e,P(m.fS((()=>o.bM()))),C((e=>e),(e=>"dfp"===e.id&&g?m.G(A):m.YP)),m.G),externalData:{[B]:(0,i.zG)(y(e),n.UI(m.Uo),n.UI(m.xH),n.UI(m.UI(A)),n.D8(m.Eh(o.Eh(O.Eq))),n.UI(m.UI((e=>({ssps:f,cohorts:e})))))}}))))}const A=e=>[...new Set(e.map((e=>e.replace(/-ac$/,"").replace(/-aw$/,"").replace(/-c$/,""))))],j="ssp",L=e=>{(0,s.Hn)(j)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[j,{}]})};class ${constructor(e){}}const B="_pssps"},3812:(e,t,r)=>{r.d(t,{GL:()=>a,HJ:()=>c,N1:()=>l,NC:()=>n,RP:()=>s,SF:()=>d,UM:()=>u,ho:()=>p,iE:()=>f});const n=performance.now(),s=(new Date).getTime();let i=[],o=!1;const a=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c((()=>e(...r)))},c=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&i.length<1e4&&i.push([r,performance.now()]),r=void 0},s=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&s.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const s=self.setInterval((()=>{n=c((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(s)}},l=e=>()=>{return t=e(),new Promise(((e,r)=>t.then(a(e),a(r))));var t},d=e=>{const t=l(e);return()=>new Promise((e=>c((()=>e(t())))))},f=()=>{const e=i;return i=[],e},p=e=>{o=e}},5460:(e,t,r)=>{r.d(t,{ap:()=>w,a9:()=>m,Ue:()=>g,gS:()=>h,D8:()=>U,VS:()=>y,xH:()=>k,En:()=>_,p4:()=>x,fF:()=>P,UI:()=>b,Rp:()=>I,vP:()=>S,bw:()=>z,yY:()=>G,YP:()=>v});var n=r(2865),s=r(1385),i=r(2275),o=r(9727),a=r(1583),c=r(7387);function u(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let s=t;const i=()=>{Object.is(t,s)||(s=t,e(t))};r=[...r,i];return()=>{r=r.filter((e=>e!==i))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function d(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[s,i]=f(n(),(e=>"might_change"!==e&&t())),o=()=>i(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":i("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),s}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:s}=u(e),i={state:e,onStateChange:s},o=l("Disallowed recursion in Branch.",(e=>{if("final"===i.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),i.state=e,n(e)}finally{"final"===e&&r()}}));return[i,o]}var p=r(2444);function g(e){const[t,r,n]=function(){const[e,t]=f("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[s,i]=q(t,e);return[s,e=>r((()=>i(e))),n]}function h(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,s,i]=g(r());return[n,n=>{t=e.concat(t,n),s(r())},i]}function _(e,t){return r=>{let n=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,s)=>(0,i.zG)(r,b(p.UI((e=>{const r=t.concat(n[s],e);return n=n.map(((r,n)=>n===s?t.empty:t.concat(r,e))),r}))))))}}function m(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function v(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function b(e,t){if(t){const[r,n]=q(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>b(e,t)}const w=e=>y((t=>b(t)(e)));function y(e,t){return t?k(b(e,t)):t=>k(b(e,t))}function k(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[s,i]=f(n),o=e=>t=>{switch(t){case"final":i(e().state);break;case"might_change":i("might_change");break;case"nominal":"might_change"===e().state?i("might_change"):i("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const a=o((()=>e));let c=r.onStateChange(a);return[s,e=>{r=e,c(),c=e.onStateChange(a),a(r.state)}]}(e.branch,e.current.branch),[n,s]=q(t,e.current.current);let i=e.current.onChange(s);return e.onChange((e=>{i(),i=e.onChange(s),r(e.branch),s(e.current)})),n}function I(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return b((e=>(r=t[1](r,e),r)),e)}let r=o.bM();return b((e=>{const n=t[0](r,e);return r=o.G(n),n}),e)}}function S(){if(0===arguments.length||C(arguments.length<=0?void 0:arguments[0]))return E(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,i.zG)(Object.values(e),(e=>E(...e)),b((0,i.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function E(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return m([]);if(1===t.length)return b((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const s=t.map((0,c.vg)("branch")),i=()=>{n&&(n=!1,u(t.map((e=>e.current))))},o=d(s,i),[a,u]=q(o,t.map((e=>e.current)));return a}function P(e){const[t,r,n]=g(o.YP);return e().then((0,i.ls)(o.G,r,n)),t}const G=e=>()=>o.pC(e.current)?Promise.resolve(e.current.value):new Promise((t=>{const r=(0,i.zG)(e,v(o.UI((e=>{r(),t(e)}))))}));function x(e){const[t,r,a]=g(o.YP);return e.then(s.F2).catch((0,i.ls)(n.w,s.t$)).then((0,i.ls)(o.G,r,a)),t}function U(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let r=o.YP;return b((t=>{if(o.Wi(r))return r=o.G(t),t;const n=e(r.value,t);return r=o.G(n),n}),t)}}(((e,r)=>t(e,r)?e:r))}function z(e){return t=>(v(e)(t),t)}function q(e,t){if("final"===e.state)return[m(t),()=>{}];const r=u(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function C(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},936:(e,t,r)=>{r.d(t,{K4:()=>c,KD:()=>h,UI:()=>d,ak:()=>g,bw:()=>f,dQ:()=>u,of:()=>l,vP:()=>p});var n=r(5460),s=r(2275),i=r(7387),o=r(7054),a=r(9727);const c=e=>(0,s.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),u=s.yR,l=(0,s.ls)(s.a9,c),d=e=>t=>(0,s.ls)(t,(0,i.rO)({value:e})),f=e=>t=>(0,s.ls)(t,(0,i.rO)({value:(0,i.bw)(e)}));function p(e){return t=>{let{previousState:r,...i}=t;const a=v(r)?r:{},c=(0,s.zG)(e,o.Su(((e,t)=>t({previousState:a[e],...i}))));return{value:(0,s.zG)(c,o.UI((e=>e.value))),state:(0,s.zG)(c,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function g(e,t){return r=>(0,s.ls)((0,i.rO)({previousState:m}),(i=>{const o=r(i),a=t(o.value)({...i,previousState:i.previousState[e]});return{value:(0,s.zG)([o.value,a.value],(t=>{let[r,n]=t;if(!v(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,s.zG)(n.vP(o.state,a.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!v(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const h=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],o=[...t.map((e=>{let[t,r]=e;return[t,(0,s.a9)(r)]})),(0,s.a9)(r)];return a=(0,i.lo)(o),(0,s.ls)(n.UI(a),_);var a};function _(e){const t=(0,s.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:i,stopped:o,...c}=r;return(0,s.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[u,l]=r;return(0,s.zG)(e,a.UI((e=>e.state.current)),a.fS((()=>i)),(e=>u({previousState:e,stopped:(0,s.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==l}))),...c})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function m(e){return v(e)?e:{}}function v(e){return"object"==typeof e&&null!==e}},7222:(e,t,r)=>{r(3247)},5842:(e,t,r)=>{r.d(t,{lg:()=>h,Bt:()=>m});var n=r(366),s=r(2275),i=r(9727),o=r(7029),a=r(7387);class c{userId;network;api;logger;constructor(e,t,r,n){this.userId=e,this.network=t,this.api=r,this.logger=n}tag="appnexus";ttlInSeconds=86400;usedForThirdPartyData=!0;url="https://ib.adnxs.com/getuidj";invalidAliases=["","0","-1"];getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,a.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,s.zG)((0,i.DT)((e=>this.isValidAlias(e.uid)))(e),(0,i.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:i.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class u{config;network;api;userId;logger;url;resetUrl;constructor(e,t,r,n,s){this.config=e,this.network=t,this.api=r,this.userId=n,this.logger=s,this.url=`https://e488cdb0-e7cb-4d91-9648-60d437d8e491.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}tag="pxid";ttlInSeconds=86400;usedForThirdPartyData=!1;getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,a.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,i.ij)(e.uid)})),(e=>({type:"attempted",result:i.YP})))}reset(){return(0,a.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}var l=r(5460),d=r(7054),f=r(3940),p=r(1385);const g=f.ff((e=>void 0===e));class h{metrics;trace;permutiveData;identityProviderEnv;logger;ref;setReady;thirdParty;rawRef;identityMapRef;setIdentityMap;providers={};static emailSHA256Regex=/^[a-f0-9]{64}$/;constructor(e,t,r,n,c){this.metrics=e,this.trace=t,this.permutiveData=r,this.identityProviderEnv=n,this.logger=c;const u=this.getCachedIdentitiesAndMigrateIfRequired(),[f,p]=l.Ue(u);this.identityMapRef=f,this.setIdentityMap=p,f.onChange((0,s.ls)(d.z7((e=>!_.has(e))),(0,a.bw)((e=>{this.logger.debug("[identities] Persisting",e),this.permutiveData.setData("identities",e)})))),this.rawRef=(0,s.zG)(f,l.UI((0,s.ls)(d.UI((e=>e.value)),d.hX(g))),l.D8(d.Eh(o.Eq)));const[h,m]=l.Ue(!1);this.ref=(0,s.zG)(l.vP(h,this.rawRef),l.UI((e=>{let[t,r]=e;return(0,s.zG)(r,(0,i.DT)((()=>t)))}))),this.setReady=()=>{e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"identity_ready",time_origin:"sdk_init"}),m(!0)},this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),r=[{load:e=>{return t=e.config,r=e.network,n=e.api,s=e.userId,o=e.logger,(0,i.G)(new u(t,r,n,s,o));var t,r,n,s,o}},{load:e=>{return t=e.userId,r=e.network,n=e.api,s=e.logger,(0,i.G)(new c(t,r,n,s));var t,r,n,s}},{load:e=>(e.cookies,e.messages,i.YP)},{load:e=>(e.cookies,i.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,i.YP)}],o=(0,n.oA)(r.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,s.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(o).then((e=>e.map((e=>{let[t,r]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,r,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,a.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},r=Object.entries(e).map((e=>{let[t,{id:r,expiry:n,priority:s}]=e;return{tag:t,...r?{id:r}:{},...n?{expiry:n}:{},...void 0!==s?{priority:s}:{}}})),s=r.filter((e=>((e,t)=>!!e.id&&!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),a=r.filter((e=>((e,t)=>!!e.id&&!!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,n.DZ)((e=>(0,i.ij)(e.priority)))(s),u=c.length>0?Math.max(...c):0,l=s.map((e=>void 0!==e.priority?{...e,priority:e.priority}:{...e,priority:u+1})),d=a.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+v}:{tag:e.tag,id:e.id,priority:u+b}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,r=e=>"string"==typeof e.id&&"string"==typeof e.tag,i=e=>"email_sha256"!==e.tag||h.emailSHA256Regex.test(e.id);return"string"==typeof e?(a=e).length>0?{left:[],right:[{id:a,tag:"default"}]}:{left:[t],right:[]}:Array.isArray(e)?(o=e,(0,s.zG)(o,n.tV((0,s.ls)(p.DT(r,(()=>t)),p.Y$(i,(()=>"Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")))))):{left:[t],right:[]};var o,a}extractIdentifyFromQueue(e){let{global:t}=e;const r=()=>t.q.findIndex((e=>"identify"===e.functionName)),n=(e,s)=>{if(e<0)return s;const i=t.q.splice(e,1)[0],o=this.parseCustomerDefinedIdentities(i.arguments[0]);return n(r(),{left:s.left.concat(o.left),right:s.right.concat(o.right)})},{left:s,right:i}=n(r(),{left:[],right:[]});return s.forEach((e=>this.logger.warn("Invalid identity provided during init",e))),i}setIdentities(e){const t=e.reduce(((e,t)=>{let{tag:r,id:n,expiry:s,priority:i}=t;return void 0===this.identities[r]&&this.logger.debug(`identities[${r}]: added`),e[r]={...n?{value:n}:{},...s?{expiry:s}:{},...void 0!==i?{priority:i}:{}},e}),{}),r=this.rawRef.current;this.setIdentityMap({...this.identities,...t});const n=this.rawRef.current;return{identifyRequestRequired:()=>!d.xb(n)&&!d.Eh(o.Eq).equals(r,n)}}async reset(){this.setIdentityMap({}),await Promise.all(Object.values(this.providers).map((e=>e.reset())))}getFilteredIdentities(e){return(0,a.m8)(...Object.entries(this.identities).filter((t=>{let[r,n]=t;return e(r,n)})).map((e=>{let[t,{value:r,expiry:n,priority:i}]=e;return(0,s.bc)(t,{id:r,...n?{expiry:n}:{},...void 0!==i?{priority:i}:{}})})))}shouldAskForNewIdentity(e){var t;const r=(0,i.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,i.g_)((()=>!0),this.isIdentityExpired)(r)}getCachedTPDIdentity(e){return this.identities[e]?(0,i.ij)(this.identities[e].value):i.YP}mapTPDIdentityIfPresent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const n=()=>Date.now()+Math.floor(1e3*r);return(0,i.g_)((()=>({tag:e,expiry:n()})),(t=>({tag:e,id:t,expiry:n()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,s.bc)(e,i.YP):(0,s.zG)(t.result,(t=>this.metrics.track({name:(0,i.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(r=>(0,s.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,a.m8)(...Object.entries(e).filter((e=>{let[t,r]=e;return!this.isIdentityExpired(r)&&!_.has(t)}))))(this.permutiveData.getData("identities")||{})}}const _=new Set(["public","email","email_md5","email_sha256","ip_address"]),m=(e,t,r,s,i)=>{const a=(e,t)=>{const r=["(null)"];return r.indexOf(e)>-1||!!y[e]||(0,n.jV)(o.Eq)(t,r).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":a,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,r)=>["thestudentroom.co.uk"].some((e=>r.indexOf(e)>-1))&&(0,n.jV)(o.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":a,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!w[e]},d=u[e]||l[t];return!!d&&d(i,r,s)},v=2,b=3,w={},y={}},8167:(e,t,r)=>{r.d(t,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},9702:(e,t,r)=>{r.d(t,{CL:()=>a,EW:()=>c,PH:()=>o,eV:()=>s,jH:()=>u,t2:()=>i});var n=r(3636);const s=(0,n.MU)("track_form_submission",!0),i=((0,n.MU)("track_pageview_complete",!0),(0,n.MU)("track_pageview_engagement",!0)),o=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),a=(0,n.$S)("track_slot_rendered",!0),c=(0,n.$S)("track_slot_viewable",!1),u=(0,n.$S)("track_targeting_keys",!1)},7041:(e,t,r)=>{r.d(t,{v:()=>o});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,s,i,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=s,this.config=i,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var s=r(3636);const i={dfp:{dfp:[172215,166027,173903,91821,95201,140685,106906,89492,173895,164010,64767,82106,173924,114192,173923,56344,99366,173884,172883,77811,167460,89784,64766,167455,88489,121269,135961,88766,167473,94397,167459,124278,173168,173906,173896,89495,64911,106920,87159,172214,100803,41376,94909,114028,99365,175012,66683,173890,173926,168149,173915,91449,62212,134610,96020,168154,173883,105719,120920,84222,58133,173898,173901,113969,107326,98239,167464,79655,173902,92956,99387,89496,91628,132243,85209,173930,173908,90032,101197,167467,89786,132240,157446,173918,117411,173925,92886,167468,173881,56634,134502,173876,116495,124457,127898,135985,80707,173882,173931,167462,114973,89497,88505,172948,87319,173914,65452,149125,88024,157502,139861,174346,74822,100580,73008,139769,173928,103854,91819,173889,173891,167461,105851,100608,165789,117409,145008,173919,105717,167474,123650,157232,70302,133840,173912,173877,98706,91448,122873,173909,91149,92957,41414,92946,97262,122871,172220,90449,89782,125103,88026,172217,167475,132352,89781,172225,173888,175049,114701,174345,173921,106567,74314,167472,146705,122439,82015,172216,132236,107324,82234,117139,92973,173880,120744,167607,122874,122535,158127,124656,173907,128247,39204,173913,99059,91291,173917,94752,124339,139856,97261,167458,173762,168072,173900,89780,125544,114702,106921,89783,167463,173932,74820,167457,165229,173910,122872,173167,133758,131504,167456,62161,172275,73331,88504,134592,136107,154903,90033,84002,89494,167471,173878,167476,84072,65454,117410,73342,173897,89747,167466,172221,88624,65451,110071,103853,91654,89493,101196,92947,132239,132233,102092,173920,64768,75548,105718,109700,174344,147496,98469,79654,173626,173927,85210,100609,109669,90876,173916,90007,66684,168172,173929,144155,172219,173922,90034,167477,116942,173879,172218,114096,175844,175840,175818,175816,175830,175812,175832,175828,175814,175820,175824,175835,175826,175842,175822,175555,175810,175808,175806,175803,175804,176884,176883,176887,176888,176889,176890,176891,176892,176893,176894,176895,176896,176897,176898,176899,176900,176901,176902,176903,176905,176906,176904,176907,176908,176910,176911,176912,176913,176914,176915,176916,176917,176918,176919,176920,176921,176922,176923,176924,176953,176955,176957,176968,176967,177016,177226,177419,178814,180084,180085,180951,180952,180953,180956,180957,180959,181008,181367,183024,183448,184006,184706,184958,185040,185201,185434,185652,186185,186327,186328,187218,187358,188255,188392,188393,189307,189338,189339,189340,189341,189342,166526,164201,192184,193201,188921,194112,194111,188922,188920,194113,194541,194542,194543,194857,195230,196455,196454,196328,192341,196843,185107,197769,196939,203327,206662,186897],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[39204,149125],nativo:[],rubicon_ssp:[],smart:[],freewheel:[]};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return i[e]}getActivations(e){return(0,s.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},3636:(e,t,r)=>{r.d(t,{$S:()=>o,Hn:()=>s,MU:()=>i});const n={standard_cohorts:{auto_init:!0,standard_audiences:{affinity_enabled:!0},activationConfigs:[]},ssp:{auto_init:!0,ssps:["openx"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},all_cohort_mapping:{1e7:["bgyz"],10000001:["bhgp"],10000002:["bhhc"],10000003:["bhhg"],10000004:["bhhk"],10000005:["bhhp"],10000006:["bhhv"],10000007:["bhhy"],10000008:["bhie"],10000010:["bhis"],10000011:["bhiz"],10000012:["bhji"],10000013:["bhjq"],10000014:["bhka"],10000015:["bhkl"],10000016:["bhkr"],10000017:["bhky"],10000018:["bhlg"],10000019:["bhli"],10000020:["bhlo"],10000021:["bhlp"],10000022:["bhnd"],10000023:["bhnl"],10000024:["bhnp"],10000025:["bhnw"],10000026:["bhoj"],10000035:["bgzb"],10000036:["bhgq"],10000037:["bhgs"],10000038:["bhgw"],10000039:["bhgy"],10000040:["bhgz"],10000041:["bhhe"],10000042:["bhhh"],10000043:["bhhw"],10000044:["bhhx"],10000045:["bhhz"],10000046:["bhia"],10000047:["bhif"],10000048:["bhig"],10000049:["bhii"],10000050:["bhij"],10000051:["bhik"],10000052:["bhim"],10000053:["bhip"],10000054:["bhit"],10000055:["bhiu"],10000056:["bhiv"],10000057:["bhiy"],10000058:["bhjm"],10000059:["bhjr"],10000060:["bhjs"],10000061:["bhjw"],10000062:["bhjx"],10000063:["bhkm"],10000064:["bhir"],10000065:["bhko"],10000066:["bhkp"],10000067:["bhkq"],10000068:["bhkz"],10000069:["bhla"],10000070:["bhlb"],10000071:["bhle"],10000072:["bhlf"],10000073:["bhlq"],10000074:["bhlt"],10000075:["bhlu"],10000076:["bhlw"],10000077:["bhlx"],10000078:["bhly"],10000079:["bhmb"],10000080:["bhmi"],10000081:["bhmj"],10000082:["bhml"],10000083:["bhmp"],10000084:["bhmr"],10000085:["bhmw"],10000086:["bhmz"],10000087:["bhne"],10000088:["bhnf"],10000089:["bhni"],10000090:["bhnn"],10000324:["bhhj"],10000325:["bhhi"],10000327:["bhku"],10000328:["bhkt"],10000329:["bhkw"],10000330:["bhkv"],10000687:["bgzc"],10000688:["bgza"],10000689:["bhha"],10000690:["bhgt"],10000691:["bhgx"],10000692:["bhgv"],10000693:["bhgr"],10000694:["bhgu"],10000695:["bhhb"],10000696:["bhhd"],10000697:["bhhf"],10000698:["bhhl"],10000699:["bhho"],10000700:["bhhm"],10000701:["bhhn"],10000702:["bhhq"],10000703:["bhht"],10000704:["bhhu"],10000705:["bhhs"],10000706:["bhhr"],10000707:["bhib"],10000708:["bhid"],10000709:["bhic"],10000710:["bhio"],10000711:["bhin"],10000712:["bhil"],10000713:["bhiq"],10000714:["bhih"],10000715:["bhiw"],10000716:["bhix"],10000717:["bhja"],10000718:["bhjc"],10000719:["bhjd"],10000720:["bhje"],10000721:["bhjf"],10000722:["bhjb"],10000723:["bhjg"],10000724:["bhjh"],10000725:["bhjo"],10000726:["bhjk"],10000727:["bhjn"],10000728:["bhjj"],10000729:["bhjl"],10000730:["bhjy"],10000731:["bhju"],10000732:["bhjv"],10000733:["bhjz"],10000734:["bhjt"],10000735:["bhkj"],10000736:["bhkk"],10000737:["bhki"],10000738:["bhkd"],10000739:["bhkc"],10000740:["bhkf"],10000741:["bhkh"],10000742:["bhkb"],10000743:["bhkg"],10000744:["bhke"],10000745:["bhjp"],10000746:["bhkn"],10000747:["bhkx"],10000748:["bhks"],10000749:["bhld"],10000750:["bhlc"],10000751:["bhlh"],10000752:["bhlk"],10000753:["bhlj"],10000754:["bhll"],10000755:["bhlm"],10000756:["bhlv"],10000757:["bhna"],10000758:["bhmv"],10000759:["bhmt"],10000760:["bhmy"],10000761:["bhmc"],10000762:["bhmo"],10000763:["bhls"],10000764:["bhmq"],10000765:["bhme"],10000766:["bhmh"],10000767:["bhlz"],10000768:["bhlr"],10000769:["bhnb"],10000770:["bhmk"],10000771:["bhmu"],10000772:["bhmx"],10000773:["bhmg"],10000774:["bhmd"],10000775:["bhmf"],10000776:["bhnc"],10000777:["bhmn"],10000778:["bhmm"],10000779:["bhma"],10000780:["bhms"],10000781:["bhng"],10000782:["bhnj"],10000783:["bhnh"],10000784:["bhnk"],10000785:["bhno"],10000786:["bhnm"],10000787:["bhnu"],10000788:["bhnv"],10000789:["bhns"],10000790:["bhnt"],10000791:["bhnq"],10000792:["bhnr"],10000793:["bhob"],10000794:["bhny"],10000795:["bhod"],10000796:["bhoh"],10000797:["bhog"],10000798:["bhnz"],10000799:["bhoa"],10000800:["bhoe"],10000801:["bhnx"],10000802:["bhoc"],10000803:["bhof"]},affinity_enabled:!0,activationConfigs:[]},overlays:{auto_init:!0,activationConfigs:[]},rubicon_ssp:{auto_init:!0,publisher_id:"29410",activationConfigs:[]},local_storage:{auto_init:!0,activationConfigs:[{id:"0f64b862-b8c4-4fbc-b9db-3e8f1e54aa12",tt:"EveryTime",sc:39204,c:{storage_key:"_pindexs"},wc:{}},{id:"f6c72179-e550-4ffb-9f10-b5d742e81a24",tt:"EveryTime",sc:39204,c:{storage_key:"_ppiano"},wc:{}}]},scriptrunner:{auto_init:!0,activationConfigs:[]},contextual:{auto_init:!0,activationConfigs:[]},geoip:{auto_init:!1,activationConfigs:[]},clean_room:{auto_init:!0,pass_cohorts_to_prebid:!0,cohort_ssp_config:[],activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},gam_log:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:["ozone","rubicon","appnexus","openx","ix"]},activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},appnexus_adserver:{auto_init:!0,activationConfigs:[]},publishers:{auto_init:!1,add_alchemy_taxonomy:!0,add_alchemy_entities:!1,activationConfigs:[]}},s=e=>{const t=n[e];return(e,r)=>(null==t?void 0:t[e])??r},i=s("web"),o=s("dfp");s("facebook_pixel_v2")},6688:(e,t,r)=>{r.d(t,{z:()=>i,k:()=>o});var n=r(4513);class s{context;constructor(e){this.context=e}getContext(){return this.context}updateContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{let[t,r]=e;this.context[t]=r}))}}class i extends s{constructor(e){super(e)}getClient(){return Promise.resolve(o())}}const o=()=>{const e="PermutiveWebSDK/v20.17.0";return{type:"web",user_agent:navigator.userAgent?`${navigator.userAgent} ${e}`:e,url:(0,n.bk)(window.location.href),domain:window.location.hostname||"",title:document.title,referrer:(0,n.bk)(document.referrer)}}},4253:(e,t,r)=>{r.d(t,{J:()=>c});var n=r(2275),s=r(9727),i=r(9134);const o=e=>t=>class extends t{key=e;put(e){return this.db.then((t=>t.put(e,this.key))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(s.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},a=e=>(0,n.zG)(class{db;constructor(e){this.db=Promise.resolve((0,i.E)(e.namespace,e.logger,e.consent))}},o(e));class c extends(a("permutive-unprocessed-pba")){constructor(e){super(e)}}},5472:(e,t,r)=>{r.d(t,{LP:()=>i,dG:()=>n,eP:()=>s});const n=4096,s=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,i="Cookie is missing required parameters."},6329:(e,t,r)=>{r.d(t,{Eq:()=>d,X:()=>f,b:()=>l});var n=r(5460),s=r(936),i=r(5191),o=r(7029),a=r(6627),c=r(2275),u=r(9727);const l=()=>({continent:void 0,environment:"",events_count:0,os:"",sample_rate:0,sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0,user_agent:""}),d=i.n_({continent:{equals:(e,t)=>e===t},environment:o.Eq,events_count:a.Eq,os:o.Eq,sample_rate:a.Eq,sdk_version:o.Eq,segments_count:a.Eq,session_count:a.Eq,session_init_count:a.Eq,session_view_count:a.Eq,user_agent:o.Eq}),f=e=>{const t=g(e.userId),r=(0,c.zG)(n.vP(e.userId,e.sessionId),n.UI((e=>{let[t,r]=e;return`${t},${r}`})),g),i=String(Math.random()),o=(0,c.zG)(e.sdkVariant,u.UI((e=>`-${e}`)),u.fS((()=>""))),a={environment:"web",events_count:0,os:p(window.navigator.userAgent||""),sample_rate:e.sampleRate,sdk_version:"v20.17.0"+o,segments_count:0,user_agent:window.navigator.userAgent||""};return(0,c.zG)(s.vP({session_count:t(e.sessionId),session_init_count:r(n.a9(i)),session_view_count:r(e.viewId)}),s.UI((0,c.ls)((t=>n.vP({...t,continent:(0,c.zG)(e.continent,n.UI(u.FS))})),n.UI((e=>({...a,...e}))))))},p=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},g=e=>t=>s.dQ((r=>{let{previousState:s}=r;const u=(0,c.zG)(n.vP(e,t),n.Rp(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(s),((e,t)=>{let[r,n]=t;return{scope:r,lastValue:n,count:r!==e.scope?1:n!==e.lastValue?e.count+1:e.count}})),n.D8(i.n_({scope:o.Eq,lastValue:o.Eq,count:a.Eq})));return{state:u,value:(0,c.zG)(u,n.UI((e=>e.count)))}}))},6769:(e,t,r)=>{r.d(t,{p:()=>f});var n=r(2865),s=r(2275),i=r(7387),o=r(6329),a=r(5460),c=r(1583),u=r(9246),l=r(1717),d=r(3812);const f=e=>{let t=e.context.current;(0,s.zG)(e.context,a.D8(o.Eq),a.Rp((0,s.bc)(o.b(),o.b()),((e,t)=>{let[,r]=e;return(0,s.bc)(r,t)})),(e=>e.onChange((e=>{let[r,n]=e;o.Eq.equals({...r,continent:void 0},{...n,continent:void 0})||p({beacon:!1}),t=n}))));const r="[Metrics Reporter]";let f=!0;const p=async i=>{let{beacon:o}=i;const a=t,d=(0,s.zG)(u.of(e.metrics.consume()),u.Y$((()=>f),(()=>{})),u.tS(c.EQ((()=>u.of(void 0)),(t=>u.Y3((()=>(async(t,r)=>{if(!t)return e.api.metrics(r);if(!e.api.metricsBeacon(r))throw new Error("Failed to send beacon.")})(o,{context:a,items:t})),(s=>{f=!1,function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];e.logger.error(r,...n)}(`Failed to publish metrics ${(0,n.w)(s).message}`,t)}))))),l.UI(s.Q1));return d()},g=()=>{(0,d.HJ)((()=>p({beacon:!1}).finally((()=>g()))),5e3)};g(),(0,i.Bf)((()=>p({beacon:!0})),{capture:!1})}},6176:(e,t,r)=>{r.d(t,{u:()=>n});class n{trace;metrics;messages;_isRealtime=!1;_isReady=!1;constructor(e,t,r){this.trace=e,this.metrics=t,this.messages=r}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){const t=performance.now();this._isRealtime=!0,this.trace.measureSinceInit("sdk_realtime").finish(),this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{},t),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_realtime",time_origin:"sdk_init"},t),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){const e=performance.now();this._isReady=!0,this.trace.measureSinceInit("sdk_ready").finish(),this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{},e),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_ready",time_origin:"sdk_init"},e),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},541:(e,t,r)=>{r.d(t,{a:()=>b});var n=r(2275),s=r(7054),i=r(7029),o=(r(6511),s.dp,s.xb,function(e){return function(t){return Object.keys(t).sort(e.compare)}}),a=o(i.Df);s.dx,s.e$;s.Bu,s.P5,s.Su,s.UI;s.ri;function c(e){return s.vP(e)}s._r;s.jt;s.yW,s.G,s.t9;var u=s.HA,l=(s.nn,s.kp),d=s.CC,f=s.RF,p=(s.I8,s.mS,s.RJ,s._Y,s.V_),g=s.EW,h=s.nu,_=(s.SW,s.zV,s.Ub,s.vA,s.qS),m=(s.mK,function(e){return function(t){var r=o(e);return function(e,n){var s=r(e);if(0===s.length)return t.of({});for(var i=t.of({}),o=function(r){i=t.ap(t.map(i,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},a=0,c=s;a<c.length;a++){o(c[a])}return i}}});s.hX,s.DZ,s.uK,s.tV;s.oA,s.oh;var v="Record";s.Eh,s.uZ,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,s.nr,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df;class b{config;localStorage;logger;permutiveData;cookies;externalData;constructor(e,t,r,n,s,i){this.config=e,this.localStorage=t,this.logger=r,this.permutiveData=n,this.cookies=s,this.externalData=i}async reset(){return this.logger.log("Resetting State"),(0,n.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>a({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-prebid-id":!0,"permutive-events-cache":!0,_pssps:!0,_ppsts:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataMiscKey),this.localStorage.delete(this.config.permutiveDataQueriesKey)])),n.Q1)}}},1772:(e,t,r)=>{r.d(t,{u:()=>n});class n{permutiveData;permutiveReset;userId;viewId;logger;constructor(e,t,r,n,s){this.permutiveData=e,this.permutiveReset=t,this.userId=r,this.viewId=n,this.logger=s}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.logger.warn("getStateSizeInBytes needs to be updated to reflect new event persistence"),this.permutiveData.getDataSize()}reset(){return this.permutiveReset.reset()}}},1347:(e,t,r)=>{r.d(t,{W:()=>n});class n{ref;constructor(e){this.ref=e}get(){return this.ref.current}}},9134:(e,t,r)=>{r.d(t,{E:()=>s});var n=r(7056);const s=(e,t,r)=>{const s=window.localStorage;return(0,n.rK)(s,"[Local Storage]",e,t,r)}},8480:(e,t,r)=>{r.d(t,{u:()=>s});r(6851);var n=r(7056);const s=(e,t,r)=>{const s=window.sessionStorage;return(0,n.rK)(s,"[Session Storage]",e,t,r)}},7056:(e,t,r)=>{r.d(t,{oP:()=>c,rK:()=>d});var n=r(2865),s=r(3939),i=r(1385),o=r(2275),a=r(4429);class c{storage;namespace;constructor(e,t){this.storage=e,this.namespace=t}async put(e,t){const r=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(r,JSON.stringify(e)),t}async get(e){const t=this.namespace.getNamespacedStorageKey(e.toString()),r=this.storage.getItem(t);return null===r?null:(0,s.A)(r)}async delete(e){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}async deleteStore(){}}const u=e=>{const{logger:t,consent:r,prefix:n}=e,s=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=(0,a.v)(super.put.bind(this),s,(()=>!r.current))}},l=e=>{const{logger:t,prefix:r,storage:s}=e;return e=>class extends e{isSupported=null;isStorageSupported(){return null!==this.isSupported||(this.isSupported=i.Y3((()=>{const e="_permutive_ls_test";return s.setItem(e,e),s.getItem(e),s.removeItem(e),!0}),n.w),(0,o.zG)(this.isSupported,i.EQ((e=>{t.warn(`${r} Is NOT supported`,e)}),(()=>{t.debug(`${r} Is supported`)})))),this.isSupported}async put(e,t){return(0,o.zG)(this.isStorageSupported(),i.EQ((e=>{throw e}),(()=>super.put(e,t))))}async get(e){return(0,o.zG)(this.isStorageSupported(),i.EQ((()=>null),(()=>super.get(e))))}async delete(e){return(0,o.zG)(this.isStorageSupported(),i.EQ(o.Q1,(()=>super.delete(e))))}async deleteStore(){return(0,o.zG)(this.isStorageSupported(),i.EQ(o.Q1,(()=>super.deleteStore())))}}},d=(e,t,r,n,s)=>new((0,o.zG)(c,l({logger:n,prefix:t,storage:e}),u({logger:n,consent:s,prefix:t})))(e,r)},3247:(e,t,r)=>{r.d(t,{SD:()=>d});var n=r(9727),s=r(1583),i=r(7054),o=r(2275),a=r(5460),c=r(7387);const u={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468},l="[TCF]",d=(e,t)=>{const[r,d,p]=(0,o.zG)(a.Ue(n.YP),(e=>{let[r,...s]=e;return[(0,o.zG)(r,a.bw(n.UI((e=>{t.debug(l,`Status "${e.type}"`,e)})))),...s]})),g=e.__tcfapi;if(g){const e=new Set(["tcloaded","useractioncomplete"]);g("addEventListener",2,((r,s)=>{s?"loaded"===r.cmpStatus&&e.has(r.eventStatus)&&(t.debug(l,"TCF API loaded",r),d(n.G({type:"loaded",data:r}))):(t.warn(l,"TCF API failed to register event listener"),d(n.G({type:"aborted"})),p())}))}else t.debug(l,"TCF API missing from the page"),d(n.G({type:"missing"})),p();const[h,_]=(0,o.zG)(a.gS(s.uZ()),(e=>{let[t,r]=e;return[t,(0,o.ls)(s.of,r)]}));return(0,o.zG)(a.vP(r,h),a.bw((e=>{let[r,s]=e;return(0,o.zG)(r,n.UI((e=>{const r=s();switch(t.debug(l,`Processing ${r.length} listeners`,r),e.type){case"missing":r.forEach((r=>{let[n,s]=r;t.debug(l,`Invoking ${n} as TCF API missing`),s(e)}));break;case"aborted":r.forEach((e=>{let[r]=e;t.debug(l,`Invoking ${r} skipped as TCF API aborted`)}));break;case"loaded":r.forEach((r=>{let[s,a]=r;(0,o.zG)(f(e.data),n.EQ((()=>{t.debug(l,`Invoking ${s} as GDPR does not apply`),a(e)}),(r=>(0,o.zG)(u,i.P5(s),n.tS((e=>(0,o.zG)(r,i.P5(e.toString())))),n.UI((r=>{r?(t.debug(l,`${s} has consent`,{vendor:s}),a(e)):t.debug(l,`${s} does not have consent`,{vendor:s})}))))))}))}})))}))),{registerVendorOnValidConsent:(e,t)=>_([e,t]),getStatusOrAbortOnTimeout:e=>new Promise((t=>{const s=setTimeout((()=>t({type:"aborted"})),e);(0,o.zG)(r,a.UI(n.UI((e=>{clearTimeout(s),t(e)}))))})).then((0,c.bw)((e=>t.debug(l,"TCF status resolved as",{status:e}))))}},f=e=>e.gdprApplies?n.G(e.vendor.consents):n.YP},6563:(e,t,r)=>{r.d(t,{C:()=>a});var n=r(366),s=r(2275);r(9082);const i=(o=[[{name:"dfp",import:Promise.resolve().then(r.bind(r,2198))}],[{name:"appnexus_adserver",import:Promise.resolve().then(r.bind(r,1108))}],[],[],[],[],[{name:"clean_room",import:Promise.resolve().then(r.bind(r,1819))}],[],[],[],[],[],[],[{name:"gam_log",import:Promise.resolve().then(r.bind(r,1936))}],[{name:"local_storage",import:Promise.resolve().then(r.bind(r,2087))}],[],[{name:"overlays",import:Promise.resolve().then(r.bind(r,6683))}],[],[],[{name:"prebid",import:Promise.resolve().then(r.bind(r,4453))}],[{name:"publishers",import:Promise.resolve().then(r.bind(r,6070))}],[],[],[{name:"rubicon_ssp",import:Promise.resolve().then(r.bind(r,5833))}],[{name:"scriptrunner",import:Promise.resolve().then(r.bind(r,3751))}],[{name:"tracking_pixel",import:Promise.resolve().then(r.bind(r,5734))}],[],[],[{name:"web",import:Promise.resolve().then(r.bind(r,7866))}],[],[],[{name:"ssp",import:Promise.resolve().then(r.bind(r,3775))}],[{name:"contextual",import:Promise.resolve().then(r.bind(r,1371))}]],(0,s.zG)((0,n.xH)(o),(0,n.u4)({},((e,t)=>({...e,[t.name]:t.import})))));var o;const a=e=>{const t=Object.entries(i).map((async t=>{let[r,n]=t;return e.logger.log(`Loading addon ${r}`),(await n).load(e)}));return Promise.all(t)}},1108:(e,t,r)=>{r.r(t),r.d(t,{APPNEXUS_SEGMENTS_STORAGE_KEY:()=>c,AppNexusAdServerAddon:()=>f,appnexusAdServer:()=>p,load:()=>d});var n=r(3636),s=r(7387),i=r(2275),o=r(1583),a=r(5460);const c="_papns",u=()=>{try{return window.apntag.getTag()}catch{return{}}},l=e=>{try{return window.apntag.getTag(e)}catch{return}},d=e=>{if((0,n.Hn)("appnexus_adserver")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["appnexus_adserver",{}]}),void 0!==window.apntag&&window.apntag.anq&&window.apntag.anq.push){e.permutive.ready((0,s.Z_)(e.api,e.userId,(()=>{let t=!1;const r=u();Object.keys(r).forEach((e=>{r[e].displayed&&(t=!0)}));const n=t?"sdk_targeting_realtime_fail_count":"sdk_targeting_realtime_success_count";e.metrics.track({name:n,value:1,labels:{target:"appnexus"}})})),"realtime");const t=function(e){return(Array.isArray(e)?e:[e]).map((e=>e.toString()))},r=function(e,r){const n=[];return null!=r&&r.keywords&&Object.keys(r.keywords).forEach((e=>{n.push({key:e,value:t(r.keywords[e])})})),{slot:{target_id:e.targetId,tag_id:e.tagId,height:e.height,width:e.width,targeting:n},ad:{type:e.adType,source:e.source,creative_id:e.creativeId,auction_id:e.auctionId,buyer_member_id:e.buyerMemberId,brand_category_id:e.brandCategoryId,media_type_id:e.mediaTypeId,media_sub_type_id:e.mediaSubType}}},n=function(t,r){const n=(null==t?void 0:t.utiframeId)||(null==t?void 0:t.targetId);if(n){var s,i,o,a,c,u;let t=!1;window.addEventListener("blur",(function(){t&&e.permutive.track("AppNexusAdClick",r)})),null===(s=document)||void 0===s||null===(i=s.getElementById)||void 0===i||null===(o=i.call(s,n))||void 0===o||o.addEventListener("mouseover",(function(){t=!0})),null===(a=document)||void 0===a||null===(c=a.getElementById)||void 0===c||null===(u=c.call(a,n))||void 0===u||u.addEventListener("mouseout",(function(){t=!1}))}};window.__permutive=window.__permutive||{},window.__permutive.appnexusEvents=window.__permutive.appnexusEvents||[],window.__permutive.appnexusEvents.forEach((function(t){if("adLoaded"==t.eventType&&t.arg){const s=t.arg,i=l(s.targetId),o=r(s,i);e.permutive.track("AppNexusAdImpression",o),n(i,o)}})),window.apntag.anq.push((function(){window.apntag.onEvent("adLoaded",(t=>{if(t){const s=l(t.targetId),i=r(t,s);e.permutive.track("AppNexusAdImpression",i),n(s,i)}}))}))}};class f{options;logger;userId;api;activationManager;externalData;segments={cloudCohorts:[],live:[]};eligibleSegments={};constructor(e){this.options=e,this.logger=e.logger,this.userId=e.userId,this.api=e.api,this.activationManager=e.activationManager,this.externalData=e.externalData;const t=e.nextGenOutput.activations.xandr_ssp??a.a9([]);this.segments=this.initSegments(e.externalData,t.current),this.eligibleSegments={};const r=this.activationManager.getSpecializedActivations("appnexus_adserver");for(let e=0;e<r.length;e++){const t=r[e];this.eligibleSegments[t]=1}const n=this.options.nextGenOutput.queryLanguageCohorts.all;if(this.updateSegments(this.filterSegments(n.current)),window.apntag&&window.apntag.anq&&window.apntag.anq.push){const e=this;window.apntag.anq.push((function(){const t=window.apntag.defineTag;window.apntag.defineTag=function(r){t(r),(0,s.Z_)(e.api,e.userId,(function(){if(r.targetId){const t=n.current;e.updateSegments(e.filterSegments(t),r.targetId)}}))()}}))}n.onChange((0,s.Z_)(this.api,this.userId,(e=>this.updateIfNecessary(e)))),t.onChange((e=>{this.logger.debug("[appnexus] received updated cloud cohorts"),this.segments.cloudCohorts=[...e],this.updateSegments(this.segments.live)}))}get liveSegments(){return this.segments.live}initSegments(e,t){return{cloudCohorts:[...t],live:this.externalData.getExternalJsonData(c)??[]}}cacheAppnexusSegments(e){const t=JSON.stringify(e);this.externalData.setExternalData(c,t)}updateIfNecessary(e){const t=this.filterSegments(e);(0,s.cO)(t,this.segments.live)||this.updateSegments(t)}updateSegments(e,t){window.apntag&&window.apntag.anq&&window.apntag.anq.push&&window.apntag.anq.push((()=>{const r={permutive:[...e,...this.segments.cloudCohorts,"rts"]};t?window.apntag.setKeywords(t,r,{overrideKeyValue:!0}):Object.keys(u()).forEach((e=>window.apntag.setKeywords(e,r,{overrideKeyValue:!0})))})),this.cacheAppnexusSegments(e),this.segments.live=e,this.logger.debug("Appnexus live segments updated to",this.segments.live)}filterSegments(e){return e.filter((e=>e in this.eligibleSegments))}}const p=e=>{const t=(0,i.zG)(Object.values(e)??[],o.UI(String),(e=>new Set(e)));return{id:"xandr_ssp",filterCohorts:o.hX((e=>t.has(e)))}}},4961:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(7387);function s(){return(0,n.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1})}},4066:(e,t,r)=>{r.r(t),r.d(t,{createAddon:()=>S,getCachedDFPSegments:()=>k});var n=r(2865),s=r(1385),i=r(2275),o=r(9727),a=r(1583),c=r(5460),u=r(3636),l=r(7387),d=r(4961);const f="_pdfps";r(5472);var p=r(366),g=r(7029);let h=!1;let _=null;const m=(e,t)=>{const{logger:r}=t;(0,i.zG)(e,o.UI((e=>{!0!==h&&e.pubadsReady&&(_??=n=>{let{slot:s}=n;const{getContentUrl:o}=s;if(!o||"function"!=typeof o)return;(0,i.zG)(o(),(0,g.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:r}=e;h||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),h=!0,r.debug("DFP has exceeded targeting limit"))})(t),_&&e.pubads().removeEventListener("slotRenderEnded",_),_=null)},e.pubads().addEventListener("slotRenderEnded",_))})))},v=(e,t,r,n)=>{const{logger:s}=t;m(e,t);(0,i.zG)(e,o.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:i}=e.pubads(),o=t("permutive")||[],a=Object.values(r.eligibleSegments).map(String).concat(r.allSeenCloudCohorts).concat("rts"),c=(0,p.uK)((e=>a.includes(e))),{left:u}=c(o),l=n.concat(u).concat("rts");s.debug("DFP setting GPT targeting to",l),i("permutive",l)}))})(e))))};var b=r(2198);const w={liveSegments:[],cloudCohorts:[],allSeenCloudCohorts:[],eligibleSegments:{}},y={segments:w,getGAMKeyValues:()=>({permutive:""})},k=e=>e.getExternalJsonData(f)||[],I=(e,t,r)=>{const{logger:s,externalData:i,api:o}=t;let a=r.map(String).concat(w.cloudCohorts);s.debug("DFP is updating with targeting values",a),v(e,t,w,a);try{i.setExternalJsonData(f,a)}catch(e){const t=(0,n.w)(e),r="DFP failed to set data. Got:";s.error(r,t),o.reportError(`${r} ${t.message}`)}return((e,t)=>{let{api:r,logger:n}=e;(0,u.$S)("sync_segments_cookie",!1)?(n.debug("DFP syncing segment cookie _pdfps"),r.segmentSync({key:f,value:t})):n.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(a)),s.debug("DFP live segments updated to",r),r},S=async e=>{const{api:t,logger:r,activationManager:n,messages:u,externalData:p,nextGenOutput:g,userId:h,cookies:_}=e,m=await(0,d.t)();o.Wi(m)&&r.error("[DFP]: unable to find google tag script on the page"),(0,i.zG)(m,o.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));y.getGAMKeyValues=()=>({...(0,i.zG)((0,b.generateProjectSpecificKVs)(e),s.Vn((e=>{var r;return r=e,t.reportError(`[DFP] ${r}`,h.get()),e})),s.fS((()=>({})))),permutive:y.segments.liveSegments.join(",")}),w.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),r={};for(const e of t.dfp)r[e]=e;for(const e of Object.keys(t.dfp_legacy)){const n=Number(e);r[n]=t.dfp_legacy[n]}return r})(n);const v=(0,i.zG)(g.queryLanguageCohorts.all,c.UI((e=>(r.debug("DFP received QL segments",{qlSegments:e}),((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,w.eligibleSegments)))),c.D8(l.cO)),k=g.activations.dfp??c.a9(a.bM()),S=(0,i.zG)(k,c.Rp(a.bM(),((e,t)=>[...new Set([...e,...t])])));return(0,i.zG)(c.vP(v,k,S),c.YP((0,l.Z_)(t,h,(t=>{let[n,s,i]=t;r.debug("DFP received updated cohorts",{filteredQlSegments:n,cloudCohorts:s}),w.cloudCohorts=s,w.allSeenCloudCohorts=i,w.liveSegments=I(m,e,n)})))),r.debug("DFP initialised with segments",w),(0,i.zG)(m,o.UI((e=>{e.secureSignalProviders=e.secureSignalProviders||[],e.secureSignalProviders.push({id:"permutive-secure-signal",collectorFunction:c.yY(g.addons.secureSignal)})}))),u.on("permutive:reset",(0,l.Z_)(t,h,(()=>{r.debug("DFP received 'permutive:reset' event"),p.removeExternalData(f),_.deleteCookie(f)}))),u.emit("permutive:dfp:ready"),y}},2198:(e,t,r)=>{r.r(t),r.d(t,{generateProjectSpecificKVs:()=>G,load:()=>f});var n=r(2865),s=r(1385),i=r(9727),o=r(2275),a=r(9702),c=r(3636),u=r(7387),l=r(4066);const d={},f=e=>{(0,c.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd.push((()=>p(e)))},p=e=>{e.permutive.ready((0,u.Z_)(e.api,e.userId,(()=>I(e.metrics))),"realtime");S(e.externalData);(0,o.zG)(G(e),s.tS((e=>s.Y3((()=>(0,u.qh)(e).forEach((e=>{let[t,r]=e;googletag.pubads().setTargeting(t,r)}))),n.w))),s.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),b(e.permutive),googletag.cmd.push((()=>{w(e.permutive),y(e.permutive)})),window.addEventListener("message",h(e.permutive),!1)},g=e=>{let{advertiserId:t,campaignId:r,lineItemId:n,creativeId:s}=e;return{advertiser_id:(0,u.rH)(t),campaign_id:(0,u.rH)(r),line_item_id:(0,u.rH)(n),creative_id:(0,u.rH)(s)}},h=e=>t=>{try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:n,creative_id:s,advertiser_id:i,order_id:o,line_item_id:a}=(null==r?void 0:r.data)??{},c=g({lineItemId:a,advertiserId:i,campaignId:o,creativeId:s});let u;Object.keys(d).some((e=>{const{slot:t,creative_id:r}=d[e];if((null==t?void 0:t.ad_unit_path)===n&&r===c.creative_id)return u=d[e],!0})),u=u??{...c,is_empty:!1},_(e,u)}catch{}},_=(e,t)=>{a.PH&&t&&e.track("SlotClicked",t)},m={},v=(e,t,r)=>{d[t]=r,k(e,r),m[t]&&m[t](),m[t]=P(e,t)},b=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const r=t.getResponseInformation();if(!r)return;const n={...g(r),is_empty:!1,service_name:"publisher_ads",slot:E(t)},s=t.getSlotElementId();v(e,s,n)}))},w=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const r={...g(t),is_empty:t.isEmpty,service_name:t.serviceName,slot:E(t.slot)};if(t.size){const[e,n]=t.size;"number"==typeof e&&"number"==typeof n&&(r.width=e,r.height=n)}const n=t.slot.getSlotElementId();v(e,n,r)}))},y=e=>{a.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:r,serviceName:n}=t;const s=r.getResponseInformation();if(!s)return;const i={...g(s),service_name:n,slot:E(r)};e.track("SlotViewable",i)}))},k=(e,t)=>{if(!a.CL)return;var r;r={...t,rendered_timestamp:Date.now()},e.track("SlotRendered",r)},I=e=>{let t=0;const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((e=>e.getResponseInformation()&&t++));const n=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},S=e=>{const t=(0,l.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),n=e("permutive")||[];r("permutive",[...new Set([...t.map(String),...n])])}))},E=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return a.jH?{...t,...(()=>{const t={},r=[];let n=[];const s=(e,s)=>{const i="slot"===e?e=>t[e]=1:()=>{},o=s.getTargetingKeys();n=o;for(let o=0;o<n.length;o++){const a=n[o];if(void 0!==t[a]&&"service"===e)continue;const c=[],u=s.getTargeting(a);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(i(a),r.push({key:a,value:c}))}};return s("slot",e),s("service",googletag.pubads()),{targeting_keys:r}})()}:t},P=(e,t)=>{let r=[];const n=()=>(0,o.zG)((0,o.bc)((0,o.zG)(i.Y3((()=>document.getElementById(t))),i.tS(i.ij),i.tS(i.KQ((e=>e.querySelector("iframe"))))),i.ij(document.activeElement)),i.RD,i.UI((r=>{let[n,s]=r;"hidden"===document.visibilityState&&n===s&&_(e,d[t])})));return document.addEventListener("visibilitychange",n),r.push((()=>document.removeEventListener("visibilitychange",n))),()=>{r.forEach((e=>e())),r=[]}},G=e=>{let{userId:t,viewId:r}=e;return s.Y3((()=>({})),n.w)}},1936:(e,t,r)=>{r.r(t),r.d(t,{GamLogAddon:()=>a,load:()=>o});var n=r(9727),s=r(3636),i=r(4961);const o=e=>{(0,s.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["gam_log",{}]})};class a{options;constructor(e){this.options=e,this.setTargeting({puid:e.userId.get(),prmtvvid:e.viewId.get(),prmtvsid:e.sessionManager.getSessionId(),prmtvwid:"e488cdb0-e7cb-4d91-9648-60d437d8e491"})}async setTargeting(e){n.g_((()=>this.options.logger.error("[GAM Log]: unable to find google tag script on the page")),(t=>{t.cmd.push((()=>Object.entries(e).forEach((e=>{let[r,n]=e;return t.pubads().setTargeting(r,n)}))))}))(await(0,i.t)())}}},2087:(e,t,r)=>{r.r(t),r.d(t,{LocalStorageAddon:()=>c,load:()=>a});var n=r(3636),s=r(7387),i=r(5460),o=r(2275);const a=e=>{(0,n.Hn)("local_storage")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["local_storage",{}]})};class c{options;activations;storageKeyToSegments;constructor(e){this.options=e;const t=this;this.activations=this.options.activationManager.getActivations("local_storage"),this.storageKeyToSegments={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],r=t.getSegmentCode(),n=t.getConfig().storage_key;n in this.storageKeyToSegments||(this.storageKeyToSegments[n]={}),this.storageKeyToSegments[n][r]=!0}(0,o.zG)(e.nextGenOutput.queryLanguageCohorts.all,i.YP((0,s.Z_)(this.options.api,this.options.userId,(e=>t.exportSegments(e)))))}exportSegments(e){const t=this;Object.keys(this.storageKeyToSegments).forEach((r=>{const n=[],s=t.storageKeyToSegments[r];e.forEach((e=>{e in s&&n.push(e.toString())})),n.length>0&&this.options.externalData.setExternalData(r,JSON.stringify(n))}))}}},6683:(e,t,r)=>{r.r(t),r.d(t,{OverlaysAddon:()=>a,load:()=>o});var n=r(3812),s=r(3636),i=r(7387);const o=e=>{(0,s.Hn)("overlays")("auto_init",!1)&&e.q.unshift({functionName:"addon",arguments:["overlays",{}]})};class a{permutive;options;loadedImageCounts;activations;constructor(e){const t=this;this.permutive=e.permutive,this.options=e,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let r=0;r<this.activations.length;r++){const n=this.activations[r],s=n.getSegmentCode(),o=n.getTriggerType(),a=n.getConfig(),c=this.buildOverlayCss(a,r);document.head.insertAdjacentHTML("beforeend",c);const u=this.buildOverlayBody(a,r);document.body.insertAdjacentHTML("beforeend",u);const l=`permutive-overlay-${r}`,d=document.getElementById(l);if(d){const e=d.getElementsByClassName("close")[0],t=d.getElementsByClassName("content")[0],r=()=>{d.style.visibility="hidden",d.style.opacity="0"},s=e=>{(null==t?void 0:t.contains(e.target))||(r(),d.removeEventListener("click",s))};e.addEventListener("click",r),d.addEventListener("click",s);[].slice.call(d.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){n.trackConversion({useBeacon:!0})}))}));const i=d.getElementsByTagName("form")[0];i&&i.addEventListener("submit",(function(e){e.preventDefault(),n.trackConversion({success:function(){i.submit()}})}))}const f=function(e,r){t.showOverlay(e),r.trackImpression()};"EveryTime"===o?this.permutive.segment(s,(0,i.Z_)(e.api,e.userId,(e=>{e?f(l,n):this.permutive.trigger(s,"result",(function(e){e.result&&f(l,n)}))}))):"OnEntry"===o?this.permutive.trigger(s,"result",(0,i.Z_)(e.api,e.userId,(function(e){e.result&&f(l,n)}))):"OnExit"===o&&this.permutive.trigger(s,"result",(0,i.Z_)(e.api,e.userId,(function(e){e.result||f(l,n)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){const r=this.options.config.windowKey;let n="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(n='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):n=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",n).replace(/<img /g,`<img onload='window[${r}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const t=document.getElementById(`${e}`);if(!t)return;const r=()=>{const e=t.getElementsByTagName("div")[0],r=e.getBoundingClientRect().height,n=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-n/2+"px",e.style.top=window.innerHeight/2-r/2+"px",t.style.visibility="visible",t.style.opacity="1"},s=t.getElementsByTagName("img");if(s.length>0){let t=0;const i=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<s.length)?(t+=1,(0,n.HJ)(i,500)):r()};i()}else r()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},6070:(e,t,r)=>{r.r(t),r.d(t,{PublishersAddon:()=>a,load:()=>o});var n=r(3636),s=r(7387),i=r(3812);const o=()=>{};class a{permutive;options;cancelTimer;totalCompletion=0;dirtyState;addAlchemyTaxonomy;documentId;eventInterval;article;addAlchemyEntities;constructor(e){this.permutive=e.permutive,this.options=e,this.eventInterval=e.eventInterval||5,this.documentId=e.documentId||null,this.article=e.article||null;const t=(0,n.Hn)("publishers");this.addAlchemyTaxonomy=t("add_alchemy_taxonomy",!1),this.addAlchemyEntities=t("add_alchemy_entities",!1),this.sendPageviewEvent();{this.dirtyState=!1;const t=()=>{this.dirtyState=!0};(e.dirtyEvents||["mousemove","click","scroll"]).map((function(e){window.addEventListener(e,t)}))}this.cancelTimer=(0,i.UM)(this.sendEngagementEvent(this.eventInterval,this.getCompletion),1e3*this.eventInterval)}reset(e){this.options.pageviewState.setState((0,s.rO)({viewId:s.k$})),this.documentId=e.documentId||null,this.article=e.article||null,this.totalCompletion=0,this.cancelTimer(),this.sendPageviewEvent(),this.cancelTimer=(0,i.UM)(this.sendEngagementEvent(this.eventInterval,this.getCompletion),1e3*this.eventInterval)}sendPageviewEvent(){let e;const t={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"};null!==this.documentId&&(t.$document=this.documentId,(this.addAlchemyTaxonomy||this.addAlchemyEntities)&&(e={},this.addAlchemyTaxonomy&&(e.taxonomy_labels="$alchemy_taxonomy_labels"),this.addAlchemyEntities&&(e.entity_names="$alchemy_entity_names"),t.alchemy=e)),null!==this.article&&(t.article=this.article,(this.addAlchemyTaxonomy||this.addAlchemyEntities)&&(e={},this.addAlchemyTaxonomy&&(e.taxonomy_labels="$alchemy_taxonomy_labels"),this.addAlchemyEntities&&(e.entity_names="$alchemy_entity_names"),t.article.alchemy=e)),this.permutive.track("Pageview",t)}getCompletion(){const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e}sendEngagementEvent(e,t){const r=this;return(0,s.Z_)(this.options.api,this.options.userId,(()=>{if(r.dirtyState){const n={engaged_time:e};{const e=Math.max(r.totalCompletion,t());n.completion=e-r.totalCompletion,r.totalCompletion=e,r.dirtyState=!1}this.permutive.track("PageviewEngagement",n)}}))}}},5833:(e,t,r)=>{r.r(t),r.d(t,{RubiconSspAddon:()=>c,load:()=>a});var n=r(2275),s=r(7387),i=r(5460);const o="_prubicons",a=e=>{e.q.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};class c{options;liveSegments=[];eligibleSegments={};constructor(e){this.options=e,this.liveSegments=e.externalData.getExternalJsonData(o)||[];const t=this.options.activationManager.getSpecializedActivations("rubicon_ssp");for(let e=0;e<t.length;e++)this.eligibleSegments[t[e]]=!0;(0,n.zG)(e.nextGenOutput.queryLanguageCohorts.all,i.YP((e=>this.updateIfNecessary(e))))}updateIfNecessary(e){const t=this.filterSegments(e);(0,s.cO)(t,this.liveSegments)||this.options.externalData.setExternalJsonData(o,t),this.liveSegments=t}filterSegments(e){return e.filter((e=>e in this.eligibleSegments))}}},3751:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=e=>{e.q.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{permutive;options;api;activations;constructor(options){this.permutive=options.permutive,this.options=options,this.api=options.api,this.activations=this.options.activationManager.getActivations("scriptrunner");const segmentTransitions=this.options.nextGenOutput.segmentTransitionsSinceInit.current;for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e instanceof Error&&(e.message="Error running custom script: "+e.message,this.api.reportError(e,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(e=>{e?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)}))})):"OnEntry"===triggerType?segmentTransitions.segmentsEntered.includes(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)})):"OnExit"===triggerType&&(segmentTransitions.segmentsExited.includes(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(e){e.result||run(activation)})))}}}},5734:(e,t,r)=>{r.r(t),r.d(t,{PixelAddon:()=>o,load:()=>i});var n=r(3636),s=r(7387);const i=e=>{(0,n.Hn)("tracking_pixel")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class o{options;activations;latestStateByDomain;eligibleSegmentsForEntries;eligibleSegmentsForExits;constructor(e){const t=this;this.options=e,this.latestStateByDomain=this.options.permutiveData.getData("addon:tracking_pixel")||{},this.activations=this.options.activationManager.getActivations("tracking_pixel");const r=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],r=t.getTriggerType(),n=t.getSegmentCode(),s=t.getConfig().pixel_url,i=this.extractPixelType(s);"OnEntry"===r?(i in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[i]={}),this.eligibleSegmentsForEntries[i][n]=t):"OnExit"===r&&(i in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[i]={}),this.eligibleSegmentsForExits[i][n]=t)}const n=e.nextGenOutput.queryLanguageCohorts.all;r&&(0,s.Z_)(e.api,e.userId,(()=>this.firePixelsIfNecessary(n.current))),n.onChange((0,s.Z_)(e.api,e.userId,(e=>t.firePixelsIfNecessary(e))))}extractPixelType(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]}firePixelsIfNecessary(e){const t=Object.keys({...this.eligibleSegmentsForEntries,...this.eligibleSegmentsForExits}),r={},n=this.eligibleSegmentsForEntries,s=this.eligibleSegmentsForExits;t.forEach((t=>{r[t]=r[t]||[];for(let i=0;i<e.length;i++){const o=e[i];(n[t]&&n[t][o]||s[t]&&s[t][o])&&r[t].push(e[i])}})),t.forEach((e=>{const t=r[e]||[],i=Array.isArray(this.latestStateByDomain[e])?this.latestStateByDomain[e]:[];for(let r=0;r<t.length;r++){const s=t[r];if(-1===i.indexOf(s)){const t=n[e]&&n[e][s];"OnEntry"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}for(let r=0;r<i.length;r++){const n=i[r];if(-1===t.indexOf(n)){const t=s[e]&&s[e][n];"OnExit"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}})),this.latestStateByDomain=r,this.options.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(e){(new Image).src=e.getConfig().pixel_url,e.trackImpression()}}},7866:(e,t,r)=>{r.r(t),r.d(t,{WebAddon:()=>k,load:()=>y});var n=r(2865),s=r(1385),i=r(2275),o=r(6627),a=r(9727),c=r(5586),u=r(9702),l=r(3636),d=r(7387);const f=(0,l.MU)("add_alchemy_entities",!1),p=(0,l.MU)("add_alchemy_taxonomy",!1);function g(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{...e&&p?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{},...e&&f?{entity_names:"$alchemy_entity_names"}:{},classifications_watson:{taxonomy_labels:"$taxonomy_labels"}}}function h(e,t,r,n){const s={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",..._(),...e,...t};r.track("Pageview",s).then((e=>{e&&n.emit("permutive:event:pageview",e)}))}function _(){return{}}var m=r(3812);const v=["mousemove","click","scroll"],b=["email","tel","submit","reset","button","file","password","radio","checkbox"],w=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],y=e=>{(0,l.Hn)("web")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class k{permutive;options;api;clientContext;logger;dirtyState=!1;cancelEngagementTimer=()=>{};totalCompletion=0;totalEngagedTime=0;pageEngagementDetected;cleanupPageEngagementDetection=i.Q1;constructor(e){this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.options.customProperties.setCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0}).bind(this),h(g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),u.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}sendFormSubmissionEvent(e){{const t=e.currentTarget,r={form:{method:t.method||"GET",properties:this.serializeForm(t),..."string"==typeof t.id?{id:t.id}:{},...t.name&&"string"==typeof t.name?{name:t.name}:{},...t.action&&"string"==typeof t.action?{action:t.action}:{}}};this.permutive.track("FormSubmission",r)}}async trackEngagementInterval(e){const t=this.updateState(e);!function(e,t,r,n,s,i){const o={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t,...s,completion:r,total_completion:n};i.track("PageviewEngagement",o)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive)}async reset(e){this.disablePageEngagementDetection(),this.dirtyState=!1;const t=this.updateWebOptions(e);this.options.pageviewState.setState(((e,r)=>{var n,s;return{viewId:(null===(n=t.context)||void 0===n?void 0:n.view_id)??(0,d.k$)(),watsonEnabled:(null===(s=t.watson)||void 0===s?void 0:s.enabled)??r.watsonEnabled}})),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.setCustomProps(this.options.page||{}),this.enablePageEngagementDetection(),h(g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),u.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==b.indexOf(e.type.toLowerCase())||-1!==w.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,m.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,r=t=>e(t)?(0,a.G)(t):t.parentElement?e(t.parentElement)?(0,a.G)(t.parentElement):r(t.parentElement):a.YP;u.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,i.ls)(a.DT(this.canTrackPermutiveEvent("FormSubmission")),a.UI((0,d.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,l.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,i.ls)(a.DT(this.canTrackPermutiveEvent("LinkClick")),a.UI((e=>({event:e,anchor:(0,i.zG)(e.target,a.ij,a.tS(a.DT(t)),a.tS(r))}))),a.DZ((e=>{let{event:t,anchor:r}=e;return a.pC(r)?a.G({event:t,anchor:r.value}):a.YP})),a.UI((e=>{let{event:t,anchor:r}=e;return I(this.permutive,r,(n=t,!("_blank"===r.target||n.metaKey||n.ctrlKey||n.shiftKey||2===n.which||3===n.which)));var n}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),r=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:r,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,i.zG)((0,s.Y3)((0,i.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,c.uZ)(o.Df)(0,1)),n.w),(0,s.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,s.Y3)((()=>{e(),this.cleanupPageEngagementDetection=i.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,n.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,i.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const r=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>r(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||v}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var r,o;return(0,i.zG)(null===(r=this.options)||void 0===r||null===(o=r.filterPermutiveEvent)||void 0===o?void 0:o[e],a.DT((e=>"function"==typeof e)),a.tS((0,i.ls)((e=>s.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,n.w)(e)}`)))),s.tS(s.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,d.bw)(s.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),a.Uo)),a.fS((()=>!0)))}}updateWebOptions(e){(0,d.Kn)(e)||(e={}),e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent,"context"in e&&!(0,d.Kn)(e.context)&&delete e.context;const t={addPageEngagementDetection:void 0,context:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options={...this.options,...t,...e}}}const I=(e,t,r)=>{if(window.location.href&&t.href){const n=0===t.href.indexOf("data:")?"NOT_URL":t.href;e.track("LinkClick",{dest_url:n},{useBeacon:r})}}},2102:(e,t,r)=>{r.d(t,{a:()=>n});class n{messages;handlers={};messageQueue={};constructor(e){var t,r;this.messages=e;null===(t=(r=window).addEventListener)||void 0===t||t.call(r,"message",(e=>{var t;"permutive"===(null==e||null===(t=e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e,t;null===(e=(t=window).postMessage)||void 0===e||e.call(t,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const r=t[e];this.handle(r)}}}handle(e){if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(this.messageQueue[e.data.type]??=[]).push(e)}}}},7367:(e,t,r)=>{r.d(t,{o:()=>n,s:()=>s});class n extends Error{static errorName="NetworkRequestFailedError";name=n.errorName;constructor(){super(n.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class s extends Error{static errorName="NetworkRequestTimeoutError";name=s.errorName;constructor(){super(s.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}},8645:(e,t,r)=>{r.d(t,{F:()=>d});var n=r(2865),s=r(2275),i=r(9727),o=r(1583),a=r(4513),c=r(7367),u=r(2444);class l{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>i.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=s,this.webClient=o}async reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const l=(0,n.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const d=(0,s.zG)(this.webClient,u.UI(i.fS((()=>{var e,t,r,n;return{domain:(null===(e=self.location)||void 0===e?void 0:e.hostname)??"",referrer:"document"in self?null===(t=self.document)||void 0===t?void 0:t.referrer:"",url:(null===(r=self.location)||void 0===r?void 0:r.href)??"",user_agent:(null===(n=navigator)||void 0===n?void 0:n.userAgent)??""}}))),u.UI((e=>{var n,s;const i={error_message:(null==l||null===(n=l.message)||void 0===n?void 0:n.toString())??"",stack_trace:null==l||null===(s=l.stack)||void 0===s?void 0:s.split("\n")},o=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.17.0",ql_runtime_version:"v13.1.0",timestamp:r,domain:e.domain,url:(0,a.bk)(e.url),referrer:(0,a.bk)(e.referrer),user_agent:e.user_agent,error_message:i.error_message??String(l),stack_trace:i.stack_trace,...o}}))),f=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",i.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),p=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,s.zG)([c.o,c.s],o.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),i.g_((()=>{const e=d();return f(e).catch((0,s.ls)(n.w,(e=>this.logError(e))))}),(async e=>p(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}class d extends l{identifyPromise;identify(e,t,r){const n=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",i.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:r},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=n()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",i.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",i.G(this.config.apiVersion)),payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",i.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[],ahoCorasickLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/e488cdb0-e7cb-4d91-9648-60d437d8e491-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",i.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,r){const n=e.startTimer(t,{});return this.network.req(r).then((r=>(0,s.zG)(e.stopTimer(t,n),(e=>r))))}}},1671:(e,t,r)=>{r.d(t,{E:()=>b});var n=r(1385),s=r(2275),i=r(7367),o=r(3812),a=r(9727),c=r(7963),u=function(e){return"Left"===e._tag},l=function(e){return"Right"===e._tag};function d(e){return{_tag:"Left",left:e}}function f(e){return{_tag:"Right",right:e}}function p(e,t){return{_tag:"Both",left:e,right:t}}var g=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},h=g;h(f,d,(function(e,t){return p(t,e)}));var _=f,m="These",v=(s.yR,s.yR,c.Xl,r(7387));class b{metrics;constructor(e){this.metrics=e}req(e){return this.reqImpl(e).then((e=>(0,s.MZ)(e)))}reqWithBeacon(e){var t,r;let{url:n,payload:s}=e;const i=JSON.stringify(s),o=(null===(t=navigator)||void 0===t||null===(r=t.sendBeacon)||void 0===r?void 0:r.call(t,n,JSON.stringify(s)))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!o,request:{method:"POST",url:n,content_length:i.length}}),o}reqImpl(e){const t="arraybuffer",{url:r,dataType:u,contentType:l,method:d,withCredentials:g,timeout:h}=e;return new Promise(((_,m)=>{const b=new XMLHttpRequest,w="POST"===e.method?"string"==typeof(y=e.payload)?y:JSON.stringify(y):null;var y;const k=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:d,url:r,content_length:(null==w?void 0:w.length)??0},response:e});b.onload=(0,o.GL)((()=>{var e,r;return(0,s.zG)(b.status,n.DT((e=>e<400),(()=>{const e="text"===b.responseType||""===b.responseType?b.responseText:"Couldn't access response text";return`Failed ajax request. Status code was ${b.status}. ${e}`})),n.tS((()=>"json"===u?b.responseText?n.Y3((()=>JSON.parse(b.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(b.responseText)}. Got ${e}`)):n.F2(null):"text"===u?n.F2(b.responseText):n.F2(b.response))),(0,v.bw)((0,s.ls)(a.IS,(r={content_length:"text"===b.responseType||""===b.responseType?(null===(e=b.responseText)||void 0===e?void 0:e.length)??0:b.responseType===t?b.response.byteLength:0,response_time_ms:self.performance.now()-I,status_code:b.status},function(e){return c.Wi(e)?f(r):p(e.value,r)}),k)),n.EQ(m,_))})),b.onerror=(0,o.GL)((()=>{k(n.t$("network error")),m(new i.o)})),b.ontimeout=(0,o.GL)((()=>{k(n.t$("timeout")),m(new i.s)})),b.open(d,r,!0),l&&b.setRequestHeader("content-type",l),b.timeout=h||b.timeout,b.withCredentials=g||b.withCredentials,b.responseType="binary"===u?t:b.responseType;const I=self.performance.now();b.send(w)}))}trackRequestMetrics(e){var t;if(null===(t=this.metrics)||void 0===t||!t.isEnabled())return;const r=new URL(e.request.url).pathname;if(r.includes("metrics"))return;const n=t=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:r,request_content_length:e.request.content_length,...t}});var i;!0===e.is_beacon?n({is_beacon:!0,is_error:e.is_error}):(0,s.zG)((i=e.response,u(i)?c.YP:(l(i),c.G(i.right))),a.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!l(e.response),...t})),n)}}},7592:(e,t,r)=>{r.r(t),r.d(t,{startMaster:()=>ue});var n=r(5460),s=r(2275),i=r(936),o=r(9727),a=r(1583),c=r(7387),u=r(2444),l=r(7054),d=r(2925),f=r(8491),p=r(817);var g=r(1717),h=r(8543),_=r(7560),m=r(4219);function v(e,t){return function(r){return e.map(r,t.compact)}}function b(e,t,r){var n=v(e,t),i=(0,_.UI)(e,r);return function(e){return m.s4(n((0,s.zG)(e,i(o.IS))),n((0,s.zG)(e,i(o.EK))))}}function w(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function y(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function k(e,t){var r=w(e,t);return function(e){var t=r((0,f.ff)(e)),n=r(e);return function(e){return(0,m.s4)(t(e),n(e))}}}function I(e,t){var r=y(e,t);return function(e){return function(t){return(0,m.s4)((0,s.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,s.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var S=r(7963);function E(e){return(0,s.ls)(o.G,e.of)}function P(e){return(0,s.a9)(e.of(o.YP))}function G(e){return function(t){return e.map(t,o.G)}}function x(e){return(0,s.ls)(o.ij,e.of)}function U(e){var t=x(e);return function(e){return(0,s.ls)(e,t)}}function z(e){var t=L(e),r=U(e);return function(e){return t(r(e))}}function q(e){return function(t){return(0,s.ls)(t,e.of)}}function C(e){var t=L(e),r=q(e);return function(e){return t(r(e))}}function D(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function O(e){return(0,s.ls)(o.Uo,e.of)}function T(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function R(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function M(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function A(e){return(0,_.UI)(e,o.dO)}function j(e){return(0,d.ap)(e,o.G5)}function L(e){var t=P(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function $(e){var t=E(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var B=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},F=function(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},N=E(g.PM),K=(g.PM,g.of,g.PM,g.dO,g.UI(o.Uo)),Y=(g.dO,g.qo,g.UA,g.PM,function(e){return function(){return B(void 0,void 0,void 0,(function(){return F(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e().then(S.G)];case 1:return[2,t.sent()];case 2:return t.sent(),[2,S.YP];case 3:return[2]}}))}))}}),Q=(g.PM,g.UA,g.PM,g.UA,A(g.dO)),H=j(g.Hi),W=N,V=L(g.UA),J=(g.UA,g.PM,g.dO,o.Ri,g.dO,o.Ri,o.dO,g.dO,o.xu,g.dO,o.xu,g.dO,o.xu,g.dO,o.xu,function(e,t){return(0,s.zG)(e,Q(t))}),Z=function(e,t){return(0,s.zG)(e,H(t))},X=function(e,t){return(0,s.zG)(e,V(t))},ee="TaskOption",te={URI:ee,map:J},re={URI:ee,map:J,ap:Z,chain:X},ne=(S.F4,(0,_.YO)(te)),se=(0,h.a)(re),ie=(S.Xl,r(3812)),oe=r(1586);const ae=(e,t)=>{const[r,i]=n.gS(a.uZ());return(0,s.zG)(t,n.UI(u.UI((t=>{a.Od(t)&&e.all().then((e=>(0,s.zG)(t,a.UI((0,oe.H5)((()=>e))),i)))}))),n.UI((e=>e()))),r},ce=(e,t)=>{let r=!1;return n.UI(u.UI((0,c.bw)((n=>{r||(r=(0,s.zG)(n,a.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))};function ue(e){let{eventsCacheFactory:t,metrics:h,trace:_,migratedStateMaps:m,worker:v,...b}=e;return e=>i.dQ((0,s.ls)((0,c.rO)({previousState:le}),(i=>{let{stopped:c,previousState:w}=i;(0,s.zG)(c,n.YP((e=>e&&v.stop()))),v.send({...b,migratedStateMaps:w.stateMigrated?{external:o.YP,internal:o.YP}:m(),previousState:w.workerState}),_.measureSinceInit("post_worker_config_duration").finish(),h.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_config",time_origin:"sdk_init"},performance.now());const y=_.startSpan("worker_config_response_duration"),k=v.next();k.then((()=>{y.finish(),h.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_received_worker_config_response",time_origin:"sdk_init"},performance.now())}));const I=((e,t)=>{const i=(0,s.zG)((()=>t),g.UI((e=>o.lo(!e))),V((()=>K(e()))),ne("eventsCache"),se("eventsCacheService",(()=>(0,s.zG)((0,ie.N1)(Y((()=>Promise.resolve().then(r.bind(r,2831))))),Q((e=>e.eventCacheService)))))),c=i();return e=>{let{priorCachedEventsRequests:t,...r}=e;return e=>{let{previousState:i,stopped:l}=e;const d=n.a9(u.of(a.bM())),[f,p]=n.Ue({eventsToPublish:n.a9(u.of(a.bM())),priorCachedEventsResponses:d,state:n.a9(i)});return c.then(o.EQ((()=>p({eventsToPublish:r.eventsToPublish,priorCachedEventsResponses:d,state:n.a9(void 0)})),(e=>{let{eventsCache:n,eventsCacheService:s}=e;const{state:o,value:{newEvents:a}}=s({eventsCache:n,newEvents:r.eventsToPublish})({previousState:i,stopped:l});p({eventsToPublish:a,priorCachedEventsResponses:ae(n,t),state:o})}))),{state:(0,s.zG)(f,n.VS((e=>e.state))),value:(0,s.bc)((0,s.zG)(f,n.VS((e=>e.priorCachedEventsResponses))),{...r,eventsToPublish:(0,s.zG)(f,n.VS((e=>e.eventsToPublish)))})}}}})(t,k.then((e=>e.eventsCachedInWorker)));return(0,s.zG)((()=>v.read()),function(e,t){const r=e=>(0,s.zG)(e,l.Hd((e=>e in t)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return i=>{const{buffers:o,nonBuffers:a}=r(e),[c,u]=n.Ue({...a,...(0,s.zG)(o,l.Su((e=>()=>{const r=o[e];return o[e]=t[e].empty,r})))});return(async()=>{for(;;){const e=(0,s.zG)(await i(),p.UI(r),p.ur({concat:(e,r)=>({nonBuffers:{...e.nonBuffers,...r.nonBuffers},buffers:(()=>{const n={...e.buffers};for(const e in r.buffers)n[e]=e in n?t[e].concat(n[e],r.buffers[e]):r.buffers[e];return n})()})})),n=(0,s.zG)(e.buffers,l.Su(((e,r)=>(o[e]=t[e].concat(o[e],r),()=>{const r=o[e];return o[e]=t[e].empty,r}))));u({...c.current,...e.nonBuffers,...n})}})(),(0,s.zG)(e,l.Su((e=>(0,s.zG)(c,n.UI((t=>t[e]))))))}}({activations:w.activations,cohorts:w.cohorts,context:{},eventsToPublish:a.cS,eventsToPublishOnPageUnload:a.cS,externalData:{},geoIP:o.YP,metrics:a.cS,priorCachedEventsRequests:a.cS,realtime:!1,state:w.workerState,transitionsSinceInit:{segmentsEntered:a.cS,segmentsExited:a.cS},workerStateFlushed:!1,stateMigratedThisInitialisation:!1,secureSignal:o.YP},{eventsToPublish:a.uZ(),metrics:a.uZ(),priorCachedEventsRequests:a.uZ()}),(e=>{let{metrics:t,...r}=e;return t.onChange((e=>e().forEach((e=>h.track(e))))),r}),(t=>{let{workerStateFlushed:r,stateMigratedThisInitialisation:i,activations:p,cohorts:g,state:_,secureSignal:m,...b}=t;const{value:[y,k],state:S}=I(b)({stopped:c,previousState:w.masterEventsCache});return function(e,t,r){const i=(0,s.zG)(n.vP(t),n.UI((0,s.ls)(l.UI((e=>"function"==typeof e?e:u.of(e))),(0,d.Yt)(u.G5))));let a=i.current();e(a),(0,s.zG)(i,n.YP((t=>{const n=t(),i=(0,s.zG)(n,l.z7(((e,t)=>{var n;return t!==a[e]&&(null===(n=r[e])||void 0===n||!n.isEmpty(t))})),o.DT((0,f.ff)(l.xb)));o.pC(i)&&(a={...a,...i.value},e(i.value))})))}(v.send,{consent:e.consent,contextualCohorts:e.contextualCohorts,enrichmentReplacementMap:e.enrichmentReplacementMap,eventSourceId:e.eventSourceId,identities:e.identities,userId:e.userId,userIdIsNewlyGenerated:e.userIdIsNewlyGenerated,newEvents:(0,s.zG)(e.newEvents,ce(h,"pageview_sent_to_worker")),sessionId:e.sessionId,viewId:e.viewId,webClient:e.webClient,pageviewState:e.pageviewState,priorCachedEventsResponses:y},{newEvents:{isEmpty:a.xb},priorCachedEventsResponses:{isEmpty:a.xb}}),h.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_input",time_origin:"sdk_init"},performance.now()),{state:n.vP({activations:p,cohorts:g,masterEventsCache:S,workerState:_,stateMigrated:(0,s.zG)(n.vP(r,i),n.Rp(w.stateMigrated,((e,t)=>{let[r,n]=t;return e||r&&n})))}),value:{...k,stateMigratedThisInitialisation:i,activations:{dfp:n.UI((e=>e.dfp),p),xandr_ssp:n.UI((e=>e.xandr_ssp),p)},cohorts:{all:n.UI((e=>e.all),g),ql:n.UI((e=>e.ql),g),qlCustom:n.UI((e=>e.qlCustom),g),qlStandard:n.UI((e=>e.qlStandard),g)},secureSignal:m}}}))})))}const le=e=>he(e)?{activations:de(e.activations),cohorts:pe(e.cohorts),masterEventsCache:e.masterEventsCache,workerState:e.workerState,stateMigrated:!!e.stateMigrated}:{activations:de(null),cohorts:pe(null),masterEventsCache:null,workerState:null,stateMigrated:!1},de=e=>he(e)?{dfp:ge(e.dfp),xandr_ssp:ge(e.xandr_ssp)}:fe(),fe=()=>({dfp:a.cS,xandr_ssp:a.cS}),pe=e=>he(e)?{all:ge(e.all),ql:ge(e.ql),qlCustom:ge(e.qlCustom),qlStandard:ge(e.qlStandard)}:_e(),ge=e=>Array.isArray(e)?e:a.cS,he=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),_e=()=>({all:a.cS,ql:a.cS,qlCustom:a.cS,qlStandard:a.cS})},4257:(e,t,r)=>{r.r(t),r.d(t,{runNextGenFeatures:()=>tt});var n=r(2275),s=r(5460),i=r(936),o=r(3812),a=r(9727),c=r(7387);function u(e){let{messages:t}=e;const[r,n]=s.Ue(new Set);return t.on("permutive:addon:preinit",(e=>n(new Set([...r.current,e])))),r}function l(){const e=()=>Math.floor(Date.now()/1e3),[t,r]=s.Ue(e());return(0,o.UM)((()=>r(e())),1e3),t}function d(){const[e,t]=s.Ue(!1);return(0,c.aT)((()=>t(!0)),navigator.userAgent),e}var f=r(1583),p=r(2865),g=r(1385),h=r(817),_=r(3940),m=r(7054),v=r(4219),b=r(3636),w=r(6707);const y="[Prebid Monitoring]",k=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},I=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},S=function(e,t){const r=E(e);return i.K4((()=>(0,n.zG)(t,s.UI((0,n.ls)(a.DT((e=>e.consent)),a.UI((e=>e.prebidJS)))),s.D8(a.Eh((0,c.Or)())),s.bw((0,n.ls)(a.tS((e=>e.completedChecks?e.mainPair:a.YP)),a.UI((t=>k(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),s.UI(a.UI((e=>(0,n.zG)(e.mainPair,a.UI((t=>[t,...e.otherPairs])),a.fS((()=>e.otherPairs)))))),s.Rp(new Set,((t,s)=>(0,n.zG)(s,a.UI(f.hX((e=>!t.has(e.windowPropertyKey)))),a.hX(f.Od),(0,c.bw)(a.EQ((()=>e.logger.debug(y,"Nothing to report")),(t=>e.logger.debug(y,"Reporting",t)))),a.fS((()=>[])),f.UI((t=>(0,n.zG)((t=>(0,n.zG)(g.Y3((function(){var r;const{pbjs:s,windowPropertyKey:i}=t;e.logger.log(y,`Reporting on "${i}"`,t);const o=P(s);e.logger.debug(y,`Version ${s.version} parsed as`,o);const a=(0,w.zi)(s);e.logger.debug(y,"Read config",a);const c=(0,n.zG)((null===(r=a.realTimeData)||void 0===r?void 0:r.dataProviders)??[],f.Ew((e=>"permutive"===e.name)));return e.logger.debug(y,"Read data provider config",c),{pbjs:s,config:a,dataProviderConfig:c,installedModules:s.installedModules||[],version:o,windowPropertyKey:i}}),p.w),g.ak("bidders",(e=>r.acBidders(e))),g.ak("permutiveRTDProvider",(e=>r.permutiveRTDProvider(e))),g.ak("consent",(e=>r.consent(e))),g.ak("targeting",(e=>r.targeting(e)))))(t),g.Pd((r=>e.reportError(`${y} Failed to report pair "${t.windowPropertyKey}", ${r.message}`)),(()=>t.windowPropertyKey))))),f.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const E=e=>({acBidders:t=>g.Y3((()=>{const r=(0,b.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),s=t.version.major>=7&&t.version.minor>=13?r.ac_bidders:[],i=(0,n.zG)(t.dataProviderConfig,a.UI((e=>{var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.acBidders)??[]})),a.fS((()=>[]))),o=[...new Set([...s,...i])];return e.logger.debug(y,"Determined acBidders as",{acBidders:o,dynamicBidders:s,staticBidders:i}),o.forEach((r=>{I(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:r})})),{acBidders:o,dynamicBidders:s,readBidders:i}}),p.w),consent:t=>g.Y3((()=>{var r,n,s,i,o,a;const c=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&k(e,{prebid_key:c,flag:"prebid_has_consent_management"});const u=t.installedModules.includes("gdprEnforcement");u&&k(e,{prebid_key:c,flag:"prebid_gdpr_enforcement_module"});const l=(null===(r=t.config)||void 0===r||null===(n=r.consentManagement)||void 0===n||null===(s=n.gdpr)||void 0===s||null===(i=s.rules)||void 0===i||null===(o=i.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===o||null===(a=o.vendorExceptions)||void 0===a?void 0:a.includes("permutive"))||!1;return l&&k(e,{prebid_key:c,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:u,addedAsStorageException:l}}),p.w),permutiveRTDProvider:t=>g.Y3((()=>{const r=t.installedModules.includes("permutiveRtdProvider");return r&&k(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),r}),p.w),targeting:t=>{const r=(0,n.ls)(f.UI((e=>[e,null])),m.sq),s=(t,r)=>(0,n.zG)(t,(0,c.bw)((t=>e.logger.debug(y,`Processing ${t.length} bidder request(s)`,t))),f.hX((e=>r.hasOwnProperty(e.bidderCode)&&null===r[e.bidderCode])),h.vM((e=>e.bidderCode)),m.DZ(f.f2((0,c.lo)([[e=>(e=>{var t,r,n;const s=null==e||null===(t=e.user)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.find((e=>"permutive.com"===e.name));return!(null==s||null===(n=s.segment)||void 0===n||!n.length)})(e.ortb2),()=>a.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var r,n,s,i;return(null==t||null===(r=t.visitor)||void 0===r||null===(n=r[e])||void 0===n?void 0:n.length)||(null==t||null===(s=t.keywords)||void 0===s||null===(i=s[e])||void 0===i?void 0:i.length)}));var t},()=>a.G("params")],()=>a.YP]))),(0,c.bw)((t=>e.logger.debug(y,"Bidders targeting method's updated",t)))),i=i=>{e.logger.debug(y,"Bidders found with no targeting method",i);let o=r(i);const a=r=>(0,n.zG)(s([r],o),(0,c.bw)((e=>{o={...o,...e}})),(0,c.bw)(m.Su(((r,n)=>I(e,{flag:`prebid_${n}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:r})))),(0,c.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(y,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",a))})));t.pbjs.onEvent("bidRequested",a)};return g.Y3((()=>{const o=(0,n.zG)(t.pbjs.getEvents(),f.DZ((0,n.ls)(a.DT((e=>"bidRequested"===e.eventType)),a.UI((0,c.vg)("args")))));return(0,n.zG)(t.bidders.acBidders,a.DT(f.Od),a.EQ((()=>e.logger.debug(y,"No bidders for targeting")),(0,n.ls)(r,(e=>({...e,...s(o,e)})),m.uK(_.ff((e=>null===e))),v.Pd((0,n.ls)(m.XP,a.DT(f.Od),a.UI(i)),m.Su(((r,n)=>I(e,{prebid_bidder:r,prebid_key:t.windowPropertyKey,flag:`prebid_${n}_targeting_success`})))))))}),p.w)}}),P=e=>{const[t,r,n]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:r,patch:n}},G=function(e,t){const r=(0,n.zG)(t.pbjs,s.VS((0,n.ls)(a.tS(a.KQ((e=>{var t;return null===(t=e.getUserIdsAsync)||void 0===t?void 0:t.call(e).then((()=>{var t;return(null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e))??[]}))}))),a.UI(s.p4),a.fS((()=>s.a9(a.YP))))),s.UI(a.tS(a.Uo)),s.bw(a.mU((t=>(t.length>0?t.forEach((t=>{e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:t.source},value:1})})):e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),a.YP))))),o=(0,n.zG)(t.pbjs,s.UI(a.tS(a.KQ((e=>{var t;return null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e)})))));return i.K4((()=>(0,n.zG)(s.vP(r,o),s.UI((e=>{let[t,r]=e;return(0,n.zG)(t,a.wp((()=>r)))})),s.UI((0,n.ls)(a.UI(f.DZ((e=>{var t,r;return"string"==typeof(null===(t=e.uids)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.id)?a.G((0,n.bc)(e.source,{id:e.uids[0].id})):a.YP}))),a.tS(h.c2),a.UI(m.sq))),s.bw((t=>{a.pC(t)&&e.logger.debug("[Prebid Identifiers]","Found identifiers",t.value)})))))};const x=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(U)}))};const U="_pfws",z=new Set(["AdRequest","PageviewEngagement","SegmentEntry","SegmentExit"]);class q{events;listeners;static highVolumeEvents=(()=>{const e=new Set([...z]);return e.delete("Reaction"),e})();constructor(){this.events=[],this.listeners=[]}newEvent(e,t){q.highVolumeEvents.has(e.name)||this.events.push([e,t]),[...this.listeners].forEach((r=>{this.handle(e,t,r)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,r){const n="string"==typeof r.name&&e.name===r.name,s=r.name.test&&r.name.test(e.name),i=n||s;if(i)try{r.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}i&&r.once&&this.remove(r)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let r=0;r<this.events.length&&t;r++)this.handle(this.events[r][0],this.events[r][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var C=r(2444),D=r(2925);var O=r(1586),T=r(9246),R=r(1717);const M="[Event Upload]",A=(e,t,r,a)=>i.dQ((i=>{let{stopped:u,previousState:l}=i;Array.isArray(l)&&(0,n.zG)(l,F(e))();const d=new Set([...z]),[p,{appendUntrackedEvents:h,appendUploadResults:_}]=(0,n.zG)((()=>{const[e,t]=s.gS(f.uZ()),[r,i]=s.gS(f.uZ());return(0,n.bc)({uploadResults:e,untrackedEvents:r},{appendUploadResults:t,appendUntrackedEvents:i})})(),(0,O.pL)((0,n.ls)((function(e){const[t,r]=(0,n.zG)(e.uploadResults,N(f.bj));return{...e,uploadResults:t,erroredEventsAsJSON:r}}),(function(e){const[t,r]=(0,n.zG)(e.erroredEventsAsJSON,N(f.UI((0,O.H5)((0,c.rO)({event:(0,c.rO)({time:e=>new Date(e)})})))));return{...e,erroredEventsAsJSON:t,erroredEvents:r}}),(function(e){let{uploadResults:t,untrackedEvents:r,...i}=e;const o=(0,n.zG)(t,s.UI(C.UI((0,n.ls)(f.hp,f.UI((0,O.H5)((0,c.rO)({time:e=>new Date(e)}))))))),a=(0,n.zG)(s.vP(o,r),s.UI(C.RD),s.UI(C.UI((e=>{let[t,r]=e;return r.concat(t)}))));return{...i,successEvents:a}}),(function(e){const[t,r]=(0,n.zG)(e.successEvents,N(f.UI((0,O.H5)((0,c.rO)({time:e=>e.toISOString()})))));return{...e,successEvents:t,successEventsAsJSON:r}})))),[m,v]=s.Ue(0),[b,w]=s.Ue(0),y=(0,n.zG)(t,s.UI(C.UI((e=>(0,n.zG)(e,f.uK((e=>{let[,t]=e;return!d.has(t.event.name)})),(e=>{let{left:t,right:r}=e;return(0,n.zG)(t,f.UI((0,O.H5)((e=>e.event))),h),r}))))),s.UI(C.UI((e=>(e.length>0&&((0,o.HJ)((()=>v(m.current+e.length)),500),(0,o.HJ)((()=>w(b.current+e.length)),5e3)),e))))),k=e=>t=>(0,n.zG)(e,f.hX((e=>{let[r]=e;return!t.closeEventsProcessed.includes(r)})),f.zo(t.queue)),I=(0,n.zG)(s.vP(m,b,y,r,u,a),s.Rp({closeEventsProcessed:f.cS,noQueueItemsProcessed:0,queue:f.cS},((t,r)=>{let[s,i,o,a,u,l]=r;return u?t:(0,n.zG)(t,(0,c.rO)({queue:f.zo(o())}),(t=>l?(0,n.zG)(t,(t=>r=>(0,n.zG)(r,k(t),B(e),(0,c.rO)({right:(0,c.bw)((0,n.ls)(f.UI((0,n.ls)((0,O.H5)((0,c.rO)({time:e=>e.toISOString()})),g.F2)),_))}),(e=>{let{left:t,right:s}=e;return(0,n.zG)(r,(0,c.rO)({closeEventsProcessed:(0,n.zG)(s,f.UI(O.li),f.zo),queue:(0,n.zG)(t.map(O.li),(e=>new Set(e)),(e=>f.hX((t=>{let[r]=t;return e.has(r)})))),noQueueItemsProcessed:e=>e+r.queue.length}))})))(a)):i>t.noQueueItemsProcessed||s===t.noQueueItemsProcessed+t.queue.length?(t=>((0,n.zG)(t.queue,F(e),R.UI(_))(),{closeEventsProcessed:t.closeEventsProcessed,noQueueItemsProcessed:t.noQueueItemsProcessed+t.queue.length,queue:f.cS}))(t):t))}))),S=(0,n.zG)(r,s.UI(k),s.ap(I),s.D8(f.Eh({equals:(e,t)=>e[0]===t[0]})));return{state:S,value:p}})),j=(e,t)=>e.permutiveUrls.getEndpointUrl("/batch/events",a.G(e.config.apiVersion),[["enrich",JSON.stringify(t.requiresEnrichment)],["sdkp",JSON.stringify(t.sdkProcessed)]]),L=e=>(0,n.zG)(e.events,f.UI((0,n.ls)(O.Yg,(e=>e.event)))),$=(0,n.ls)(h.vM((e=>{let[t,r]=e;return`${r.requiresEnrichment}${r.sdkProcessed}`})),(e=>Object.values(e)),f.UI((e=>({requiresEnrichment:e[0][1].requiresEnrichment,events:e,sdkProcessed:e[0][1].sdkProcessed})))),B=e=>(0,n.ls)($,f.YO("request"),f.Hr("success",(t=>{let{request:r}=t;return e.logger.debug(M,"Uploading via beacon",r),e.permutiveApi.reqWithBeacon({url:j(e,r),payload:L(r)})})),f.tS((e=>(0,n.zG)(e.request.events,f.UI((t=>{let[r,{event:s}]=t;return e.success?g.F2((0,n.bc)(r,s)):g.t$((0,n.bc)(r,s))}))))),f.UI((0,c.bw)(g.EQ((t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_success_count_total",labels:{event_name:r.name},value:1})})))),f.oh),F=e=>t=>(0,n.zG)($(t),R.uU((t=>(0,n.zG)(t,(e=>t=>(e.logger.debug(M,"Uploading",t),T.Y3((()=>e.permutiveApi.req({payload:L(t),url:j(e,t),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1})),(t=>(e.reportError(`Error sending events batch. Got ${g.KC(t)}`),t)))))(e),T.UI(f.UI((e=>e.body))),T.EQ((e=>(0,n.zG)(t.events,f.UI((()=>g.t$(e))))),f.UI(g.F2)),R.UI(f.$R(t.events))))),R.UI(f.tS(f.UI((t=>{let[r,[s,{event:i}]]=t;return(0,n.zG)(r,g.EQ((e=>g.t$((0,n.bc)(s,{event:{...i,time:i.time.toISOString()},error:e}))),(e=>"request_id"in e?g.t$((0,n.bc)(s,{event:{...i,time:i.time.toISOString()},error:e})):g.F2((0,n.bc)(s,{...i,id:e.id,time:e.time})))),(0,c.bw)(g.EQ((t=>{let[,{event:r}]=t;return e.metrics.trackCounter({name:"sdk_event_upload_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_upload_success_count_total",labels:{event_name:r.name},value:1})}))))}))))),N=e=>t=>(0,n.zG)(t,s.En(2,f.uZ()),(0,O.H5)(s.UI(C.UI(e)))),K=(e,t,r,o)=>(0,n.zG)(i.K4((()=>{const[e,t]=s.Ue(s.a9(C.of([])));return{eventsToPublishBufferRef:s.xH(e),publishEvents:r=>{(0,n.zG)(s.vP(e.current,r),s.UI(C.RD),s.UI(C.UI(f.xH)),t)}}})),i.ak("eventUpload",(t=>{let{eventsToPublishBufferRef:n}=t;return A(e,n,r,o)})),i.ak("eventHandler",(e=>{let{eventUpload:t}=e;return r=t.successEventsAsJSON,o=t.erroredEventsAsJSON,i.K4((()=>{const e=new q;return(0,n.zG)(r,s.UI((e=>e())),s.bw((t=>t.forEach((t=>{let[,r]=t;return e.newEvent(r,null)}))))),(0,n.zG)(o,s.UI((e=>e())),s.bw((t=>t.forEach((t=>{let[,{event:r,error:n}]=t;return e.newEvent(r,n)}))))),{eventHandlerAfterUpload:e}}));var r,o})),i.ak("eventResolver",(e=>{let{eventUpload:r}=e;return((e,t,r,o)=>i.K4((()=>{(0,n.zG)(s.vP({unresolvedEvents:t,erroredEvents:o,successEvents:r}),s.UI((0,D.Yt)(C.G5)),s.Rp({},((e,t)=>{const r=t();return(0,n.zG)(r.unresolvedEvents,a.DT(f.Od),a.UI((0,n.ls)(m.sq,(t=>({...e,...t})))),a.fS((()=>e)),(e=>(0,n.zG)(r.successEvents,f.u4(e,((e,t)=>{let[r,s]=t;return(0,n.zG)(m.P5(r,e),a.UI((t=>(t.succeed(s),m.EG(r)(e)))),a.fS((()=>e)))})))),(e=>(0,n.zG)(r.erroredEvents,f.u4(e,((e,t)=>{let[r,{event:s,error:i}]=t;return(0,n.zG)(m.P5(r,e),a.UI((t=>(t.fail(`Failed to track ${s.name}. ${"error"in i?i.error.message:i.message}`),m.EG(r)(e)))),a.fS((()=>e)))})))))})))})))(0,t,r.successEvents,r.erroredEvents)})),i.UI((e=>{let{publishEvents:t,eventHandler:r}=e;return{eventHandlerAfterUpload:r.eventHandlerAfterUpload,publishEvents:t}}))),Y="_pnativo",Q=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(Y)}))};var H,W,V,J,Z,X=-1,ee=function(e){addEventListener("pageshow",(function(t){t.persisted&&(X=t.timeStamp,e(t))}),!0)},te=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},re=function(){var e=te();return e&&e.activationStart||0},ne=function(e,t){var r=te(),n="navigate";return X>=0?n="back-forward-cache":r&&(document.prerendering||re()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},se=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},ie=function(e,t,r,n){var s,i;return function(o){t.value>=0&&(o||n)&&((i=t.value-(s||0))||void 0===s)&&(s=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},oe=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ae=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ce=function(e){var t=!1;return function(){t||(e(),t=!0)}},ue=-1,le=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},de=function(e){"hidden"===document.visibilityState&&ue>-1&&(ue="visibilitychange"===e.type?e.timeStamp:0,pe())},fe=function(){addEventListener("visibilitychange",de,!0),addEventListener("prerenderingchange",de,!0)},pe=function(){removeEventListener("visibilitychange",de,!0),removeEventListener("prerenderingchange",de,!0)},ge=function(){return ue<0&&(ue=le(),fe(),ee((function(){setTimeout((function(){ue=le(),fe()}),0)}))),{get firstHiddenTime(){return ue}}},he=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},_e=[1800,3e3],me=[.1,.25],ve=function(e,t){t=t||{},function(e,t){t=t||{},he((function(){var r,n=ge(),s=ne("FCP"),i=se("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<n.firstHiddenTime&&(s.value=Math.max(e.startTime-re(),0),s.entries.push(e),r(!0)))}))}));i&&(r=ie(e,s,_e,t.reportAllChanges),ee((function(n){s=ne("FCP"),r=ie(e,s,_e,t.reportAllChanges),oe((function(){s.value=performance.now()-n.timeStamp,r(!0)}))})))}))}(ce((function(){var r,n=ne("CLS",0),s=0,i=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],r=i[i.length-1];s&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,i.push(e)):(s=e.value,i=[e])}})),s>n.value&&(n.value=s,n.entries=i,r())},a=se("layout-shift",o);a&&(r=ie(e,n,me,t.reportAllChanges),ae((function(){o(a.takeRecords()),r(!0)})),ee((function(){s=0,n=ne("CLS",0),r=ie(e,n,me,t.reportAllChanges),oe((function(){return r()}))})),setTimeout(r,0))})))},be=0,we=1/0,ye=0,ke=function(e){e.forEach((function(e){e.interactionId&&(we=Math.min(we,e.interactionId),ye=Math.max(ye,e.interactionId),be=ye?(ye-we)/7+1:0)}))},Ie=function(){return H?be:performance.interactionCount||0},Se=function(){"interactionCount"in performance||H||(H=se("event",ke,{type:"event",buffered:!0,durationThreshold:0}))},Ee=[],Pe=new Map,Ge=0,xe=[],Ue=function(e){if(xe.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=Ee[Ee.length-1],r=Pe.get(e.interactionId);if(r||Ee.length<10||e.duration>t.latency){if(r)e.duration>r.latency?(r.entries=[e],r.latency=e.duration):e.duration===r.latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Pe.set(n.id,n),Ee.push(n)}Ee.sort((function(e,t){return t.latency-e.latency})),Ee.length>10&&Ee.splice(10).forEach((function(e){return Pe.delete(e.id)}))}}},ze=function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=ce(e),"hidden"===document.visibilityState?e():(r=t(e),ae(e)),r},qe=[200,500],Ce=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},he((function(){var r;Se();var n,s=ne("INP"),i=function(e){ze((function(){e.forEach(Ue);var t=function(){var e=Math.min(Ee.length-1,Math.floor((Ie()-Ge)/50));return Ee[e]}();t&&t.latency!==s.value&&(s.value=t.latency,s.entries=t.entries,n())}))},o=se("event",i,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40});n=ie(e,s,qe,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),ae((function(){i(o.takeRecords()),n(!0)})),ee((function(){Ge=Ie(),Ee.length=0,Pe.clear(),s=ne("INP"),n=ie(e,s,qe,t.reportAllChanges)})))})))},De=[2500,4e3],Oe={},Te={passive:!0,capture:!0},Re=new Date,Me=function(e,t){W||(W=t,V=e,J=new Date,Le(removeEventListener),Ae())},Ae=function(){if(V>=0&&V<J-Re){var e={entryType:"first-input",name:W.type,target:W.target,cancelable:W.cancelable,startTime:W.timeStamp,processingStart:W.timeStamp+V};Z.forEach((function(t){t(e)})),Z=[]}},je=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){Me(e,t),s()},n=function(){s()},s=function(){removeEventListener("pointerup",r,Te),removeEventListener("pointercancel",n,Te)};addEventListener("pointerup",r,Te),addEventListener("pointercancel",n,Te)}(t,e):Me(t,e)}},Le=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,je,Te)}))},$e=[100,300];const Be=function(e){let t=0;const r=r=>{if(0===t)return;const n=Fe(r);n&&e.metrics.track({name:`sdk_web_vitals_${n.suffix}`,labels:{},value:n.value})},o=(0,c.HP)((()=>{ve(r),function(e,t){t=t||{},he((function(){var r,n=ge(),s=ne("LCP"),i=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<n.firstHiddenTime&&(s.value=Math.max(e.startTime-re(),0),s.entries=[e],r())}))},o=se("largest-contentful-paint",i);if(o){r=ie(e,s,De,t.reportAllChanges);var a=ce((function(){Oe[s.id]||(i(o.takeRecords()),o.disconnect(),Oe[s.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return ze(a)}),!0)})),ae(a),ee((function(n){s=ne("LCP"),r=ie(e,s,De,t.reportAllChanges),oe((function(){s.value=performance.now()-n.timeStamp,Oe[s.id]=!0,r(!0)}))}))}}))}(r),function(e,t){t=t||{},he((function(){var r,n=ge(),s=ne("FID"),i=function(e){e.startTime<n.firstHiddenTime&&(s.value=e.processingStart-e.startTime,s.entries.push(e),r(!0))},o=function(e){e.forEach(i)},a=se("first-input",o);r=ie(e,s,$e,t.reportAllChanges),a&&(ae(ce((function(){o(a.takeRecords()),a.disconnect()}))),ee((function(){var n;s=ne("FID"),r=ie(e,s,$e,t.reportAllChanges),Z=[],V=-1,W=null,Le(addEventListener),n=i,Z.push(n),Ae()})))}))}(r),Ce(r)}));return i.K4((r=>{let{stopped:i}=r;t++,(0,n.zG)(i,s.YP((e=>{e&&t--}))),e.metrics.isEnabled()&&o()}))};const Fe=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var Ne=r(1001);const Ke=(e,t)=>{const{activationManager:r,externalData:o,metrics:a,permutiveData:c}=e;return(0,n.zG)(i.of({}),i.ak("psegs",(()=>((e,t)=>i.K4((r=>{let{stopped:i}=r;const o="_psegs";(0,n.zG)(s.vP(t,i),s.YP((t=>{let[r,s]=t;s||(0,n.zG)(r,f.EQ((()=>e.removeExternalData(o)),(t=>e.setExternalJsonData(o,t))))})))})))(e.externalData,t.qlSegments))),i.ak("webVitals",(()=>Be(e))),i.ak("nativo",(()=>Q({activationManager:r,externalData:o,metrics:a,queryLanguageCohorts:t.qlSegments,...t}))),i.ak("twitterPixel",(()=>(0,Ne.eJ)({activationManager:r,metrics:a,permutiveData:c,queryLanguageCohorts:t.qlSegments,...t}))),i.ak("prebidJS",(()=>(0,w.dN)(e))))};var Ye=r(6329);const Qe=()=>{const[e,t]=s.gS(f.uZ());return{trackEvent:e=>{let r,n,{event:s,useBeacon:i}=e;const o=new Promise(((e,t)=>{r=e,n=t}));return t([{localId:(0,c.k$)(),event:s,fail:n,succeed:r,useBeacon:i}]),o},trackedEvents:e}};var He=r(1371);const We=(e,t)=>i.vP({contextual:(0,He.contextualService)(e,t)}),Ve=function(e,t,r){return i.of({replacementMap:s.a9(a.of({$privacy_sandbox_topics_v2:[]}))})};const Je=e=>i.of(void 0);s.a9(a.YP),s.a9([]),s.a9([]),s.a9([]),s.a9(Ye.b()),s.a9(a.YP),s.a9({segmentsEntered:[],segmentsExited:[]}),s.a9(!1),s.a9((e=>{let{event:t}=e;return Promise.resolve(t)})),new q,s.a9(a.YP),s.a9(!1);function Ze(e,t,r){const{addonsLoaded:u,consent:l,currentTimestampSecs:d,enabledAddons:p,identities:g,sdkVariant:h,sessionId:_,userId:m,userIdIsNewlyGenerated:v,viewId:b,pageviewState:w}=t,[y,k]=(0,n.zG)(s.Ue(s.a9(f.cS)),(e=>{let[t,r]=e;return[s.xH(t),r]})),I=a.ij(e.permutiveData.getData("event-source-id")),E=(0,n.zG)(m,s.Rp(-1,(e=>e+1)),s.UI((t=>(0,n.zG)(I,a.hX((()=>0===t)),a.fS((()=>{const t=(0,c.k$)();return e.permutiveData.setData("event-source-id",t),t}))))));return(0,n.zG)(i.vP({computeTimeMetrics:(P=e.metrics,i.K4((e=>{let{stopped:t}=e;const r=(0,o.HJ)((()=>{(0,n.zG)((0,o.iE)(),(0,c.bw)((()=>(0,o.ho)(!1))),f.UI((e=>{let[t,r]=e;return(r-t)/1e3})),(e=>{P.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),P.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,n.zG)(e,f.hX((e=>e>.05)),f.UI((e=>e-.05)),f.u4(0,((e,t)=>e+t))),labels:{}}),P.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);(0,n.zG)(t,s.YP((e=>e&&r())))}))),audiences:We(e,t),privacySandboxTopics:Ve(e,_,l)}),i.UI((e=>{const{reset:t,trackEvent:r,trackedEvents:i}=((e,t)=>{const[r,i]=s.Ue(0),o=(0,n.zG)(s.vP(r,t),s.UI((()=>[]))),a=(0,n.zG)(s.vP(o,e),s.D8(((e,t)=>{let[,r]=e,[,n]=t;return r===n})),s.UI((e=>{let[t]=e;const r=Qe();return t.forEach(r.trackEvent),r})));return{reset:()=>i(r.current+1),trackEvent:(0,n.zG)(s.vP(a,o),s.UI((e=>{let[t,r]=e;return e=>(r.push(e),t.trackEvent(e))}))),trackedEvents:(0,n.zG)(a,s.VS((e=>e.trackedEvents)))}})(m,b),[o,a,c]=(0,n.zG)(i,s.En(3,f.uZ()));return{...e,reset:t,trackEvent:r,unresolvedEvents:(0,n.zG)(o,s.UI(C.UI(f.UI((e=>(0,n.bc)(e.localId,{fail:e.fail,succeed:e.succeed})))))),eventsToProcessLocally:(0,n.zG)(a,s.UI(C.UI(f.hX((e=>!e.useBeacon))))),eventsToUploadViaBeacon:(0,n.zG)(c,s.UI(C.UI(f.hX((e=>e.useBeacon)))))}})),i.ak("eventPublication",(r=>{let{unresolvedEvents:n}=r;return K(e,n,y,t.sdkClosing)})),i.ak("core",(o=>{let{audiences:c,eventPublication:u,eventsToProcessLocally:p,privacySandboxTopics:h}=o;return(0,n.zG)(r({contextualCohorts:c.contextual.cohorts,consent:l,currentTimestampSecs:d,enrichmentReplacementMap:h.replacementMap,eventSourceId:E,identities:g,newEvents:(0,n.zG)(p,s.UI(C.UI(f.UI((e=>(0,n.bc)(e.localId,e.event)))))),sessionId:_,userId:m,userIdIsNewlyGenerated:v,viewId:b,webClient:t.webClient,pageviewState:w}),i.bw((e=>{let{eventsToPublish:t}=e;return(0,n.zG)(t,s.UI(C.UI(Xe)),u.publishEvents)})),i.bw((e=>{let{eventsToPublishOnPageUnload:t}=e;return(0,n.zG)(t,s.UI(Xe),k)})),i.bw((t=>{let{externalData:r}=t;return(0,n.zG)(r,s.UI((t=>(0,n.zG)(Object.entries(t),f.UI((t=>{let[r,s]=t;return(0,n.zG)(s,a.EQ((()=>e.externalData.removeExternalData(r)),(t=>e.externalData.setExternalJsonData(r,t))))}))))))})),i.bw((t=>{let{context:r}=t;return(0,n.zG)(r,s.UI((t=>{const r=Object.entries(t);e.clientContext.updateContext(...r)})))})))})),i.bw((e=>{let{core:r,eventPublication:i,eventsToUploadViaBeacon:o}=e;return(0,n.zG)(s.vP({cohorts:r.cohorts.all,eventsIO:o,segments:r.cohorts.ql,sessionId:_,userId:m,viewId:b,webClient:t.webClient}),s.UI((e=>{let{webClient:t,...r}=e;return(0,n.zG)(t,a.UI((e=>({...r,webClient:e}))))})),s.UI(a.EQ((()=>C.of(f.bM())),(e=>{let{cohorts:t,eventsIO:r,segments:s,sessionId:i,userId:o,viewId:a,webClient:c}=e;return(0,n.zG)(r,C.UI(f.UI((e=>{let{event:r,localId:u}=e;return(0,n.bc)(u,{requiresEnrichment:!0,sdkProcessed:!1,event:{user_id:o,name:r.name,segments:s,cohorts:t,properties:{...r.properties,client:{...c,...r.properties.client??{}}},session_id:i,time:new Date,view_id:a}})}))))}))),i.publishEvents)})),i.ak("metricContext",(e=>{let{core:r}=e;return(0,n.zG)(r.geoIP,s.UI(a.tS((e=>{var t;return a.ij(null===(t=e.geo_info)||void 0===t?void 0:t.continent)}))),(e=>Ye.X({continent:e,sampleRate:t.metricSampleRate,sdkVariant:h,sessionId:_,userId:m,viewId:b})))})),i.ak("sdkql",(t=>{let{core:r}=t;return Ke(e,{addonsLoaded:u,consent:l,initdAddons:p,qlSegments:r.cohorts.ql})})),i.ak("strategicPartnerships",(t=>{let{sdkql:r}=t;return((e,t)=>i.vP({prebid_identifiers:G(e,t)}))(e,{pbjs:(0,n.zG)(r.prebidJS,s.UI((e=>(0,n.zG)(e.mainPair,a.UI((e=>e.pbjs))))))})})),i.ak("mediaAndEntertainment",(t=>{let{core:r}=t;return((e,t)=>(0,n.zG)(i.vP({freewheel:x({activationManager:e.activationManager,externalData:e.externalData,...t})}),i.UI((0,n.a9)({}))))(e,{addonsLoaded:u,consent:l,initdAddons:p,queryLanguageCohorts:r.cohorts.ql})})),i.ak("advertisers",(t=>{let{sdkql:r}=t;return((e,t)=>(0,n.zG)(i.of(t),i.ak("prebidMonitoring",(t=>{let{consent:r,prebidJS:n}=t;return S(e,s.vP({consent:r,prebidJS:n}))})),i.UI(n.Q1)))(e,{consent:l,prebidJS:r.prebidJS})})),i.ak("identityManager",(()=>Je(e,g))),i.UI((e=>{let{core:t,audiences:r,metricContext:n,sdkql:i,trackEvent:o,eventPublication:a,strategicPartnerships:c,reset:u}=e;return{activations:t.activations,addons:{contextual:r.contextual.addon,secureSignal:t.secureSignal},metricContext:n,pbjsPair:s.UI((e=>e.mainPair),i.prebidJS),queryLanguageCohorts:{all:t.cohorts.ql,custom:t.cohorts.qlCustom,standard:t.cohorts.qlStandard},segmentTransitionsSinceInit:t.transitionsSinceInit,trackEvent:o,realtime:t.realtime,eventHandlerAfterUpload:a.eventHandlerAfterUpload,prebidIdentifiers:c.prebid_identifiers,reset:u,stateMigratedThisInitialisation:t.stateMigratedThisInitialisation}})));var P}const Xe=f.UI((0,O.H5)((e=>({event:e,requiresEnrichment:!1,sdkProcessed:!0}))));function et(e){return(0,n.ls)((0,c.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch{return{}}}}),e,(0,c.rO)({state:s.UI(JSON.stringify)}))}function tt(e){const t=function(e){const{activationManager:t,api:r,clientContext:n,config:s,externalData:i,logger:o,metrics:a,permutiveData:c,network:u,urls:l,namespace:d,trace:f}=e;return{activationManager:t,api:r,clientContext:n,config:s,externalData:i,logger:o,metrics:a,permutiveData:c,permutiveApi:u,permutiveUrls:l,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},namespace:d,trace:f}}(e),r=function(e){const t={addonsLoaded:e.addonsLoaded,consent:(r=e.consentTracking,(0,n.zG)(r,a.EQ((()=>s.a9(!0)),(e=>e.consentRef)))),currentTimestampSecs:l(),enabledAddons:u(e),identities:e.identities,sdkClosing:d(),metricSampleRate:e.config.metricsSamplingPercentage/100,sdkVariant:a.ij(e.sdkVariant),sessionId:s.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,userIdIsNewlyGenerated:e.userId.isNewlyGenerated,viewId:e.viewId.ref,pageviewState:e.pageviewState,webClient:e.webClient};var r;return t}(e);return function(e,t,r,a){const u=5e3;return(0,n.zG)(e,function(e,t){return r=>i=>{const{value:a,state:c}=r(i),[u,l]=s.Ue(c.current),d=(0,o.UM)((()=>l(c.current)),e),f=(0,n.zG)(s.vP(c,u),s.UI((e=>{let[t,r]=e;return t===r})));return(0,n.zG)(t,s.bw((e=>e&&d()))),{value:(0,n.bc)(f,a),state:(0,n.zG)(s.vP(t,c,u),s.UI((e=>{let[t,r,n]=e;return t?r:n})))}}}(u,a),et,function(e){return t=>(0,n.ls)((0,c.rO)({previousState:t=>e.current?t:void 0}),t,(0,c.rO)({state:(0,n.ls)((t=>s.vP(e,t)),s.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}(r),function(e){return t=>(0,n.ls)((0,c.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,c.rO)({state:(0,c.bw)(s.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t),i.UI((e=>{let[t,r]=e;return r})))({stopped:s.a9(!1)}).value}(Ze(t,r,e.core),e.namespace.getNamespacedStorageKey("permutive-app"),r.consent,r.sdkClosing)}},6851:(e,t,r)=>{r.d(t,{iq:()=>d,zC:()=>f,B9:()=>g,ti:()=>_});var n=r(2865),s=r(3939),i=r(1385),o=r(9727),a=r(2275),c=r(7387);var u=r(4513);const l="__permutive.",d="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",apiProtocol:"https",cdnBaseUrl:"cdn.permutive.com",cdnProtocol:"https",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataQueriesKey:"permutive-data-queries",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"e488cdb0-e7cb-4d91-9648-60d437d8e491.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:[],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0},secureSignalsApiHost:"secure-signals.permutive.app"},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},p=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},r={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((n,s)=>{if(t.hasOwnProperty(s)){const t="true"===e[s];return{...n,[s]:t}}if(r.hasOwnProperty(s)){const t=Number(e[s]);return isNaN(t)?n:{...n,[s]:t}}return{...n,[s]:e[s]}}),{})},g=function(){let{getQueryParams:e=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;if(!(0===r.indexOf(l)))return e;const s=r.replace(l,"");return[...e,[s,n]]}),[]);return(0,a.zG)(i.Y3((()=>(0,a.zG)(e(),t,(e=>(0,c.m8)(...e)),p,(e=>h({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,n.w)(e).message}`)))},h=e=>{let{queryConfig:t}=e;const r=(0,a.zG)(o.Y3((()=>window.sessionStorage.getItem(d))),o.tS(o.ij),o.tS((0,a.ls)(s.A,o.ij)),o.fS((()=>({}))));return(0,c.PM)(r,t)},_=(e,t)=>{const r=(e.environment&&f[e.environment])??{};return e.viewId=(e=>{const t=`${"permutive"===e.windowKey?"":e.windowKey}permutiveContextual`;return(0,a.zG)(o.Y3((()=>window[t].view_id)),o.tS(o.ij),o.wp((()=>(0,a.zG)(e.viewId,o.DT(c.HD)))),o.fS((()=>f.default.viewId)),(0,c.bw)(o.it((e=>{(0,c.HD)(e)&&(window[t]=window[t]??{},window[t].view_id=window[t].view_id||e)}))))})(e),(0,c.PM)(f.default,r,e,t)}},1228:(e,t,r)=>{r.d(t,{NY:()=>h,vk:()=>f,qA:()=>d});var n=r(2865),s=r(1385),i=r(2275),o=r(9246),a=r(7056),c=r(1954),u=r(5460);var l=r(4564);const d=()=>({opt_in:!0,token:c.L}),f=()=>({opt_in:!1,token:""}),p=e=>{return(0,i.ls)((t=e,e=>(0,i.zG)((0,l.J)(t.consentRequired,e),(e=>{let{consentData:r,isValid:n}=e;return t.consentDatabase.put(r,c.L),n}))),(e=>{let{logger:t,messages:r}=e;return e=>{const n=e?"given":"revoked";return t.log("Consent has been",n),r.emit(`permutive:consent:${n}`),e}})(e));var t},g=e=>(t,r)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",r)},h=async e=>{const{logger:t,namespace:r,consentRequired:d,messages:f}=e,h=new a.oP(window.localStorage,r),_=(0,l.J)(d,await h.get(c.L)),m=await(0,i.zG)(o.Y3((()=>h.put(_.consentData,c.L)),(e=>new Error(`LocalStorage access is required. ${(0,n.w)(e).message}`))),(e=>e()));if(s.nM(m))return m;const{consentRef:v,giveConsent:b,revokeConsent:w,isRevoked:y,isGiven:k}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,r]=u.Ue(e),n=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(r(!1),t.current),giveConsent:()=>(r(!0),t.current),isRevoked:()=>!n(),isGiven:n}}(_.isValid),I={consentRef:v,isGiven:k,isRevoked:y,listenForConsent:g(f)};I.listenForConsent(w,b);const S=p({consentDatabase:h,consentRequired:d,logger:t,messages:f});return s.F2({consentTracking:I,consentValidation:S,consentDatabase:h})}},1954:(e,t,r)=>{r.d(t,{L:()=>n});const n="permutive-consent"},4429:(e,t,r)=>{r.d(t,{v:()=>n});const n=(e,t,r)=>function(){const n=r()?t:e;return n(...arguments)}},4564:(e,t,r)=>{r.d(t,{J:()=>o});var n=r(2275),s=r(9727),i=r(1228);const o=(e,t)=>(0,n.zG)((0,s.ij)(t),(t=>!1===e&&(0,s.Wi)(t)?{isValid:!0,consentData:(0,i.qA)()}:(e=>(0,s.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:(0,i.vk)()}))},268:(e,t,r)=>{r.d(t,{S:()=>_});var n=r(2275),s=r(9727),i=r(366),o=r(5460),a=r(5842),c=r(3247),u=r(3812);var l=r(7387);class d{wait_prev;block_next;task;started;complete;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var f=r(1202);r(9082);class p{logger;api;activationManager;sessionManager;metrics;viewId;userId;network;clientContext;unprocessedEvents;taskQueue;identities;permutiveReset;messages;addons;trace;permutiveRealtime;state;customProperties;config;permutiveData;externalData;cookies;identitiesIngestor;global;nextGen;pageviewState;initialisedAddons=[];tcf;constructor(e,t,r,n,s,i,o,a,u,l,d,f,p,g,h,_,m,v,b,w,y,k,I,S,E,P,G){this.logger=e,this.api=t,this.activationManager=r,this.sessionManager=n,this.metrics=s,this.viewId=i,this.userId=o,this.network=a,this.clientContext=u,this.unprocessedEvents=l,this.taskQueue=d,this.identities=f,this.permutiveReset=p,this.messages=g,this.addons=h,this.trace=_,this.permutiveRealtime=m,this.state=v,this.customProperties=b,this.config=w,this.permutiveData=y,this.externalData=k,this.cookies=I,this.identitiesIngestor=S,this.global=E,this.nextGen=P,this.pageviewState=G,this.tcf=(0,c.SD)(window,this.logger)}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const r=(0,l.b2)(),{left:o,right:c}=this.identities.parseCustomerDefinedIdentities(e);if(o.length>0)throw new Error(o.join(" "));const u={...this.identities.getIdentitiesMap(),...c.reduce(((e,t)=>{let{tag:r,id:n,priority:s,expiry:i}=t;return{...e,[r]:{id:n,...void 0!==s?{priority:s}:{},...void 0!==i?{expiry:i}:{}}}}),{})},p=(0,n.zG)(Object.values(u),i.DZ((e=>s.ij(e.id)))),g=this.identities.getPrioritizedIdentities(u);if("string"==typeof e&&(0,a.Bt)("e488cdb0-e7cb-4d91-9648-60d437d8e491","e488cdb0-e7cb-4d91-9648-60d437d8e491",p,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const h=async e=>{await(0,f.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,reset:this.permutiveReset,userId:this.userId},e.user_id)};return this.taskQueue.add(new d((async e=>{this.logger.debug("<task> identify",c);const n=async()=>{this.logger.log(t,"request identity");const e=await this.api.identify(this.metrics,this.userId,g);this.userId.isEqual(e.user_id)?this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),await h(e))};this.identities.setIdentities(c).identifyRequestRequired()?await n():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",c),e(),r.resolve(),await this.identitiesIngestor.ingestIfEligible(c).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}),{wait_prev:!0,block_next:!0})),r.promise}on(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!1})}once(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!0})}pageviewTracked=!1;track(){const[e,t,r]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],n=this.trace.startSpan(`track("${e}")`);this.logger.log("<call> track",e);const s=(0,l.b2)();this.pageviewTracked||"Pageview"!==e||(this.pageviewTracked=!0,this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"pageview_tracked",time_origin:"sdk_init"})),this.metrics.trackCounter({name:"sdk_event_track_count_total",labels:{event_name:e},value:1}),s.promise.then((()=>{this.metrics.trackCounter({name:"sdk_event_track_success_count_total",labels:{event_name:e},value:1}),n.finish()}),(()=>{this.metrics.trackCounter({name:"sdk_event_track_fail_count_total",labels:{event_name:e},value:1}),n.finish()}));const i=r.unprocessedData??{},o=i.sessionId??this.sessionManager.getSessionId(),a=i.viewId??this.viewId.get(),c={success:r.success||(e=>{}),error:r.error||((e,t)=>{})};return this.taskQueue.add(new d((n=>{this.logger.log("<task> track",e);return(i.client?Promise.resolve(i.client):this.clientContext.getClient()).then((i=>{const u={name:e,properties:{...t,client:t.client?(0,l.PM)(i,t.client):i},session_id:o,view_id:a,time:new Date};return this.nextGen.trackEvent.current({event:u,useBeacon:r.useBeacon??!1}).then((e=>{this.logger.log("<done> track",u.name),c.success(e),s.resolve(u),n()})).catch((e=>{c.error(e),this.api.reportError(e,this.userId.get()),s.reject(e)}))}))}))),s.promise}trigger(e,t,r){const n=(0,l.b2)();this.logger.log("<call> trigger",e);const s=t=>(s,i)=>{if(s.properties.segment_number===e){const o={result:t};this.logger.debug("<fire> trigger",{event:s,error:i,segmentCode:e,payload:o}),r(o),n.resolve(o)}};return this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentEntry",callback:s(!0),once:!1}),this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentExit",callback:s(!1),once:!1}),this.logger.log("<done> trigger",e),n.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const r=(0,l.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new d((n=>{this.logger.log("<task> segment",e);const s=this.nextGen.queryLanguageCohorts.all.current.includes(e)||!1;t(s),r.resolve(),this.logger.log("<done> segment",e),n()}))),r.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=(0,l.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new d((n=>{this.logger.log("<task> segments ("+t+")");const s=s=>{e(s),r.resolve(s),this.logger.log("<done> segments ("+t+")"),n()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&s([...this.addons.dfp.segments.liveSegments])})):s([...this.nextGen.queryLanguageCohorts.all.current])}))),r.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.nextGen.reset(),this.userId.reset()]).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){this.logger.debug("[Addon]",`Called for ${e}`,t);const i={...t,permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen,identities:this.identities,pageviewState:this.pageviewState,tcf:this.tcf},a=(0,n.zG)(this.nextGen.pbjsPair,o.UI(s.UI((0,l.vg)("pbjs")))),c=e=>{this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e)};if("contextual"===e)return"contextual"in this.addons||c(e),this.addons.contextual=this.nextGen.addons.contextual(t);if(-1===this.initialisedAddons.indexOf(e))switch(c(e),e){case"web":Promise.resolve().then(r.bind(r,7866)).then((e=>this.addons.web=new e.WebAddon(i))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":Promise.resolve().then(r.bind(r,6070)).then((e=>this.addons.publishers=new e.PublishersAddon(i)));break;case"overlays":Promise.resolve().then(r.bind(r,6683)).then((e=>this.addons.overlays=new e.OverlaysAddon(i)));break;case"scriptrunner":Promise.resolve().then(r.bind(r,3751)).then((e=>this.addons.scriptrunner=new e.ScriptRunnerAddon(i)));break;case"dfp":Promise.resolve().then(r.bind(r,4066)).then((async e=>this.addons.dfp=await e.createAddon(i)));break;case"nativo":case"freewheel":case"facebook_pixel_v2":case"tiktok_pixel":case"eyeota_pixel":case"rubicon":case"twitter_pixel":case"pinterest_pixel":case"classification_models":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":case"pubmatic":0;break;case"rubicon_ssp":Promise.resolve().then(r.bind(r,5833)).then((e=>this.addons.rubicon_ssp=new e.RubiconSspAddon(i)));break;case"tracking_pixel":Promise.resolve().then(r.bind(r,5734)).then((e=>this.addons.tracking_pixel=new e.PixelAddon(i)));break;case"local_storage":Promise.resolve().then(r.bind(r,2087)).then((e=>this.addons.local_storage=new e.LocalStorageAddon(i)));break;case"appnexus_adserver":Promise.resolve().then(r.bind(r,1108)).then((e=>this.addons.appnexus_adserver=new e.AppNexusAdServerAddon(i)));break;case"prebid":Promise.resolve().then(r.bind(r,4453)).then((e=>this.addons.prebid=new e.PrebidAddon({...i,pbjs:a})));break;case"clean_room":Promise.resolve().then(r.bind(r,1819)).then((e=>this.addons.clean_room=new e.CleanRoomAddon({...i,pbjs:a,prebidIdentifiers:this.nextGen.prebidIdentifiers})));break;case"gam_log":Promise.resolve().then(r.bind(r,1936)).then((async e=>this.addons.gam_log=new e.GamLogAddon(i)));break;case"ssp":Promise.resolve().then(r.bind(r,3775)).then((e=>this.addons.ssp=new e.SspAddon(i)))}else"web"===e&&!0!==t.auto_init&&((e,t,r,n)=>new Promise(((i,o)=>{const a=(0,s.Y3)(e);if((0,s.pC)(a))return i(a.value);r.once(t,(()=>(0,s.g_)((()=>o(new Error(`Error after waiting for event ${t}`))),i)((0,s.Y3)(e))));const c=(null==n?void 0:n.timeout)??1e4;(0,u.HJ)((()=>o(new Error(`Event ${t} was not received within the timeout period ${c}ms`))),c)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const r=(0,l.b2)(),n=()=>{e(),r.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return r.promise}}var g=r(4429);const h=e=>{const{logger:t,consentTracking:r}=e,s=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),r.isRevoked()&&this.consentRevoked(),r.listenForConsent((()=>this.consentRevoked()),n.Q1)}async consentRevoked(){return await this.sessionManager.reset(),this.reset()}track=(0,g.v)(super.track.bind(this),s,r.isRevoked)}},_=(e,t,r,s,i,o,a,c,u,l,d,f,g,_,m,v,b,w,y,k,I,S,E,P,G,x,U,z)=>new((0,n.zG)(p,h({consentTracking:x,logger:e})))(e,t,r,s,i,o,a,c,u,l,d,f,g,_,m,v,b,w,y,k,I,S,E,P,G,U,z)},1202:(e,t,r)=>{r.d(t,{Yj:()=>c,TZ:()=>a});var n=r(2865),s=r(7387);var i=r(5842);const o=async e=>{await e.identities.thirdParty,await function(e,t){return(0,i.Bt)("e488cdb0-e7cb-4d91-9648-60d437d8e491","e488cdb0-e7cb-4d91-9648-60d437d8e491",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=await function(e){const t=e.trace.startSpan("identify");0;return(async e=>{const t="[Identify Init]",{logger:r,api:n,userId:i,identities:o,metrics:a,identitiesIngestor:c,messages:u,sessionManager:l}=e,d=await o.thirdParty,f=o.extractIdentifyFromQueue(e),p={...o.getIdentitiesMap(),...f.reduce(((e,t)=>{let{tag:r,id:n,priority:s,expiry:i}=t;return{...e,[r]:{id:n,...i?{expiry:i}:{},...void 0!==s?{priority:s}:{}}}}),{})},g=o.setIdentities(Object.entries(p).map((e=>{let[t,{id:r,priority:n,expiry:s}]=e;return{tag:t,id:r,...s?{expiry:s}:{},...void 0!==n?{priority:n}:{}}})));o.setReady();const h=o.getPrioritizedIdentities(p);r.log("Begin identification");const _=e.sessionCount>1&&l.sessionHasChanged()||d.identifyRequestRequired()||g.identifyRequestRequired()?await(r.debug(t,"request identity"),n.identify(a,i,h).then((e=>{const n=e.user_id;return i.isEqual(n)?{identityChanged:!1}:(r.debug(t,"fetch received new user id",n),{identityChanged:!0,userId:n})})).catch((e=>(n.reportError(`${t} Fetch failed. Got ${e}`,i.get()),{identityChanged:!1}))).then((0,s.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(r.debug(t,"skip request"),{identityChanged:!1});return c.ingestIfEligible(h).catch((e=>n.reportError(`Couldn't ingest identities, got ${e}`,_.identityChanged?_.userId:i.get()))),u.emit("permutive:user:ready"),r.debug(t,"result",_),_})(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,n.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?await c(e,t.userId):e.logger.log("Identity has not changed"),t},a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};o(e).then(t),u(e.global,e.clientContext)};async function c(e,t){e.logger.log("Identity has changed"),await e.reset.reset(),e.userId.set(t),u(e.global,e.clientContext),e.identities.setIdentities([])}function u(e,t){return e.context=t.getContext()}},9774:(e,t,r)=>{function n(e,t,r,n){n.debug("set SDK as ready"),e.emit("permutive:api:ready"),e.emit("permutive:queries:initialised"),t.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.warn("sdk_query_states_byte_total metric needs re-implementing")}r.d(t,{R:()=>n})},8629:(e,t,r)=>{r.d(t,{LA:()=>a});var n=r(366),s=r(5586),i=r(7387);const o=(e,t,r)=>{let{api:n,state:s}=r;n.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,s.userId.get())};function a(e,t,r,n,s,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d;const u=c(e),l=i.startSpan("queued_methods"),f={api:s,state:t},p=e=>{if(e.functionName in r){r[e.functionName].apply(n,e.arguments)}else o(new Error("Does not exist."),e,f)},g=e=>!a.includes(e);u.forEach((e=>{try{g(e.functionName)&&p(e)}catch(t){const r=t instanceof Error?t:new Error("Unknown error.");o(r,e,f)}})),l.finish()}function c(e){const t=(0,n.uK)((e=>-1!==l.indexOf(e.functionName)))(e),r=t.right,o=t.left.filter((e=>"consent"!==e.functionName)),a=(0,s.Zt)(((e,t)=>u(e)&&u(t)?(0,i.lW)(f).compare(e.arguments[0],t.arguments[0]):(0,i.lW)(l).compare(e.functionName,t.functionName)));return(0,n.DY)(a)(r).concat(o)}const u=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],d=["identify"],f=["dfp","appnexus_adserver","web"]},9215:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initialiseWebSDK:()=>initialiseWebSDK});var _permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(2865),fp_ts_Option__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(9727),fp_ts_Either__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(1385),fp_ts_function__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2275),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(9246),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5460),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7222),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5842),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(8167),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(8672),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7041),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3636),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(6688),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_sdkql_event_collection_events_cache_store_crypto_SHA256Digest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1948),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1555),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(4253),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6769),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(6176),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(541),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(1772),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(1347),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(9134),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3247),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6563),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(2102),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8645),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(7387),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5365),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(4513),_Config__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(6851),_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1202),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(9774),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(8629),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(268),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3812),fp_ts_Task__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(1717),main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(8480),main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1671);const prefix="[Initialisation Web]",initialiseWebSDK=_ref=>{let{cookieStore,consentModule,core,externalData,localStorage,logger,messages,metrics,namespace,pageviewState,partialTagWithKey,permutiveData,sessionManager,tag,trace,configFromQueryParams,urls,userId}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((async()=>{const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(pageviewState.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((e=>e.viewId)),(e=>new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__.W(e))),network=new main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E(metrics),sessionStorage=(0,main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__.u)(namespace,logger,consentModule.consentTracking.consentRef),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_14__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_14__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_14__.iq)}))),window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_25__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_25__.bk)(document.referrer),view_id:viewId.get()}),createInternalsSpan=trace.startSpan("internals"),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_26__.z(context);(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e])))),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(userId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["user_id",e]))));const api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__.F(urls,config,network,metrics,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_27__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_28__.u(trace,metrics,messages),unprocessedArgs={consent:consentTracking.consentRef,logger,namespace},unprocessedEvents={PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_29__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__.X,permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_30__.a(config,localStorage,logger,permutiveData,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__.i(messages),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),webClient=(()=>{const[e,t]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(Date.now());return(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.UM)((()=>t(Date.now())),1e3),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(viewId.ref,e),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((()=>(0,_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_26__.k)())),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t))))})(),eventCacheStoreFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,8949))),String),trace.traceTask("import-DBStore-main-thread"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.UI)((e=>{let{DBStore:t}=e;return new t((0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_31__.E)(namespace,logger,consentTracking.consentRef))}))),eventsCacheFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,3194))),String),trace.traceTask("import-events-cache"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.tS)((e=>{let{EventsCache:t}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(t.initialise(config,logger,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};api.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)}),trace,metrics,userId.ref,eventCacheStoreFactory),trace.traceTask("initialise-events-cache-main-thread"))}))),nextGen=await(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,4257)))),trace.traceTask("import-next-gen"),fp_ts_Task__WEBPACK_IMPORTED_MODULE_32__.Qt("configureCore",core),fp_ts_Task__WEBPACK_IMPORTED_MODULE_32__.UI((e=>{let{runNextGenFeatures:t,configureCore:r}=e;return t({activationManager,addonsLoaded:addonsLoadedRef,api,clientContext,config,consentTracking:fp_ts_Option__WEBPACK_IMPORTED_MODULE_33__.G(consentTracking),core:r({eventsCacheFactory,migratedStateMaps:()=>({internal:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("internal_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_33__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn)),external:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("external_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_33__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn))})}),externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,sessionManager,urls,userId,viewId,pageviewState:pageviewState.ref,trace,webClient:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(webClient,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI(fp_ts_Option__WEBPACK_IMPORTED_MODULE_33__.of))})})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_34__.u(permutiveData,permutiveReset,userId,viewId,logger),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,clientContext,unprocessedEvents,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen,pageviewState);createInternalsSpan.finish(),[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_35__.Y3((()=>eval(s)),(e=>{api.reportError({...e,message:`Error running custom script ${s}`},userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_36__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised");const initialIdentifyResult=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.b2)();let globalIdentifyBound=!1;messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),globalIdentifyBound=!0;const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0?initialIdentifyResult.resolve(permutiveGlobal.identify(e)):initialIdentifyResult.resolve()})),messages.on("permutive:blockers:empty",(()=>{if(!globalIdentifyBound){const e=permutiveGlobal.identify;permutiveGlobal.identify=t=>(e(t),initialIdentifyResult.promise)}permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_37__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,namespace,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish(),await(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__.TZ)({api,clientContext,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,permutiveMethods,reset:permutiveReset,trace,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_38__.R)(messages,metrics,state,logger),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(nextGen.realtime,nextGen.queryLanguageCohorts.all),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e[0]===t[0])),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.bw((e=>{let[t,r]=e;t&&permutiveRealtime.setAsRealtime(r.length)})))}),(e=>`Exception during initialisation. Got ${e}`))}},4749:(e,t,r)=>{r.r(t),r.d(t,{runSdk:()=>te});var n=r(1385),s=r(2275);var i=r(9246),o=r(1717),a=r(9727);var c=r(5472);class u{namespace;config;logger;constructor(e,t,r){this.namespace=e,this.config=t,this.logger=r}makeCookie(e,t,r){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",r,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:n}=this.config??{};throw this.logger.warn(`Unable to set cookie. ${c.LP}`,{value:t,cookieName:e,cookieExpiry:r,cookieDomain:n}),new Error(c.LP)}const r=this.makeCookie(e,t,this.config.cookieExpiry);if(r.length>c.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${c.eP}`),new Error(c.eP);return this.logger.debug(`Setting cookie ${r}`),document.cookie=r,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var l=r(4429);const d=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{setCookie=(0,l.v)(super.setCookie.bind(this),n,r.isRevoked)}};var f=r(2865),p=r(3939);class g{namespace;constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,p.A)(t)}setExternalData(e,t){const r=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(r,t)}catch(e){}}setExternalJsonData(e,t){return(0,s.zG)((r=t,(0,n.Y3)((function(){var e=JSON.stringify(r);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),s.yR)),(0,n.UI)((t=>this.setExternalData(e,t))),(0,n.g_)((e=>{throw(0,f.w)(e)}),s.Q1));var r}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}const h=e=>{const{logger:t,consentTracking:r}=e,n=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},s=n,i=n;return e=>class extends e{setExternalData=(0,l.v)(super.setExternalData.bind(this),s,r.isRevoked);setExternalJsonData=(0,l.v)(super.setExternalJsonData.bind(this),i,r.isRevoked)}};var _=r(3812);class m{sdkInitTimestamp;prefix="[Permutive]"+(self.document?"[Main]":"[Worker]");debugStyle=["color: blue"].join(";");constructor(e){this.sdkInitTimestamp=e}get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}debug(){return console.debug.bind(self.console,"%s%c%s",this.timeDeltaFromInit,this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}error(){return console.error.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}}class v{log(){}debug(){}warn(){}error(){}}const b="[MESSAGES]";class w{logger;messageListenerMap={};replayQueue={};onceTracker={};defaultMessageOptions={withReplay:!1,once:!1};constructor(e){this.logger=e}on(e,t,r){const n=this.mergeMessageOptions(r);n.withReplay&&this.processReplayQueue(e,t);const s=y(e,this.messageListenerMap).push(t)-1;return n.once&&this.addToOnceTracker(e,s),s}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):y(e,this.messageListenerMap)[t]=s.Q1}emit(e,t,r){const n=this.mergeMessageOptions(r);y(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){y(e,this.replayQueue).push(t)}processReplayQueue(e,t){var r;null===(r=this.replayQueue[e])||void 0===r||r.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var r;null===(r=this.messageListenerMap[e])||void 0===r||r.forEach(((r,n)=>{r(t),this.removeListenerIfSetToFireOnlyOnce(e,n)}))}addToOnceTracker(e,t){y(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var r;null!==(r=this.onceTracker[e])&&void 0!==r&&r.includes(t)&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...this.defaultMessageOptions,...e}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(b,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(b,...t)}}const y=(e,t)=>t[e]??=[];var k=r(2925);class I{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=P();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=E(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,s.zG)(k.gz(a.G5)(this.timeOriginForContext,this.timeOriginSdkInit),a.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,s.zG)(this.synchroniseTimeBetweenContexts(r),a.UI((e=>(e-this.sdkInitTimestamp)/1e3)),a.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class S{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const E=(e,t)=>({...e,value:e.value+t}),P=()=>(0,s.zG)(a.Y3((()=>performance.timeOrigin)),a.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var G=r(7387),x=r(731),U=r(1001);class z{config;namespace;logger;prefix="[Data Store]";permutiveData={};permutiveDataSize=0;localStorageScheduler;localStorageQueue=new Set;debouncedStorageKeys;debouncedFlush;constructor(e,t,r){this.config=e,this.namespace=t,this.logger=r,this.localStorageScheduler=new x.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return{...this.getDataChunk("misc"),...this.getDataChunk("queries")}}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),r=window.localStorage.getItem(t),n=null===r?null:(0,p.A)(r);return r&&n?(this.permutiveDataSize+=2*r.length,n):{}}chunkKeyToStorageKey(e){switch(e){case"queries":return this.config.permutiveDataQueriesKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,r]=this.dataKeyToChunkInfo(e);return n.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(r))),(t=>{const r=(0,f.w)(t);return this.logError(`Failed to set ${e}. Got ${r}`),r}))}dataKeyToChunkInfo(e){const t=e=>(0,G.eu)(this.permutiveData,e);switch(e){case"internal_query_states":case"external_query_states":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(q)];case U.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:tiktok_pixel":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(C)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const q=["internal_query_states","external_query_states","event-source-id"],C=[U.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:tiktok_pixel","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"],D=e=>{const{logger:t,consentTracking:r}=e,s=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),n.F2(void 0));return e=>class extends e{writeData=(0,l.v)(super.writeData.bind(this),s,r.isRevoked)}};class O{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var T=r(5460);class R{config;cookies;externalData;ref;isNewlyGenerated;setState;constructor(e,t,r,n){this.config=e,this.cookies=t,this.externalData=r;const[i,o]=T.Ue(this.getOrGenerateUserId());this.ref=(0,s.zG)(i,T.UI((e=>e.userId))),this.isNewlyGenerated=(0,s.zG)(i,T.UI((e=>e.isNewlyGenerated))),this.setState=o,(0,s.zG)(T.vP(this.ref,n),T.YP((e=>{let[t,r]=e;r?(this.cookies.setCookie(this.config.cookieName,t),this.externalData.setExternalData(this.config.cookieName,t)):(this.cookies.deleteCookie(this.config.cookieName),this.externalData.removeExternalData(this.config.cookieName))})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setState({userId:e,isNewlyGenerated:!1})}reset(){this.setState({userId:(0,G.k$)(),isNewlyGenerated:!0})}getOrGenerateUserId(){return(0,s.zG)(this.getUserIdFromCookie(),a.wp((()=>this.getUserIdFromLocalStorage())),a.UI((e=>({userId:e,isNewlyGenerated:!1}))),a.fS((()=>({userId:(0,G.k$)(),isNewlyGenerated:!0}))))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=a.DT(G.Gz);return(0,s.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),a.ij,a.tS(t))}}class M{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=`${e}/${r}/audiences`;return this.getUrl("audience-matching",s,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const s=this.getUrlPrefix(e),i=(0,a.g_)((()=>""),(e=>`/${e}`))(r),o=`${this.getBaseUrl()}${s}${i}${t}`;return this.makeUrlWithQueryParams(o,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}const A=`permutive.${self.document?"main":"worker"}.`;class j{config;shouldUsePerformanceMark=!1;constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=((null===(t=self.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(e){const t=this.generateSpan(`${e}_since_init`);return t.start({startTime:_.NC}),{spanId:t.spanId,finish:t.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=j.generateUniqueMarkerNames(e);return{spanId:r,start:e=>{var t;return null===(t=self.performance)||void 0===t?void 0:t.mark(r,e)},finish:e=>{var s,i,o;null===(s=self.performance)||void 0===s||s.mark(n,{startTime:(null==e?void 0:e.startTime)??performance.now()}),null===(i=self.performance)||void 0===i||null===(o=i.measure)||void 0===o||o.call(i,t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${A}${e}`,r=`${t}${j.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}var L=r(6851),$=r(1228),B=r(366),F=r(9215),N=r(1954),K=r(4564);const Y=e=>{const{partialTagWithKey:t}=e,r=t.key;var i;window[r].consent=(i=e,(0,s.ls)(i.consentModule.consentValidation,a.DT(Boolean),a.UI((0,F.initialiseWebSDK)(i)),s.Q1));const c=(0,a.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,s.zG)((0,s.a9)(t.consentDatabase.get(N.L)),(0,o.UI)((e=>(0,K.J)(t.consentRequired,e).isValid)));var t}),o.of);return(0,s.zG)((0,s.zG)((e=>{let{consentModule:t,tag:r}=e;const n=(0,B.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,a.UI)((e=>t.consentValidation(e.arguments[0])))(n)})(e),c),(0,o.UI)((e=>e?(0,n.F2)(!0):(0,n.t$)("No consent to run on the page"))))},Q=e=>(0,s.zG)((e=>"function"==typeof e.Map?(0,n.F2)(new e.Map([["a",1]])):(0,n.t$)("Maps not supported"))(e),n.tS((e=>1===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Maps not supported")))),H=e=>(0,s.zG)((e=>"function"==typeof e.Set?(0,n.F2)(new e.Set([1,2])):(0,n.t$)("Sets not supported"))(e),n.tS((e=>2===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Sets not supported")))),W=e=>(0,s.zG)((0,k.gz)(n.G5)(Q(e),H(e),(e=>e.Worker&&e.Blob?(0,n.F2)(null):(0,n.t$)("WebWorkers not supported"))(e)),(e=>(0,n.UI)(s.Q1)(e)));const V=()=>{const e=(0,r(3092).Z)(),t=(e=>{const t=[],r=[],n=()=>{for(;t.length>0&&r.length>0;)r.shift()()},s=e=>new Promise((t=>{r.push((()=>t(e()))),(0,_.HJ)(n)}));return e.addEventListener("message",(0,_.GL)((e=>{null!==e.data&&(t.push(e.data),(0,_.HJ)(n))}))),{next:()=>s((()=>t.shift())),read:()=>s((()=>t.splice(0)))}})(e);return e.postMessage(null),n=>function(e){let{worker:t,trace:n,metrics:i,...c}=e;return t.send({...c,globals:self._____workerGlobals,initialTimestampSecs:(0,s.zG)(a.lo(!1),a.UI((()=>Math.floor(Date.now()/1e3)))),metricsEnabled:i.isEnabled(),timeOriginMainContext:P()}),(0,s.zG)((0,_.SF)((()=>Promise.resolve().then(r.bind(r,7592)))),n.traceTask("import-master-low-priority"),o.UI((e=>r=>e.startMaster({...r,metrics:i,trace:n,worker:t}))))}({...n,worker:{...t,send:t=>e.postMessage(t),stop:()=>e.terminate()}})};var J=r(9134);class Z{db;options;constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?{...e,last_updated:new Date(e.last_updated)}:null}reset(){return this.db.delete(this.options.session_data_key)}async persistSessionData(e){const t=e.last_updated.toISOString();await this.db.put({...e,last_updated:t},this.options.session_data_key)}static generateNewSession(e){return{session_id:(0,G.k$)(),last_updated:e}}static hasExpired(e,t,r){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*r)}static async initialise(e,t,r){const n={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:r};e.deleteCookie(n.session_data_key);const i=new Date,o=await t.get(n.session_data_key).catch(s.gn),a=Z.decodeSessionData(o),c=null===a||Z.hasExpired(i,a.last_updated,n.timeout_seconds)?{...Z.generateNewSession(i),hasChanged:!0}:{...a,last_updated:i,hasChanged:!1},u=new Z(t,(0,G.PM)(n,c));return await u.persistSessionData(c),u}}var X=r(6688);const ee=e=>(0,s.zG)(i.Do,i.Qt("support",i.Uo(W(self))),i.Qt("partialTagWithKey",i.Uo((e=>{var t,r;const i="e488cdb0-e7cb-4d91-9648-60d437d8e491",o=void 0!==(null===(t=e[i])||void 0===t?void 0:t.q)&&void 0!==(null===(r=e[i])||void 0===r?void 0:r.config)?i:"permutive";return(0,s.zG)(e[o],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:o}))))})(window))),i.Qt("configFromQueryParams",i.Uo((0,L.B9)())),i.Hr("tag",(e=>((e,t)=>{let{tag:r,key:n}=e;return{...r,config:(0,L.ti)({...r.config,windowKey:n},t)}})(e.partialTagWithKey,e.configFromQueryParams))),i.UI((e=>{{const r=e.partialTagWithKey.key,n=window[r];t=n,window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{const e=googletag.pubads(),r=()=>{t.track("AdRequest",{ad_server_id:"dfp",cohorts:e.getTargeting("permutive")})},n=e.getSlots().filter((e=>e.getResponseInformation())).length;for(let e=0;e<n;e++)r();e.addEventListener("slotRequested",r)}))}var t;return e})),i.Hr("trace",(e=>{let{tag:t}=e;return new j(t.config)})),i.Hr("namespace",(e=>{let{tag:t}=e;return new O(t.config)})),i.Hr("logger",(e=>{let{tag:t}=e;return function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.RP;return e.loggingEnabled&&void 0!==(null===(t=self.console)||void 0===t?void 0:t.log)?new m(r):new v}(t.config)})),i.Hr("urls",(e=>{let{tag:t}=e;return new M(t.config)})),i.Hr("messages",(e=>{let{logger:t}=e;return new w(t)})),i.Hr("worker",(()=>V())),i.ak("consentModule",(e=>(0,s.zG)((()=>(0,$.NY)({...e,consentRequired:e.tag.config.consentRequired})),i.Vn((e=>e.message))))),i.Hr("cookieStore",(e=>{let{consentModule:t,logger:r,namespace:n,tag:i}=e;return((e,t,r,n)=>new((0,s.zG)(u,d({consentTracking:n,logger:r})))(e,t,r))(n,i.config,r,t.consentTracking)})),i.Hr("externalData",(e=>{let{consentModule:t,logger:r,namespace:n}=e;return((e,t,r)=>new((0,s.zG)(g,h({consentTracking:r,logger:t})))(e))(n,r,t.consentTracking)})),i.Hr("userId",(e=>{let{cookieStore:t,consentModule:r,externalData:n,tag:s}=e;return new R(s.config,t,n,r.consentTracking.consentRef)})),i.Hr("permutiveData",(e=>{let{tag:t,namespace:r,logger:n,consentModule:i}=e;return((e,t,r,n)=>new((0,s.zG)(z,D({consentTracking:n,logger:r})))(e,t,r))(t.config,r,n,i.consentTracking)})),i.Hr("metrics",(t=>{let{tag:r,logger:n,permutiveData:s}=t;return function(e,t,r,n,s){const i=n.getData("metricsEnabled")??(()=>{const e=Math.random()<=r.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})()?new I(e,t,s):new S;return i.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}}),i}(e.contextsInitTimestampPerformance,P(),r.config,s,n)})),i.Hr("pageviewState",(e=>{let{tag:t}=e;return(e=>{const t={viewId:(0,s.zG)(e.viewId,a.DT((e=>"string"==typeof e&&(0,G.Gz)(e))),a.fS(G.k$)),watsonEnabled:e.watson.enabled};return(0,s.zG)(T.Ue(t),(e=>{let[r,n]=e;return{ref:r,setState:(0,s.ls)((e=>e(r.current,t)),n)}}))})(t.config)})),(0,s.ls)(i.Hr("localStorage",(e=>{let{logger:t,namespace:r,consentModule:n}=e;return(0,J.E)(r,t,n.consentTracking.consentRef)})),i.ak("sessionManager",(e=>{let{cookieStore:t,localStorage:r,logger:n}=e;return i.Y3((()=>Z.initialise(t,r,n)),(e=>`Failed to initialise session manager: ${e.message}`))})),i.Hr("core",(t=>{let{consentModule:r,metrics:n,pageviewState:i,permutiveData:o,sessionManager:c,trace:u,tag:l,userId:d,worker:f}=t;const{eventSourceId:p,isFirstPageview:g}=(0,s.zG)(a.ij(o.getData("event-source-id")),a.hX(G.Gz),a.UI((e=>({eventSourceId:e,isFirstPageview:!1}))),a.fS((()=>{const e=(0,G.k$)();return o.setData("event-source-id",e),{eventSourceId:e,isFirstPageview:!0}})));return f({consent:r.consentTracking.consentRef.current,eventSourceId:p,isFirstPageview:g,isSecureContext:(h=l.config,"development"===h.environment?self.isSecureContext:"https:"===self.location.protocol),metrics:n,permutiveConfig:l.config,organizationId:"e488cdb0-e7cb-4d91-9648-60d437d8e491",pageviewState:i.ref.current,sdkInitTimestampPerformance:e.contextsInitTimestampPerformance,sdkInitTimestampDate:e.contextsInitTimestamp,sessionId:c.getSessionId(),trace:u,trackPageviewComplete:!0,userId:d.get(),userIdIsNewlyGenerated:d.isNewlyGenerated.current,webClient:(0,X.k)()});var h})),i.ak("consent",(e=>Y(e))),i.tS((e=>(0,s.zG)((0,_.SF)((()=>Promise.resolve().then(r.bind(r,9215)))),e.trace.traceTask("permutive.main.import_permutiveWebLowPriority"),o.tS((t=>t.initialiseWebSDK(e)))))))),te=e=>(e=>{e().then((0,n.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),s.Q1))})(ee(e))},7387:(e,t,r)=>{r.d(t,{Bf:()=>b,G6:()=>S,Gz:()=>y,HD:()=>d,HP:()=>q,Kn:()=>l,Or:()=>G,PM:()=>p,PQ:()=>E,Z_:()=>U,a4:()=>h,aT:()=>v,b2:()=>g,bw:()=>O,cO:()=>P,eu:()=>_,k$:()=>w,lW:()=>x,lo:()=>T,m8:()=>k,mQ:()=>C,qh:()=>f,rH:()=>M,rO:()=>D,vg:()=>z});var n=r(366),s=r(2275),i=r(9727),o=r(5586),a=r(8491),c=r(7029),u=r(3812);const l=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,d=e=>"string"==typeof e,f=e=>Object.entries(e);function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>({...e,...t})),{})}a.ff(c.xb);function g(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function h(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:o,exponentialBackOff:a,maxAttempts:c}=p(n,r);let l=0;const d=r=>new Promise((n=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>n((0,i.G)(e)))):(0,s.zG)(l++,(e=>e<c?(0,u.HJ)((()=>n(d(r*(a?2:1)))),r):n(i.YP)))))));return d(o)}function _(e,t){const r=Object.create(null);for(const n of t)r[n]=e[n];return r}let m=[];function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(m.unshift(e),m.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),s=e=>{if(!i&&e){i=!0;const e=m;m=[],e.forEach((e=>{try{e()}catch{}}))}};let i=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&I(t);s(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>s(!0)))}))}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={capture:!0,...t};const r=["visibilitychange","pagehide"];r.forEach((r=>window.addEventListener(r,(()=>i.Y3((()=>{"pagehide"!==r&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function w(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function y(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function k(){const e={},t=arguments.length;for(let r=0;r<t;r++){const[t,n]=r<0||arguments.length<=r?void 0:arguments[r];e[t]=n}return e}function I(e){return/Mobi|Android/i.test(e)}function S(e){return/^((?!chrome|android).)*safari/i.test(e)}function E(e,t){return new Promise((r=>{(0,u.HJ)((()=>{Promise.resolve(e()).then(r)}),(null==t?void 0:t.timeout)??0)}))}function P(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const G=()=>({equals:(e,t)=>Object.is(e,t)});function x(e){return(0,o.Zt)(((t,r)=>{const n=e.indexOf(t),s=e.indexOf(r);switch(!0){case-1===n&&-1===s:return 0;case-1!==n&&-1===s:return-1;case-1===n&&-1!==s:return 1;default:return n<=s?-1:1}}))}function U(e,t,r){return function(){try{return r(...arguments)}catch(r){e.reportError(r,t.get())}}}function z(e){return t=>null!=t&&e in t?t[e]:void 0}function q(e){let t=i.YP;const r=(0,i.fS)((()=>{const r=e();return t=(0,i.G)(r),r}));return()=>r(t)}const C=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},D=e=>t=>{const r={...t};for(const s in e){var n;r[s]=null===(n=e[s])||void 0===n?void 0:n.call(e,t[s])}return r};function O(e){return t=>(e(t),t)}const T=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,s.zG)(r,n.f2((e=>{let[r,n]=e;return(0,s.zG)(t,i.DT(r),i.UI(n))})),i.fS((()=>o(t))))},R=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}},M=R(parseInt);R(parseFloat)},731:(e,t,r)=>{r.d(t,{b:()=>i});var n=r(7387),s=r(3812);class i{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,n.aT)(e)}debounce(e,t,r,i){let o,a,c,u=[];return l=>{i&&(c=i.concat(c??i.empty,l));const d=(0,n.b2)();u.push(d);var f;return null===(f=o)||void 0===f||f(),o=(0,s.HJ)((()=>{var t;null===(t=a)||void 0===t||t(),a=void 0;const r=e(c||l);u.forEach((e=>e.resolve(r))),c=null==i?void 0:i.empty,u=[]}),t),a||(a=(0,s.HJ)((()=>{var t;null===(t=o)||void 0===t||t(),a=void 0;const r=e(c||l);u.forEach((e=>e.resolve(r))),c=null==i?void 0:i.empty,u=[]}),r)),d.promise}}}},5365:(e,t,r)=>{r.d(t,{i:()=>s});var n=r(3812);class s{messages;queue=[];nextNotify=null;constructor(e){this.messages=e,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,n.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,r=0;for(let n=0;n<this.queue.length;n++){const s=this.queue[n];if(s.complete)r+=1;else if(s.started)t=!0,e=e||s.blocks();else{if(s.waits()&&t)break;e||(t=!0,e=e||s.blocks(),s.execute((()=>{this.notify()})))}}this.queue.splice(0,r)}size(){return this.queue.length}}},4513:(e,t,r)=>{r.d(t,{_Y:()=>o,bk:()=>i,zM:()=>s});var n=r(2275);const s=()=>{var e,t;const r=null===(e=window.location.href.split("?")[1])||void 0===e||null===(t=e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===r?{}:r.reduce(((e,t)=>{const[r,n]=t.split("=");return{...e,[r]:n}}),{})},i=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function o(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),r=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if(r&&r.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:n&&(null==n?void 0:n.length)>0?"localhost":""}},9082:(e,t,r)=>{r(3636),r(7387),r(3812)},6707:(e,t,r)=>{r.d(t,{$7:()=>_,Cg:()=>p,Qd:()=>h,cs:()=>g,dN:()=>d,zi:()=>f});var n=r(1385),s=r(2275),i=r(9727),o=r(1583),a=r(936),c=r(5460),u=r(7387);const l="[PrebidJS]";function d(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(l,"Found keys",t);return a.K4((()=>(0,s.zG)(t,o.UI((0,s.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let r;return{windowPropertyKey:e,pbjs:(0,u.a4)((()=>r),(()=>{const t=(0,s.zG)(window,(0,u.vg)(e));return!(null==t||!t.que||"function"!=typeof(null==t?void 0:t.getEvents)||(r=t,0))}),t)}})(e)),(t=>(0,s.zG)(c.p4(t.pbjs),c.UI((r=>{const o=n.pF((r=>(r.message=`Failed to resolve key "${t.windowPropertyKey}". ${r.message}`,e.reportError(`${l} ${r.toString()}`),i.YP)));return(0,s.zG)(r,(0,u.bw)(i.UI((r=>e.logger.debug(l,`Completed check for key "${t.windowPropertyKey}"`,{result:r})))),i.UI(o),i.UI(i.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>c.vP(...e)),c.UI((e=>({completedChecks:e.every(i.pC),pbjsKeyPairs:e.map(i.xH)}))),c.UI((e=>{let{pbjsKeyPairs:t,completedChecks:r}=e;const n=t.filter(i.pC),[a,...c]=n;return{completedChecks:r,mainPair:a??i.YP,otherPairs:(0,s.zG)(c,o.DZ(s.yR))}})))))}const f=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();function p(e){var t;const r=null===(t=e.meta)||void 0===t?void 0:t.advertiserDomains;if("string"==typeof r)return[r];if(Array.isArray(r)){const e=r.filter((e=>"string"==typeof e));return e.length>0?e:void 0}}const g=e=>{var t;const r=e.appnexus&&"object"==typeof e.appnexus&&"buyerMemberId"in e.appnexus&&e.appnexus.buyerMemberId,n=e.rubicon&&"object"==typeof e.rubicon&&"networkId"in e.rubicon&&e.rubicon.networkId,s=r||n||(null==e||null===(t=e.meta)||void 0===t?void 0:t.networkId);return s?`${s}`:void 0},h=e=>{const t=e=>isNaN(e)?void 0:e;try{return"number"==typeof e.cpm?t(e.cpm):(0,s.zG)(e.cpm??"",parseFloat,t)}catch{return}},_=e=>e.dealId?`${e.dealId}`:void 0},8672:(e,t,r)=>{r.d(t,{X:()=>n});const n=e=>{let t=!0;const r=[];return{addBlocker:n=>{r.push(n),e.logger.log("<blockers> added blocker "+n),e.messages.on(n,(()=>{if(t){const s=r.indexOf(n);s>=0&&(r.splice(s,1),e.logger.log("<blockers> removed blocker "+n)),0===r.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},1555:(e,t,r)=>{r.d(t,{X:()=>s});var n=r(5460);class s{ref;setCustomProps;constructor(){const[e,t]=n.Ue({});this.ref=e,this.setCustomProps=t}getCustomProps(){return this.ref.current}}},3194:(e,t,r)=>{r.r(t),r.d(t,{EventsCache:()=>k,RESET_HISTORICAL:()=>b});var n=r(2865),s=r(2925),i=r(1583),o=r(1385),a=r(2275),c=r(9727),u=r(1717),l=r(9246);const d=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),f=e=>({id:e.id,name:e.name,time:(p(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),p=e=>isFinite(e)&&e instanceof Date;var g=r(7387),h=r(731);class _ extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const m="permutive-events-cache",v="permutive-events-for-page",b="historical",w="[EVENTSCACHE]",y=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class k{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=this.makeEventsRepository(m);eventsForPage=this.makeEventsRepository(v);eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new h.b(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,r,n,s,i,o){return(0,a.zG)(o(),l.UI((a=>new k(e,t,r,n,s,i,o,a))))}constructor(e,t,r,n,s,i,o,l){this.config=e,this.logger=t,this.reportError=r,this.trace=n,this.metrics=s,this.userId=i,this.makeEventsStore=o,this.eventStore=l,this.eventsTTLInMilliseconds=(0,a.zG)((0,c.ij)(this.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventsCache.events=(0,g.HP)((()=>(0,g.PQ)((0,a.zG)(u.tD((()=>this.trace.startSpan("load_event_cache"))),u.tS((e=>(0,a.zG)(this.loadFromDisk(),u.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),i.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,u.pE)((e=>(0,l.Y3)((()=>e.flush()),n.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,u.UI)((t=>{const r=i.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\n${r.join("\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(i.xH)}async add(e,t){let{persistOnDisk:r}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,a.zG)(this.eventsForPage.events,u.UI((t=>[...t,e])),g.HP),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,s=[...e];for(;t>r;)s.splice(0,n),n*=2,t=2*JSON.stringify(s).length;return this.logDebug("Events after pruning",{count:s.length,sizeInBytes:t}),{events:s,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,a.zG)(this.eventsTTLInMilliseconds,c.EQ((()=>a.yR),(e=>i.hX((t=>e>Date.now()-t.time.getTime())))));return(0,a.zG)(u.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),u.YO("loadEventsCacheTask"),u.ak("eventsFromDisk",(()=>(0,a.zG)(i.nI([this.eventStore.get(m),this.eventStore.get(v)]),i.UI(l.LV((0,g.lo)([[e=>e instanceof _,(0,a.ls)(e,u.of)],t=>(0,a.zG)(u.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),u.tS((()=>()=>this.reset("historical"))),u.UI(e))]),(0,a.ls)(c.fS(e),u.of))),i.vP(u.qA)))),u.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),u.UI((0,a.ls)((0,g.vg)("eventsFromDisk"),i.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),i.UI(d),t)))}async reset(e){return(0,a.zG)(u.tD((()=>this.logDebug("Resetting Events Cache"))),u.tS((()=>this.eventStore.deleteStore())),l.tS((()=>this.makeEventsStore())),l.Zl((t=>(this.eventStore=t,e===b?s.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.flush):s.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),l.wE((()=>()=>this.all())),l.fS((()=>u.of(I()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(o.F2((0,a.Q1)()));return t=>e=e.then(t)})(),r=e=>(0,a.zG)(u.tD((()=>this.logDebug(`Writing ${e.length} events to ${m.key}`))),u.tS((()=>this.eventStore.put(e.map(f),m.key))),l.UI(a.Q1)),s=(0,a.zG)(u.tD((()=>this.logDebug(`Deleting events for ${m.key}`))),u.tS((()=>this.eventStore.delete(m.key))),l.Vn(n.w)),i=(0,a.ls)(u.of,u.At((e=>()=>this.logError(`Events cache failed to put ${m.key}. Got ${e}`))),u.tS((0,g.lo)([[e=>y(e)&&m.retryAttempts<9,()=>(0,a.zG)(u.tD((()=>{m.retryAttempts+=1,this.logDebug(`Attempt #${m.retryAttempts} to write ${m.key} to EventsStore`)})),u.tS((()=>_)),u.tS((()=>d)))],[e=>y(e),e=>(0,a.zG)(u.tD((()=>this.logDebug(`Attempted ${m.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),u.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${m.key}. Got ${e}`,userId:this.userId.current}))),u.tS((()=>l.t$(e))))],l.t$]))),c=e=>l.tD((()=>{this.logDebug(`Successfully wrote events for ${m.key} after ${m.retryAttempts} attempts`),m.retryAttempts=0,m.sizeInBytes=2*JSON.stringify(e).length,m.sizeInBytesLastSuccessfulWrite=m.sizeInBytes})),d=(0,a.zG)((()=>m.events()),u.tS((e=>(0,a.zG)(r(e),u.mU(o.EQ(i,(()=>c(e)))))))),p=(e,t)=>(0,a.zG)(e.events,u.UI((r=>{const n=2*JSON.stringify(r).length,s=this.pruneEventsToSizeLimit(r,n,t);return e.events=u.of(s.events),e.sizeInBytes=s.sizeInBytes,t-e.sizeInBytes}))),h=(e,t)=>{let[r,...n]=e;return r&&0!==t?(0,a.zG)(p(r,t),u.tS((e=>(this.logDebug(`${e} left after pruning ${r.key}`),h(n,e))))):u.of((0,a.Q1)())},_=(0,a.zG)(l.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),l.fX(o.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),l.tS((e=>{const t=1.2*e,r=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,r),(0,a.zG)(h(r,t),l.fF)}))),m={key:e,events:u.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,a.zG)(u.tD((()=>this.trace.startSpan(`write_${m.key}`))),u.tS((e=>(0,a.zG)(d,u.At((()=>()=>e.finish()))))),t),reset:()=>(0,a.zG)(u.tD((()=>{m.events=u.of([]),m.sizeInBytes=0,m.sizeInBytesLastSuccessfulWrite=0})),u.tS((()=>s)),t)};return m}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(w,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(w,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(w,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(w,...t)}}const I=()=>[]},8949:(e,t,r)=>{r.r(t),r.d(t,{DBStore:()=>o});var n=r(2865),s=r(9727),i=r(9246);class o{db;constructor(e){this.db=Promise.resolve(e)}put(e,t){return(0,i.Y3)((()=>this.db.then((r=>r.put(e,t)))),n.w)}get(e){return(0,i.Y3)((()=>this.db.then((t=>t.get(e))).then(s.ij)),n.w)}delete(e){return(0,i.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,i.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}},8:(e,t,r)=>{r(7387)},1948:(e,t,r)=>{r(3812)},4453:(e,t,r)=>{r.r(t),r.d(t,{PrebidAddon:()=>b,load:()=>v});var n=r(3636),s=r(366),i=r(1385),o=r(2275),a=r(9727),c=r(5460),u=r(7387),l=r(6707);const d="prebidAddonLoadingtime",f="prebidAddonInitStart",p="prebidAddonInitEnd",g=(0,n.Hn)("prebid")("revenue_insights_enabled",!1);class h{logger;options;permutive;trackedBids=[];constructor(e){this.logger=e.logger,this.permutive=e.permutive,this.options=e,this.startRevenueInsights()}async startRevenueInsights(){if(this.logger.debug("[Revenue Insights]","revenue insights enabled",g),!1===g)return;performance.mark(f);const e={maxAttempts:200,waitTimeInMs:50};(0,o.zG)(this.options.pbjs,c.UI(a.UI((t=>(0,u.a4)((()=>this.runRevenueInsights(t)),(()=>{var e;return!(null===(e=window.googletag)||void 0===e||!e.pubads)}),e)))))}runRevenueInsights(e){this.trackMetrics();const t=()=>{e.getAllWinningBids().forEach((e=>r(e,!0))),e.onEvent("bidWon",(e=>r(e,!0)))},r=(e,t)=>(0,i.Y3)((()=>d(e,t)),(e=>{})),n=e=>{var t,r,n,s,i;const o=(null==e||null===(t=e.meta)||void 0===t?void 0:t.brandName)||(null==e||null===(r=e.meta)||void 0===r?void 0:r.clickUrl)||(null==e||null===(n=e.adomain)||void 0===n?void 0:n[0])||(null==e||null===(s=e.meta)||void 0===s?void 0:s.advertiserName)||((0,l.Cg)(e)??[])[0]||(null==e||null===(i=e.adserverTargeting)||void 0===i?void 0:i.hb_adomain);return o?`${o}`:void 0},o=e=>{var t,r,n;const s=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||(null==e||null===(t=e.meta)||void 0===t?void 0:t.brandId)||(null==e||null===(r=e.meta)||void 0===r?void 0:r.buyerId)||(null==e||null===(n=e.meta)||void 0===n?void 0:n.advertiserId);return s?`${s}`:void 0},a={equals:(e,t)=>e.ad_unit_code===t.ad_unit_code&&e.ad_id===t.ad_id&&e.auction_id===t.auction_id&&e.winning_bid===t.winning_bid},c=e=>!(0,s.t9)(a)(e,this.trackedBids),d=(t,r)=>{const s=(0,l.zi)(e),i=((e,t,r)=>({ad_id:e.adId??"",ad_unit_code:e.adUnitCode??"",bidder:e.bidder,bidder_timeout:r,deal_id:(0,l.$7)(e),cpm:(0,l.Qd)(e),hb_pb:e.adserverTargeting&&e.adserverTargeting.hb_pb,height:(0,u.rH)(e.height),width:(0,u.rH)(e.width),time_to_respond:e.timeToRespond,bid_available:"string"==typeof e.statusMessage&&e.statusMessage.indexOf("empty")<0,winning_bid:t,advertiser_id:o(e),advertiser_name:n(e),dsp_id:(0,l.cs)(e),auction_id:e.auctionId}))(t,r,(0,u.rH)(s.bidderTimeout));c(i)&&(i.cpm&&i.cpm>0&&r&&this.permutive.track("PrebidBid",i),this.updateTrackedBids(i))};e.que.push((()=>{window.googletag.cmd.push(t)}))}trackMetrics(){performance.mark(p),performance.measure(d,f,p);const e=performance.getEntriesByName(d)[0].duration;this.options.metrics.track({name:"sdk_addon_init_duration_seconds",value:e,labels:{addon:"prebid"}})}updateTrackedBids(e){const t=this.trackedBids.findIndex((t=>e.ad_id===t.ad_id&&e.winning_bid!==t.winning_bid));t>-1?this.trackedBids[t]={...this.trackedBids[t],...e}:this.trackedBids.push(e)}}const _="prebid",m=(0,n.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),v=e=>{(0,n.Hn)(_)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[_,{}]})};class b extends h{externalData;dataProviderParamsFromIntegrationConfig={};constructor(e){super(e),this.externalData=e.externalData,this.parsePrebidConfig()}getPermutiveRtdConfig(){return this.logDebug("RTD config retrieved",this.dataProviderParamsFromIntegrationConfig),this.dataProviderParamsFromIntegrationConfig}storeAndSetPermutiveRtdConfig(e){this.externalData.setExternalJsonData("permutive-prebid-rtd",e),this.dataProviderParamsFromIntegrationConfig=e}parsePrebidConfig(){this.logDebug("data provider config",m);const{ac_bidders:e}=m;this.storeAndSetPermutiveRtdConfig({acBidders:e})}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log("[prebid]",...t)}}},2831:(e,t,r)=>{r.r(t),r.d(t,{eventCacheService:()=>u,eventNameBlacklist:()=>l});var n=r(5460),s=r(936),i=r(2444),o=r(2275),a=r(1583),c=r(7387);const u=e=>s.K4((()=>({newEvents:(0,o.zG)(e.newEvents,n.UI(i.UI((0,c.bw)(a.UI((t=>{let[,r]=t;l.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))),l=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"])},1001:(e,t,r)=>{r.d(t,{Kd:()=>s,eJ:()=>i});r(3636);var n=r(936);r(5460),r(7387);const s="addon:twitter_pixel",i=function(e){return n.K4((()=>{}))}},2925:(e,t,r)=>{r.d(t,{Qt:()=>o,Yt:()=>d,ap:()=>i,gz:()=>l});var n=r(2275),s=r(7963);function i(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function a(e,t,r){return function(n){for(var s=Array(r.length+1),i=0;i<r.length;i++)s[i]=r[i];return s[r.length]=n,0===t?e.apply(null,s):a(e,t-1,s)}}var c={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(s){return[e,t,r,n,s]}}}}}};function u(e){return s.e$.call(c,e)||(c[e]=a(n.bc,e-1,[])),c[e]}function l(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,s=u(n),i=e.map(t[0],s),o=1;o<n;o++)i=e.ap(i,t[o]);return i}}function d(e){return function(t){for(var r=Object.keys(t),n=r.length,s=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var s;return(s={})[e[0]]=t,s[e[1]]=r,s[e[2]]=n,s}}};case 4:return function(t){return function(r){return function(n){return function(s){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i[e[3]]=s,i}}}};case 5:return function(t){return function(r){return function(n){return function(s){return function(i){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=s,o[e[4]]=i,o}}}}};default:return a((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var s={},i=0;i<t;i++)s[e[i]]=r[i];return s}),t-1,[])}}(r),i=e.map(t[r[0]],s),o=1;o<n;o++)i=e.ap(i,t[r[o]]);return i}}},366:(e,t,r)=>{r.d(t,{oA:()=>w,t9:()=>p,DZ:()=>b,Ew:()=>u,f2:()=>l,xH:()=>m,jV:()=>g,uK:()=>y,tV:()=>I,u4:()=>E,DY:()=>f});var n=r(2275),s=(r(7560),r(7963)),i=r(817);s.r1;var o=function(e){return[e]};i.xP,i.Lx,i.u4,i.OE,i.nq,i.iw,i.YM,i.ZN,i.Eh,s.F4,i.YM,i.Z$,i.VV,i.Fp,i.j0;i.ur;var a=r(1583),c=r(4219);r(6511);a.P5,a.YM,a.Z$;a.cx;function u(e){return a.Ew(e)}var l=a.f2;a.JO,a.qr;var d=function(e){return e.slice()},f=function(e){return function(t){return t.length<=1?d(t):t.slice().sort(e.compare)}};var p=a.t9;function g(e){var t=p(e);return function(r,n){if(void 0===n){var s=g(e);return function(e){return s(e,r)}}return r.filter((function(e){return t(e,n)}))}}a.kp,a.Eq;var h=o,_=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},m=_(n.yR),v=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);s.pC(i)&&r.push(i.value)}return r}},b=function(e){return v((function(t,r){return e(r)}))},w=b(n.yR),y=function(e){return k((function(t,r){return e(r)}))},k=function(e){return function(t){for(var r=[],n=[],s=0;s<t.length;s++){var i=t[s];e(s,i)?n.push(i):r.push(i)}return(0,c.s4)(r,n)}},I=function(e){return S((function(t,r){return e(r)}))},S=function(e){return function(t){for(var r=[],n=[],s=0;s<t.length;s++){var i=e(s,t[s]);"Left"===i._tag?r.push(i.left):n.push(i.right)}return(0,c.s4)(r,n)}},E=(a.Lx,a.xP,a.u4);a.OE,a.nq,a.iw,a.ZN,a.Eh,a.pR,a.pJ,a.oR,a.yW,a.j0,s.F4},8543:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function s(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>s,m:()=>n})},1385:(e,t,r)=>{r.d(t,{G5:()=>m,dO:()=>g,Pd:()=>y,ak:()=>$,tS:()=>b,Y$:()=>D,g_:()=>z,ij:()=>R,Yo:()=>E,DT:()=>S,fS:()=>C,pF:()=>q,nM:()=>P,t$:()=>a,UI:()=>p,Vn:()=>k,EQ:()=>U,vx:()=>T,F2:()=>c,LF:()=>O,KC:()=>L,i$:()=>j,Y3:()=>M,it:()=>A});var n=r(8543),s=r(5162),i=r(2275),o=(r(7560),r(7963)),a=o.t$,c=o.F2,u=function(e,t){return(0,i.zG)(e,p(t))},l=function(e,t){return(0,i.zG)(e,_(t))},d=function(e,t){return(0,i.zG)(e,b(t))},f="Either",p=function(e){return function(t){return P(t)?t:c(e(t.right))}},g={URI:f,map:u},h=c,_=function(e){return function(t){return P(t)?t:P(e)?e:c(t.right(e.right))}},m={URI:f,map:u,ap:l},v=function(e){return function(t){return P(t)?t:e(t.right)}},b=v,w={URI:f,map:u,ap:l,chain:d},y=function(e,t){return function(r){return P(r)?a(e(r.left)):c(t(r.right))}},k=function(e){return function(t){return P(t)?a(e(t.left)):t}},I={URI:f,fromEither:i.yR},S=(0,s.DT)(I),E=(0,s.Yo)(I),P=o.nM,G=(o.tO,function(e,t){return function(r){return P(r)?e(r.left):t(r.right)}}),x=G,U=G,z=U,q=function(e){return function(t){return P(t)?e(t.left):t.right}},C=q,D=(0,s.Y$)(I,w),O=function(e){return P(e)?c(e.left):a(e.right)},T=function(e){return function(t){return P(t)?e(t.left):t}},R=function(e){return function(t){return null==t?a(e):c(t)}},M=function(e,t){try{return c(e())}catch(e){return a(t(e))}},A=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return M((function(){return e.apply(void 0,r)}),t)}},j=x(i.yR,i.yR);function L(e){return e instanceof Error?e:new Error(String(e))}o.F4;var $=(0,n.a)(w);o.Xl},1890:(e,t,r)=>{r.d(t,{EQ:()=>w,F2:()=>a,KQ:()=>f,LF:()=>P,LU:()=>E,LV:()=>y,NG:()=>p,Pd:()=>v,UI:()=>g,Vn:()=>b,ap:()=>h,dQ:()=>S,fS:()=>k,i$:()=>G,ij:()=>d,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>_,vx:()=>I,wp:()=>m});var n=r(2925),s=r(1385),i=r(2275),o=r(7560);function a(e){return(0,i.ls)(s.F2,e.of)}function c(e){return(0,i.ls)(s.t$,e.of)}function u(e){return function(t){return e.map(t,s.F2)}}function l(e){return function(t){return e.map(t,s.t$)}}function d(e){return function(t){return(0,i.ls)(s.ij(t),e.of)}}function f(e){var t=d(e);return function(e){var r=t(e);return function(e){return(0,i.ls)(e,r)}}}function p(e){var t=_(e),r=f(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function g(e){return(0,o.UI)(e,s.dO)}function h(e){return(0,n.ap)(e,s.G5)}function _(e){return function(t){return function(r){return e.chain(r,(function(r){return s.nM(r)?e.of(r):t(r.right)}))}}}function m(e){return function(t){return function(r){return e.chain(r,(function(r){return s.nM(r)?t():e.of(r)}))}}}function v(e){return function(t,r){return function(n){return e.map(n,s.Pd(t,r))}}}function b(e){return function(t){return function(r){return e.map(r,s.Vn(t))}}}function w(e){return function(t,r){return function(n){return e.map(n,s.EQ(t,r))}}}function y(e){return function(t,r){return function(n){return e.chain(n,s.EQ(t,r))}}}function k(e){return function(t){return function(r){return e.chain(r,s.EQ(t,e.of))}}}function I(e){return function(t){return function(r){return e.chain(r,(function(r){return s.nM(r)?t(r.left):e.of(r)}))}}}function S(e){var t=I(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return s.nM(e)?e:s.t$(t)}))}))}}function E(e){return function(t){return function(r){return e.chain(r,s.EQ((function(r){return e.map(t(r),s.t$)}),(function(t){return e.of(s.F2(t))})))}}}function P(e){return function(t){return e.map(t,s.LF)}}function G(e){return function(t){return e.map(t,s.i$)}}},5191:(e,t,r)=>{r.d(t,{f7:()=>n,n_:()=>s,w4:()=>i});r(2275);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},s=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},i={equals:function(e,t){return e===t}};i.equals},5162:(e,t,r)=>{r.d(t,{DT:()=>o,Y$:()=>u,Yo:()=>i,fX:()=>c});var n=r(2275),s=r(7963);function i(e){return function(t){return function(r){return e.fromEither(s.Wi(r)?s.t$(t()):s.F2(r.value))}}}function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?s.F2(n):s.t$(r(n)))}}}function a(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function c(e,t){var r=a(e);return function(e){return function(n){return t.chain(n,r(e))}}}function u(e,t){return function(r,n){return function(i){return t.chain(i,(function(t){return e.fromEither(r(t)?s.F2(t):s.t$(n(t)))}))}}}},7560:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function s(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function i(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>i,UI:()=>n,YO:()=>s})},2444:(e,t,r)=>{r.d(t,{G5:()=>l,RD:()=>g,UI:()=>a,of:()=>c});var n=r(2275),s=(r(7560),r(7963)),i=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},a=function(e){return function(t){return i(t,e)}},c=n.a9,u="IO",l={URI:u,map:i,ap:o},d=(n.yR,n.yR,s.F4,c(s.Xl)),f=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,s.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return s.Od(e)?t(e):d}},p=function(e){return f((function(t,r){return e(r)}))},g=p(n.yR)},9727:(e,t,r)=>{r.d(t,{G5:()=>G,Ri:()=>R,xu:()=>$,dO:()=>S,wp:()=>z,tS:()=>x,mU:()=>V,hX:()=>M,DZ:()=>A,xH:()=>W,g_:()=>Q,Uo:()=>B,ij:()=>J,KQ:()=>ee,DT:()=>d,Eh:()=>k,IS:()=>f,fS:()=>H,EK:()=>p,lo:()=>C,Wi:()=>N,pC:()=>F,UI:()=>I,EQ:()=>Y,aD:()=>K,YP:()=>u,of:()=>E,RD:()=>se,G:()=>l,FS:()=>te,Y3:()=>Z,it:()=>X,bM:()=>q});var n=r(8543),s=r(2275),i=(r(7560),r(7963)),o=r(8491),a=r(4219);r(6511);function c(e,t){return function(r){return r?t.of(void 0):e.zero()}}var u=i.YP,l=i.G;function d(e){return function(t){return e(t)?l(t):u}}var f=function(e){return"Right"===e._tag?u:l(e.left)},p=function(e){return"Left"===e._tag?u:l(e.right)},g=function(e,t){return(0,s.zG)(e,I(t))},h=function(e,t){return(0,s.zG)(e,P(t))},_=function(e,t){return(0,s.zG)(e,x(t))},m=function(e,t){return(0,s.zG)(e,M(t))},v=function(e,t){return(0,s.zG)(e,A(t))},b=function(e,t){return(0,s.zG)(e,j(t))},w=function(e,t){return(0,s.zG)(e,L(t))},y="Option",k=function(e){return{equals:function(t,r){return t===r||(N(t)?N(r):!N(r)&&e.equals(t.value,r.value))}}},I=function(e){return function(t){return N(t)?u:l(e(t.value))}},S={URI:y,map:g},E=l,P=function(e){return function(t){return N(t)||N(e)?u:l(t.value(e.value))}},G={URI:y,map:g,ap:h},x=function(e){return function(t){return N(t)?u:e(t.value)}},U={URI:y,map:g,ap:h,chain:_},z=function(e){return function(t){return N(t)?e():t}},q=function(){return u},C=c({URI:y,zero:q},{URI:y,of:E}),D=x(s.yR),O=(0,a.s4)(u,u),T=function(e){return N(e)?O:(0,a.s4)(f(e.value),p(e.value))},R={URI:y,compact:D,separate:T},M=function(e){return function(t){return N(t)?u:e(t.value)?t:u}},A=function(e){return function(t){return N(t)?u:e(t.value)}},j=function(e){return function(t){return(0,a.s4)(m(t,(0,o.ff)(e)),m(t,e))}},L=function(e){return(0,s.ls)(I(e),T)},$={URI:y,map:g,compact:D,separate:T,filter:m,filterMap:v,partition:b,partitionMap:w},B=p,F=i.pC,N=function(e){return"None"===e._tag},K=function(e,t){return function(r){return N(r)?e():t(r.value)}},Y=K,Q=Y,H=function(e){return function(t){return N(t)?e():t.value}},W=D,V=(0,n.m)(U),J=function(e){return null==e?u:l(e)},Z=function(e){try{return l(e())}catch(e){return u}},X=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Z((function(){return e.apply(void 0,t)}))}},ee=function(e){return(0,s.ls)(e,J)},te=Y(s.r5,s.yR);i.F4;var re=E(i.Xl),ne=function(e){var t=function(e){return function(t){var r=e(0,i.YM(t));if(N(r))return u;for(var n=[r.value],s=1;s<t.length;s++){var o=e(s,t[s]);if(N(o))return u;n.push(o.value)}return l(n)}}(e);return function(e){return i.Od(e)?t(e):re}},se=function(e){return ne((function(t,r){return e(r)}))}(s.yR)},5586:(e,t,r)=>{r.d(t,{Fp:()=>c,VV:()=>a,Zt:()=>o,uZ:()=>u});var n=r(5191),s=r(2275),i=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:i(e),compare:function(t,r){return t===r?0:e(t,r)}}},a=(s.W8,function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}}),c=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}},u=function(e){var t=a(e),r=c(e);return function(e,n){return function(s){return r(t(s,n),e)}}};n.w4.equals},8491:(e,t,r)=>{r.d(t,{ff:()=>n});r(2275);var n=function(e){return function(t){return!e(t)}}},1583:(e,t,r)=>{r.d(t,{$R:()=>G,DZ:()=>F,EQ:()=>h,Eh:()=>ne,Eq:()=>D,Ew:()=>y,G:()=>de,Hr:()=>ge,JO:()=>I,Lx:()=>W,OE:()=>V,Od:()=>p,P5:()=>m,Su:()=>j,UI:()=>A,YM:()=>v,YO:()=>pe,Z$:()=>b,ZN:()=>te,bM:()=>T,bj:()=>P,cS:()=>ue,cx:()=>w,f2:()=>k,hX:()=>$,hp:()=>E,iw:()=>Z,j0:()=>fe,kp:()=>C,nI:()=>ce,nq:()=>J,oA:()=>N,oR:()=>ae,of:()=>O,oh:()=>L,pJ:()=>oe,pR:()=>se,qr:()=>S,t9:()=>x,tS:()=>R,u4:()=>H,uK:()=>K,uZ:()=>re,vP:()=>X,xH:()=>M,xP:()=>Q,xb:()=>f,yW:()=>le,zo:()=>U});var n=r(5191),s=r(2275),i=r(7560),o=r(7963),a=r(6627),c=r(5586),u=r(817),l=r(4219),d=(r(6511),function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}),f=function(e){return 0===e.length},p=u.Od,g=(u.Ce,u.ws,u.R3);u.Im;var h=function(e,t){return function(r){return p(r)?t(r):e()}},_=u.dC;function m(e,t){return void 0===t?function(t){return m(e,t)}:_(e,t)?o.YP:o.G(t[e])}var v=function(e){return p(e)?o.G(u.YM(e)):o.YP},b=function(e){return p(e)?o.G(u.Z$(e)):o.YP};var w=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function y(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var k=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var I=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},S=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},E=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Right"===n._tag&&t.push(n.right)}return t},P=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};function G(e,t){return void 0===t?function(t){return G(t,e)}:function(e,t,r){for(var n=[],s=Math.min(e.length,t.length),i=0;i<s;i++)n[i]=r(e[i],t[i]);return n}(e,t,(function(e,t){return[e,t]}))}function x(e){return function(t,r){if(void 0===r){var n=x(e);return function(e){return n(t,e)}}for(var s,i=0;i<r.length;i++)if(s=r[i],e.equals(s,t))return!0;return!1}}var U=function(e){return function(t){return f(t)?e:f(e)?t:t.concat(e)}};var z=function(e,t){return(0,s.zG)(e,A(t))},q=function(e,t,r){return(0,s.zG)(e,H(t,r))},C=function(e,t){return(0,s.zG)(e,oe(t))},D=function(e,t){return(0,s.zG)(e,ae(t))},O=u.of,T=function(){return ue},R=function(e){return function(t){return(0,s.zG)(t,function(e){return function(t){if(f(t))return ue;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},M=R(s.yR),A=function(e){return function(t){return t.map((function(t){return e(t)}))}},j=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},L=function(e){for(var t=[],r=[],n=0,s=e;n<s.length;n++){var i=s[n];"Left"===i._tag?t.push(i.left):r.push(i.right)}return(0,l.s4)(t,r)},$=function(e){return function(t){return t.filter(e)}},B=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var s=e(n,t[n]);o.pC(s)&&r.push(s.value)}return r}},F=function(e){return B((function(t,r){return e(r)}))},N=F(s.yR),K=function(e){return Y((function(t,r){return e(r)}))},Y=function(e){return function(t){for(var r=[],n=[],s=0;s<t.length;s++){var i=t[s];e(s,i)?n.push(i):r.push(i)}return(0,l.s4)(r,n)}},Q=function(e){return function(t){return function(r){return r.reduce((function(r,n,s){return e.concat(r,t(s,n))}),e.empty)}}},H=function(e,t){return V(e,(function(e,r,n){return t(r,n)}))},W=function(e){var t=Q(e);return function(e){return t((function(t,r){return e(r)}))}},V=function(e,t){return function(r){for(var n=r.length,s=e,i=0;i<n;i++)s=t(i,s,r[i]);return s}},J=function(e,t){return Z(e,(function(e,r,n){return t(r,n)}))},Z=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},X=function(e){return function(t){return q(t,e.of(T()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,s.zG)(e,g(t))}})),r)}))}},ee="ReadonlyArray",te=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},re=function(){return{concat:function(e,t){return f(e)?t:f(t)?e:e.concat(t)},empty:ue}},ne=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},se=function(e){return(0,c.Zt)((function(t,r){for(var n=t.length,s=r.length,i=Math.min(n,s),o=0;o<i;o++){var c=e.compare(t[o],r[o]);if(0!==c)return c}return a.Df.compare(n,s)}))},ie={URI:ee,map:z},oe=function(e){return function(t){for(var r=d([],e(t),!0),n=[];r.length>0;){var s=r.shift();o.nM(s)?r.unshift.apply(r,e(s.left)):n.push(s.right)}return n}},ae=function(e){return function(t){var r=e(t),n=[],s=[];function i(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):s.push(t.right)}for(var a=0,c=r;a<c.length;a++){i(c[a])}for(;n.length>0;)i(n.shift());return s}},ce=(u.oo,function(e){return f(e)?ue:e.slice()}),ue=u.cS;function le(e){return function(t){return t.every(e)}}var de=function(e){return function(t){return t.some(e)}},fe=function(e){var t=u.j0(e);return function(r){return h((function(){return e.empty}),t(r))}},pe=(o.F4,(0,i.YO)(ie)),ge=(0,i.Hr)(ie);u.w6,u.QI,u.Ss},817:(e,t,r)=>{r.d(t,{R3:()=>m,Im:()=>_,ur:()=>B,QI:()=>N,cS:()=>d,Lx:()=>U,xP:()=>C,c2:()=>b,Eh:()=>R,ZN:()=>T,vM:()=>I,YM:()=>M,j0:()=>F,Od:()=>f,dC:()=>p,Z$:()=>j,UI:()=>P,Fp:()=>$,VV:()=>L,of:()=>E,Ce:()=>h,ws:()=>g,w6:()=>y,u4:()=>x,nq:()=>z,iw:()=>D,OE:()=>q,Ss:()=>K,oo:()=>v});var n,s=r(5191),i=r(2275),o=(r(7560),r(7963)),a=r(5586),c=function(e){return{concat:a.VV(e)}},u=function(e){return{concat:a.Fp(e)}};n=void 0;var l=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},d=o.Xl,f=o.Od,p=function(e,t){return e<0||e>=t.length},g=function(e){return function(t){return l([e],t,!0)}},h=g,_=function(e){return function(t){return l(l([],t,!0),[e],!1)}},m=_,v=function(e,t,r){if(f(r)){var n=o.r1(r);return n.splice(e,0,t),n}return[t]},b=function(e){return f(e)?o.G(e):o.YP},w=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],s=1;s<r;s++)n.push(e(s));return n}},y=function(e,t){return e<=t?w((function(t){return e+t}))(t-e+1):[e]};function k(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var I=function(e){return function(t){for(var r={},n=0,s=t;n<s.length;n++){var i=s[n],a=e(i);o.e$.call(r,a)?r[a].push(i):r[a]=[i]}return r}};var S=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},E=o.ri,P=function(e){return G((function(t,r){return e(r)}))},G=function(e){return function(t){for(var r=[e(0,M(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},x=function(e,t){return q(e,(function(e,r,n){return t(r,n)}))},U=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},z=function(e,t){return D(e,(function(e,r,n){return t(r,n)}))},q=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},C=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,s){return e.concat(r,t(s+1,n))}),t(0,r[0]))}}},D=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},O=o.YM,T=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},R=function(e){return(0,s.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},M=(o.F4,O),A=o.Gb,j=function(e){return e[e.length-1]},L=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},$=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},B=function(e){return function(t){return t.reduce(e.concat)}},F=function(e){var t=B(e);return function(e){return(0,i.ls)(function(e){return function(t){var r=A(t);return f(r)?(0,i.zG)(r,S(e),h(M(t))):t}}(e),t)}};function N(e,t){return void 0===t?h(e):(0,i.zG)(t,h(e))}var K=function(e,t){return(0,i.zG)(e,k([t]))}},7054:(e,t,r)=>{r.d(t,{Bu:()=>h,CC:()=>R,DZ:()=>X,EG:()=>g,EW:()=>F,Eh:()=>ce,G:()=>q,HA:()=>D,Hd:()=>P,I8:()=>A,P5:()=>_,RF:()=>M,RJ:()=>L,SW:()=>K,Su:()=>v,UI:()=>b,Ub:()=>Q,V_:()=>B,XP:()=>d,_Y:()=>$,_r:()=>E,dp:()=>c,dx:()=>f,e$:()=>p,hX:()=>Z,jt:()=>G,kp:()=>T,mK:()=>V,mS:()=>j,nn:()=>O,nr:()=>le,nu:()=>N,oA:()=>ie,oh:()=>oe,qS:()=>W,ri:()=>I,sq:()=>U,t9:()=>C,tV:()=>te,uK:()=>ee,uZ:()=>ue,vA:()=>H,vP:()=>S,xb:()=>u,yW:()=>z,z7:()=>x,zV:()=>Y});var n=r(5191),s=r(2275),i=r(7963),o=r(4219),a=r(7029),c=(r(6511),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(i.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},d=l(a.Df);var f=function(e,t){return function(r){if(i.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},p=function(e,t){return i.e$.call(t,e)};function g(e){return function(t){if(!i.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function h(e){return function(t,r){if(void 0===r){var n=h(e);return function(e){return n(e,t)}}for(var s in t)if(!i.e$.call(r,s)||!e.equals(t[s],r[s]))return!1;return!0}}function _(e,t){return void 0===t?function(t){return _(e,t)}:i.e$.call(t,e)?i.G(t[e]):i.YP}var m={};function v(e){return function(t){var r={};for(var n in t)i.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function b(e){return v((function(t,r){return e(r)}))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return w(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var s=e,i=r(n),o=i.length,a=0;a<o;a++){var c=i[a];s=t(c,s,n[c])}return s}}}function y(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var s=e.empty,i=t(n),o=i.length,a=0;a<o;a++){var c=i[a];s=e.concat(s,r(c,n[c]))}return s}}}}return y(a.Df)(e)}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return k(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var s=e,i=r(n),o=i.length-1;o>=0;o--){var a=i[o];s=t(a,n[a],s)}return s}}}var I=function(e,t){var r;return(r={})[e]=t,r};function S(e){return V(a.Df)(e)}function E(e){return function(t){var r={},n={};for(var s in t)if(i.e$.call(t,s)){var a=e(s,t[s]);switch(a._tag){case"Left":r[s]=a.left;break;case"Right":n[s]=a.right}}return(0,o.s4)(r,n)}}function P(e){return function(t){var r={},n={};for(var s in t)if(i.e$.call(t,s)){var a=t[s];e(s,a)?n[s]=a:r[s]=a}return(0,o.s4)(r,n)}}function G(e){return function(t){var r={};for(var n in t)if(i.e$.call(t,n)){var s=e(n,t[n]);i.pC(s)&&(r[n]=s.value)}return r}}function x(e){return function(t){var r={},n=!1;for(var s in t)if(i.e$.call(t,s)){var o=t[s];e(s,o)?r[s]=o:n=!0}return n?r:t}}var U=function(e){for(var t={},r=0,n=e;r<n.length;r++){var s=n[r];t[s[0]]=s[1]}return t};function z(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function q(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function C(e){return function(t,r){if(void 0===r){var n=C(e);return function(e){return n(t,e)}}for(var s in r)if(e.equals(r[s],t))return!0;return!1}}var D=function(e,t){return(0,s.zG)(e,b(t))},O=function(e,t){return(0,s.zG)(e,v(t))},T=function(e){var t=re(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},R=function(e){return function(t){var r=ne(e)(t);return function(e,t){return(0,s.zG)(e,r(t))}}},M=function(e){var t=se(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},A=function(e,t){return(0,s.zG)(e,Z(t))},j=function(e,t){return(0,s.zG)(e,X(t))},L=function(e,t){return(0,s.zG)(e,ee(t))},$=function(e,t){return(0,s.zG)(e,te(t))},B=function(e){var t=w(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},F=function(e){var t=y(e);return function(e){var r=t(e);return function(e,t){return(0,s.zG)(e,r(t))}}},N=function(e){var t=k(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},K=function(e,t){return(0,s.zG)(e,E(t))},Y=function(e,t){return(0,s.zG)(e,P(t))},Q=function(e,t){return(0,s.zG)(e,G(t))},H=function(e,t){return(0,s.zG)(e,x(t))},W=function(e){var t=J(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,s.ls)(s.SK,t))}}},V=function(e){var t=W(e);return function(e){var r=t(e);return function(e){return r(e,s.yR)}}},J=function(e){return function(t){var r=l(e);return function(e,n){var s=r(e);if(0===s.length)return t.of(m);for(var i=t.of({}),o=function(r){i=t.ap(t.map(i,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},a=0,c=s;a<c.length;a++){o(c[a])}return i}}},Z=function(e){return x((function(t,r){return e(r)}))},X=function(e){return G((function(t,r){return e(r)}))},ee=function(e){return P((function(t,r){return e(r)}))},te=function(e){return E((function(t,r){return e(r)}))};function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=w(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return re(a.Df).apply(void 0,e)}function ne(e){if("compare"in e){var t=y(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return ne(a.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=k(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return se(a.Df).apply(void 0,e)}var ie=function(e){var t={};for(var r in e)if(i.e$.call(e,r)){var n=e[r];i.pC(n)&&(t[r]=n.value)}return t},oe=function(e){var t={},r={};for(var n in e)if(i.e$.call(e,n)){var s=e[n];i.nM(s)?t[n]=s.left:r[n]=s.right}return(0,o.s4)(t,r)},ae="ReadonlyRecord";function ce(e){var t=h(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function ue(e){return{concat:function(t,r){if(u(t))return r;if(u(r))return t;var n=Object.assign({},t);for(var s in r)i.e$.call(r,s)&&(n[s]=i.e$.call(t,s)?e.concat(t[s],r[s]):r[s]);return n},empty:m}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function le(e,t){return i.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},1586:(e,t,r)=>{r.d(t,{H5:()=>a,Pd:()=>i,Yg:()=>s,li:()=>n,pL:()=>o});r(2275);function n(e){return e[0]}function s(e){return e[1]}var i=function(e,t){return function(r){return[t(n(r)),e(s(r))]}},o=function(e){return function(t){return[e(n(t)),s(t)]}},a=function(e){return function(t){return[n(t),e(s(t))]}}},3940:(e,t,r)=>{r.d(t,{ff:()=>n});var n=function(e){return function(t){return!e(t)}}},4219:(e,t,r)=>{r.d(t,{Pd:()=>s,s4:()=>n});r(2275);var n=function(e,t){return{left:e,right:t}},s=function(e,t){return function(r){return n(e(i(r)),t(o(r)))}},i=function(e){return e.left},o=function(e){return e.right}},1717:(e,t,r)=>{r.d(t,{qA:()=>y,Hi:()=>w,qo:()=>k,dO:()=>v,UA:()=>I,PM:()=>b,ap:()=>g,Qt:()=>U,ak:()=>x,YO:()=>G,tS:()=>_,mU:()=>S,At:()=>P,tD:()=>u,UI:()=>p,of:()=>h,uU:()=>D,pE:()=>O});var n=r(2925),s=r(8543),i=r(2275);function o(e,t){var r=(0,s.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}var a=r(7560),c=r(7963),u=function(e){return function(){return Promise.resolve().then(e)}};var l=function(e,t){return(0,i.zG)(e,p(t))},d=function(e,t){return(0,i.zG)(e,g(t))},f=function(e,t){return(0,i.zG)(e,_(t))},p=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},g=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},h=function(e){return function(){return Promise.resolve(e)}},_=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},m="Task";var v={URI:m,map:l},b={URI:m,of:h},w={URI:m,map:l,ap:d},y={URI:m,map:l,ap:d,of:h},k={URI:m,map:l,ap:d,chain:f},I={URI:m,map:l,of:h,ap:d,chain:f},S=(i.yR,(0,s.m)(k)),E={URI:m,fromIO:u},P=o(E,k),G=(c.F4,(0,a.YO)(v)),x=(0,s.a)(k),U=(0,n.Qt)(w),z=h(c.Xl),q=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return c.Od(e)?t(e):z}},C=function(e){var t=function(e){return function(t){return function(){return c.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,c.YM(t))).then(c.ri))}}}(e);return function(e){return c.Od(e)?t(e):z}},D=function(e){return q((function(t,r){return e(r)}))},O=function(e){return C((function(t,r){return e(r)}))}},9246:(e,t,r)=>{r.d(t,{Do:()=>J,Qt:()=>ee,ak:()=>X,tS:()=>M,fX:()=>Q,wE:()=>V,Zl:()=>A,Y$:()=>H,Uo:()=>y,tD:()=>b,fF:()=>w,fS:()=>S,t$:()=>g,Hr:()=>Z,UI:()=>D,Vn:()=>T,EQ:()=>k,LV:()=>I,of:()=>L,vx:()=>P,F2:()=>h,Ij:()=>te,Y3:()=>E});var n=r(2925),s=r(8543),i=r(1890),o=r(5162),a=r(2275);function c(e,t){return function(r){var n=(0,a.ls)(r,e.fromTask);return function(e){return t.chain(e,n)}}}var u=r(7560),l=r(7963),d=r(1717),f=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},g=i.t$(d.PM),h=i.F2(d.PM),_=i.m8(d.dO),m=i.pk(d.dO),v=(0,a.ls)(d.tD,_),b=(d.tD,v),w=_,y=d.of,k=(d.tD,i.EQ(d.dO)),I=i.LV(d.UA),S=i.fS(d.UA),E=function(e,t){return function(){return f(void 0,void 0,void 0,(function(){var r;return p(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(l.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,l.t$(t(r))];case 3:return[2]}}))}))}},P=(d.dO,d.PM,d.PM,d.UA,i.vx(d.UA)),G=(d.UA,d.UA,d.dO,function(e,t){return(0,a.zG)(e,D(t))}),x=function(e,t){return(0,a.zG)(e,R(t))},U=function(e,t){return(0,a.zG)(e,M(t))},z=function(e,t,r){return(0,a.zG)(e,O(t,r))},q=function(e,t){return(0,a.zG)(e,T(t))},C=function(e,t){return(0,a.zG)(e,j(t))},D=i.UI(d.dO),O=i.Pd(d.dO),T=i.Vn(d.dO),R=i.ap(d.Hi),M=i.tS(d.UA),A=M,j=i.wp(d.UA),L=h,$=g,B="TaskEither";var F={URI:B,map:G},N={URI:B,map:G,ap:x},K={URI:B,map:G,ap:x,chain:U},Y={URI:B,fromEither:y},Q=(0,o.fX)(Y,K),H=(0,o.Y$)(Y,K),W={URI:B,fromIO:b,fromTask:w},V=c(W,K);var J=L(l.F4),Z=(0,u.Hr)(F),X=(0,s.a)(K),ee=(0,n.Qt)(N),te=(l.Xl,{URI:B,bimap:z,mapLeft:q,map:G,of:L,ap:x,chain:U,alt:C,fromIO:b,fromTask:w,throwError:$})},6511:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,s){return r.map(n(e,s),t.separate)}}}function s(e,t){return function(r){var n=e.traverse(r);return function(e,s){return r.map(n(e,s),t.compact)}}}r.d(t,{BL:()=>s,Fj:()=>n})},2275:(e,t,r)=>{r.d(t,{MZ:()=>s,Q1:()=>u,SK:()=>p,W8:()=>o,a9:()=>i,bc:()=>d,gn:()=>a,ls:()=>l,r5:()=>c,yR:()=>n,zG:()=>f});function n(e){return e}var s=n;function i(e){return function(){return e}}var o=i(!0),a=i(null),c=i(void 0),u=c;function l(e,t,r,n,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return s(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return i(s(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(s(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(i(s(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(o(i(s(n(r(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function f(e,t,r,n,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return s(n(r(t(e))));case 6:return i(s(n(r(t(e)))));case 7:return o(i(s(n(r(t(e))))));case 8:return a(o(i(s(n(r(t(e)))))));case 9:return c(a(o(i(s(n(r(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var p=function(e,t){return t}},7963:(e,t,r)=>{r.d(t,{F2:()=>d,F4:()=>m,G:()=>a,Gb:()=>h,Od:()=>p,Wi:()=>s,Xl:()=>_,YM:()=>g,YP:()=>o,e$:()=>v,nM:()=>c,pC:()=>i,r1:()=>b,ri:()=>f,t$:()=>l,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e){return"None"===e._tag},i=function(e){return"Some"===e._tag},o={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},f=function(e){return[e]},p=function(e){return e.length>0},g=function(e){return e[0]},h=function(e){return e.slice(1)},_=[],m={},v=Object.prototype.hasOwnProperty,b=function(e){return n([e[0]],e.slice(1),!0)}},6627:(e,t,r)=>{r.d(t,{Df:()=>s,Eq:()=>n});var n={equals:function(e,t){return e===t}},s={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};n.equals,s.compare},7029:(e,t,r)=>{r.d(t,{Df:()=>s,Eq:()=>n,pn:()=>o,xb:()=>i});var n={equals:function(e,t){return e===t}},s={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},i=function(e){return 0===e.length},o=function(e,t){return function(r){return r.endsWith(e,t)}}},3092:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(1005),s=r.n(n);function i(){return s()('/*! @permutive/javascript-sdk v20.17.0 (web) (built 2024-10-29T14:08:47.511Z) */(()=>{"use strict";var __webpack_modules__={865:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},238:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>runtimeFactory});const runtimeFactory=deps=>{const{provideEnvironment,...lookups}=generateLookupMethods(deps.runtimeInput),env=generateRuntimeEnvironment({lookups,hash:deps.hash});return provideEnvironment(env),{env,locallyLiftedQueries:deps.runtimeInput.queries(env)||{},cloudLiftedQueries:"function"==typeof deps.runtimeInput.interpretOnlyQueries?deps.runtimeInput.interpretOnlyQueries(env):{},queriesByEvent:deps.runtimeInput.eventSegments(env)||{},createCloudLiftQueries:cloudLiftQueries=>{const createQueries=eval?.(`"use strict";${cloudLiftQueries}`);return createQueries(env)}}};function generateRuntimeEnvironment(e){const t=e=>()=>{throw new Error(`${e} lookup has not been provided`)};let r=t("events"),n=t("literals"),s=t("properties"),i=t("ahoCorasick"),o=t("subexpressions"),a=t("rootCompression");function c(e){return u(e)&&!l(e)}function u(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function l(e){for(const t in e)return!1;return!0}function f(e){return(t,r)=>{const n=null!=t&&null!=r?e(t,r):t||r;return null==n||u(n)&&l(n)?null:n}}function d(e,t,r=g){const n=s(t).reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e);return null===n?null:r(n)}function p(e,t,r=g){return e.properties?d(e.properties,t,r):null}e.lookups.onReady((e=>{const{ahoCorasick:t,events:c,literals:u,properties:l,subexpressions:f,rootCompression:d}=e;r=e=>"number"==typeof e?c[e]:e,n=e=>"number"==typeof e?u[e]:e,s=e=>"number"==typeof e?l[e]:e,i=e=>t[e],o=e=>f[e],a=e=>d[e]}));let g=e=>e,_=e=>!0;function h(e,t){return function(r){for(let n=0;n<e.length;n++){if((e[n](r)||!1)===t)return t}return!t}}function w(e){return h(e,!0)}function m(e){return h(e,!1)}let b=e=>t=>!e(t),v=(e,t)=>r=>r>=e&&r<=t,y=e=>new Date(e).getTime(),k=e=>d(e,["time"],y),S=(e,t)=>d(t,e,y),I=(e,t,r,n,s,i)=>o=>{const a=d(o,e,(e=>e.filter(n).map((e=>d(e,t))).reduce(s,i)));return r(null===a?i:a)};function q(e,t,r,n){for(const s of e)if(r(s)&&t(s)===n)return n;return!n}let z=e=>t=>("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(n(e).toLowerCase())>-1,G=e=>t=>null!=t&&Array.isArray(t)&&t.indexOf(e)>=0;const x=(e,t)=>({l:n=>d(n,["name"])===r(e)&&t(n)?["p",1]:null,a:(e,t)=>["p",e[1]+t[1]],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null});function U(e,t,r,n,s){const i=d(e.getSegments(),[t,r])||!1;return s&&(n||i)&&e.setSegmentActivation(t,r,s),i}function E(e,t,r){return d(e.getSegments(),[t,r])||!1}function P(e,t,r=18e5){return n=>{function s(e,t,r){if(c(t)){if(c(r)){const n={...t,...r};for(const s in r)if(t[s]){const o=i(e,t[s],r[s]);null!=o&&(n[s]=o)}return n}return t}return r}function i(e,t,r){if(c(t)){if(c(r)){const s={...t,...r};for(const i in r)if(t[i]){const o=Array.isArray(t[i])?[e,...t[i]]:[e,t[i]],a=Array.isArray(r[i])?[e,...r[i]]:[e,r[i]],c=n.d.a(o,a);if(null!=c){const[e,...t]=c;s[i]=t}}return s}return t}return r}const o=e=>Array.isArray(e)&&"object"==typeof e[3];return{a:{m:(e,t)=>[t[0],n.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:n.a.z,t[1])],z:[[],n.a.z]},p:(r,s)=>[[e(r)],d(s,t)===e(r)?n.p(r,s):n.a.z],r:(t,r)=>n.r(t,0!==r[0].length&&r[0][0]===e(t)?r[1]:n.a.z),d:n.d.sq||{a:(e,t)=>{if(!o(e))return o(t)?t:null;if(!o(t))return o(e)?e:null;const[r,,,n]=e;return[r,"u",null,s(r,n,t[3])]},l:(s,i)=>{let o=d(s,t),a=e(i);if(o!==a)return null;let c=n.d.l(s,i);if(!(Array.isArray(c)&&c.length>1))return null;let[u,...l]=c,f=+(k(s)||i.getCurrentTime()),p=Math.floor(f/r),g={};return g[p]={},g[p][a]=1===l.length?l[0]:l,[u,"u",null,g]},i:(t,r)=>{if(!o(t))return[[],n.a.z];let s=e(r),i=t[3];return[[s],Object.keys(i).map((e=>i[e][s])).filter((e=>e)).map((e=>n.d.i([t[0]].concat(e)))).reduce(n.a.m,n.a.z)]},c:g}}}}let C=P((e=>e.getCurrentSession()),["session_id"],18e5),D=P((e=>e.getCurrentView()),["view_id"],3e5);function O(e,t,n,s=1){return{a:{m:(e,t)=>e.concat(t).slice(-n),z:[]},p:(n,s)=>d(s,["name"])===r(t)?[e.p(n,s)]:[],r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:e.d.ftn||{a:(e,t)=>{const r=Object.entries({...e[3],...t[3]}).sort((([e],[t])=>Number(e)-Number(t))).slice(-n);return[e[0],e[1],null,Object.fromEntries(r)]},l:(t,r)=>{const i=e.d.l(t,r),o=d(t,["time"],y)*s;return i&&[i[0],"x"+n,null,{[o]:2==i.length?i[1]:i.slice(1)}]},i:(t,r)=>t?Object.keys(t[3]||{}).sort().reverse().map((e=>Array.isArray(e)?[t[0],...t[3][e]]:[t[0],t[3][e]])).map((t=>e.d.i(t,r))):[],c:g}}}let j=(e,t)=>null==e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t};function T(e,t){return r=>{if(!r||null==r.a&&null==r.b)return null;const n=null==r.a?void 0:e.d.c(r.a)??void 0,s=null==r.b?void 0:t.d.c(r.b)??void 0;return n===r.a&&s===r.b?r:j(n,s)}}function A(e,t){return{a:(r,n)=>{const s=null!=r.a&&null!=n.a?e.d.a(r.a,n.a):r.a||n.a,i=null!=r.b&&null!=n.b?t.d.a(r.b,n.b):r.b||n.b;return j(s,i)},l:(r,n)=>j(e.d.l(r,n),t.d.l(r,n)),i:(r,n)=>r?[e.d.i(r.a||null,n),t.d.i(r.b||null,n)]:[e.a.z,t.a.z],c:T(e,t)}}function M(e,t,r,n){let s=e,i=t.map(r),o=(e,r)=>n(t[e])(r);for(let e=t.length-1;e>0&&s;e--)s.b&&(i[e]=o(e,s.b)),s.a&&1===e&&(i[0]=o(0,s.a)),s=s.a;return i}const R=e=>(t,r=e.length-1)=>{if(!t||null==t.a&&null==t.b)return null;const n=e[r];if(!n)return null;if(1===r)return T(e[0],n)(t);const s=null==t.a?void 0:R(e)(t.a,r-1)??void 0,i=null==t.b?void 0:n.d.c(t.b)??void 0;return s===t.a&&i===t.b?t:j(s,i)};let F=e=>t=>{function r(e){let t=e[0];for(let r=1;r<e.length;r++)t=[t,e[r]];return t}function n(e){let r=e,n=Array(t.length);for(let e=t.length-1;e>0;e--)n[e]=r[1],r=r[0];return n[0]=r,n}function s(e,r,n=t.length-1){if(0==n)throw new Error("subquery index out of bounds.");const i=(1==n?f(t[0].d.a)(e?.a,r?.a):s(e?.a,r?.a,n-1))||void 0,o=f(t[n].d.a)(e?.b,r?.b)||void 0;return j(i,o)}return{p:(e,n)=>r(t.map((t=>t.p(e,n)))),r:(r,s)=>{const i=n(s);return e(t.map(((e,t)=>()=>e.r(r,i[t]))))({})},a:{z:r(t.map((e=>e.a.z))),m:(e,s)=>{const i=n(e),o=n(s);return r(t.map(((e,t)=>function(e,t,r){return null===t?r:null===r?t:e.a.m(t,r)}(e,i[t],o[t]))))}},d:{a:(e,r)=>1==t.length?f(t[0].d.a)(e,r):s(e,r),l:(e,r)=>function(e){let t=e[0];for(let r=1;r<e.length;r++)t=j(t,e[r]);return t}(t.map((t=>t.d.l(e,r)))),i:(e,n)=>((e,n)=>r(M(e,t,(e=>e.a.z),(e=>t=>e.d.i(t,n)))))(e,n),c:R(t)}}},L=F(w),Y=F(m);let Q=e=>t=>({d:{i:(r,n)=>e(M(r,t,(e=>e.d.i(null,n)),(e=>t=>e.d.i(t,n))).map((e=>t=>e)))({}),c:R(t)}}),N=Q(m),$=Q(w);function B(e,t){let r=i(e);if(!t||!r)return!1;if(!r.length)return!0;let n=0,s=!1,o=(e=>{let t=[];for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n>=55296&&n<=56319){let n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){t.push(e.slice(r,r+2)),++r;continue}}t.push(e.charAt(r))}return t})(t.toLowerCase());for(let e=0;e<o.length;e++){let t=o[e];for(;n>0&&!r[n][t];)n=r[n].su?r[n].su:0;if(r[n][t]&&(n=r[n][t],s=!!r[n].te,s))break}return s}let H=(t,r)=>{let n,s,i=e.hash(t);if(0===r.length)return!1;if(r[0]===i)return!0;let o=0,a=r.length,c=!1;for(;(c=(n=r[s=o+(a-o>>1)])!==i)&&(n<i?o=s:a=s,!(o>=a-1)););return!c},V=(e,t)=>r=>H(d(r,e),t),K=(e,t)=>r=>H(p(r,e),t);return{q:function(e){return{lift:(t,r)=>e.d.l(t,r),append:f(e.d.a),interpret:(t,r)=>((t,r)=>({result:e.r(t,r)}))(r,e.d.i(t,r)),compact:e.d.c,migrate:g,m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},i_q:function(e){return{interpret:(t,r)=>({result:e.d.i(t,r)}),compact:e.d.c}},a:m,acq:function(e,t){return{p:(r,n)=>[e.p(r,n),t.p(r,n)],r:(r,n)=>e.r(r,n[0])&&t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:A(e,t)}},acqs:Y,acs:B,acs_:(e,t)=>r=>B(t,d(r,e)),af_i:(e,t,r=_)=>n=>d(n,e,(e=>q(e,t,r,!1)))&&!0,af_l:(e,t,r=_)=>n=>{const s=d(n,e,(e=>e.filter(r).length));return t(null===s?0:s)},af_m:(e,t,r,n=_)=>s=>{const i=d(s,e,(e=>e.filter(n)));return null===i||0===i.length?r(0):r(i.map((e=>d(e,t))).reduce(((e,t)=>e+t),0)/i.length)},af_n:(e,t,r,n=_)=>I(e,t,r,n,((e,t)=>Math.min(e,t)),Number.POSITIVE_INFINITY),af_p:(e,t,r,n=_)=>I(e,t,r,n,((e,t)=>e*t),1),af_s:(e,t,r,n=_)=>I(e,t,r,n,((e,t)=>e+t),0),af_u:(e,t,r=_)=>n=>d(n,e,(e=>q(e,t,r,!0)))||!1,af_x:(e,t,r,n=_)=>I(e,t,r,n,((e,t)=>Math.max(e,t)),Number.NEGATIVE_INFINITY),as:(e,t,r)=>n=>{const s=p(n,t),i=r.length;let o=!0;for(let t=0;t<i;t++){const n=r[t];if(o=e(n)(s),!o)break}return o},c:G,c_:(e,t)=>r=>G(t)(d(r,e)),cl_:(e,t)=>r=>G(n(t))(d(r,e)),cx:e=>t=>G(n(e))(t),cw:function(e,t,n=g){return{a:{m:(e,t)=>e+t,z:0},p:(n,s)=>d(s,["name"])===r(e)&&t(s)?1:0,r:(e,t)=>n(t),d:x(e,t)}},cb:function(e,t,n,s){return{a:{m:(e,t)=>Math.min(e+t,s),z:0},p:(n,s)=>d(s,["name"])===r(e)&&t(s)?1:0,r:(e,t)=>n(t),d:{l:n=>d(n,["name"])===r(e)&&t(n)?[`b${s}p`,1]:null,a:(e,t)=>[`b${s}p`,Math.min(e[1]+t[1],s)],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null}}},e:e=>t=>t===e,e_:(e,t)=>r=>d(r,e)===t,fm:function(e,t){return{p:t.p,r:(r,n)=>e(t.r(r,n)),a:t.a,d:t.d}},frontDecode:function(e){const t=e.split("\\t");if(0===t.length)return[];var r=t[0],n=new Array(Math.ceil(t.length/2));n[0]=t[0];for(var s=1;s<t.length/2;s+=1){const e=t[2*s-1],i=t[2*s];if(""===e)r=i;else{const t=parseInt(e);r=r.slice(0,t)+i}n[s]=r}return n},ftn:function(e,t,n){return{a:{m:(e,t)=>e.concat(t.slice(0,n-e.length)),z:[]},p:(n,s)=>d(s,["name"])===r(t)?[e.p(n,s)]:[],r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:O(e,t,n,-1).d}},g:e=>t=>t>e,g_:(e,t)=>r=>d(r,e)>t,ge:e=>t=>t>=e,ge_:(e,t)=>r=>d(r,e)>=t,bse:(t,r)=>n=>{let s=d(n,t);return e.hash(s)===r},bsne:(t,r)=>n=>{let s=d(n,t);return e.hash(s)!==r},bsc:V,bsnc:(e,t)=>b(V(e,t)),bsc_:K,bsnc_:(e,t)=>b(K(e,t)),i_:g,ifp:function(e){return{a:{m:(e,t)=>t,z:null},p:e=>null,r:(t,r)=>(t=>E(t,"1p",e))(t),d:{a:(e,t)=>null,l:(e,t)=>null,i:e=>null,c:e=>null}}},isp:function(e,t,r,n){return{a:{m:(e,t)=>t,z:!1},p:(r,n)=>E(r,e,t),r:(s,i)=>U(s,e,t,r,n),d:{a:(e,t)=>null,l:(e,t)=>null,i:e=>Array.isArray(e)&&(!!+e[2]||!1),c:g}}},itp:function(e,t,r,n){return{a:{m:(e,t)=>t,z:!1},p:(r,n)=>E(r,e,t),r:(s,i)=>U(s,e,t,r,n),d:{a:(e,t)=>null,l:(e,t)=>null,i:e=>Array.isArray(e)&&(!!+e[2]||!1),c:g}}},i_cw:function(e){return{d:{i:t=>{let r=t?Array.isArray(t)?t.slice(-1)[0]:t:0;return e(r)},c:e=>Array.isArray(e)&&e[1]?e:null}}},i_acqs:N,i_ocqs:$,i_tw:function(e,t,r){const n=r||100,s=Math.ceil(t/n);return{d:{i:(r,n)=>{const i=Array.isArray(r)?r:[],o=n.getCurrentTime(),a=(c=o.getTime()-t,Math.floor(c/s));var c;const u=Object.keys(i[3]||{}).reduce(((e,t)=>parseInt(t)>=a?i[3][t]+e:e),0);return e.d.i(["p",u],n)},c:g}}},i_ltn:function(e,t,r=1){return{d:{i:(t,r)=>{const n=Array.isArray(t)?t:[],s=Object.keys(n[3]||{}).reduce(((e,t)=>n[3][t]+e),0);return e.d.i(["p",s],r)},c:g}}},k:d,l:e=>t=>t<e,l_:(e,t)=>r=>{const n=d(r,e);return null!==n&&n<t},le:e=>t=>t<=e,le_:(e,t)=>r=>{const n=d(r,e);return null!==n&&n<=t},lm:function(e,t){let r=t=>function(e,t,r){if(void 0===t[r])return NaN;const n=e||{};if(0==(n["1p"]||[]).length)return NaN;const s=t[r]||{};let i=(s["1p"]||{}).const||0;return Object.keys(n).forEach((e=>{n[e].forEach((t=>{const r=(s[e]||{})[t]||0;i+=r}))})),o=i,1/(1+Math.pow(Math.E,-o));var o}(t.getSegmentsArray(),t.getLookalikeModels(),e);return{a:{m:(e,t)=>t,z:null},p:e=>null,r:(e,n)=>t(r(e)),d:{a:(e,t)=>null,l:(e,t)=>null,i:e=>null,c:e=>null}}},ltn:O,mnw:function(e,t,n,s=g){const i=Number.POSITIVE_INFINITY;return{a:{m:(e,t)=>e<t?e:t,z:i},p:(s,o)=>d(o,["name"])===r(e)&&t(o)?d(o,n):i,r:(e,t)=>s(t),d:{a:(e,t)=>e[1]<t[1]?e:t,l:s=>d(s,["name"])===r(e)&&t(s)?["n",d(s,n)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:i,c:e=>Array.isArray(e)&&e[1]!==i?e:null}}},mxw:function(e,t,n,s=g){const i=Number.NEGATIVE_INFINITY;return{a:{m:(e,t)=>e>t?e:t,z:i},p:(s,o)=>d(o,["name"])===r(e)&&t(o)?d(o,n):i,r:(e,t)=>s(t),d:{l:s=>d(s,["name"])===r(e)&&t(s)?["v",d(s,n)]:null,a:(e,t)=>e[1]>t[1]?e:t,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:i,c:e=>Array.isArray(e)&&e[1]!==i?e:null}}},n0:b(g),n:e=>t=>t!==e,nt:b,n_:(e,t)=>r=>d(r,e)!==t,o:w,ocq:function(e,t){return{p:(r,n)=>[e.p(r,n),t.p(r,n)],r:(r,n)=>e.r(r,n[0])||t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:A(e,t)}},ocqs:L,oe:function(e){const t=Object.keys(e);let r=t.length,n=new Array(r);for(;r--;)n[r]=[t[r],e[t[r]]];return n},os:(e,t,r)=>n=>{const s=p(n,t),i=r.length;let o=!1;for(let t=0;t<i;t++){const n=r[t];if(o=e(n)(s),o)break}return o},pacs:(e,t)=>r=>B(t,p(r,e)),pb:(e,t,r)=>n=>v(t,r)(p(n,e)),pc:(e,t)=>r=>{const n=p(r,e);return null!=n&&Array.isArray(n)&&n.indexOf(t)>=0},pc_:(e,t)=>r=>{const s=p(r,e),i=n(t);return null!=s&&Array.isArray(s)&&s.indexOf(i)>=0},pe:(e,t)=>r=>p(r,e)===t,pg:(e,t)=>r=>p(r,e)>t,pge:(e,t)=>r=>p(r,e)>=t,pl:(e,t)=>r=>{let n=p(r,e);return null!==n&&n<t},ple:(e,t)=>r=>{let n=p(r,e);return null!==n&&n<=t},pn:(e,t)=>r=>p(r,e)!==t,ps:(e,t)=>r=>z(t)(p(r,e)),r:function(e,...t){return a(e)(...t)},ref:function(e){return t=>o(e)(t)},rle:function(e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];"number"==typeof n?(t+=n,r+=1):t+=1}let r=Array(t),n=0;for(let t=0;t<e.length;t++){let s=e[t];"number"==typeof s?(r.fill(e[t+1],n,n+s),t+=1,n+=s):(r[n]=s,n++)}return r},s:z,s_:(e,t)=>r=>z(t)(d(r,e)),scq:function(e,t,r=g){return{p:(r,n)=>[e.p(r,n),t.p(r,n)],r:(n,s)=>r(e.r(n,s[0])+t.r(n,s[1])),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:A(e,t)}},sq:C,dscq:function(e,t,n,s){const i=`x${s}`,o=e=>e?2===e.length?["p",i,"",e[1]]:e:null,a=n=>{const s=(e=>d(e,["session_id"]))(n);return s&&d(n,["name"])===r(e)&&t(n)?["p",i,"",{[s]:1}]:null},c=(e,t)=>{const r=o(e),n=o(t);return r?n?["p",i,"",{...r[3],...n[3]}]:r:n};return{a:{m:c,z:null},p:(e,t)=>a(t),r:(e,t)=>{const r=t&&t[3]&&"object"==typeof t[3]?Object.keys(t[3]).length:0;return n(r)},d:{a:f(c),l:(e,t)=>a(e),i:(e,t)=>o(e),c:g}}},sw:function(e,t,n,s=g){return{a:{m:(e,t)=>e+t,z:0},p:(s,i)=>d(i,["name"])===r(e)&&t(i)?d(i,n):0,r:(e,t)=>s(t),d:{a:(e,t)=>{const r=new Array(Math.max(e.length,t.length));r[0]="p2";for(let n=1;n<r.length;n++)r[n]=(e[n]??0)+(t[n]??0);return r},l:s=>{return(n=>d(n,["name"])===r(e)&&t(n))(s)?(i=d(s,n))<0?["p2",null,-i]:["p2",i]:null;var i},i:e=>{return e?Array.isArray(e)?((t="p2"===e[0]?e.slice(1):e)[0]||0)-(t[1]||0):e:0;var t},c:e=>Array.isArray(e)&&(e[1]||e[2])?e:null}}},t:_,tb:(e,t)=>r=>v(e,t)(k(r)),te:e=>t=>k(t)===e,te_:(e,t)=>r=>S(e,r)===t,tg:e=>t=>k(t)>e,tg_:(e,t)=>r=>S(e,r)>t,tge:e=>t=>k(t)>=e,tge_:(e,t)=>r=>S(e,r)>=t,ti:y,tl:e=>t=>k(t)<e,tl_:(e,t)=>r=>S(e,r)<t,tle:e=>t=>k(t)<e,tle_:(e,t)=>r=>S(e,r)<t,tn:e=>t=>k(t)!==e,tn_:(e,t)=>r=>S(e,r)!==t,tw:function(e,t,r){const n=r||100,s=Math.ceil(t/n),i=e=>Math.floor(e/s),o=(e,r,n)=>[i(e.getTime()-t),{[i(r)]:n}],a=(t,r)=>{const n=Math.max(t[0],r[0]),s=Object.keys(t[1]).filter((e=>e>=n)).concat(Object.keys(r[1]).filter((e=>e>=n))).filter(((e,t,r)=>r.indexOf(e)===t)).reduce(((n,s)=>{const i=e.a.m(t[1][s]||e.a.z,r[1][s]||e.a.z);return i!==e.a.z&&(n[s]=i),n}),{});return[n,s]},c=[Number.NEGATIVE_INFINITY,{}],u=e=>{const t=t=>t.map((([t,r,n])=>o(e.t,n,t))).reduce(a,c);return a(t(e.in),t(e.out))};return{a:{m:(e,t)=>{const r=e.w?u(e):e;return a(r,t)},z:c},p:(t,r)=>o(t.getCurrentTime(),d(r,["time"],y),e.p(t,r)),r:(t,r)=>{const n=(r.w?u(r):r)[1];return e.r(t,Object.keys(n).reduce(((t,r)=>e.a.m(t,n[r])),e.a.z))},d:e.d.tw||{a:([e,,...t],[,,...r])=>[e,"w",...a(t,r)],l:(t,r)=>{const n=e.d.l(t,r),s=e.d.i(n,r);return n&&[n[0],"w",...o(r.getCurrentTime(),d(t,["time"],y),s)]},i:(e,r)=>{const n=Array.isArray(e)?e:[],s=r.getCurrentTime(),o=i(s.getTime()-t);return[n[2]||null,Object.keys(n[3]||{}).map((e=>({[e]:n[3][e]}))).reduce(((e,t)=>(Object.keys(t).filter((e=>parseInt(e)>=o)).forEach((r=>e[r]=t[r])),e)),{})]},c:g}}},vq:D,w:e=>t=>t===n(e),x:e=>t=>t!==n(e),y:(e,t)=>r=>p(r,e)===n(t),y_:(e,t)=>r=>d(r,e)===n(t),z:(e,t)=>r=>p(r,e)!==n(t),z_:(e,t)=>r=>d(r,e)!==n(t)}}function generateLookupMethods(e){let t,r=!1,n=[];return{onReady:e=>{r?e(t):n.push(e)},provideEnvironment:s=>{t={events:e.eventsLookup(s),literals:e.literalsLookup(s),properties:e.propertiesLookup(s),ahoCorasick:e.ahoCorasickLookup(s),subexpressions:e.subexpressionsLookup(s),rootCompression:e.rootCompressionLookup(s)},n.forEach((e=>e(t))),n=[],r=!0}}}},812:(e,t,r)=>{r.d(t,{GL:()=>a,HJ:()=>c,N1:()=>f,NC:()=>n,RP:()=>s,UM:()=>u,t_:()=>l});const n=performance.now(),s=(new Date).getTime();let i=[],o=!1;const a=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c((()=>e(...r)))},c=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&i.length<1e4&&i.push([r,performance.now()]),r=void 0},s=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&s.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const s=self.setInterval((()=>{n=c((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(s)}},l=e=>new Promise(((t,r)=>e.then(a(t),a(r)))),f=e=>()=>l(e())},460:(e,t,r)=>{r.d(t,{g1:()=>z,YO:()=>S,oQ:()=>T,a9:()=>b,Ue:()=>h,gS:()=>w,D8:()=>j,VS:()=>G,xH:()=>x,En:()=>m,p4:()=>O,fF:()=>D,Hr:()=>I,UI:()=>y,u4:()=>U,Rp:()=>E,vP:()=>P,bw:()=>A,YP:()=>v});var n=r(865),s=r(385),i=r(275),o=r(492),a=r(583),c=r(387);function u(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let s=t;const i=()=>{Object.is(t,s)||(s=t,e(t))};r=[...r,i];return()=>{r=r.filter((e=>e!==i))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function f(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[s,i]=d(n(),(e=>"might_change"!==e&&t())),o=()=>i(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":i("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),s}function d(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:s}=u(e),i={state:e,onStateChange:s},o=l("Disallowed recursion in Branch.",(e=>{if("final"===i.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),i.state=e,n(e)}finally{"final"===e&&r()}}));return[i,o]}var p=r(560),g=r(444);const _="Ref";function h(e){const[t,r,n]=function(){const[e,t]=d("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[s,i]=M(t,e);return[s,e=>r((()=>i(e))),n]}function w(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,s,i]=h(r());return[n,n=>{t=e.concat(t,n),s(r())},i]}function m(e,t){return r=>{let n=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,s)=>(0,i.zG)(r,y(g.UI((e=>{const r=t.concat(n[s],e);return n=n.map(((r,n)=>n===s?t.empty:t.concat(r,e))),r}))))))}}function b(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function v(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function y(e,t){if(t){const[r,n]=M(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>y(e,t)}const k={URI:_,map:(e,t)=>y(t)(e)},S=p.YO(k),I=p.Hr(k),q=e=>G((t=>y(t)(e))),z={URI:_,of:b,map:k.map,ap:(e,t)=>q(t)(e)};function G(e,t){return t?x(y(e,t)):t=>x(y(e,t))}function x(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[s,i]=d(n),o=e=>t=>{switch(t){case"final":i(e().state);break;case"might_change":i("might_change");break;case"nominal":"might_change"===e().state?i("might_change"):i("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const a=o((()=>e));let c=r.onStateChange(a);return[s,e=>{r=e,c(),c=e.onStateChange(a),a(r.state)}]}(e.branch,e.current.branch),[n,s]=M(t,e.current.current);let i=e.current.onChange(s);return e.onChange((e=>{i(),i=e.onChange(s),r(e.branch),s(e.current)})),n}function U(e){return t=>{if("final"===t.branch.state)return t;let r=o.YP;return y((t=>{if(o.Wi(r))return r=o.G(t),t;const n=e(r.value,t);return r=o.G(n),n}),t)}}function E(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return y((e=>(r=t[1](r,e),r)),e)}let r=o.bM();return y((e=>{const n=t[0](r,e);return r=o.G(n),n}),e)}}function P(){if(0===arguments.length||R(arguments.length<=0?void 0:arguments[0]))return C(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,i.zG)(Object.values(e),(e=>C(...e)),y((0,i.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function C(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return b([]);if(1===t.length)return y((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const s=t.map((0,c.vg)("branch")),i=()=>{n&&(n=!1,u(t.map((e=>e.current))))},o=f(s,i),[a,u]=M(o,t.map((e=>e.current)));return a}function D(e){const[t,r,n]=h(o.YP);return e().then((0,i.ls)(o.G,r,n)),t}function O(e){const[t,r,a]=h(o.YP);return e.then(s.F2).catch((0,i.ls)(n.w,s.t$)).then((0,i.ls)(o.G,r,a)),t}function j(e){const t=e.hasOwnProperty("equals")?e.equals:e;return U(((e,r)=>t(e,r)?e:r))}function T(e){return R(e)?e:b(e)}function A(e){return t=>(v(e)(t),t)}function M(e,t){if("final"===e.state)return[b(t),()=>{}];const r=u(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function R(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},936:(e,t,r)=>{r.d(t,{Hr:()=>h,K4:()=>c,KD:()=>b,UI:()=>f,VS:()=>p,YO:()=>w,ak:()=>_,bw:()=>d,dQ:()=>u,kR:()=>v,of:()=>l,vP:()=>g,yi:()=>m});var n=r(460),s=r(275),i=r(387),o=r(54),a=r(492);const c=e=>(0,s.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),u=s.yR,l=(0,s.ls)(s.a9,c),f=e=>t=>(0,s.ls)(t,(0,i.rO)({value:e})),d=e=>t=>(0,s.ls)(t,(0,i.rO)({value:(0,i.bw)(e)}));function p(e){return t=>r=>{let{previousState:s,...i}=r;const o=t({previousState:Array.isArray(s)?s[0]:void 0,...i}),a=e(o.value)({previousState:Array.isArray(s)?s[1]:void 0,...i});return{value:a.value,state:n.vP(o.state,a.state)}}}function g(e){return t=>{let{previousState:r,...i}=t;const a=S(r)?r:{},c=(0,s.zG)(e,o.Su(((e,t)=>t({previousState:a[e],...i}))));return{value:(0,s.zG)(c,o.UI((e=>e.value))),state:(0,s.zG)(c,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function _(e,t){return r=>(0,s.ls)((0,i.rO)({previousState:k}),(i=>{const o=r(i),a=t(o.value)({...i,previousState:i.previousState[e]});return{value:(0,s.zG)([o.value,a.value],(t=>{let[r,n]=t;if(!S(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,s.zG)(n.vP(o.state,a.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!S(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const h=(e,t)=>f((r=>({...r,[e]:t(r)})));function w(e){return t=>(0,s.ls)((0,i.rO)({previousState:(0,s.ls)(k,(t=>t[e]))}),t,(0,i.rO)({value:t=>({[e]:t}),state:n.UI((t=>({[e]:t})))}))}const m=(e,t)=>{const r=t||(t=>t===e);return t=>u((o=>{let{previousState:a,...c}=o;const u=Array.isArray(a)&&2===a.length&&r(a[0])?a[1]:void 0;return(0,s.zG)({previousState:u,...c},t,(0,i.rO)({state:n.UI((t=>[e,t]))}))}))},b=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],n=[...t.map((e=>{let[t,r]=e;return[t,(0,s.a9)(r)]})),(0,s.a9)(r)];return v((0,i.lo)(n))};function v(e){return(0,s.ls)(n.UI(e),y)}function y(e){const t=(0,s.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:i,stopped:o,...c}=r;return(0,s.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[u,l]=r;return(0,s.zG)(e,a.UI((e=>e.state.current)),a.fS((()=>i)),(e=>u({previousState:e,stopped:(0,s.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==l}))),...c})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function k(e){return S(e)?e:{}}function S(e){return"object"==typeof e&&null!==e}},371:(e,t,r)=>{r.d(t,{d:()=>f,m:()=>l});var n=r(275),s=r(385),i=r(492),o=r(460),a=r(387),c=r(936),u=r(191);const l=e=>c.dQ((t=>{let{stopped:r,previousState:c}=t;const u=function(e){return h(e)?e:{validityKey:"",lastSuccess:i.YP}}(c),l=(0,n.zG)(u,(e=>({...e,inFlight:i.YP,lastSuccess:(0,n.zG)(e.lastSuccess,i.UI(s.F2))}))),f=(0,n.zG)(e,o.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),(e=>o.vP(e,r)),o.Rp(o.a9(l),((e,t)=>{let[r,c]=t;if(c)return e;const u=r.validity.key(),l=i.hX((e=>r.currentTimestampSecs-e.timestamp<=r.validity.maxAge)),f=(0,a.HP)(r.freshness.key),d=i.hX((e=>r.currentTimestampSecs-e.timestamp<=r.freshness.maxAge&&e.freshnessKey===f())),p=(0,n.zG)(e,o.UI((0,n.ls)(i.DT((e=>e.validityKey===u)),i.EQ((()=>({validityKey:u,inFlight:i.YP,lastSuccess:i.YP})),(0,a.rO)({inFlight:l,lastSuccess:i.tS(s.EQ((e=>i.G(s.t$(e))),(0,n.ls)(i.G,l,i.UI((e=>s.F2(e))))))})))),o.D8(g()));if((0,n.zG)(p.current,(e=>(0,n.zG)(e.inFlight,i.wp((()=>(0,n.zG)(e.lastSuccess,i.tS(i.Uo)))),d,i.pC))))return p;const _=()=>({timestamp:r.currentTimestampSecs,freshnessKey:f(),output:i.YP});return(0,n.zG)(r.refresh,i.EQ((()=>p),(0,n.ls)(o.fF,o.UI(i.EQ((()=>(0,n.zG)(p,o.UI((0,a.rO)({inFlight:()=>i.G(_())})))),s.EQ((e=>(0,n.zG)(p,o.UI((0,a.rO)({inFlight:()=>i.YP,lastSuccess:(0,n.ls)(i.tS((0,n.ls)(i.Uo,i.hX((e=>i.pC(e.output))))),s.Yo((()=>e)),i.G)})))),(e=>o.a9({validityKey:u,inFlight:i.YP,lastSuccess:i.G(s.F2({..._(),output:i.G(e)}))}))))),o.xH)))})),o.xH,o.D8(g())),d=(0,n.zG)(f,o.UI((e=>({validityKey:e.validityKey,lastSuccess:(0,n.zG)(e.lastSuccess,i.tS(i.Uo))}))),o.D8(_())),p=(0,n.zG)(d,o.Rp(-1,(e=>e+1)));return{value:(0,n.zG)(f,o.UI((0,n.ls)((0,a.vg)("lastSuccess"),i.UI(s.UI((e=>e.output))),i.fS((()=>s.F2(i.YP)))))),state:(0,n.zG)(o.vP(d,p),o.UI((e=>{let[t,r]=e;return r>0?t:_().equals(t,u)?c:t})))}})),f=e=>t=>(0,n.ls)((0,a.rO)({previousState:(0,n.ls)(i.DT(h),i.YO("s1"),i.Hr("s2",(t=>{let{s1:r}=t;return(0,n.zG)(r,(0,a.rO)({lastSuccess:i.UI((0,a.rO)({output:i.tS(e)}))}))})),i.UI((e=>{let{s1:t,s2:r}=e;return _().equals(t,r)?t:r})),i.FS)}),t),d=()=>u.n_({freshnessKey:(0,a.Or)(),timestamp:(0,a.Or)(),output:i.Eh((0,a.Or)())});function p(e){return"object"==typeof e&&null!==e&&(!(!("freshnessKey"in e)||!w(e.freshnessKey))&&("timestamp"in e&&"number"==typeof e.timestamp&&!(!("output"in e)||!(0,a.El)(e.output))))}const g=()=>u.n_({validityKey:(0,a.Or)(),inFlight:i.Eh(d()),lastSuccess:i.Eh(s.Eh((0,a.Or)(),d()))}),_=()=>u.n_({validityKey:(0,a.Or)(),lastSuccess:i.Eh(d())});function h(e){return"object"==typeof e&&null!==e&&(!(!("validityKey"in e)||!w(e.validityKey))&&!!("lastSuccess"in e&&(0,a.El)(e.lastSuccess)&&(0,n.zG)(e.lastSuccess,i.EQ((()=>!0),p))))}function w(e){return null===e||"string"==typeof e||"number"==typeof e}},41:(e,t,r)=>{r.r(t),r.d(t,{PermutiveActivationManagerWeb:()=>o,optimisedActivationsConfig:()=>i});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,s,i,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=s,this.config=i,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var s=r(636);const i={dfp:{dfp:[172215,166027,173903,91821,95201,140685,106906,89492,173895,164010,64767,82106,173924,114192,173923,56344,99366,173884,172883,77811,167460,89784,64766,167455,88489,121269,135961,88766,167473,94397,167459,124278,173168,173906,173896,89495,64911,106920,87159,172214,100803,41376,94909,114028,99365,175012,66683,173890,173926,168149,173915,91449,62212,134610,96020,168154,173883,105719,120920,84222,58133,173898,173901,113969,107326,98239,167464,79655,173902,92956,99387,89496,91628,132243,85209,173930,173908,90032,101197,167467,89786,132240,157446,173918,117411,173925,92886,167468,173881,56634,134502,173876,116495,124457,127898,135985,80707,173882,173931,167462,114973,89497,88505,172948,87319,173914,65452,149125,88024,157502,139861,174346,74822,100580,73008,139769,173928,103854,91819,173889,173891,167461,105851,100608,165789,117409,145008,173919,105717,167474,123650,157232,70302,133840,173912,173877,98706,91448,122873,173909,91149,92957,41414,92946,97262,122871,172220,90449,89782,125103,88026,172217,167475,132352,89781,172225,173888,175049,114701,174345,173921,106567,74314,167472,146705,122439,82015,172216,132236,107324,82234,117139,92973,173880,120744,167607,122874,122535,158127,124656,173907,128247,39204,173913,99059,91291,173917,94752,124339,139856,97261,167458,173762,168072,173900,89780,125544,114702,106921,89783,167463,173932,74820,167457,165229,173910,122872,173167,133758,131504,167456,62161,172275,73331,88504,134592,136107,154903,90033,84002,89494,167471,173878,167476,84072,65454,117410,73342,173897,89747,167466,172221,88624,65451,110071,103853,91654,89493,101196,92947,132239,132233,102092,173920,64768,75548,105718,109700,174344,147496,98469,79654,173626,173927,85210,100609,109669,90876,173916,90007,66684,168172,173929,144155,172219,173922,90034,167477,116942,173879,172218,114096,175844,175840,175818,175816,175830,175812,175832,175828,175814,175820,175824,175835,175826,175842,175822,175555,175810,175808,175806,175803,175804,176884,176883,176887,176888,176889,176890,176891,176892,176893,176894,176895,176896,176897,176898,176899,176900,176901,176902,176903,176905,176906,176904,176907,176908,176910,176911,176912,176913,176914,176915,176916,176917,176918,176919,176920,176921,176922,176923,176924,176953,176955,176957,176968,176967,177016,177226,177419,178814,180084,180085,180951,180952,180953,180956,180957,180959,181008,181367,183024,183448,184006,184706,184958,185040,185201,185434,185652,186185,186327,186328,187218,187358,188255,188392,188393,189307,189338,189339,189340,189341,189342,166526,164201,192184,193201,188921,194112,194111,188922,188920,194113,194541,194542,194543,194857,195230,196455,196454,196328,192341,196843,185107,197769,196939,203327,206662,186897],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[39204,149125],nativo:[],rubicon_ssp:[],smart:[],freewheel:[]};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return i[e]}getActivations(e){return(0,s.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},636:(e,t,r)=>{r.d(t,{Hn:()=>s});const n={standard_cohorts:{auto_init:!0,standard_audiences:{affinity_enabled:!0},activationConfigs:[]},ssp:{auto_init:!0,ssps:["openx"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},all_cohort_mapping:{1e7:["bgyz"],10000001:["bhgp"],10000002:["bhhc"],10000003:["bhhg"],10000004:["bhhk"],10000005:["bhhp"],10000006:["bhhv"],10000007:["bhhy"],10000008:["bhie"],10000010:["bhis"],10000011:["bhiz"],10000012:["bhji"],10000013:["bhjq"],10000014:["bhka"],10000015:["bhkl"],10000016:["bhkr"],10000017:["bhky"],10000018:["bhlg"],10000019:["bhli"],10000020:["bhlo"],10000021:["bhlp"],10000022:["bhnd"],10000023:["bhnl"],10000024:["bhnp"],10000025:["bhnw"],10000026:["bhoj"],10000035:["bgzb"],10000036:["bhgq"],10000037:["bhgs"],10000038:["bhgw"],10000039:["bhgy"],10000040:["bhgz"],10000041:["bhhe"],10000042:["bhhh"],10000043:["bhhw"],10000044:["bhhx"],10000045:["bhhz"],10000046:["bhia"],10000047:["bhif"],10000048:["bhig"],10000049:["bhii"],10000050:["bhij"],10000051:["bhik"],10000052:["bhim"],10000053:["bhip"],10000054:["bhit"],10000055:["bhiu"],10000056:["bhiv"],10000057:["bhiy"],10000058:["bhjm"],10000059:["bhjr"],10000060:["bhjs"],10000061:["bhjw"],10000062:["bhjx"],10000063:["bhkm"],10000064:["bhir"],10000065:["bhko"],10000066:["bhkp"],10000067:["bhkq"],10000068:["bhkz"],10000069:["bhla"],10000070:["bhlb"],10000071:["bhle"],10000072:["bhlf"],10000073:["bhlq"],10000074:["bhlt"],10000075:["bhlu"],10000076:["bhlw"],10000077:["bhlx"],10000078:["bhly"],10000079:["bhmb"],10000080:["bhmi"],10000081:["bhmj"],10000082:["bhml"],10000083:["bhmp"],10000084:["bhmr"],10000085:["bhmw"],10000086:["bhmz"],10000087:["bhne"],10000088:["bhnf"],10000089:["bhni"],10000090:["bhnn"],10000324:["bhhj"],10000325:["bhhi"],10000327:["bhku"],10000328:["bhkt"],10000329:["bhkw"],10000330:["bhkv"],10000687:["bgzc"],10000688:["bgza"],10000689:["bhha"],10000690:["bhgt"],10000691:["bhgx"],10000692:["bhgv"],10000693:["bhgr"],10000694:["bhgu"],10000695:["bhhb"],10000696:["bhhd"],10000697:["bhhf"],10000698:["bhhl"],10000699:["bhho"],10000700:["bhhm"],10000701:["bhhn"],10000702:["bhhq"],10000703:["bhht"],10000704:["bhhu"],10000705:["bhhs"],10000706:["bhhr"],10000707:["bhib"],10000708:["bhid"],10000709:["bhic"],10000710:["bhio"],10000711:["bhin"],10000712:["bhil"],10000713:["bhiq"],10000714:["bhih"],10000715:["bhiw"],10000716:["bhix"],10000717:["bhja"],10000718:["bhjc"],10000719:["bhjd"],10000720:["bhje"],10000721:["bhjf"],10000722:["bhjb"],10000723:["bhjg"],10000724:["bhjh"],10000725:["bhjo"],10000726:["bhjk"],10000727:["bhjn"],10000728:["bhjj"],10000729:["bhjl"],10000730:["bhjy"],10000731:["bhju"],10000732:["bhjv"],10000733:["bhjz"],10000734:["bhjt"],10000735:["bhkj"],10000736:["bhkk"],10000737:["bhki"],10000738:["bhkd"],10000739:["bhkc"],10000740:["bhkf"],10000741:["bhkh"],10000742:["bhkb"],10000743:["bhkg"],10000744:["bhke"],10000745:["bhjp"],10000746:["bhkn"],10000747:["bhkx"],10000748:["bhks"],10000749:["bhld"],10000750:["bhlc"],10000751:["bhlh"],10000752:["bhlk"],10000753:["bhlj"],10000754:["bhll"],10000755:["bhlm"],10000756:["bhlv"],10000757:["bhna"],10000758:["bhmv"],10000759:["bhmt"],10000760:["bhmy"],10000761:["bhmc"],10000762:["bhmo"],10000763:["bhls"],10000764:["bhmq"],10000765:["bhme"],10000766:["bhmh"],10000767:["bhlz"],10000768:["bhlr"],10000769:["bhnb"],10000770:["bhmk"],10000771:["bhmu"],10000772:["bhmx"],10000773:["bhmg"],10000774:["bhmd"],10000775:["bhmf"],10000776:["bhnc"],10000777:["bhmn"],10000778:["bhmm"],10000779:["bhma"],10000780:["bhms"],10000781:["bhng"],10000782:["bhnj"],10000783:["bhnh"],10000784:["bhnk"],10000785:["bhno"],10000786:["bhnm"],10000787:["bhnu"],10000788:["bhnv"],10000789:["bhns"],10000790:["bhnt"],10000791:["bhnq"],10000792:["bhnr"],10000793:["bhob"],10000794:["bhny"],10000795:["bhod"],10000796:["bhoh"],10000797:["bhog"],10000798:["bhnz"],10000799:["bhoa"],10000800:["bhoe"],10000801:["bhnx"],10000802:["bhoc"],10000803:["bhof"]},affinity_enabled:!0,activationConfigs:[]},overlays:{auto_init:!0,activationConfigs:[]},rubicon_ssp:{auto_init:!0,publisher_id:"29410",activationConfigs:[]},local_storage:{auto_init:!0,activationConfigs:[{id:"0f64b862-b8c4-4fbc-b9db-3e8f1e54aa12",tt:"EveryTime",sc:39204,c:{storage_key:"_pindexs"},wc:{}},{id:"f6c72179-e550-4ffb-9f10-b5d742e81a24",tt:"EveryTime",sc:39204,c:{storage_key:"_ppiano"},wc:{}}]},scriptrunner:{auto_init:!0,activationConfigs:[]},contextual:{auto_init:!0,activationConfigs:[]},geoip:{auto_init:!1,activationConfigs:[]},clean_room:{auto_init:!0,pass_cohorts_to_prebid:!0,cohort_ssp_config:[],activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},gam_log:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:["ozone","rubicon","appnexus","openx","ix"]},activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},appnexus_adserver:{auto_init:!0,activationConfigs:[]},publishers:{auto_init:!1,add_alchemy_taxonomy:!0,add_alchemy_entities:!1,activationConfigs:[]}},s=e=>{const t=n[e];return(e,r)=>(null==t?void 0:t[e])??r};s("web"),s("dfp"),s("facebook_pixel_v2")},277:(e,t,r)=>{r.d(t,{X:()=>s,k:()=>n});const n=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),s=e=>({id:e.id,name:e.name,time:(i(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),i=e=>isFinite(e)&&e instanceof Date},878:(e,t,r)=>{r.d(t,{F:()=>u,I:()=>c});var n=r(460),s=r(444),i=r(583),o=r(275),a=r(387);const c=(e,t)=>{let r=!1;return n.UI(s.UI((0,a.bw)((n=>{r||(r=(0,o.zG)(n,i.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))},u=(e,t)=>{const r=c(e,t);return(0,o.ls)(n.En(2,i.uZ()),(e=>{let[t,s]=e;return(0,o.zG)(s,r,n.UI((e=>e()))),t}))}},361:(e,t,r)=>{r.r(t),r.d(t,{service:()=>bi});var n=r(275),s=r(936),i=r(460),o=r(492),a=r(495);const c=e=>{const t=e.current;return(0,n.zG)(e,i.UI((e=>e===t?{segmentsEntered:[],segmentsExited:[]}:{segmentsEntered:(0,n.zG)(e,l(t)),segmentsExited:(0,n.zG)(t,l(e))})))},u=e=>new Set(e),l=e=>t=>(0,n.zG)(t,f((t=>!e.has(t)))),f=e=>t=>{const r=[];return t.forEach((t=>e(t)&&r.push(t))),r};var d=r(444),p=r(812),g=r(387);const _=()=>({kind:"null",value:null}),h=e=>({kind:"string",value:e}),w=e=>({kind:"number",value:e}),m=e=>({kind:"array",value:e}),b=e=>({kind:"object",value:e}),v=e=>e,y=()=>({kind:"bottom"}),k=e=>({kind:"inner",a:e}),S=e=>({kind:"top",error:e}),I=e=>({kind:"unbounded",group:e}),q=(e,t)=>({kind:"windowed",key:t,group:e}),z=(e,t,r)=>({kind:"countLimit",n:r,limit:t,group:e}),G=(e,t,r)=>({kind:"uniqueLimit",n:r,limit:t,group:e}),x=e=>({kind:"numberGroup",group:e}),U=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),P=e=>({state:e}),C=(e,t)=>({commands:e,payload:t});var D=r(881),O=r(29);const j=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return k(t(e.a));case"top":return S(e.error)}},T=e=>(0,D.Zt)(((t,r)=>{if("bottom"===t.kind&&"bottom"===r.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===r.kind)return 1;if("top"===t.kind&&"top"===r.kind)return O.Df.compare(t.error,r.error);if("top"===t.kind)return 1;if("top"===r.kind)return-1;if("inner"===t.kind&&"inner"===r.kind)return e.compare(t.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var A=r(586),M=r(358),R=r(385),F=function(e){return-1===e?1:1===e?-1:0};function L(e,t){return(0,M.oA)(e.map(t))}function Y(e,t,r,n){const s=(e,t)=>{if(0===e.length)return(0,M.oA)(t.map((e=>(0,o.G)({1:e[1],2:r(o.YP,(0,o.G)(e[2]))}))));if(0===t.length)return(0,M.oA)(e.map((e=>(0,o.G)({1:e[1],2:r((0,o.G)(e[2]),o.YP)}))));if(e.length>0&&t.length>0&&(0,D.lt)(n)(e[0][1],t[0][1])){const[n,...i]=e,a=n[1],c=n[2];return(0,M.Ce)({1:a,2:r((0,o.G)(c),o.YP)})(s(i,t))}if(e.length>0&&t.length>0&&(0,D.gt)(n)(e[0][1],t[0][1])){const[n,...i]=t,a=n[1],c=n[2];return(0,M.Ce)({1:a,2:r(o.YP,(0,o.G)(c))})(s(e,i))}if(e.length>0&&t.length>0){const[n,...i]=e,[a,...c]=t,u=n[1],l=n[2],f=a[2];return(0,M.Ce)({1:u,2:r((0,o.G)(l),(0,o.G)(f))})(s(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=(0,D.Uz)((e=>e[1]))(n),a=(e=>{const t=L(e,(e=>(0,o.pC)(e[2])?(0,o.G)({1:e[1],2:e[2].value}):o.YP));return 0===t.length?o.YP:(0,o.G)(t)})(s((0,M.DY)(i)([...e].map((e=>({1:e[0],2:e[1]})))),(0,M.DY)(i)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,o.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(a)}function Q(e,t,r,n){const s=(0,D.Uz)((e=>e[0]))(n),i=(0,M.DY)(s)([...t]).reduceRight(((e,t)=>{if((0,R.nM)(e)){const n=r(t[1],e.left);return(0,o.pC)(n)?(0,R.t$)(n.value):(0,R.F2)(t[0])}return e}),(0,R.t$)(e));return(0,o.Uo)(i)}function N(e,t){return new Map([...e].map(t))}function $(e,t){return new Map([...e].filter(t))}var B=r(191),H=r(627);function V(e){return JSON.stringify(K(e))}function K(e){switch(e.kind){case"null":return X.encode(e);case"string":return Z.encode(e);case"number":return ee.encode(e);case"array":return te.encode(e);case"object":return re.encode(e)}}function J(e){return null===e?X.decode(e):"number"==typeof e?ee.decode(e):"string"==typeof e?Z.decode(e):Array.isArray(e)?te.decode(e):re.decode(e)}const W=(e,t)=>(0,R.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),X={encode:e=>null,decode:e=>null===e?(0,R.F2)({kind:"null",value:null}):W(e,"SimpleNull")},Z={encode:e=>e.value,decode:e=>"string"==typeof e?(0,R.F2)(h(e)):W(e,"SimpleString")},ee={encode:e=>e.value,decode:e=>"number"==typeof e?(0,R.F2)(w(e)):W(e,"SimpleNumber")},te={encode:e=>e.value.map(K),decode:e=>{if(Array.isArray(e)){const t=(0,M.fw)(R.g1)(J)(e);return(0,R.UI)(m)(t)}return W(e,"SimpleArray")}},re={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:K(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=(0,M.fw)(R.g1)((([e,t])=>(0,n.zG)(J(t),(0,R.UI)((t=>(0,n.bc)(e,t))))))(Object.entries(e));return(0,R.UI)((e=>b(new Map([...e]))))(t)}return W(e,"SimpleObject")}};function ne(e){return(0,n.zG)(e,ie,(0,o.UI)(V),(0,o.fS)((()=>"<encode error>")))}function se(e){return(0,o.UI)(fe)(function(e){switch(e.state.kind){case"top":return(0,o.G)(h(e.state.error));case"bottom":return o.YP;case"inner":return ie(e.state.a)}}(e))}function ie(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return oe(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,o.G)(m(function(e,t){const r=(0,o.UI)((e=>(0,M.Ce)(e)(t)))(e);return(0,o.fS)((()=>t))(r)}((0,o.UI)((e=>h(function(e){const t=e=>(0,o.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>{const n=t(e[1])+r(e[1]);return 1===e[2]?n:n+JSON.stringify(e[2])};return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return h(e.error);case"inner":return w(e.a)}},r=e=>L([ae,ce,e=>(0,n.zG)(e,le,b,o.G)],(t=>t(e))),s=e=>L([ae,ue,e=>(0,n.zG)(e,le,(e=>N(e,(([e,t])=>[JSON.stringify(e),t]))),b,o.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return r(e.group);case"numberGroup":return s(e.group)}}(e.payload)))):o.YP}function oe(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,o.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,o.pC)(e.limit)}}function ae(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(h("w"));case"countLimit":return(0,o.G)(h(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,o.G)(h(1===e.n?"u":`u${e.n}`))}}function ce(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(h((0,o.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,o.G)(h((0,o.pC)(e.limit)?e.limit.value:""))}}function ue(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.pC)(e.key)?(0,o.G)(w(e.key.value)):(0,o.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,o.pC)(e.limit)?(0,o.G)(w(e.limit.value)):(0,o.G)({kind:"null",value:null})}}function le(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function fe(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?fe(e.value[0]):m(e.value.map(fe));case"object":return(0,n.zG)($(e.value,(([e,t])=>"null"!==t.kind)),(e=>N(e,(e=>[e[0],fe(e[1])]))),b);default:return e}}function de(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return o.YP;const[t,r,n,s]=e;if("string"===t.kind&&"string"===r.kind&&"object"===s.kind){const e=(0,o.DT)((e=>pe(e[1].value)&&ge(e[2].value)))({1:t,2:r});return(0,o.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:s.value})))(e)}return o.YP})(e);if((0,o.pC)(t)){const{prim:e,grp:r,cutoff:n,m:s}=t.value,i=_e(n,s,he(r));return"string"==typeof i?S(i):k(C(we(e),i))}const r=(e=>{if(3!==e.length)return o.YP;const[t,r,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,o.DT)((e=>ge(e.value)))(t);return(0,o.UI)((e=>({grp:e.value,cutoff:r,m:n.value})))(e)}return o.YP})(e);if((0,o.pC)(r)){const{grp:e,cutoff:t,m:n}=r.value,s=_e(t,n,he(e));return"string"==typeof s?S(s):k(C(o.YP,s))}const n=(e=>{if(2!==e.length)return o.YP;const[t,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,o.DT)((e=>pe(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,m:r.value})))(e)}return o.YP})(e);if((0,o.pC)(n)){const{prim:e,m:t}=n.value;return k(C(we(e),U(I(t))))}const s=(e=>{if(1!==e.length)return o.YP;const[t]=e;return"object"===t.kind?(0,o.G)({m:t.value}):o.YP})(e);if((0,o.pC)(s)){const{m:e}=s.value;return k(C(o.YP,U(I(e))))}const i=(e=>{if(e.length<1)return o.YP;const[t,...r]=e;if("string"===t.kind){const e=(0,o.DT)((e=>pe(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,rest:r})))(e)}return o.YP})(e);if((0,o.pC)(i)){const{prim:e,rest:t}=i.value;return k(C(we(e),be(t)))}return k(C(o.YP,be(e)))},r=e=>"array"===e.kind?(0,M.tS)(r)(e.value):[e];return"null"===e.kind?P({kind:"bottom"}):P(t(r(e)))}function pe(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...r]=t;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function ge(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...r]=t;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function _e(e,t,r){switch(e.kind){case"string":return U(r({1:(0,o.G)(e.value),2:t}));case"number":case"null":return x(r({1:"null"===e.kind?o.YP:(0,o.G)(e.value),2:$(N(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function he(e){const t=e=>t=>G(t[2],t[1],e),r=e=>t=>z(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>q(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return r(1);case"x"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function we(e){const t=e=>(0,o.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,o.G)(e):o.YP,r=(e,r,s)=>{const i=((e,r)=>(0,n.zG)(e,(e=>{switch(e){case"p":return(0,o.G)("add");case"m":return(0,o.G)("mul");case"v":return(0,o.G)("max");case"n":return(0,o.G)("min");default:return o.YP}}),o.UI((e=>({operation:e,bound:r}))),o.tS(t)))(e,s);return(0,o.UI)((e=>{const{init:t,rest:n}=(0,M.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(i)};return(0,o.UI)(v)((0,A.nI)(me(e,(e=>{const t=e.split("");if(0===t.length)return o.YP;const[s,...i]=t;if("b"===s){const{init:e,rest:t}=(0,n.zG)(i,(0,M.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return o.YP;const s=parseFloat(e.join("")),[a,...c]=t;return r(a,c,(0,o.G)(s))}return r(s,i,o.YP)}))))}function me(e,t){const r=t(e);return(0,o.fS)((()=>[]))((0,o.UI)((e=>[e[1]].concat(me(e[2],t))))(r))}function be(e){return E(e.map(ve))}function ve(e){switch(e.kind){case"number":return k(e.value);case"string":return S(e.value);case"null":return{kind:"bottom"};case"object":return S("{object}");case"array":return S("{array}")}}var ye=r(925);const ke={strategy:(e,t,r)=>n=>{if((0,o.Wi)(r))return t;if("delta"===e&&(0,o.Wi)(t))return o.YP;if((0,o.Wi)(t))return r;if((0,o.pC)(t)&&(0,o.pC)(r))return n(t.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,r,s,i,a)=>{const c=(0,M.pR)(T(a)),u=(0,n.zG)(t.bound,o.EQ((()=>n.yR),(e=>t=>(0,D.VV)(a)(i.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,M.yL)(r,s,Ue("append",(0,n.ls)(i.plus,u)));if("append"===e&&"mul"===t.operation)return(0,M.yL)(r,s,Ue("append",(0,n.ls)(i.times,u)));if("append"===e&&"max"===t.operation)return(0,D.Fp)(c)(r,s);if("join"===e&&"add"===t.operation)return(0,M.yL)(r,s,Ue("join",(0,D.Fp)(a)));if("join"===e&&"mul"===t.operation)return(0,M.yL)(r,s,Ue("join",(0,D.Fp)(a)));if("join"===e&&"max"===t.operation)return(0,D.Fp)(c)(r,s);if("min"===t.operation)return ke.operation(e,{operation:"max",bound:t.bound},r,s,i,function(e){return(0,D.Zt)(((t,r)=>F(e.compare(t,r))))}(a));if("delta"===e&&"max"===t.operation)return(0,D.gt)(c)(r,s)?r:s.map(y);if("delta"===e)return(0,M.yL)(r,s,((e,t)=>(0,D.gt)(T(a))(e,t)?j(e,u):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,r,n)=>{if("delta"===e&&"top"===r.kind&&"top"===n.kind)return(0,D.gt)(O.Df)(r.error,n.error)?S(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===n.kind)return S((0,D.Fp)(O.Df)(r.error,n.error));if("top"===r.kind)return r;if("top"===n.kind)return n;if("inner"===r.kind&&"inner"===n.kind)return t(r.a,n.a);if("bottom"===r.kind)return n;if("bottom"===n.kind)return r;throw new Error("Non exhaustive match in extend")}},Se={fromNumber:n.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function Ie(e,t,r,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const s=e.group,i=t.group;return(0,o.fS)(y)((0,o.UI)((e=>k(I(e))))(Y(s,i,r,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const s=e.key,i=e.group,a=t.key,c=t.group,u=(0,D.Fp)((0,o.pR)(n))(s,a);return(0,o.fS)(y)((0,o.UI)((e=>k(q(e,u))))(Y(i,c,r,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const s=e.n,i=t.n;if(s===i){const i=e.limit,a=e.group,c=t.limit,u=t.group,l=(0,D.Fp)((0,o.pR)(n))(i,c);return(0,o.fS)(y)((0,o.UI)((e=>k(z(e,l,s))))(Y(a,u,r,n)))}return S("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const s=e.n,i=t.n;if(s===i){const i=e.limit,a=e.group,c=t.limit,u=t.group,l=(0,D.Fp)((0,o.pR)(n))(i,c);return(0,o.fS)(y)((0,o.UI)((e=>k(G(e,l,s))))(Y(a,u,r,n)))}return S("Non matching counts")}return S("Non matching group types")}function qe(e,t,r){return(0,o.fS)(_)(ze(e,o.YP)(t,r))}function ze(e,t){const r=t=>(r,n)=>ke.strategy(e,r,n)(ze(e,t)),s=(t,n,s)=>{if("stringGroup"===n.kind&&"stringGroup"===s.kind){const e=Ie(n.group,s.group,r(t),O.Df);return j(e,(e=>U(xe(e,O.Df))))}if("numberGroup"===n.kind&&"numberGroup"===s.kind){const e=Ie(n.group,s.group,r(t),H.Df);return j(e,(e=>x(xe(e,H.Df))))}if("tuple"===n.kind&&"tuple"===s.kind){const r=(0,o.pC)(t)?t.value:[];return k(E(function(e,t,r,n,s,i){const a=(e,t)=>({1:(0,M.ke)(e)(t).concat((0,M.KB)(Math.max(0,e-t.length),y)),2:(0,M.md)(e)(t)}),c=(t,r,n)=>{if(0===t.length)return ke.operation(e,{operation:"max",bound:o.YP},r,n,s,i);if(t.length>0){const[o,...u]=t,l=a(o[2],r),f=l[1],d=l[2],p=a(o[2],n),g=p[1],_=p[2];return ke.operation(e,o[1],f,g,s,i).concat(c(u,d,_))}throw new Error("Non exhaustive match in recurse")};return(0,M.GY)((0,M.Qp)((e=>"bottom"===e.kind))((0,M.GY)(c(t,r,n))))}(e,r,n.tuple,s.tuple,Se,H.Df)))}throw new Error(`Non matching payload. Got ${n.kind} and ${s.kind}`)},i=(e,r)=>{if((0,o.Eh)((0,A.Eh)((0,B.n_)({1:(0,B.n_)({operation:O.Eq,bound:(0,o.Eh)(H.Eq)}),2:H.Eq}))).equals(e.commands,r.commands)){const n=(0,o.Wi)(e.commands)?t:e.commands,i=s(n,e.payload,r.payload);return j(i,(t=>C(e.commands,t)))}if(i=e.commands,a=r.commands,(0,o.Eh)((0,A.Eh)((0,B.n_)({1:(0,B.n_)({operation:O.Eq}),2:H.Eq}))).equals(i,a)){const i=(0,n.zG)(((e,t)=>(0,n.zG)((0,ye.gz)(o.G5)(e,t),(0,o.UI)((([e,t])=>A.yL(e,t,((e,t)=>({1:{operation:e[1].operation,bound:(0,n.zG)((0,ye.gz)(o.G5)(e[1].bound,t[1].bound),o.UI((([e,t])=>Math.min(e,t))),o.wp((()=>e[1].bound)),o.wp((()=>t[1].bound)))},2:e[2]})))))))(e.commands,r.commands),o.wp((()=>t))),a=s(i,e.payload,r.payload);return j(a,(e=>C(i,e)))}throw new Error(`Non matching primitive strings. Got ${ne(e)} and ${ne(r)}`);var i,a};return(t,r)=>se(P(ke.extend(e,i,de(t).state,de(r).state)))}function Ge(e,t,r){const n=(0,o.UI)((t=>$(e,(([e,n])=>(0,D.gf)(r)(e,t)))))(t);return(0,o.fS)((()=>e))(n)}function xe(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,o.Wi)(e.key)?e:q(Ge(e.group,e.key,t),e.key);case"countLimit":{const r=e.limit,n=e.n,s=e.group,i=Q(n,s,((e,t)=>t<=1?o.YP:(0,o.G)(t-1)),t),a=(0,D.Fp)((0,o.pR)(t))(r,i);return z(Ge(s,a,t),a,n)}case"uniqueLimit":{const r=e.limit,n=e.n,s=e.group,i=(e,t)=>{if("object"===e.kind){const r=[...e.value.keys(),...t.keys()],s=new Set(r);return s.size>=n?o.YP:(0,o.G)(s)}return o.YP},a=Q(new Set,s,i,t),c=(0,D.Fp)((0,o.pR)(t))(r,a);return G(Ge(s,c,t),c,n)}}}function Ue(e,t){return(r,n)=>ke.extend(e,((e,r)=>k(t(e,r))),r,n)}function Ee(e,t){return qe("append",e,t)}function Pe(e,t){return qe("join",e,t)}var Ce=r(54),De=r(491),Oe=r(716),je=r(543),Te=r(560),Ae=r(219);function Me(e,t){return function(r){return e.map(r,t.compact)}}function Re(e,t,r){var s=Me(e,t),i=(0,Te.UI)(e,r);return function(e){return Ae.s4(s((0,n.zG)(e,i(o.IS))),s((0,n.zG)(e,i(o.EK))))}}function Fe(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function Le(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function Ye(e,t){var r=Fe(e,t);return function(e){var t=r((0,De.ff)(e)),n=r(e);return function(e){return(0,Ae.s4)(t(e),n(e))}}}function Qe(e,t){var r=Le(e,t);return function(e){return function(t){return(0,Ae.s4)((0,n.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,n.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var Ne=r(395),$e=r(272),Be=r(963);function He(e){return(0,n.ls)(o.G,e.of)}function Ve(e){return(0,n.a9)(e.of(o.YP))}function Ke(e){return function(t){return e.map(t,o.G)}}function Je(e){return(0,n.ls)(o.ij,e.of)}function We(e){var t=Je(e);return function(e){return(0,n.ls)(e,t)}}function Xe(e){var t=ct(e),r=We(e);return function(e){return t(r(e))}}function Ze(e){return function(t){return(0,n.ls)(t,e.of)}}function et(e){var t=ct(e),r=Ze(e);return function(e){return t(r(e))}}function tt(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function rt(e){return(0,n.ls)(o.Uo,e.of)}function nt(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function st(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function it(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function ot(e){return(0,Te.UI)(e,o.dO)}function at(e){return(0,ye.ap)(e,o.G5)}function ct(e){var t=Ve(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function ut(e){var t=He(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var lt=r(940),ft=He(lt.PM),dt=(lt.PM,lt.of),pt=(lt.PM,function(e){return gt(lt.tD(e))}),gt=Ke(lt.dO),_t=lt.UI(o.Uo),ht=(lt.dO,st(lt.qo)),wt=(lt.UA,lt.PM,lt.PM,lt.UA,lt.PM,et(lt.UA)),mt=ot(lt.dO),bt=at(lt.Hi),vt=ft,yt=ct(lt.UA),kt=(lt.UA,lt.PM,lt.dO,o.Ri,lt.dO,o.Ri,o.dO,Fe(lt.dO,o.xu)),St=(lt.dO,o.xu,lt.dO,o.xu,lt.dO,o.xu,function(e,t){return(0,n.zG)(e,mt(t))}),It=function(e,t){return(0,n.zG)(e,bt(t))},qt=function(e,t){return(0,n.zG)(e,yt(t))},zt="TaskOption",Gt={URI:zt,map:St},xt={URI:zt,map:St,ap:It,chain:qt},Ut={URI:zt,fromIO:pt},Et=(0,Ne.At)(Ut,xt),Pt={URI:zt,fromIO:pt,fromTask:gt},Ct=(0,$e.wt)(Pt),Dt=(0,$e.oU)(Pt,xt),Ot=(Be.F4,(0,Te.Hr)(Gt)),jt=(0,je.a)(xt),Tt=(Be.Xl,He(d.PM)),At=(d.PM,d.of,d.PM,d.dO,o.Uo,d.dO,d.qo,d.UA,d.UI(o.FS),d.UI(o.WG),d.PM,d.PM,d.UA,d.PM,d.UA,d.dO,d.G5,Tt),Mt=(d.UA,ut(d.UA)),Rt=(d.PM,d.dO,o.Ri,d.dO,o.Ri,o.dO,d.dO,o.xu,d.dO,o.xu,d.dO,o.xu,d.dO,o.xu,Be.F4,Be.Xl,r(583));const Ft=new Set(["AdRequest","PageviewEngagement","SegmentEntry","SegmentExit"]),Lt=e=>s.dQ((t=>{let{previousState:r}=t;const[s,a]=i.Ue(!1);const[c,u]=i.gS({empty:o.YP,concat:(e,t)=>(0,n.zG)(Rt.oA([e,t]),o.DT(Rt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t}))))))}),l=(0,n.zG)((0,g.Kn)(r)?r:{},(0,g.rO)({stateOffset:(0,n.ls)(o.DT(g.BJ),o.fS((()=>0))),fetchUnseenKey:(0,n.ls)(o.DT(g.HD),o.fS((()=>"")))})),f=(0,n.zG)(i.gS(o.uZ({concat:function(e,t){return Object.assign({},e,t)}})),(t=>{let[r,s]=t;return(0,n.zG)(i.vP(e.lastProcessedEvents,e.internalStateDiff,e.queryLanguageProcessing),i.bw((e=>{let[t,r,n]=e;if(n)return;return t().filter((e=>!Ft.has(e.name))).length>0?s(r()):void 0}))),(0,n.zG)(i.vP({internalStateDiff:r,internalStateMap:e.internalStateMap}),i.D8(((e,t)=>e.internalStateDiff===t.internalStateDiff)))})),d=(0,n.zG)(i.vP(e.sessionId,f,s),i.Rp(i.a9({...l,inFlightRequest:!1,previousDecodedState:(0,n.zG)(e.internalStateMap.current,Qt,J,R.fS((()=>b(new Map)))),sendFullStateWithUnseen:!1}),((t,r)=>{let[s,{internalStateDiff:a,internalStateMap:c},l]=r;return(0,n.zG)(t,i.VS((t=>{if(t.inFlightRequest)return i.a9(t);const r=!l&&t.sendFullStateWithUnseen,f=r||!e.groupIdIsNewlyGenerated&&s!==t.fetchUnseenKey;return(0,n.zG)(r?At(c):a,Mt((()=>()=>(0,n.zG)({},o.DT((()=>f))))),lt.tD,yt((0,n.ls)($t(t.previousDecodedState),Oe.Vn((0,g.bw)((t=>e.logger.error(t)))),_t)),ht((()=>lt.of({...t,inFlightRequest:!1})),(0,n.ls)(lt.of,lt.ak("processed",(r=>(0,n.zG)(e,Yt({delta:r.delta,stateOffset:t.stateOffset,fetchUnseen:f}),lt.UI((0,g.bw)((0,n.ls)(o.UI((0,g.vg)("stateDelta")),o.hX(De.ff(Ce.xb)),u)))))),lt.UI((e=>({fetchUnseenKey:s,inFlightRequest:!1,sendFullStateWithUnseen:t.sendFullStateWithUnseen&&!r,previousDecodedState:e.decodedState,stateOffset:(0,n.zG)(e.processed,o.UI((e=>e.response.state_offset)),o.fS((()=>t.stateOffset)))}))))),i.fF,i.UI(o.fS((()=>({...t,inFlightRequest:!0})))))})))})),i.xH,i.UI((e=>({stateOffset:e.stateOffset,fetchUnseenKey:e.fetchUnseenKey}))),i.D8((0,B.MW)({stateOffset:H.Eq,fetchUnseenKey:O.Eq})));return{state:d,value:{externalStateDelta:c}}})),Yt=e=>t=>(0,n.zG)(e,o.DT((e=>e.fetchUnseen||De.ff(Ce.xb)(e.delta))),dt,yt((e=>{return(0,n.zG)(t,(r={event_source_id:t.eventSourceId,fetch_unseen:e.fetchUnseen,group_id:t.groupId,last_seen_offset:e.stateOffset,state:e.delta},e=>Oe.Y3((()=>e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/state",o.G("v1.0"),[["fetch_unseen",JSON.stringify(r.fetch_unseen)]]),method:"POST",payload:{group_id:r.group_id,event_source_id:r.event_source_id,state:JSON.stringify(r.state),last_seen_offset:r.last_seen_offset},contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Error sending state delta. Got ${R.KC(e)}`))),Oe.Vn((0,g.bw)((e=>t.reportError(e)))),_t,kt((e=>!!e)),wt((0,n.ls)(R.of,R.YO("response"),R.ak("stateDelta",(e=>{return t=e.response.state,(0,R.Y3)((function(){return JSON.parse(t)}),n.yR);var t})),R.Vn((0,g.bw)((e=>t.reportError(`Failed to parse State API response, got ${e}`)))),o.Uo)));var r}))),Qt=e=>(0,g.b0)(e,((e,t)=>t.state?o.G({[t.checksum]:t.state}):o.YP)),Nt=e=>t=>{const r=(0,n.zG)(t,Qt,J,R.fS((()=>b(new Map))),(t=>qe("delta",t,e)));return{decodedState:Pe(r,e),delta:(0,n.zG)(r,K,o.ij,o.fS((()=>({}))))}},$t=e=>t=>()=>new Promise((r=>(0,p.HJ)((()=>(0,n.zG)(t,R.it(Nt(e),(e=>`Failed to compute delta for state sync. Got ${e}`)),r)))));r(511),Ce.dp;var Bt=Ce.xb,Ht=function(e){return function(t){return Object.keys(t).sort(e.compare)}};O.Df;Ce.dx,Ce.e$;Ce.Bu,Ce.P5,Ce.Su;var Vt=Ce.UI;Ce.ri;function Kt(e){return Ce.vP(e)}Ce._r;Ce.jt;Ce.yW,Ce.G,Ce.t9;var Jt=Ce.HA,Wt=(Ce.nn,Ce.kp),Xt=Ce.CC,Zt=Ce.RF,er=(Ce.I8,Ce.mS,Ce.RJ,Ce._Y,Ce.V_),tr=Ce.EW,rr=Ce.nu,nr=(Ce.SW,Ce.zV,Ce.Ub,Ce.vA,Ce.qS),sr=(Ce.mK,function(e){return function(t){var r=Ht(e);return function(e,n){var s=r(e);if(0===s.length)return t.of({});for(var i=t.of({}),o=function(r){i=t.ap(t.map(i,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},a=0,c=s;a<c.length;a++){o(c[a])}return i}}}),ir=Ce.hX;Ce.DZ,Ce.uK,Ce.tV;Ce.oA,Ce.oh;var or="Record";var ar=Ce.Eh,cr=(Ce.uZ,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,Ce.nr,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,O.Df,r(865)),ur=r(350),lr=function(e){return function(t){return[void 0,e(t)]}},fr=function(e){return function(t){return[e(t),t]}},dr=function(e,t){return(0,n.zG)(e,_r(t))},pr=function(e,t){return(0,n.zG)(e,hr(t))},gr=function(e,t){return(0,n.zG)(e,mr(t))},_r=function(e){return function(t){return function(r){var n=t(r),s=n[0],i=n[1];return[e(s),i]}}},hr=function(e){return function(t){return function(r){var n=t(r),s=n[0],i=n[1],o=e(i),a=o[0],c=o[1];return[s(a),c]}}},wr=function(e){return function(t){return[e,t]}},mr=function(e){return function(t){return function(r){var n=t(r),s=n[0],i=n[1];return e(s)(i)}}},br="State",vr={URI:br,map:dr},yr={URI:br,map:dr,ap:pr},kr=(0,ye.N)(yr),Sr=(0,ye.a1)(yr),Ir={URI:br,map:dr,ap:pr,of:wr},qr={URI:br,map:dr,ap:pr,chain:gr},zr=(0,je.m)(qr),Gr=(n.yR,(0,Te.YO)(vr)),xr=(0,je.a)(qr),Ur=function(e){var t=function(e){return function(t){return function(r){for(var n=e(0,Be.YM(t))(r),s=[n[0]],i=n[1],o=1;o<t.length;o++){var a=e(o,t[o])(i),c=a[0],u=a[1];s.push(c),i=u}return[s,i]}}}(e);return function(e){return Be.Od(e)?t(e):wr(Be.Xl)}},Er=function(e){return Ur((function(t,r){return e(r)}))},Pr=Er(n.yR);const Cr=e=>({aggregations:{PageviewEngagement:{engaged_time:0},SegmentEntry:new Set,SegmentExit:new Set,CohortEntry:new Set,CohortExit:new Set},customProperties:{},sessionId:e.sessionId,viewId:e.viewId}),Dr=e=>t=>{const r=new Set(t);return r.add(e),r},Or=e=>t=>{const r=new Set(t);return r.delete(e),r},jr=e=>[...e];var Tr,Ar,Mr=r(277);!function(e){e.init=function(e){return e&&"object"==typeof e&&"externalStateMap"in e&&"internalStateMap"in e?e:{externalStateMap:o.YP,internalStateMap:{},migrationVersion:pn}}}(Tr||(Tr={})),function(e){e.sequenceNonEmptyArray=e=>{if(1===e.length)return e[0];const t=(0,n.bc)([],{},[]);for(const r of e){t[0].push(...r[0]);for(const e in r[1])t[1][e]=r[1][e];t[2].push(...r[2])}return t},e.sequenceArray=t=>(0,n.zG)(t,o.DT(Rt.Od),o.UI(e.sequenceNonEmptyArray)),e.empty=[Rt.cS,Ce.cS,Rt.cS],e.ofOutputEvent=e=>[Rt.cS,Ce.cS,[e]]}(Ar||(Ar={}));const Rr=e=>dn((t=>(0,n.zG)(Fr((e=>({...e,getCurrentSession:()=>t.environment.sessionId,getCurrentView:()=>t.environment.viewId}))),mr((()=>{return Pr([Lr(e),Qr(t.environment.thirdPartyData),(s=t.environment.lookalikeModels,(0,n.zG)((function(e){return[e,e]}),mr((e=>on.equals(e.lal,s)?wr(Rt.cS):(0,n.zG)(lr((0,g.rO)({lal:(0,n.a9)(s)})),kr(Fr(function(e){const t=(0,n.zG)(e,o.fS((()=>({}))));return e=>({...e,getLookalikeModels:()=>t})}(s))),mr((()=>(0,n.zG)(Rt.Yo(s),Er((()=>Hr("updateLAL"))),_r(Rt.xH))))))))),(0,n.zG)(t.externalStateDelta,o.UI(Br),o.fS((()=>wr(Rt.bM())))),(r=t.cloudLiftedState,(0,n.zG)(r,Rt.tS((e=>Object.entries(e))),Er((e=>{let[t,r]=e;return fr((e=>(0,n.bc)(t,e.queries.runtime.cloudLiftedQueries[t],r)))})),mr((e=>Jr(R.F2(e)))))),Vr(t.newEvents)]);var r,s})),_r((0,n.ls)(Rt.xH,o.DT(Rt.Od),o.tS(Ar.sequenceArray))),(e=>t=>{let[r,s]=e(t);if(o.pC(r)){let e=r.value,t=0;for(;e[2].length>t;)t=e[2].length,[e,s]=(0,n.zG)(s,(0,n.zG)(Vr(e[2]),_r((t=>Ar.sequenceNonEmptyArray([e,...t])))));r=o.G(e)}return(0,n.bc)(r,s)}),fn(e,"query_language_process_duration")))),Fr=e=>lr((0,g.rO)({effects:e}));function Lr(e){return(0,n.zG)((function(e){return[e,e]}),mr((t=>{let{bootstrapped:r,effects:s,eventsForReplay:i}=t;return r?wr(Rt.cS):(0,n.zG)(lr((e=>({...e,bootstrapped:!0,eventsForReplay:[]}))),mr((()=>(0,n.zG)(i,Rt.R3(ln(s)),Er(Kr("bootstrap")),_r(Rt.xH)))),fn(e,"query_language_bootstrap_duration"))})))}const Yr=(0,n.zG)(fr((e=>e.tpdQueries)),mr(o.EQ((()=>(0,n.zG)(fr((e=>new Set([...e.queries.runtime.queriesByEvent["!UpdateSecondPartyData"]||[],...e.queries.runtime.queriesByEvent["!UpdateThirdPartyData"]||[]]))),zr((e=>lr((0,g.rO)({tpdQueries:()=>o.G(e)})))))),wr)));function Qr(e){const t=(0,n.zG)(e,o.UI(a.li));return(0,n.zG)((function(e){return[e,e]}),mr((r=>{if(o.Eh(H.Eq).equals(t,r.tpdHashInEffectsObject))return wr(Rt.cS);const s=o.FS(t);return(0,n.zG)(lr((0,g.rO)({persistentState:(0,g.rO)({tpdHash:(0,n.a9)(s)}),tpdHashInEffectsObject:(0,n.a9)(t),tpdReady:(0,n.a9)(o.pC(e))})),_r((()=>(0,n.zG)(e,o.UI(a.Yg)))),zr((e=>Fr(function(e){const t=an((()=>(0,n.zG)(e,o.fS((()=>({"3p":{}}))))));return e=>{const r=an((()=>({...t(),...e.get1PSegments()})));return{...e,getSegments:r,getSegmentsArray:an((()=>un(r()))),get3PSegments:t}}}(e)))),mr(o.fw(Ir)((()=>(0,n.zG)(r.tpdEventsToProcess,Rt.EQ((()=>s!==r.persistentState.tpdHash?Hr("updateTPD"):wr(Rt.cS)),(0,n.ls)(Er(Kr("updateTPD")),kr(lr((e=>({...e,tpdEventsToProcess:[]})))),_r(Rt.xH))))))),_r(o.fS((()=>Rt.bM()))))})))}const Nr=e=>Ce.jt(((t,r)=>(0,n.zG)(Ce.P5(t,e.metadata),o.tS((e=>Ce.P5(e,r))),o.tS((r=>(0,n.zG)(Ce.P5(t,e.runtime.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.runtime.cloudLiftedQueries))),o.NG((e=>e.compact(r)))))),o.tS((0,n.ls)(J,o.Uo))))),$r=(e,t)=>{if(Ce.xb(e))return t;if(Ce.xb(t))return e;const r={...e};for(const e in t)r[e]=(0,n.zG)(o.ij(r[e]),o.EQ((()=>t[e]),(r=>(0,n.zG)(o.Y3((()=>Pe(r,t[e]))),o.fS((()=>t[e]))))));return r};function Br(e){return(0,n.zG)(fr((t=>(0,n.zG)(e,Nr(t.queries),(e=>(0,n.zG)(t.persistentState.externalStateMap,o.UI(Ce.DZ((0,n.ls)(J,o.Uo))),o.EQ((()=>e),(t=>$r(t,e))))),Ce.UI(K)))),mr((e=>lr((0,g.rO)({persistentState:(0,g.rO)({externalStateMap:(0,n.a9)(o.G(e))})})))),mr((()=>Hr("updateExternalState"))))}function Hr(e){return(0,n.zG)(fr((e=>ln(e.effects))),mr(Kr(e)))}function Vr(e){return(0,n.zG)(e,Rt.EQ((()=>wr(Rt.bM())),(0,n.ls)(Zr,mr(Er((e=>{let[t,r]=e;return(0,n.zG)(r,Kr(t))}))),_r(Rt.xH))))}function Kr(e){return(0,n.ls)(wr,zr((e=>"Pageview"!==e.name?wr(void 0):lr((0,g.rO)({pageviewProperties:(0,n.a9)(e.properties)})))),"bootstrap"===e?n.yR:zr((e=>{return lr((0,g.rO)({unprocessedPageviewComplete:(t=e,e=>{switch(t.name){case"Pageview":return t.view_id!==e.viewId?e:{...e,customProperties:t.properties};case"SegmentEntry":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,g.rO)({aggregations:e=>e.SegmentExit.has(r)?(0,n.zG)(e,(0,g.rO)({CohortExit:Or(String(r)),SegmentExit:Or(r)})):(0,n.zG)(e,(0,g.rO)({CohortEntry:Dr(String(r)),SegmentEntry:Dr(r)}))}))}case"SegmentExit":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,g.rO)({aggregations:e=>e.SegmentEntry.has(r)?(0,n.zG)(e,(0,g.rO)({CohortEntry:Or(String(r)),SegmentEntry:Or(r)})):(0,n.zG)(e,(0,g.rO)({CohortExit:Dr(String(r)),SegmentExit:Dr(r)}))}))}case"PageviewEngagement":{if(t.view_id!==e.viewId)return e;const r=t.properties;return(0,n.zG)(e,(0,g.rO)({aggregations:(0,g.rO)({PageviewEngagement:()=>({engaged_time:r.total_engaged_time,completion:r.total_completion})})}))}default:return e}})}));var t})),zr((e=>{return rn(e)?Fr((t=e.properties.segment_number,r="SegmentEntry"===e.name,e=>{return(0,n.zG)(e,(s={"1p":{...e.get1PSegments()["1p"],[t]:r}},e=>{const t=an((()=>({...s,...e.get3PSegments()})));return{...e,getSegments:t,getSegmentsArray:an((()=>un(t()))),get1PSegments:()=>s}}));var s})):wr(void 0);var t,r})),Gr("event"),xr("queriesToProcess",(t=>{let{event:r}=t;return function(e,t){return(0,n.zG)((function(e){return[e,e]}),Gr("state"),xr("tpdQueriesToReject",(e=>{let{state:{tpdReady:t}}=e;return t?wr(o.bM()):(0,n.zG)(Yr,_r(o.DT((e=>e.size>0))))})),mr((r=>{let{state:s,tpdQueriesToReject:i}=r;const a=(0,n.zG)(i,o.UI((e=>Rt.hX((t=>!e.has(t))))),o.fS((()=>e=>e)));switch(e){case"bootstrap":return wr((0,n.zG)(s.queriesForReplay,a));case"event":const e=s.tpdReady?wr(void 0):lr((0,g.rO)({tpdEventsToProcess:Rt.R3(t)}));return(0,n.zG)(wr(s.locallyLiftedQueriesByEvent[t.name]||[]),_r(a),kr(e));case"lookalikeTransition":return wr(s.locallyLiftedQueriesByEvent[t.name]||[]);case"transition":const r=s.locallyLiftedQueriesByEvent[t.name]||[];if(o.pC(s.lal)){const e=s.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[];return wr(r.concat(e))}return wr(r);case"updateExternalState":return wr((0,n.zG)(s.persistentState.externalStateMap,o.fS((()=>({}))),Ce.XP));case"updateLAL":return wr(s.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[]);case"updateTPD":return wr([...s.locallyLiftedQueriesByEvent["!UpdateSecondPartyData"]||[],...s.locallyLiftedQueriesByEvent["!UpdateThirdPartyData"]||[]]);default:return wr([])}})))}(e,r)})),mr((t=>{let{event:r,queriesToProcess:s}=t;return(0,n.zG)(s,Rt.EQ((()=>wr(Rt.bM())),(t=>(0,n.zG)(fr((t=>"bootstrap"!==e?t.effects:{...t.effects,getCurrentTime:()=>r.time,getCurrentView:()=>r.view_id,getCurrentSession:()=>r.session_id})),mr((e=>(0,n.zG)(fr((e=>(0,n.zG)(t,Rt.DZ((t=>(0,n.zG)(Ce.P5(t,e.queries.runtime.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.cloudLiftQueriesForReplay))),o.UI((e=>(0,n.bc)(t,e))))))))),mr((t=>Jr(R.t$((0,n.bc)(t,r)),e))))))))))})))}const Jr=(e,t)=>(0,n.zG)(e,R.EQ((e=>{let[r,s]=e;return(0,n.zG)(r,Er((e=>{let[r,n]=e;return Wr(r,R.t$([n,s]),t)})))}),Er((e=>{let[t,r,n]=e;return Wr(t,R.F2([r,n]))}))),_r(Ar.sequenceArray),zr(o.fw(Ir)((e=>{let[,t]=e;return lr((0,g.rO)({persistentState:(0,g.rO)({internalStateMap:e=>({...e,...t})})}))}))),_r(Rt.Yo)),Wr=(e,t,r)=>(0,n.zG)(fr(R.it((s=>{var i,c,u;const l=r??s.effects,f=(0,n.zG)(t,R.EQ(a.li,a.li)),[d,p]=(0,n.zG)(t,R.aD((e=>{let[t,r]=e;return(0,n.bc)(t.lift(r,l),sn({null:null,encode:n.yR,decode:R.of,append:t.append}))}),(e=>{let[,t]=e;return(0,n.bc)(t,sn(nn()))}))),g=(0,n.zG)(s.persistentState.externalStateMap,o.tS(Ce.P5(e))),_=s.persistentState.internalStateMap[e]||{checksum:s.queries.metadata[e]},h=p(e,l,f,_,g,d),w=Boolean(null===(i=h.result)||void 0===i?void 0:i.result)!==Boolean(null===(c=s.persistentState.internalStateMap[e])||void 0===c||null===(u=c.result)||void 0===u?void 0:u.result),m=(0,n.zG)(Rt.lo(w),Rt.UI((()=>{var t;return{name:null!==(t=h.result)&&void 0!==t&&t.result?"SegmentEntry":"SegmentExit",time:l.getCurrentTime(),view_id:l.getCurrentView(),session_id:l.getCurrentSession(),properties:{...s.pageviewProperties,segment_number:Number(e)}}})));return(0,n.bc)(h,m)}),(t=>`Failed to interpret query ${e}. Got ${t}`))),mr(R.EQ((e=>wr([[e],Ce.cS,Rt.cS])),(t=>{let[r,s]=t;return(0,n.zG)(r.dropExternalState?Xr(e):wr(void 0),_r((()=>[Rt.cS,{[e]:r},s])))})))),Xr=e=>lr((0,g.rO)({persistentState:(0,g.rO)({externalStateMap:o.UI(Ce.EG(e))})}));function Zr(e){const t=e=>t=>(0,n.bc)(e,t);return fr((r=>(0,n.zG)(e,Rt.pO(ur.aL(((e,t)=>{const r=rn(e);return(0,n.zG)(t,Rt.zT((e=>rn(e)===r)),(e=>{let{init:t,rest:r}=e;return(0,n.bc)(t,r)}),(0,a.pL)(((e,t)=>r=>(0,n.bc)(e,(0,n.zG)(r,Rt.Ce(t))))(r,e)))}))),Rt.tS((e=>{let[s,i]=e;if(!s)return(0,n.zG)(i,Rt.UI(t("event")));const o=(0,n.zG)(i,Rt.yW((e=>r.lookalikeTransitionSegmentNumbers.has(e.properties.segment_number))),(e=>e?"lookalikeTransition":"transition"));return(0,n.zG)(i,ur.ut(((e,r)=>(0,n.zG)(e,Rt.UI(t("event")),Rt.R3((0,n.zG)(r,t(o)))))))})))))}const en=(0,n.ls)(Ce.hX((e=>{var t;return Boolean(null===(t=e.result)||void 0===t?void 0:t.result)})),Ce.XP,Rt.UI(parseInt)),tn=(0,n.ls)(Vt((e=>e.activations??{})),ir((0,n.zG)(Boolean,(0,De.xD)((0,De.ff)(Bt)))));function rn(e){var t;return("SegmentEntry"===e.name||"SegmentExit"===e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}const nn=()=>({null:{kind:"null",value:null},encode:K,decode:J,append:Ee}),sn=e=>(t,r,s,i,a,c)=>{const u={...i.activations},l={...r,setSegmentActivation:(e,r,n)=>{if(n!=t)throw new Error(`QL called setSegmentActivation for query ${n} while interpreting query ${t}`);e in u?u[e].includes(r)||(u[e]=[...u[e],r]):u[e]=[r]}},f=o.ij(i.state),d=o.ij(c),p=(0,n.zG)((0,ye.gz)(o.G5)(f,d),o.UI((t=>{let[r,s]=t;const i=(0,n.zG)(e.decode(r),R.fS((()=>e.null))),o=(0,n.zG)(e.decode(s),R.fS((()=>e.null)));try{return R.F2(e.append(i,o))}catch(e){throw(0,cr.w)(`Failed to append lifted event ${JSON.stringify(s)} to internal state ${JSON.stringify(r)}. Got ${e}`)}})),o.Gk((()=>(0,n.zG)(f,o.wp((()=>d)),o.UI(R.t$))))),_=(0,n.zG)(p,o.UI(R.EQ(n.yR,e.encode)),o.tS(o.ij)),{overallState:h,dropExternalState:w}=(0,n.zG)((0,ye.gz)(o.G5)(p,a),o.UI((t=>{let[r,s]=t;return(0,n.zG)(o.Uo(e.decode(s)),o.tS((t=>(0,n.zG)(r,R.vx(e.decode),R.fS((()=>e.null)),o.it((r=>e.append(r,t)))))),o.EQ((()=>({overallState:_,dropExternalState:!0})),(t=>({overallState:o.ij(e.encode(t)),dropExternalState:!1}))))})),o.fS((()=>(0,n.zG)(_,o.Gk((()=>a)),(e=>({overallState:e,dropExternalState:!1}))))),(0,g.rO)({overallState:o.WG})),m=s.interpret(h,l);return{checksum:i.checksum,...(0,n.zG)(_,o.aD((()=>({})),(e=>({state:e})))),...!1===m.result?{}:{result:m},...Bt(u)?{}:{activations:u},...!1===w?{}:{dropExternalState:w}}},on=o.Eh({equals:(e,t)=>e===t});function an(e){let t,r=!1;return()=>(r||(t=e(),r=!0),t)}function cn(e){const t=an((()=>(0,n.zG)(e,Ce.hX((e=>{var t;return Boolean(null===(t=e.result)||void 0===t?void 0:t.result)})),Ce.UI((()=>!0)),(e=>({"1p":e}))))),r={"3p":{}},s=an((()=>({...t(),...r})));return{getSegments:s,getSegmentsArray:an((()=>un(s()))),get1PSegments:t,get3PSegments:()=>r}}function un(e){return Object.keys(e).reduce(((t,r)=>{const n=Object.keys(e[r]),s=[];return n.forEach((t=>{!0===e[r][t]&&s.push(t)})),t[r]=s,t}),{})}const ln=e=>({name:"",properties:{},session_id:e.getCurrentSession(),view_id:e.getCurrentView(),time:e.getCurrentTime()}),fn=(e,t)=>r=>n=>{const s=e.startSpan(t),i=r(n);return s.finish(),i},dn=e=>t=>(0,n.zG)(lr((0,g.rO)({unprocessedPageviewComplete:(0,n.ls)(o.DT((e=>e.viewId===t.environment.viewId)),o.fS((()=>Cr(t.environment))))})),Sr(fr((e=>(0,n.zG)(o.ij(e.persistentState.unprocessedPVC),o.hX((e=>e.view_id!==t.environment.viewId)),o.UI(Mr.k))))),Gr("flushedPvc"),xr("processingResult",(r=>{let{flushedPvc:s}=r;return e({...t,newEvents:(0,n.zG)(s,o.EQ((()=>t.newEvents),(e=>[...t.newEvents,e])))})})),zr((()=>lr((e=>{return{...e,persistentState:{...e.persistentState,unprocessedPVC:(0,Mr.X)((t=new Date,r=e.unprocessedPageviewComplete,{name:"PageviewComplete",time:t,session_id:r.sessionId,view_id:r.viewId,properties:{...r.customProperties,aggregations:(0,n.zG)(r.aggregations,(0,g.rO)({SegmentEntry:jr,SegmentExit:jr,CohortEntry:jr,CohortExit:jr}))}}))}};var t,r})))),_r((e=>{let{flushedPvc:t,processingResult:r}=e;const s=(0,n.zG)(t,o.UI(Ar.ofOutputEvent));return(0,n.zG)((0,ye.gz)(o.G5)(s,r),o.UI(Ar.sequenceNonEmptyArray),o.wp((()=>s)),o.wp((()=>r)))}))),pn=2,gn=e=>t=>{const r=t.migrationVersion??(t.stateIsCompact?1:0);return(0,n.zG)([_n,hn],Rt.md(r),Rt.EQ((()=>t),(0,n.ls)(Rt.OV(e),Rt.u4(t,((e,t)=>t(e))),(0,g.rO)({migrationVersion:()=>pn}))))},_n=e=>(0,g.rO)({externalStateMap:o.UI(Ce.jt(((t,r)=>(0,n.zG)(Ce.P5(t,e.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.cloudLiftedQueries))),o.NG((e=>e.compact(r))))))),internalStateMap:Ce.Su(((t,r)=>{if(null==(null==r?void 0:r.state))return r;const n=e.locallyLiftedQueries[t]||e.cloudLiftedQueries[t];return{...r,state:n.compact(r.state)}}))}),hn=e=>{const t=new Set(e.queriesByEvent.PageviewEngagement??[]),r=new Set(e.queriesByEvent.PageviewComplete??[]);return(0,g.rO)({internalStateMap:Ce.z7((0,De.ff)((e=>t.has(e)&&r.has(e))))})},wn=(e,t)=>Ce.xb(t)?e:(0,n.zG)(e,Ce.z7((e=>!(e in t))));var mn=r(569),bn=r(878);const vn={qid:"da39a3ee5e6b4b0d3255bfef95601890afd80709"}||void 0,yn=vn?vn.qid:void 0,kn=yn?(e=>(t,r,s)=>a=>{let c=Rt.cS;return(0,n.zG)(a,i.UI(d.UI(Rt.hX((e=>{let[,t]=e;return s.includes(t.name)})))),i.Rp(i.a9(Rt.bM()),((s,a)=>(0,n.zG)(a(),Rt.EQ((()=>s),(a=>{const[u,l]=Rt.N7(a),f=(0,n.zG)(l,Rt.UI((e=>({...e,cohorts:Rt.cS,segments:Rt.cS})))),d=(0,n.zG)(In(t,r,e,{events:f}),Oe.UI((0,n.ls)((e=>e.result),Ce.UI((e=>e.state)),(e=>({events:u,state:e}))))),p=i.fF(d);(0,n.zG)(p,i.UI(o.UI((e=>{(0,n.zG)(e,R.EQ((e=>{}),(e=>{c=[...c,e]})))}))));const g=(0,n.zG)(p,i.UI(o.EQ((()=>u),(()=>Rt.cS))));return(0,n.zG)(i.vP(s,g),i.UI(Rt.xH))}))))),i.xH,i.UI((e=>({newResults:()=>{const e=c;return c=Rt.cS,e},pendingEvents:e}))))})(yn):()=>e=>((0,n.zG)(e,i.UI((e=>e()))),i.a9({newResults:d.of(Rt.cS),pendingEvents:Rt.cS})),Sn=yn?(e=>(t,r)=>s=>(0,n.zG)(Oe.Y3((()=>t.req({url:r.getEndpointUrl("/cloud-lift/v1/queries",o.YP,[["qid",e],["target","javascript"],["ids",s.join(",")]]),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to download queries from cloud lift: ${e}`)),Oe.UI((e=>t=>t.createCloudLiftQueries(e.queries)))))(yn):()=>()=>Oe.of((()=>({}))),In=(e,t,r,n)=>Oe.Y3((()=>e.req({url:t.getEndpointUrl("/cloud-lift/v1/interpret",o.YP,[["qid",r]]),method:"POST",payload:n,contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to cloud lift event: ${e}`)),qn=e=>[e,lt.of(e)],zn=a.li,Gn=a.Yg,xn=e=>t=>(0,n.zG)(Gn(t),(t=>()=>new Promise((r=>{const n=t();n.then(o.G).then(r);const s=(0,p.HJ)((()=>r(o.YP)),e);n.then(s)})))),Un=e=>t=>[e,t],En="RefEventual",Pn=i.UI(qn),Cn=e=>i.a9(qn(e)),Dn=e=>t=>i.vP((0,n.zG)(t,i.UI(zn),i.UI(e)),(0,n.zG)(t,i.UI(Gn),i.UI(lt.UI(e)))),On=e=>t=>i.vP((0,n.zG)(i.vP((0,n.zG)(e,i.UI(zn)),(0,n.zG)(t,i.UI(zn))),i.UI((e=>{let[t,r]=e;return r(t)}))),(0,n.zG)(i.vP((0,n.zG)(e,i.UI(Gn)),(0,n.zG)(t,i.UI(Gn))),i.UI((e=>{let[t,r]=e;return lt.ap(t)(r)})))),jn=e=>t=>(0,n.zG)(t.current,xn(e),lt.UI(o.fS((()=>(e=>zn(e.current))(t))))),Tn=i.UI(zn),An=i.UI(Gn),Mn={URI:En,map:(e,t)=>Dn(t)(e)},Rn={URI:En,map:Mn.map,ap:(e,t)=>On(t)(e)},Fn=e=>s.dQ((t=>{let{previousState:r}=t;const[s,c]=(0,n.zG)(e.newEvents,i.En(2,Rt.uZ()),(0,mn.H5)(kn(e.permutiveApi,e.permutiveUrls,(u=e.customQueries.runtime,(0,n.zG)(Object.entries(u.queriesByEvent),Rt.hX((e=>{let[,t]=e;return(0,n.zG)(t,Rt.G((e=>e in u.cloudLiftedQueries)))})),Rt.UI(a.li))))));var u;const l=i.vP({lookalikeModels:e.lookalikeModels,sessionId:e.sessionId,thirdPartyData:(0,n.zG)(e.thirdPartyData,i.UI(o.UI((0,mn.H5)(Ce.UI((e=>{const t={};return e.forEach((e=>t[e]=!0)),t})))))),viewId:e.viewId}),f=(0,n.zG)(i.vP({cloudLiftedState:(0,n.zG)(c,i.UI((e=>e.newResults))),environment:l,externalStateDelta:e.externalStateDelta,newEvents:(0,n.zG)(s,(0,bn.I)(e.metrics,"query_language_began_processing_pageview"))}),i.UI((0,g.rO)({environment:e=>d.of(e)})),i.UI((0,ye.Yt)(d.G5))),p=Tr.init(r);const _=(0,n.zG)(r?lt.of({processedState:p,stateMigratedThisInitialisation:!1}):(e.metrics.track({name:"sdk_query_state_migrated_workerisation_count_total",labels:{},value:1}),(0,n.zG)(e.migratedStateMaps,lt.UI((e=>{let{internal:t,external:r}=e;return{stateMigratedThisInitialisation:!0,processedState:{externalStateMap:r,internalStateMap:(0,n.zG)(t,o.fS((()=>({}))))}}})))),lt.Hr("environment",(()=>l.current)),lt.ak("process",(t=>{let{environment:r,processedState:s}=t;return(0,n.zG)((i={downloadCloudLiftQueries:Sn(e.permutiveApi,e.permutiveUrls),environment:r,initialState:s,pastEvents:e.priorEvents,queries:e.customQueries},(0,n.zG)(lt.Do,lt.Hr("persistentState",(()=>(0,n.zG)(i.initialState,(0,g.rO)({internalStateMap:Ce.z7(((e,t)=>t.checksum===i.queries.metadata[e]))}),gn(i.queries.runtime)))),lt.Hr("invalidatedLocalQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return wn(i.queries.runtime.locallyLiftedQueries,t)})),lt.Hr("invalidatedCloudLiftQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return wn(i.queries.runtime.cloudLiftedQueries,t)})),lt.Hr("hasInvalidatedQueries",(e=>{let{invalidatedCloudLiftQueries:t,invalidatedLocalQueries:r}=e;return!(Ce.xb(t)&&Ce.xb(r))})),lt.ak("eventsForReplay",(e=>{let{hasInvalidatedQueries:t}=e;return t?i.pastEvents:lt.of(Rt.bM())})),lt.ak("cloudLiftQueriesForReplay",(0,n.ls)(o.DT((e=>e.eventsForReplay.length>0)),o.UI((e=>Object.keys(e.invalidatedCloudLiftQueries))),o.hX(Rt.Od),o.UI((0,n.ls)(i.downloadCloudLiftQueries,Oe.OV(i.queries.runtime),lt.UI(R.fS((()=>({})))))),o.fS((()=>lt.of({}))))),lt.Hr("queriesForReplay",(e=>{let{cloudLiftQueriesForReplay:t,invalidatedLocalQueries:r}=e;return[...Object.keys(r),...Object.keys(t)]})),lt.UI((e=>{let{cloudLiftQueriesForReplay:t,eventsForReplay:r,queriesForReplay:s,persistentState:a}=e;return{bootstrapped:!1,cloudLiftQueriesForReplay:t,effects:{getCurrentTime:()=>new Date,getCurrentSession:()=>i.environment.sessionId,getCurrentView:()=>i.environment.viewId,getLookalikeModels:()=>({}),setSegmentActivation:(e,t,r)=>{throw new Error(`setSegmentActivation() called for segment ${r} without being overridden first.`)},...cn(a.internalStateMap)},eventsForReplay:r,lal:o.YP,locallyLiftedQueriesByEvent:(0,n.zG)(i.queries.runtime.queriesByEvent,Ce.DZ(o.KQ(Rt.hX((e=>e in i.queries.runtime.locallyLiftedQueries))))),lookalikeTransitionSegmentNumbers:(0,n.zG)(i.queries.runtime.queriesByEvent["!UpdateLookalikeModels"]||Rt.cS,Rt.UI(parseInt),(e=>new Set(e))),pageviewProperties:{},numEventsForReplay:r.length,queries:i.queries,queriesForReplay:s,persistentState:a,tpdEventsToProcess:Rt.cS,tpdHashInEffectsObject:o.YP,tpdQueries:o.YP,tpdReady:!1,unprocessedPageviewComplete:Cr({sessionId:i.environment.sessionId,viewId:i.environment.viewId})}})))),e.trace.traceTask("query_language_initialisation_duration"),lt.UI((0,g.bw)((t=>{var r;e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"query_language_ready",time_origin:"sdk_init"},performance.now()),e.metrics.trackCounter({name:"sdk_queries_to_replay_count",value:(r=t,0===r.numEventsForReplay?0:r.queriesForReplay.length),labels:{}})}))),lt.UI((t=>{let r=t;const s=(0,n.zG)(e.validationService,o.OV(t.persistentState.externalStateMap));return t=>{const[i,a]=(0,n.zG)(t,Rr(e.trace))(r);return(0,n.zG)(s,o.OV((0,n.bc)(t,a))),r=a,[i,a.persistentState]}})));var i})),i.fF),h=(0,n.zG)(_,i.UI(o.UI((e=>e.process)))),w=(0,n.zG)(_,i.UI(o.EQ((()=>!1),(e=>e.stateMigratedThisInitialisation))));let m=Rt.bM();const b=(0,n.zG)(i.vP({processInput:h,inputIO:(0,n.zG)(f,i.UI(o.G))}),i.UI((0,ye.Yt)(o.G5)),i.UI(o.UI((e=>{let{processInput:t,inputIO:r}=e;const s=r(),[i,c]=(0,n.zG)(s,(0,g.rO)({newEvents:Rt.UI(a.Yg),cloudLiftedState:Rt.UI((e=>e.state))}),(e=>t({...e}))),u=(0,n.zG)(i,o.EQ((()=>({errors:[],events:s.newEvents,internalStateDiff:o.YP})),(e=>{let[t,r,n]=e;return{errors:t,events:s.newEvents.concat(n.map((e=>[(0,g.k$)(),e]))),internalStateDiff:o.G(r)}})));return m=(0,n.zG)(m,Rt.R3(u)),{consumeDeltas:()=>{const e=m;return m=Rt.cS,e},modelState:c}})))),v=(0,n.zG)(b,i.UI(o.UI((e=>e.modelState)))),y=(0,n.zG)(b,i.UI(o.UI((e=>e.consumeDeltas))),i.UI(o.fS((()=>d.of(Rt.bM()))))),k=(0,n.zG)(i.vP(v,c),i.Rp(((e,t)=>{let[r,s]=t;const i=(0,n.zG)(e,o.UI((e=>{let[,t]=e;return(0,n.zG)(r,o.EQ((()=>t),(e=>(0,n.zG)(t,Rt.hX((t=>!t(e,s.pendingEvents)))))))})),o.fS((()=>Rt.bM())));if(o.pC(r)&&Rt.xb(s.pendingEvents))return[qn(r.value),i];const a=(0,g.b2)(),c=(0,n.zG)(r,o.fS((()=>p)));return[(0,n.zG)((()=>a.promise),Un(c)),(0,n.zG)(i,Rt.R3(((e,t)=>{const r=Rt.xb(t)||(0,n.zG)(s.pendingEvents,Rt.yW((e=>!t.includes(e))));return r&&a.resolve(e),r})))]})),i.UI(a.li)),S=(0,n.zG)(y,i.En(3,Rt.uZ()),(t=>{let[r,s,a]=t;return{errors:(0,n.zG)(r,i.UI(d.UI(Rt.tS((e=>e.errors))))),events:(0,n.zG)(s,i.UI(d.UI(Rt.tS((e=>e.events)))),(0,bn.F)(e.metrics,"query_language_processed_pageview")),internalStateDiff:(0,n.zG)(a,i.UI(d.UI((0,n.ls)(Rt.DZ((e=>e.internalStateDiff)),o.DT(Rt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t})))))))))}})),I=(0,n.zG)(k,Dn((e=>e.internalStateMap))),q=Tn(I);return{state:Tn(k),value:{...S,stateMigratedThisInitialisation:w,internalStateMap:q,processing:(0,n.zG)(i.vP(b,c),i.UI((e=>{let[t,r]=e;return o.Wi(t)||Rt.Od(r.pendingEvents)}))),segments:(0,n.zG)(I,Dn(Ln)),tpdUsage:(0,n.zG)(i.vP(e.thirdPartyData,q),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.UI((()=>tn(r))))}))),unprocessedPageviewComplete:(0,n.zG)(v,i.UI(o.NG((e=>e.unprocessedPVC))),i.UI(o.UI(Mr.k)))}}})),Ln=e=>(0,n.zG)(en(e),(e=>(0,n.zG)(e,Rt.uK((e=>e<1e7)),(t=>{let{left:r,right:n}=t;return{all:e,custom:n,standard:r}}))));r(890);const Yn=e=>qn(R.F2(e)),Qn="RefEventualEither",Nn=e=>i.a9(Yn(e)),$n=Te.UI(Mn,R.dO),Bn=ye.ap(Rn,R.G5),Hn=e=>(e=>t=>{const r=t();return(0,n.zG)(i.fF((()=>r)),i.UI(o.fS((()=>e))),i.UI((e=>(0,n.bc)(e,(()=>r)))))})(R.F2(e)),Vn=e=>Dn(R.F2)(e),Kn=e=>Dn(R.fS(e)),Jn={URI:Qn,map:(e,t)=>$n(t)(e)},Wn={URI:Qn,map:Jn.map,ap:(e,t)=>Bn(t)(e)},Xn=e=>Tn(e.all),Zn=(e,t)=>r=>({all:(0,n.zG)(r,$n(e)),byAdServer:(0,g.mQ)((0,n.ls)(t,o.UI((e=>(0,n.zG)(r,$n(e))))))}),es=(e,t)=>(0,n.ls)(Dn(R.F2),Zn(e,t)),ts=e=>(0,n.zG)(e,Dn(R.F2),Zn(n.yR,(e=>o.G(e.filterCohorts)))),rs=e=>({all:(0,n.zG)(e.all,Kn((()=>Rt.bM()))),byAdServer:(0,g.mQ)((0,n.ls)(e.byAdServer,o.UI(Kn((()=>Rt.bM())))))}),ns=e=>(0,n.zG)(e,rs,Xn),ss=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"]),is=function(){return(0,n.bc)(...arguments)};var os=r(199);new Map;var as=function(e,t){for(var r,n=new Map,s=e.entries();!(r=s.next()).done;){var i=r.value,o=i[0],a=i[1];n.set(o,t(o,a))}return n};var cs=function(e,t){return as(e,(function(e,r){return t(r)}))};const us=e=>{let{queries:t,...r}=e;const[s,c]=i.Ue("pending");let u=o.G([]);const l=e=>{const t=Math.ceil(Math.random()*e.length);return(0,n.zG)(e,M.ke(t))};(0,n.zG)((()=>new Promise((e=>setTimeout(e,r.processingDelayMs)))),lt.UI((()=>performance.now())),lt.UI((e=>(0,n.zG)(u,o.UI(l),o.hX(M.Od),o.UI(A.ur(os.n_({events:Rt.jG(),externalStateDeltas:Rt.jG(),lookalikeModels:os.Z$(),modelState:os.Z$(),thirdPartyData:os.Z$()}))),(0,g.bw)((()=>{u=o.YP})),o.Hr("startTime",(()=>e))))),lt.UI((0,g.bw)(o.EQ((()=>c("skipped")),(()=>c("in_progress"))))),jt("historicalEvents",(()=>gt(r.historicalEvents))),jt("expectedSegmentMemberships",Ct((e=>ps({events:{historical:e.historicalEvents,new:e.events},externalState:{historical:r.externalState,deltas:e.externalStateDeltas},lookalikeModels:e.lookalikeModels,queries:t,thirdPartyData:e.thirdPartyData})))),Ot("report",(e=>{let{expectedSegmentMemberships:r,modelState:s}=e;return function(e){const t=new Set(e.expectedSegmentMemberships);return(0,n.zG)(function(e){const t=(0,n.zG)(Object.keys(e.runtime.queriesByEvent),Rt.Su(((e,t)=>[t,2**e]))),r={},s=Object.fromEntries(t);for(const t in e.runtime.queriesByEvent){const n=e.runtime.queriesByEvent[t];for(const e of n)r[e]?r[e]+=s[t]:r[e]=s[t]}const i={};for(const e in r){const t=r[e];i[t]?i[t].push(e):i[t]=[e]}return(0,n.zG)(Object.entries(i),Rt.UI((0,n.ls)((0,a.pL)((e=>Number(e))),(0,a.pL)((e=>(0,n.zG)(t,Rt.DZ((0,n.ls)(o.DT((t=>{let[,r]=t;return(e&r)>0})),o.UI(a.li)))))))),(e=>new Map(e)))}(e.queries),function(e){return function(t){return cs(t,e)}}((r=>({actualSegments:(0,n.zG)(r,Rt.hX((t=>{var r,n;return Boolean(null===(r=e.modelState.persistentState.internalStateMap[t])||void 0===r||null===(n=r.result)||void 0===n?void 0:n.result)}))),expectedSegments:(0,n.zG)(r,Rt.hX((e=>t.has(e))))}))))}({expectedSegmentMemberships:r,modelState:s,queries:t})})),Et((e=>{let{startTime:t}=e;return()=>r.metrics.track({name:"sdk_segmentation_validation_duration_seconds",value:(performance.now()-t)/1e3,labels:{}})})),mt((e=>e.report)),mt(fs(r.metrics)),mt((()=>c("finished"))))();return[s,e=>{let[t,r]=e;(0,n.zG)((0,ye.gz)(o.g1)(u,t.environment.lookalikeModels,(0,n.zG)(t.environment.thirdPartyData,o.UI(a.Yg))),o.UI((e=>{let[n,s,i]=e;n.push({externalStateDeltas:Rt.Yo(t.externalStateDelta),lookalikeModels:s,events:t.newEvents,modelState:r,thirdPartyData:i})})))}]};const ls=new Set(["SegmentEntry","SegmentExit","PageviewEngagement","PageviewComplete","Pageview","LinkClick","SlotViewable","SlotRendered","UpdateLookalikeModels","UpdateSecondPartyData","UpdateThirdPartyData"]),fs=e=>t=>{for(const[r,{expectedSegments:s,actualSegments:i}]of t){if(0===s.length&&0===i.length)continue;const{correct:t,incorrect:o,missing:a}=ds(s,i),c=(0,n.zG)(r,Rt.UI((e=>e.startsWith("!")?e.slice(1):e)),Rt.UI((e=>ls.has(e)?e:"misc")),(e=>[...new Set(e)]),Rt.UI((e=>(0,n.bc)(`trigger_${e}`,!0))),Rt.R3((0,n.bc)("is_cloud_lifted",!1)),(e=>Object.fromEntries(e))),u=(t,r)=>r.length>0&&e.trackCounter({name:t,value:r.length,labels:c});u("sdk_segmentation_validation_correct_count_total",t),u("sdk_segmentation_validation_incorrect_count_total",o),u("sdk_segmentation_validation_missing_count_total",a)}},ds=(e,t)=>{if(0===t.length)return{correct:[],incorrect:[],missing:e};if(0===e.length)return{correct:[],incorrect:t,missing:[]};const r=new Set(t),s=new Set(e),{right:i,left:o}=(0,n.zG)(t,Rt.uK((e=>s.has(e))));return{correct:i,incorrect:o,missing:(0,n.zG)(e,Rt.hX((e=>!r.has(e))))}};const ps=e=>hs(50,(function*(){const t=(0,n.zG)(e.queries.runtime.queriesByEvent,Ce.DZ((0,n.ls)(o.ij,o.UI(Rt.DZ((0,n.ls)(o.DT((t=>t in e.queries.runtime.locallyLiftedQueries)),o.UI((t=>(0,n.bc)(t,e.queries.runtime.locallyLiftedQueries[t]))))))))),r=(0,n.zG)(e.externalState.historical,o.fS((()=>({}))),Ce.DZ(o.Dj(J)),(t=>(0,n.zG)(e.externalState.deltas,Rt.UI(Nr(e.queries)),Rt.u4(t,$r))),Ce.UI(K)),s={},i=new _s(e.lookalikeModels,e.thirdPartyData),a=e=>(i.processEvent(e),(0,n.zG)(t[e.name]??[],Rt.DZ((t=>{let[r,a]=t;return(0,n.zG)(o.ij(a.lift(e,i.effects)),o.fX((e=>s[r]?(0,n.zG)(e,gs(a,s[r])):R.F2(e))),o.UI((e=>(s[r]=e,r))))})))),c=t=>(0,n.zG)((t=>(0,n.zG)(s[t]??null,(s=>t in r?(0,n.zG)(r[t],gs(e.queries.runtime.locallyLiftedQueries[t],s),R.fS((()=>s))):s),(r=>e.queries.runtime.locallyLiftedQueries[t].interpret(r,i.effects)),(e=>e.result)))(t),o.DT((e=>e!==i.getSegmentResult(t))),o.UI((e=>({name:e?"SegmentEntry":"SegmentExit",properties:{segment_number:Number(t)},time:i.effects.getCurrentTime(),session_id:i.effects.getCurrentSession(),view_id:i.effects.getCurrentView()})))),u=e=>{if(0==e.length)return;const t=(0,n.zG)(e,Rt.tS((0,n.ls)(c,o.UI(a),o.fS((()=>Rt.bM())))));u(t)};for(const t of e.events.historical)yield,a(t);(0,n.zG)(Object.keys(e.queries.runtime.locallyLiftedQueries),u);for(const t of e.events.new)switch(yield,t.name){case"SegmentEntry":case"SegmentExit":case"PageviewComplete":break;default:a(t)}return(0,n.zG)(Object.keys(e.queries.runtime.locallyLiftedQueries),u),i.effects.getSegmentsArray()["1p"]})),gs=(e,t)=>r=>R.Y3((()=>e.append(t,r)),(e=>`Failed to append lifted state: ${e}`));class _s{segments;segmentsArray=void 0;lastEvent=o.YP;effects;constructor(e,t){const r=(0,n.zG)(t,Ce.UI(Ce.hX((e=>!0===e))));this.segments={...r,"1p":{}};const s=(0,n.zG)(this.segments,Ce.UI(Object.keys));this.effects={get1PSegments:()=>({"1p":this.segments["1p"]}),get3PSegments:()=>r,getLookalikeModels:()=>e,getSegments:()=>this.segments,getSegmentsArray:()=>(this.segmentsArray||(this.segmentsArray={...s,"1p":Object.keys(this.segments["1p"])}),this.segmentsArray),setSegmentActivation:()=>{},getCurrentTime:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>new Date),(e=>e.time))),getCurrentSession:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.session_id))),getCurrentView:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.view_id)))}}get1pSegments(){return this.effects.getSegmentsArray()["1p"]}getSegmentResult(e){return this.segments["1p"][e]??!1}processEvent(e){if("SegmentEntry"===e.name){const t=e.properties.segment_number;t&&this.processSegmentEntry([t])}else if("SegmentExit"===e.name){const t=e.properties.segment_number;t&&this.processSegmentExit([t])}else if("PageviewComplete"===e.name){const t=e.properties.aggregations;(null==t?void 0:t.SegmentEntry)&&this.processSegmentEntry(t.SegmentEntry),(null==t?void 0:t.SegmentExit)&&this.processSegmentExit(t.SegmentExit)}this.lastEvent=o.G(e)}processSegmentEntry(e){for(const t of e)t in this.segments["1p"]||(this.segments["1p"][t]=!0,this.segmentsArray=void 0)}processSegmentExit(e){for(const t of e)t in this.segments["1p"]&&(delete this.segments["1p"][t],this.segmentsArray=void 0)}}const hs=(e,t)=>async()=>{let r=performance.now();const n=t();for(;;){performance.now()-r>e&&(await new Promise((e=>setTimeout(e))),r=performance.now());const t=n.next();if(t.done)return t.value}},ws=e=>s.dQ((e=>{let{previousState:t}=e;return{value:o.YP,state:i.a9(t)}})),ms=e=>s.dQ((t=>{let{previousState:r}=t;const s=(0,n.zG)(r,o.DT(g.El),o.xH,o.hX(O.HD)),a=(0,n.zG)(s,o.EQ((()=>!1),(t=>t===e.sessionId)));if(!e.metrics.isEnabled()||Math.random()>.1||a)return{value:o.YP,state:i.a9(r)};const[c,u]=i.Ue(i.a9("pending"));return{value:o.G((t=>{const[r,n]=us({externalState:t,historicalEvents:e.priorEvents,metrics:e.metrics,processingDelayMs:6e4,queries:e.customQueries});return u(r),n})),state:(0,n.zG)(i.xH(c),i.UI((0,n.ls)(o.DT((e=>"in_progress"===e||"finished"===e)),o.UI((()=>e.sessionId)),o.wp((()=>s)))))}})),bs=e=>(0,n.zG)(s.K4((t=>{let{stopped:r}=t;const[s,a]=i.Ue(i.a9(d.of(o.YP)));let c;const u=new Promise((e=>{c=e}));return{priorEvents:()=>u.then((e=>e())),externalStateDelta:i.xH(s),newEvents:(0,n.zG)(i.vP(e.newEvents,r),i.UI((e=>{let[t,r]=e;return r?()=>[]:t}))),setCachedPriorEvents:c,setExternalStateDelta:a}})),s.ak("segmentationValidation",(t=>{let{priorEvents:r}=t;return(0,n.zG)(e.eventsCache,R.EQ((()=>ws),(()=>ms)),(t=>t({...e,sessionId:e.sessionId.current,priorEvents:r})))})),s.ak("segmentationService",(t=>{let{newEvents:r,priorEvents:o,externalStateDelta:a,segmentationValidation:c}=t;return(0,n.zG)(Fn({...e,externalStateDelta:a,newEvents:r,priorEvents:o,validationService:c}),s.bw((t=>(0,n.zG)(t.errors,i.UI((t=>(0,n.zG)(t(),Rt.UI((t=>e.reportError(`Query Language: ${t}`,{userId:e.groupId}))))))))))})),s.UI((t=>(0,n.zG)(t.segmentationService.events,i.En(4,Rt.uZ()),(r=>{let[s,c,u,l]=r;return{...t,newEvents:s,realtime:(0,n.zG)(c,i.Rp(!1,((e,t)=>{const r=t();return e||r.some((e=>{let[,t]=e;return"Pageview"===t.name}))})),(e=>i.vP(e,t.segmentationService.processing)),i.UI((e=>{let[t,r]=e;return t&&!r})),i.u4(((e,t)=>e||t))),currentPageviewSegments:(f={processedEvents:(0,n.zG)(u,i.UI(d.UI(Rt.UI(a.Yg)))),segments:t.segmentationService.segments,viewId:e.viewId},(0,n.zG)(i.vP(f.processedEvents,f.viewId,f.segments),i.Rp({pageviewProcessed:!1,resolvePageviewSegments:e=>{},segments:qn({all:[],custom:[],standard:[]}),viewId:""},((e,t)=>{let[r,s,i]=t;const a=r();return(0,n.zG)(e,o.DT((e=>e.viewId===s)),o.EQ((()=>{if((0,n.zG)(a,Rt.G((e=>"Pageview"===e.name&&e.view_id===s))))return{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:i,viewId:s};{const e=(0,g.b2)();return{pageviewProcessed:!1,resolvePageviewSegments:t=>e.resolve(Gn(t)()),segments:is(zn(i),(()=>e.promise)),viewId:s}}}),(e=>e.pageviewProcessed?{...e,segments:i}:(0,n.zG)(a,Rt.G((e=>"Pageview"===e.name&&e.view_id===s)))?(e.resolvePageviewSegments(i),{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:i,viewId:s}):{...e,segments:i})))})),i.UI((e=>e.segments)))),lastProcessedEvents:(0,n.zG)(l,i.UI(d.UI(Rt.UI(a.Yg))))};var f})))),s.Hr("cohorts",(t=>{let{segmentationService:r}=t;return(0,n.zG)(i.fF(e.nonQlCohorts),i.UI(o.UI((e=>(0,n.zG)(r.segments,Dn((e=>e.all)),Dn(Rt.UI(String)),ts,(t=>({query_language:t,...e})))))))})),s.ak("stateSync",(t=>{let{segmentationService:r,lastProcessedEvents:n}=t;return Lt({eventSourceId:e.eventSourceId,groupId:e.groupId,groupIdIsNewlyGenerated:e.groupIdIsNewlyGenerated,internalStateDiff:r.internalStateDiff,internalStateMap:r.internalStateMap,lastProcessedEvents:n,logger:e.logger,permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,queryLanguageProcessing:r.processing,reportError:e.reportError,sessionId:e.sessionId,viewId:e.viewId})})),s.bw((e=>{let{stateSync:t,setExternalStateDelta:r}=e;return r(t.externalStateDelta)})),s.ak("segmentTransitions",(t=>{let{segmentationService:r}=t;return(e=>(0,n.zG)(s.vP({currentSegmentsSet:s.K4((()=>(0,n.zG)(e.segments,i.UI(u))))}),s.ak("transitionsSinceInit",(e=>{let{currentSegmentsSet:t}=e;return s.of(c(t))})),s.UI((e=>{let{currentSegmentsSet:t,...r}=e;return r}))))({segments:(0,n.zG)(Tn(r.segments),i.UI((e=>e.all))),viewId:e.viewId})})),s.Hr("cohortsRef",(e=>{let{cohorts:t}=e;return(0,n.zG)(t,i.VS(o.EQ((()=>i.a9(Rt.bM())),(0,n.ls)((e=>Object.values(e)),Rt.UI((0,n.ls)(rs,(e=>e.all),Tn,i.D8(Rt.Eh(O.Eq)))),Rt.vP(i.g1),i.UI(Rt.xH)))))})),s.Hr("createTrackRequest",(t=>{let{cohortsRef:r,segmentationService:s}=t;return(0,n.zG)(i.vP({cohorts:(0,n.zG)(r,i.UI(o.G)),qlSegments:(0,n.zG)(Tn(s.segments),i.UI(o.G)),webClient:e.webClient}),i.UI((0,ye.Yt)(o.G5)),i.UI(o.UI((t=>{let{cohorts:r,qlSegments:n,webClient:s}=t;return t=>({...t,segments:n.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...s,...t.properties.client??{}}}})}))))})),s.Hr("eventsToPublishOnPageUnload",(t=>e.trackPageviewComplete?(0,n.zG)(t.segmentationService.unprocessedPageviewComplete,i.UI(Rt.pc(o.UI((e=>(0,n.bc)(`PageviewComplete-${e.view_id}`,e))))),(e=>i.vP(t.createTrackRequest,e)),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.EQ((()=>Rt.cS),(e=>(0,n.zG)(r,Rt.UI((0,a.H5)(e))))))}))):i.a9(Rt.cS))),s.ak("eventCache",(t=>{let{newEvents:r,setCachedPriorEvents:o}=t;return(0,n.zG)(e.eventsCache,R.EQ((e=>(o(e),s.of({newEvents:r}))),(e=>(0,n.zG)((e=>s.K4((()=>({newEvents:(0,n.zG)(e.newEvents,i.UI(d.UI((0,g.bw)(Rt.UI((t=>{let[,r]=t;ss.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))))({eventsCache:e,newEvents:r}),s.UI((e=>{let{newEvents:t,priorEvents:r}=e;return o(r),{newEvents:t}}))))))})),s.UI((e=>({...e,newEvents:e.eventCache.newEvents}))),s.Hr("eventsToPublish",(t=>{let{cohorts:r,newEvents:s,segmentationService:c}=t;return(0,n.zG)(i.vP(s,e.webClient,c.segments,(0,n.zG)(r,i.UI(o.UI((0,n.ls)((e=>Object.values(e)),Rt.UI(rs),Rt.UI((e=>e.all)))))),(0,n.zG)(e.viewId,i.Rp(new Set,((e,t)=>new Set([...e,t]))))),i.UI((t=>{let[r,s,i,c,u]=t;return(0,n.zG)(o.Do,o.Qt("webClient",s),o.Qt("cohorts",c),o.ak("events",(()=>(0,n.zG)(r(),Rt.hX((e=>{let[,t]=e;return"PageviewComplete"!==t.name||u.has(t.view_id)})),o.DT(Rt.Od)))),dt,jt("segments",(()=>(0,n.zG)(Gn(i),gt))),Dt((e=>(0,n.zG)(e.cohorts,lt.uU(jn(1e3)),lt.UI(Rt.xH),lt.UI((t=>({...e,cohorts:t})))))),mt((t=>{let{cohorts:r,events:s,segments:i,webClient:o}=t;return(0,n.zG)(s,Rt.UI((0,a.H5)((t=>({...t,segments:i.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...o,...t.properties.client??{}}}})))))})),lt.UI(o.fS((()=>Rt.bM()))))})),(e=>{const[t,r]=i.gS(Rt.uZ());return(0,n.zG)(e,i.UI((e=>e().then(r)))),t}))})));var vs=r(965);function ys(e){return t=>(0,n.zG)(i.oQ(e),i.UI((0,g.rO)({backoffAfterErrorMs:e=>e??0,backoffAfterSuccessMs:e=>e??0})),(e=>s.dQ((r=>{let{previousState:s}=r;const[a,c]=i.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(s)),u=(0,n.zG)(i.vP(a,e),i.UI((e=>{let[t,r]=e;return Math.max(t.lastError+r.backoffAfterErrorMs,t.lastSuccess+r.backoffAfterSuccessMs)})));return{state:a,value:(0,n.ls)(o.DT((()=>Date.now()>=u.current)),o.UI(t),o.UI((0,g.bw)((e=>e.then((()=>c({...a.current,lastSuccess:Date.now()})),(()=>c({...a.current,lastError:Date.now()})))))))}}))))}const ks=function(e,t){return s.of(o.YP)};var Ss=r(371);const Is=["pug"],qs=function(e,t){return(0,n.zG)(zs(e),ys({backoffAfterErrorMs:6e5}),s.VS((e=>Ss.m((0,n.zG)(t,i.UI((0,g.rO)({tpdUsage:o.UI((0,n.ls)(Ce.UI(Ce.z7((e=>!Is.includes(e)))),Ce.hX((0,De.ff)(Ce.xb))))})),i.UI((t=>{let{tpdUsage:r,userId:s}=t;return{validityKey:()=>s,freshnessKey:(0,n.ls)((()=>r),o.EQ((()=>0),(0,n.ls)(JSON.stringify,g.vp))),refresh:(0,n.zG)(r,o.hX((e=>Object.keys(e).length>0)),o.UI(Oe.it((t=>(0,n.zG)(e({user_id:s,time:new Date,tpd_segments:t}),o.fS((()=>Promise.reject("Blocked by backoff."))))),(e=>`Failed to report TPD usage. Got ${e}`))))}})))))),s.UI(n.Q1))};const zs=e=>t=>{const{config:r,metrics:n,permutiveApi:s,permutiveUrls:i}=e,a=n.startTimer("sdk_http_tpd_usage_seconds",{});return s.req({url:i.getEndpointUrl("/tpd/usage",o.G(r.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_tpd_usage_seconds",a),e)))};function Gs(e,t){const r=["amp","gigya","pxid","sailthru"],a=(0,n.zG)(t.identities,i.UI(o.UI(Ce.z7((e=>!r.includes(e)))))),c=e=>(0,g.vp)(JSON.stringify(e)),u=e=>[c(e),e];return(0,n.zG)(s.vP({fetchFromNewEndpoint:(0,n.zG)(xs(e),ys({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,n.zG)(Us(e),ys({backoffAfterErrorMs:6e5}))}),s.VS((r=>{let{fetchFromNewEndpoint:c,fetchFromLegacyEndpoint:l}=r;return(0,n.zG)(Ss.m((0,n.zG)(i.vP(t.userId,t.sessionId,a),i.UI((t=>{let[r,s,i]=t;return{validityKey:()=>r,freshnessKey:()=>`${Es(i)},${s}`,refresh:(0,n.zG)(i,o.UI((t=>Ce.xb(t)?Oe.of({}):Oe.Y3((()=>(0,n.zG)((t=>(0,n.zG)(c(t),o.UI((e=>e.catch((()=>(0,n.zG)(l(t.identities),o.fS((()=>e))))))),o.wp((()=>l(t.identities))),o.UI((0,g.bw)((t=>{const r=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(n.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",r)}))})))))({userId:r,identities:t}),o.fS((()=>Promise.reject("Blocked by persistent backoff"))))),(e=>`Error fetching TPD. Got ${e}`)))),o.UI(Oe.UI(u)))}})))),Ss.d((e=>o.G((e=>Array.isArray(e)?e:u(e))(e)))),s.UI(i.UI(R.fS((t=>(e.logger.warn("[TPD]",`Failed to retrieve usable value, using zero value. ${t}`),o.G(u({}))))))),s.bw((0,n.ls)(i.UI(o.pC),i.UI((t=>{t&&e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"audience_matching_ready",time_origin:"sdk_init"})})))))})))}const xs=e=>async t=>{const r=e.metrics.startTimer("sdk_http_audience_matching_seconds",{}),s=await e.permutiveApi.req({url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",o.G("v1"),t.userId),payload:{identities:(0,n.zG)(t.identities,Ce.Yz,Rt.UI((e=>{let[t,r]=e;return{tag:t,id:r}})))},method:"POST",withCredentials:!1,dataType:"json"});return e.metrics.stopTimer("sdk_http_audience_matching_seconds",r),s.items},Us=e=>async t=>{const r=e.metrics.startTimer("sdk_http_tpd_seconds",{}),n=await e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/tpd",o.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1});return e.metrics.stopTimer("sdk_http_tpd_seconds",r),n},Es=(0,n.ls)(JSON.stringify,g.vp);const Ps=(e,t)=>(0,n.zG)(s.vP({data:Gs(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:qs(e,i.vP({tpdUsage:t.tpdUsage,userId:t.userId}))}),s.ak("analytics",(e=>{let{data:r}=e;return function(e){return s.dQ((t=>{let{previousState:r}=t;const[s,a]=i.gS(Rt.uZ());var c;return{state:(0,n.zG)(i.vP(e.userId,e.providerSegments,e.sessionId,e.viewId),i.D8(((e,t)=>{let[r,n]=e,[s,i]=t;return r===s&&n===i})),i.Rp(null!==(c=r)&&"object"==typeof c?c:{userId:"",providerHashes:{}},((e,t)=>{let[r,s,i,c]=t;const u=(0,n.zG)(s,o.fS((()=>({})))),l=(0,n.zG)(u,Ce.UI((0,g.SL)(g.vp))),f=(0,n.zG)(e,o.DT((e=>e.userId===r)),o.UI((e=>e.providerHashes)),o.fS((()=>({}))));return(0,n.zG)(u,Ce.z7((e=>l[e]!==(f[e]||0))),(e=>Object.entries(e)),Rt.UI((e=>{let[t,r]=e;return(0,n.bc)((0,g.k$)(),{name:"ThirdPartySegments",properties:{data_provider:t,segments:[...r]},session_id:i,time:new Date,view_id:c})})),a),{userId:r,providerHashes:l}}))),value:s}}))}({providerSegments:(0,n.zG)(r,i.UI(o.UI(mn.Yg))),sessionId:t.sessionId,userId:t.userId,viewId:t.viewId})})),s.UI((e=>{let{data:t,analytics:r}=e;return{data:t,analyticsEvents:r}}))),Cs=function(e){const t={include_geo:!0,include_isp:!0,include_ip_hash:!0,include_ip:!1},r=e.trace.startSpan("geoip_data_retrieval");return(0,n.zG)(Ss.m((0,n.zG)(e.sessionId,i.UI((r=>({validityKey:()=>(0,g.vp)(JSON.stringify(t)),freshnessKey:()=>r,refresh:o.G(Oe.Y3((()=>Ds(e.permutiveApi,e.metrics,e.config,t,e.permutiveUrls)),(e=>`Error fetching geoip. Got ${e}`)))}))))),s.UI(i.UI(R.fS((t=>(e.logger.warn("[geoip]",`Failed to retrieve usable value, using zero value. ${t}`),o.G({})))))),s.bw((0,n.ls)(i.UI(o.pC),i.UI((t=>{t&&(e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"geoip_data_ready",time_origin:"sdk_init"},performance.now()),r.finish())})))))};const Ds=(e,t,r,n,s)=>{const i=[];n.include_geo&&i.push(["include","geo"]),n.include_isp&&i.push(["include","isp"]),n.include_ip&&i.push(["include","ip"]),n.include_ip_hash&&i.push(["include","ip_hash"]);const a=t.startTimer("sdk_http_geoip_seconds",{});return e.req({url:s.getEndpointUrl("/geoip",o.G(r.apiVersion),i),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(t.stopTimer("sdk_http_geoip_seconds",a),e)))},Os=e=>t=>{const r=n=>{const s={...n};for(let i in n){const o=n[i];t.hasOwnProperty(o)?null!=e&&e.dropUnenriched&&void 0===t[o]?delete s[i]:s[i]=t[o]:null!==o&&"object"==typeof o&&o.constructor===Object&&(s[i]=r(o))}return s};return r};var js=r(414),Ts=r(636);const As=function(e,t,r,a,c){const u=(0,Ts.Hn)(Rs),l=u("ssps",Rt.cS),f=u("all_cohort_mapping",{}),d=l.includes("google_pps"),p=u("affinity_enabled",!1);return(0,n.zG)(c.consent,s.KD([[e=>!e,s.of(Nn(o.YP))],s.K4((s=>{let{stopped:u}=s;a.debug("[ssp] Addon started, affinity enabled: ",p);const l=(0,n.zG)(c.cohorts,$n((0,n.ls)(Rt.hX((e=>e in f)),Rt.tS((e=>f[e]))))),d=(0,n.zG)(i.vP(c.url,u),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.hX((()=>p&&!r)))})),i.UI(o.UI((r=>Oe.Y3((()=>e.req({method:"GET",url:t.getEndpointUrl("/standard-audiences/v1/affinity",o.YP,[["url",r]]),withCredentials:!1,dataType:"json"})),String)))),i.UI(o.UI(Oe.Vn((0,g.bw)((e=>r(`Failed to fetch affinity cohorts: ${e}`)))))),i.UI(o.UI(Oe.UI((e=>e.affinity_values)))),i.UI(o.fS((()=>Oe.of(Rt.bM())))),i.VS(Hn(Rt.bM())));return(0,n.zG)((0,ye.gz)(Wn)(l,d),$n(Rt.xH),$n((e=>[...new Set(e)])),$n(o.G))}))]),s.UI(i.xH),s.UI((e=>({cohorts:(0,n.zG)(e,$n(o.fS((()=>Rt.bM()))),Zn((e=>e),(e=>"dfp"===e.id&&d?o.G(Ms):o.YP)),o.G),externalData:{[Fs]:(0,n.zG)(Tn(e),i.UI(o.Uo),i.UI(o.xH),i.UI(o.UI(Ms)),i.D8(o.Eh(Rt.Eh(O.Eq))),i.UI(o.UI((e=>({ssps:l,cohorts:e})))))}}))))};const Ms=e=>[...new Set(e.map((e=>e.replace(/-ac$/,"").replace(/-aw$/,"").replace(/-c$/,""))))],Rs="ssp";const Fs="_pssps",Ls=e=>{const t=(0,n.zG)((null==e?void 0:e.dfp)??[],Rt.UI(String),(e=>new Set(e)));return{id:"dfp",filterCohorts:Rt.hX((e=>t.has(e)))}};const Ys=e=>{const t=(0,n.zG)(Object.values(e)??[],Rt.UI(String),(e=>new Set(e)));return{id:"xandr_ssp",filterCohorts:Rt.hX((e=>t.has(e)))}},Qs=e=>{if(!e.metrics.isEnabled())return()=>{};const t=(0,n.zG)(e.adServers,Rt.UI((e=>(0,n.bc)(e.id,e))),Ce.sq,Ce.UI((t=>{const r=(0,n.zG)(e.cohorts,Ce.DZ((e=>e.byAdServer(t))),(e=>i.vP(e)),i.UI(Ce.UI((s=5e3,a="Timeout",e=>(0,n.zG)(e,xn(s),lt.UI(o.pF((()=>R.t$(a)))))))),i.UI((0,ye.Yt)(lt.Hi)),i.UI(lt.UI((0,n.ls)(Ce.oh,Ae.Vn(Ce.Su(((t,r)=>{e.logger.warn("[Targeting Metrics]",`[${t}]`,r)}))),Ae.F2))),(e=>()=>e.current));var s,a;return(0,n.ls)(Rt.of,Rt.UI((e=>e.cohorts)),$s,Rt.UI((e=>{let[t,r]=e;return{allCohorts:new Set(t),cohortCountByType:Ns(t),requestCount:r}})),(s=>(0,n.zG)(r(),lt.UI(Ce.Su(((t,r)=>(s,i)=>{(0,n.zG)(r,Rt.Hr("actualCohortCount",(e=>{let{cohortCountByType:t}=e;return(0,n.zG)(t,Ce.P5(s))})),Rt.UI((r=>{const a={cohort_type:s,target:t},c=i.reduce(((e,t)=>r.allCohorts.has(t)?e+1:e),0),u=i.length-c;e.metrics.track({name:"sdk_ad_request_missed_cohorts",labels:a,value:r.requestCount*u}),e.metrics.track({name:"sdk_ad_request_successful_cohorts",labels:a,value:r.requestCount*c}),(0,n.zG)(r.actualCohortCount,o.UI((t=>{const n=t-c;e.metrics.track({name:"sdk_ad_request_superfluous_cohorts",labels:a,value:r.requestCount*n})})))})))})(t.id,s))))),(e=>e()))})));return e=>{if("AdRequest"===e.name)(r=e.properties).ad_server_id in t&&t[r.ad_server_id](r);var r}},Ns=e=>({ql:(0,n.zG)(e,Rt.u4(0,((e,t)=>isNaN(parseInt(t))?e:e+1)))}),$s=e=>(0,n.zG)(e,Rt.pO((e=>{const{init:t,rest:r}=(0,n.zG)(e,Rt.zT((t=>t===e[0])));return[t,r]})),Rt.UI((e=>[e[0],e.length]))),Bs=e=>(0,n.zG)(e.viewId,i.UI((e=>{let t;return{viewId:e,cohortsP:new Promise((e=>{t=e})),resolveCohorts:t}})),(t=>i.vP(t,e.contextualCohorts)),i.UI((e=>{let[t,r]=e;return(0,n.zG)(r,o.UI(t.resolveCohorts)),(0,n.zG)((()=>t.cohortsP),Un((0,n.zG)(r,o.fS((()=>Rt.bM())))))})),es((e=>e),(()=>o.YP)),o.G);const Hs=B.n_({cohorts:Rt.Eh((0,g.Or)()),ctx:(0,g.Or)()}),Vs=Rt.cS;Promise.resolve(R.F2(Vs)),B.n_({userId:(0,g.Or)(),lastSuccess:{equals:(e,t)=>e&&t&&Hs.equals(e,t)||e===t}});function Ks(e,t){return Object.keys(t).reduce(((r,n)=>void 0!==e[n]?{...r,[n]:t[n]+e[n]}:{...r,[n]:t[n]}),e)}function Js(e,t){return(0,n.zG)(ei(e),((e,t)=>r=>(0,n.zG)((e=>r(e)().then((e=>R.nM(e)?Promise.reject(e.left):e.right))),ys(e),s.UI((e=>r=>()=>(0,n.zG)(r,e,o.EQ((()=>Promise.resolve(R.t$(t))),(e=>e.then(R.F2,R.t$))))))))({backoffAfterErrorMs:6e5},"Advertiser segmentation request blocked by rate limiting."),s.VS((r=>s.dQ((s=>{let{previousState:a}=s;return e.logger.debug("[advertiser] previous state:",a),(0,n.zG)(t,i.Rp(i.a9(Xs(e)(a)),Zs(e)(r)),i.xH,i.bw((t=>e.logger.debug("[advertiser] updated state:",t))),(e=>({state:(0,n.zG)(e,i.UI((e=>{let{userId:t,lastSuccess:r}=e;return{userId:t,lastSuccess:o.FS(r)}})),i.D8(ui)),value:(0,n.zG)(e,i.UI((e=>{let{eventual:t}=e;return t})))})))})))))}const Ws=e=>t=>(0,n.zG)(t,Dn(function(e){return t=>(0,n.zG)(t.cohorts,M.hX((r=>(0,n.zG)(r.groups,M.yW((s=>(0,n.zG)(o.ij(t.groups[s]),R.Yo((()=>`cohort [${r.code}] is missing group [${s}]`)),R.Vn((t=>e.error(`[advertiser] ${t}`))),R.UI((e=>e>0)),R.fS((()=>!0)))))))),M.UI((e=>{let{code:t}=e;return t})))}(e)),es((e=>e),(e=>"dfp"===e.id?o.G((e=>e)):o.YP)),o.G),Xs=e=>t=>(0,n.zG)(t,o.DT(li),o.fS((()=>fi())),(e=>R.Y3((()=>({userId:e.userId,inFlight:!1,lastSuccess:o.ij(e.lastSuccess),view:ai(),ctx:(0,n.zG)(o.ij(e.lastSuccess),o.UI((e=>{let[t]=e;return t}))),eventual:di()})),(e=>`failed to parse existing persistent state: ${e}`))),R.fS((t=>(e.logger.error("[advertiser]",t),oi(""))))),Zs=e=>t=>(r,s)=>(0,n.zG)(r,i.VS((0,n.ls)(o.DT((e=>{let{userId:t}=e;return t===s.userId})),o.fS((()=>oi(s.userId))),(r=>{if(ci(r)===s.viewId)return e.logger.debug("[advertiser] view id is the same as previous, returning existing state",r),i.a9(r);if(r.inFlight)return e.logger.debug("[advertiser] in flight request",r),i.a9(r);{let a;e.logger.debug("[advertiser] fetching cohorts for view",r);const c=new Promise((e=>{a=e})),u=()=>c;return(0,n.zG)((0,ye.gz)(lt.Hi)(s.customCohorts,s.standardCohorts),lt.tS((e=>{let[n,i]=e;return t([s.userId,o.FS(r.ctx),n,i])})),Oe.YO("response"),Oe.ak("cohorts",(t=>{let{response:r}=t;return(0,n.zG)(r.c,ni,(0,g.bw)(R.EQ((t=>{e.logger.error(`[advertiser] failed to decode data from response. ${t}`)}),(t=>{e.logger.debug("[advertiser] decoded data from response",t)}))),lt.of)})),Oe.Hr("view",(e=>{let{response:t,cohorts:r}=e;return(0,n.bc)(t.ctx,r)})),i.fF,i.UI((0,n.ls)(o.EQ((function(){return{...r,inFlight:!0,eventual:(0,n.bc)((0,n.zG)(r.lastSuccess,o.UI((e=>{let[t,r]=e;return r})),o.fS((()=>ii()))),u)}}),R.EQ((function(t){e.logger.error(`[advertiser] ${t}`);const i=(0,n.zG)(r.lastSuccess,o.UI((e=>{let[t,r]=e;return r})),o.fS((()=>ii())));return a(i),{userId:s.userId,lastSuccess:r.lastSuccess,ctx:r.ctx,view:(0,n.bc)(s.viewId,o.YP),inFlight:!1,eventual:[i,u]}}),(function(e){let{response:t,view:r}=e;const[,i]=r;return a(i),(0,n.zG)({userId:s.userId,lastSuccess:o.G(r),view:(0,n.bc)(s.viewId,o.G(i)),ctx:o.G(t.ctx),inFlight:!1,eventual:(0,n.bc)(i,u)})}))))))}})))),ei=e=>Oe.it((t=>e.permutiveApi.req({url:e.permutiveUrls.getAdvertiserEndpointUrl("/segment",o.G("v4")),method:"POST",payload:ti(t),contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to fetch advertiser cohorts: ${e}`)),ti=e=>JSON.stringify(e),ri=e=>{const t=(0,n.zG)(e,M.YM,R.Yo((()=>"Expected a value, found empty array")),R.tS((e=>"string"==typeof e?R.F2(e):R.t$("Expected a cohort code, found "+typeof e)))),r=(0,n.zG)(e,M.Gb,o.fS((()=>[])),R.DT(Array.isArray,(()=>"Expected an array of groups [integer], found "+typeof e[1])));return(0,n.zG)(t,R.tS((e=>(0,n.zG)(r,R.UI((t=>({code:e,groups:t})))))))};function ni(e){const[t,r]=e;return(0,n.zG)(t,M.fw(R.g1)(ri),R.UI((e=>({cohorts:e,groups:r}))))}const si=B.n_({cohorts:M.Eh(B.n_({code:O.Eq,groups:M.Eh(H.Eq)})),groups:M.Eh(H.Eq)}),ii=()=>({cohorts:[],groups:[]}),oi=e=>({inFlight:!1,userId:e,lastSuccess:o.YP,view:ai(),ctx:o.YP,eventual:di()}),ai=()=>["",o.YP],ci=e=>e.view[0],ui=B.n_({userId:(0,g.Or)(),lastSuccess:{equals:(e,t)=>e===t||!!e&&!!t&&B.bc(O.Eq,si).equals(e,t)}}),li=e=>"object"==typeof e&&null!==e&&"userId"in e&&"lastSuccess"in e&&(void 0===e.lastSuccess||Array.isArray(e.lastSuccess)&&2===e.lastSuccess.length&&"string"==typeof e.lastSuccess[0]&&null!==e.lastSuccess[1]&&"object"==typeof e.lastSuccess[1]),fi=()=>({userId:""}),di=()=>(0,n.bc)(ii(),(()=>Promise.resolve(ii()))),pi=(e,t)=>{e.log("[advertiser] pass_cohorts_to_prebid: true");{const e=(0,n.zG)(t,o.UI((e=>e.all)),o.fS((()=>Nn(Rt.cS))),Tn,i.UI(o.Uo));return{_pcrdbs:i.a9(o.YP),_pcrprs:e}}},gi=function(e,t){return(0,n.zG)(t,s.KD([[e=>!e.consent,s.K4((()=>Cn(ii())))],Js(e,t)]),s.UI((0,n.ls)(i.xH,(r=>(0,ye.gz)(Rn)(r,Pn((0,n.zG)(t,i.UI((e=>{let{events:t}=e;return t})),(t=>{return(r=e.logger,e=>t=>(0,n.zG)(t,i.UI((t=>(0,n.zG)(R.Y3((()=>{const s=t().filter((t=>{let[,r]=t;return"SlotViewable"===r.name&&(0,n.zG)(o.ij(r.properties.line_item_id),o.UI((e=>e.toString())),o.UI((t=>e.has(t))),o.fS((()=>!1)))})).map((e=>{let[t,r]=e;return r.properties.line_item_id.toString()}));return s.forEach((e=>t=>e.debug("[advertiser] impression event for deal_id:",t))(r)),(e=>e.reduce(((e,t)=>({...e,[t]:1})),{}))(s)}),(e=>`Caught error when processing deal id impressions on events. Got ${e}`)),R.fS((e=>(r.error("[advertiser]",e),{})))))),i.Rp({},Ks),i.D8(((e,t)=>Bt(t))),i.D8(ar(H.Eq)),i.bw((e=>r.debug("[advertiser] impressions:",e)))))(new Set([]))(t);var r}))))),Dn((e=>{let[t,r]=e;return function(e,t,r){const s=(0,n.zG)(t.groups,M.Su(((s,i)=>{const a=(0,n.zG)((0,n.zG)(t.cohorts,M.hX((e=>{let{groups:t}=e;return t.includes(s)})),M.Lx(H.Pc)((t=>(0,n.zG)(o.ij(e[t.code]),o.fS((()=>[])),M.Lx(H.Pc)((e=>(0,n.zG)(o.ij(r[e]),o.fS((()=>0))))))))));return Math.max(0,i-a)})));return{cohorts:t.cohorts,groups:s}}({},t,r)})),Ws(e.logger))),s.bw((t=>{(0,n.zG)(t,o.UI(ns),o.fS((()=>i.a9([]))),(t=>(0,n.zG)(t,i.UI((t=>e.logger.debug("[advertiser] cohorts available for targeting:",t))))))})))};const _i=(0,n.zG)(gi,(e=>(t,r)=>(0,n.zG)(e(t,r),s.UI((e=>({cohorts:e,externalData:pi(t.logger,e)}))))));const hi=s.K4((()=>{}));const wi=e=>t=>(0,n.zG)(e,Ce.UI((e=>t.reduce(((t,r)=>t+Number(e.has(r))),0))));const mi=function(e,t){return s.K4((()=>({signalRef:i.a9(o.YP)})))};const bi=e=>t=>{const{consent:r,currentTimestampSecs:c,identities:u,sessionId:l,userId:f,viewId:_,pageviewState:h}=t;return(0,n.zG)(s.K4((()=>{let r;const n=new Promise((e=>{r=e})),[s,a]=i.Ue(i.a9(o.YP));return{...t,adServers:[Ls(e.optimisedActivationsConfig.dfp),Ys(e.optimisedActivationsConfig.appnexus_adserver)],nonQlCohortsT:()=>n,setNonQlCohorts:r,setTpdUsage:a,tpdUsage:i.xH(s)}})),s.ak("geoip",(()=>(e=>(0,n.zG)(e,Cs,s.YO("data"),s.Hr("replacementMap",(e=>{let{data:t}=e;return(0,n.zG)(t,i.UI(o.UI((e=>{var t;return{$ip_geo_info:e.geo_info,$ip_geo_info_continent:null===(t=e.geo_info)||void 0===t?void 0:t.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}}))))})),s.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,n.zG)(t,i.UI(o.EQ((()=>({})),(e=>{var t,r,n,s,i,o,a,c,u;return{isp:null===(t=e.isp_info)||void 0===t?void 0:t.isp,organization:null===(r=e.isp_info)||void 0===r?void 0:r.organization,autonomous_system_number:null===(n=e.isp_info)||void 0===n?void 0:n.autonomous_system_number,autonomous_system_organization:null===(s=e.isp_info)||void 0===s?void 0:s.autonomous_system_organization,continent:null===(i=e.geo_info)||void 0===i?void 0:i.continent,country:null===(o=e.geo_info)||void 0===o?void 0:o.country,city:null===(a=e.geo_info)||void 0===a?void 0:a.city,province:null===(c=e.geo_info)||void 0===c?void 0:c.province,postal_code:null===(u=e.geo_info)||void 0===u?void 0:u.postal_code}}))))}))))({...e,sessionId:l}))),s.Hr("watson",(t=>{let{webClient:r}=t;return(0,n.zG)(e.watson,o.fS((()=>(0,n.zG)(r,i.UI(o.UI((e=>e.url))),i.D8(o.Eh(O.Eq)),(t=>(0,js.watson)({...e,pageUrl:t,watsonEnabled:(0,n.zG)(h,i.UI((e=>e.watsonEnabled)))}))))))})),s.ak("audienceMatching",(t=>{let{tpdUsage:r}=t;return Ps(e,{identities:u,sessionId:l,tpdUsage:r,userId:f,viewId:_})})),s.UI((e=>{let{audienceMatching:{analyticsEvents:t,...r},newEvents:s,...o}=e;return{...o,audienceMatching:r,newEvents:(0,n.zG)(i.vP(s,t),i.UI(d.RD),i.UI(d.UI(Rt.xH)))}})),s.UI((e=>{const[t,r,s]=i.Ue(o.bM()),[a,c]=(0,n.zG)(e.newEvents,i.En(2,Rt.uZ())),u=(0,n.zG)(i.vP(a,t),i.UI((e=>{let[t,r]=e;return(0,n.zG)(r,o.UI((e=>(0,n.zG)(t,d.UI(Rt.UI((0,g.bw)((t=>{let[,r]=t;return e(r)}))))))),o.fS((()=>d.of(Rt.bM()))))})));return{...e,newEvents:u,newEventsForAdvertiserSegmentation:c,collectTargetingSuccessMetrics:e=>{r(o.G(e)),s()}}})),s.ak("enrichedEvents",(t=>{let{enrichmentReplacementMap:r,geoip:c,newEvents:u,watson:l}=t;return(0,n.zG)(i.vP({misc:r,geoip:c.replacementMap,watson:l.replacementMap}),i.UI((0,ye.Yt)(o.G5)),i.UI(o.UI((e=>{let{misc:t,geoip:r,watson:n}=e;return{...t,...r,...n}}))),(t=>s.K4((()=>((e,t,r,s)=>((0,n.zG)(t,i.UI(o.pC),i.YP((t=>{t&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"event_enrichment_ready",time_origin:"sdk_init"})}))),(0,n.zG)(r,i.VS((()=>(0,n.zG)(i.vP((0,n.zG)(t,i.UI(o.UI(Os({dropUnenriched:!0})))),s),i.UI((0,n.ls)((e=>{let[t,r]=e;return()=>(0,n.zG)(t,o.EQ((()=>[]),(e=>(0,n.zG)(r(),Rt.UI((0,a.H5)((0,g.rO)({properties:e})))))))})))))))))(e.metrics,t,f,u)))))})),s.UI((0,g.rO)({enrichedEvents:(0,bn.F)(e.metrics,"pageview_enriched")})),s.ak("lookalikeModels",(()=>(0,n.zG)(e.lookalikeModels,o.EQ((()=>(0,vs.lookalikeModelsService)({...e,consent:r,currentTimestampSecs:c})),s.of)))),s.ak("queryLanguage",(r=>{let{audienceMatching:o,nonQlCohortsT:a,enrichedEvents:c,lookalikeModels:u,setTpdUsage:l,userIdIsNewlyGenerated:d}=r;return(0,n.zG)((p={...e,...t,newEvents:c,thirdPartyData:o.data,groupId:f,groupIdIsNewlyGenerated:d,nonQlCohorts:a,lookalikeModels:u,migratedStateMaps:e.migratedStateMaps},(0,n.zG)(i.vP(p.eventSourceId,p.groupId,p.groupIdIsNewlyGenerated),i.D8((0,n.zG)(O.Eq,B.Uz((e=>{let[t]=e;return t})))),s.kR((e=>{let[t,r,i]=e;return(0,n.zG)(bs({...p,eventSourceId:t,groupId:r,groupIdIsNewlyGenerated:i,migratedStateMaps:p.migratedStateMaps}),s.yi(t))})),s.UI((e=>({stateMigratedThisInitialisation:(0,n.zG)(e,i.VS((e=>e.segmentationService.stateMigratedThisInitialisation))),cohorts:(0,n.zG)(e,i.VS((e=>e.cohortsRef))),currentPageviewSegments:{all:(0,n.zG)(e,i.VS((e=>e.currentPageviewSegments)),Dn((e=>e.all))),custom:(0,n.zG)(e,i.VS((e=>e.currentPageviewSegments)),Dn((e=>e.custom))),standard:(0,n.zG)(e,i.VS((e=>e.currentPageviewSegments)),Dn((e=>e.standard)))},eventsToPublish:(0,n.zG)(e,i.VS((e=>e.eventsToPublish))),eventsToPublishOnPageUnload:(0,n.zG)(e,i.VS((e=>e.eventsToPublishOnPageUnload))),realtime:(0,n.zG)(e,i.VS((e=>e.realtime)),i.Rp(!1,((e,t)=>e||t)),i.bw((e=>{e&&p.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_realtime",time_origin:"sdk_init"},performance.now())}))),segments:{all:(0,n.zG)(e,i.VS((e=>Tn(e.segmentationService.segments))),i.UI((e=>e.all))),custom:(0,n.zG)(e,i.VS((e=>Tn(e.segmentationService.segments))),i.UI((e=>e.custom))),standard:(0,n.zG)(e,i.VS((e=>Tn(e.segmentationService.segments))),i.UI((e=>e.standard)))},thirdPartyDataUsage:(0,n.zG)(e,i.VS((e=>e.segmentationService.tpdUsage))),transitionsSinceInit:(0,n.zG)(e,i.VS((e=>e.segmentTransitions.transitionsSinceInit)))}))))),s.bw((e=>{let{thirdPartyDataUsage:t}=e;return l(t)})));var p})),s.ak("classificationModels",(t=>{let{queryLanguage:n}=t;return ks(e,i.vP({consent:r,currentTimestampSecs:c,queryLanguageCohorts:An(n.currentPageviewSegments.all),realtime:n.realtime,userId:f}))})),s.ak("demandPartners",(r=>{let{queryLanguage:a}=r;return((e,t)=>(0,n.zG)(As(e.permutiveApi,e.permutiveUrls,e.reportError,e.logger,t),s.UI((e=>{let{cohorts:t,externalData:r}=e;return{ssp:t,externalData:r}}))))(e,{cohorts:Vn(a.currentPageviewSegments.all),consent:t.consent,url:(0,n.zG)(t.webClient,i.UI(o.UI((e=>e.url))))})})),s.ak("advertiserSegmentation",(t=>{let{queryLanguage:n,newEventsForAdvertiserSegmentation:s}=t;return _i(e,i.vP({consent:r,customCohorts:An(n.currentPageviewSegments.custom),realtime:n.realtime,sessionId:l,standardCohorts:An(n.currentPageviewSegments.standard),userId:f,viewId:_,events:s}))})),s.ak("ipIdentifier",(e=>{let{userId:t,geoip:r}=e;return(0,n.zG)(r.data,i.UI(o.tS(o.KQ((e=>e.ip))))),hi})),s.ak("secureSignal",(t=>{let{advertiserSegmentation:r,demandPartners:o}=t;return(0,n.zG)(mi(e,(0,n.zG)(f,i.UI((e=>({userId:e,advertiserCohorts:r.cohorts,stdAudienceCohorts:o.ssp}))))),s.UI((e=>{let{signalRef:t}=e;return t})))})),s.ak("nonQlCohorts",(e=>{let{advertiserSegmentation:t,classificationModels:r,contextualCohorts:i,setNonQlCohorts:o,demandPartners:a,viewId:c}=e;return(0,n.zG)(s.of(Ce.oA({advertiser:t.cohorts,classificationModel:r,contextual:Bs({contextualCohorts:i,viewId:c}),ssp:a.ssp})),s.bw(o))})),s.Hr("qlCohorts",(e=>{let{queryLanguage:t}=e;return(0,n.zG)(t.segments.all,i.UI(Rt.UI(String)))})),s.bw((t=>{return t.collectTargetingSuccessMetrics(Qs({adServers:t.adServers,cohorts:{...t.nonQlCohorts,query_language:(r=t.qlCohorts,(0,n.zG)(r,Pn,ts))},logger:e.logger,metrics:e.metrics}));var r})),s.Hr("eventsToPublish",(t=>{let{qlCohorts:r,queryLanguage:s,nonQlCohorts:o}=t;const a=(e=>{if(!e.metrics.isEnabled())return e=>{};const t=(0,n.zG)(e.cohortsByType,Ce.UI(i.Rp(new Set,((e,t)=>new Set([...e,...t])))),(e=>i.vP(e)));return r=>{"Pageview"===r.name&&(0,p.HJ)((()=>(0,n.zG)(r.cohorts,wi(t.current),Ce.Su(((t,r)=>e.metrics.track({name:"sdk_pageview_cohort_count",labels:{cohort_type:t},value:r}))))))}})({cohortsByType:(0,n.zG)(o,Ce.UI(ns),Ce.dx("query_language",r)),metrics:e.metrics});return(0,n.zG)(s.eventsToPublish,i.UI(d.UI(Rt.UI((0,g.bw)((e=>{let[,t]=e;return a(t)}))))))})),s.UI((e=>{let{adServers:t,advertiserSegmentation:r,demandPartners:s,eventsToPublish:o,geoip:a,queryLanguage:c,nonQlCohorts:u,watson:l,secureSignal:f}=e;return{activations:(0,n.zG)(t,Rt.UI((e=>(0,n.zG)(Object.values(u),Rt.UI(rs),Rt.DZ((t=>t.byAdServer(e))),Rt.UI(Tn),Rt.UI(i.D8(Rt.Eh(O.Eq))),(e=>i.vP(...e)),i.UI(Rt.xH),(t=>(0,n.bc)(e.id,t))))),Ce.sq),cohorts:{all:c.cohorts,ql:c.segments.all,qlCustom:c.segments.custom,qlStandard:c.segments.standard},context:(0,n.zG)(i.vP(l.permutiveContext,a.permutiveContext),i.UI((e=>{let[t,r]=e;return{...t,...r}}))),eventsToPublish:o,eventsToPublishOnPageUnload:c.eventsToPublishOnPageUnload,externalData:i.vP({...r.externalData,...s.externalData}),geoIP:a.data,realtime:c.realtime,stateMigratedThisInitialisation:c.stateMigratedThisInitialisation,transitionsSinceInit:c.transitionsSinceInit,secureSignal:f}})))}},387:(e,t,r)=>{r.d(t,{BJ:()=>f,El:()=>E,G6:()=>v,HD:()=>l,HP:()=>I,Kn:()=>u,Or:()=>k,PQ:()=>y,SL:()=>p,aT:()=>h,b0:()=>m,b2:()=>g,bw:()=>G,k$:()=>w,lo:()=>x,mQ:()=>q,rO:()=>z,vg:()=>S,vp:()=>d});var n=r(358),s=r(275),i=r(492),o=r(491),a=r(29),c=r(812);const u=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,l=e=>"string"==typeof e,f=e=>"number"==typeof e&&!Number.isNaN(e);function d(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function p(e){return t=>{let r=0;for(let n of t){r=r+e(n)|0}return r}}o.ff(a.xb);function g(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}let _=[];function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(_.unshift(e),_.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),s=e=>{if(!i&&e){i=!0;const e=_;_=[],e.forEach((e=>{try{e()}catch{}}))}};let i=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&b(t);s(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>s(!0)))}))}function w(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function m(e,t){const r=Object.keys(e),n=r.length,s={};for(let o=0;o<n;o++){const n=r[o],a=t(n,e[n]);(0,i.pC)(a)&&(s[n]=a.value)}return s}function b(e){return/Mobi|Android/i.test(e)}function v(e){return/^((?!chrome|android).)*safari/i.test(e)}function y(e,t){return new Promise((r=>{(0,c.HJ)((()=>{Promise.resolve(e()).then(r)}),(null==t?void 0:t.timeout)??0)}))}const k=()=>({equals:(e,t)=>Object.is(e,t)});function S(e){return t=>null!=t&&e in t?t[e]:void 0}function I(e){let t=i.YP;const r=(0,i.fS)((()=>{const r=e();return t=(0,i.G)(r),r}));return()=>r(t)}const q=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},z=e=>t=>{const r={...t};for(const s in e){var n;r[s]=null===(n=e[s])||void 0===n?void 0:n.call(e,t[s])}return r};function G(e){return t=>(e(t),t)}const x=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,s.zG)(r,n.f2((e=>{let[r,n]=e;return(0,s.zG)(t,i.DT(r),i.UI(n))})),i.fS((()=>o(t))))},U=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}};U(parseInt),U(parseFloat);function E(e){return"object"==typeof e&&null!==e&&"_tag"in e&&["None","Some"].includes(e._tag)}},965:(e,t,r)=>{r.r(t),r.d(t,{lookalikeModelsService:()=>v,realService:()=>k,stubService:()=>y});var n=r(275),s=r(492);const i=(e,t,r,n)=>t+(r-t)*n/(Math.pow(2,e)-1),o=(e,t)=>{const r=(e,t)=>{const r=e.toString(16);return("0".repeat(t)+r).slice(Math.min(-t,-r.length))};return`${r(e.getUint32(t),8)}-${r(e.getUint16(t+4),4)}-${r(e.getUint16(t+6),4)}-${r(e.getUint16(t+8),4)}-${r(e.getUint32(t+10),8)}${r(e.getUint16(t+14),4)}`},a=e=>{const t=[1,2],r=e.getInt8(0);if(1===r)return c(e);if(2===r)return u(e);{const n=(0,s.Y3)((()=>o(e,1))),i=(0,s.g_)((()=>"Couldn\'t decode model id"),(e=>`Model id was ${e}`))(n);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${r}; ${i}`)}},c=e=>l(e,1),u=e=>l(e,2),l=(e,t)=>{const r=o(e,1),n=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),s=e.getInt8(18),i=e.getFloat32(19),a=e.getFloat32(23),[c,u]=((e,t,r,n,s,i)=>{const o={};let a=0;do{let r;1===i?(a=e.getUint16(t),r=e.getUint16(t+2),t+=4):(a=e.getUint32(t),r=e.getUint16(t+4),t+=6),o[0===a?"const":a]=r.toString(36)}while(0!==a);return[o,t]})(e,27,0,0,0,t);return[{version:t,id:r,data_preference:n,weights:c,precision:s,min:i,max:a},u]};var f=r(716),d=r(940),p=r(812),g=r(936),_=r(460),h=r(385),w=r(371),m=r(387);const b=()=>s.G({}),v=k;function y(e){return g.K4((()=>_.a9(b())))}function k(e){e.logger.warn("add cleanup of legacy LAL cache");const t=e.trace.startSpan("lookalike_models_data_retrieval_duration");return(0,n.zG)(w.m((0,n.zG)(_.vP(e.consent,e.currentTimestampSecs),_.UI((t=>{let[r,o]=t;return{currentTimestampSecs:o,validity:{maxAge:604800,key:()=>null},freshness:{maxAge:86400,key:()=>null},refresh:(0,n.zG)(r,s.DT(Boolean),s.UI((()=>f.fF(function(e){const t="Failed fetching binary models, reverting to JSON.\\nError: ",r="Failed fetching json models.\\nError: ";return(0,n.zG)(f.Y3((()=>I(e)),(e=>e.message)),p.N1,f.oU((e=>()=>function(e){const t=[];let r=0;for(;r<e.byteLength;){const[n,s]=a(new DataView(e,r));t.push(n),r+=s}return t}(e))),p.N1,f.UI(S((e=>{let{precision:t,max:r,min:n}=e;return{"1p":{},precision:t,min:n,max:r}}))),f.Vn((r=>(e.logger.log(t+r),e.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),r))),f.wp((()=>(0,n.zG)(f.Y3((()=>q(e)),(e=>e.message)),f.UI((e=>e.models)),f.UI(S((()=>({"1p":{}}))))))),f.UI((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},r=Object.keys(e),n=e=>{const t={"1p":{}},{precision:r,min:n,max:s}=e,o=e["1p"],a=Object.keys(o);for(let e=0;e<a.length;e++){const c=a[e],u=parseInt(o[c],36);t["1p"][c]=i(r,n,s,u)}return t};for(let s=0;s<r.length;s++){const i=r[s],o=e[i];t[i]=n(o)}return t})(e):e)),f.fS((t=>(e.reportError(r+t),d.of({})))))}(e)))))}})))),g.UI(_.UI((0,n.ls)(h.fS((t=>(e.logger.warn("[LAL]",`Failed to refresh, using zero value. ${t}`),b()))),(0,m.bw)(s.UI((()=>{t.finish(),e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"lookalike_models_ready",time_origin:"sdk_init"})})))))))}function S(e){return t=>{const r={};for(let n=0;n<t.length;n++){const s=t[n],{id:i,weights:o}=s;if(void 0===i||void 0===o)continue;const a=e(s);Object.keys(o).forEach((e=>{a["1p"][e]=o[e]})),r[i]=a}return r}}const I=e=>{const{permutiveApi:t,config:r,metrics:n}=e,s=n.startTimer("sdk_http_models_seconds",{});return t.req({url:z(r.cdnProtocol,r.cdnBaseUrl,"binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",s),e)))},q=e=>{const{permutiveApi:t,config:r,metrics:n}=e,s=n.startTimer("sdk_http_models_seconds",{});return t.req({url:z(r.cdnProtocol,r.cdnBaseUrl,"json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",s),e)))};function z(e,t,r){const n=`${e}://${t}`;switch(r){case"binary":return`${n}/models/v2/e488cdb0-e7cb-4d91-9648-60d437d8e491-models.bin`;case"json":return`${n}/models/e488cdb0-e7cb-4d91-9648-60d437d8e491-models.json`}}},343:(e,t,r)=>{r.d(t,{K:()=>x,O:()=>z});let n,s;const i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap;let l={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return p(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(g(this),t),p(i.get(this))}:function(...t){return p(e.apply(g(this),t))}:function(t,...r){const n=e.call(g(this),t,...r);return a.set(n,t.sort?t.sort():[t]),p(n)}}function d(e){return"function"==typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),n()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)}));o.set(e,t)}(e),t=e,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,l):e);var t}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(p(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&i.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=d(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const g=e=>u.get(e);const _=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],w=new Map;function m(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(w.get(t))return w.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=h.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!_.includes(r))return;const i=async function(e,...t){const i=this.transaction(e,s?"readwrite":"readonly");let o=i.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),s&&i.done]))[0]};return w.set(t,i),i}l=(e=>({...e,get:(t,r,n)=>m(t,r)||e.get(t,r,n),has:(t,r)=>!!m(t,r)||e.has(t,r)}))(l);var b=r(865),v=r(385),y=r(275),k=r(940),S=r(716),I=r(387),q=r(812);const z="[IDB]",G=(e,t,r,n,s,i)=>(0,y.zG)((0,k.of)(e.getNamespacedStorageKey(s)),(0,k.tS)((e=>(0,S.Y3)((async()=>r.put(n,i,e)),b.w))),(0,k.UI)((0,v.g_)((e=>{throw t.error(z,`Failed to store crypto key to ${n} due to unexpected error,\\n`,e),e}),(()=>i))),(e=>e()));class x{namespace;logger;cryptoAlg;idb;mainObjectStore;keyObjectStore;keyObjectKey;cryptoKey;MAX_CONSECUTIVE_PUTS=30;puts=1;hasForcedCompaction=!1;constructor(e,t,r,n,s,i,o,a){this.namespace=e,this.logger=t,this.cryptoAlg=r,this.idb=n,this.mainObjectStore=s,this.keyObjectStore=i,this.keyObjectKey=o,this.cryptoKey=a,this.logDebug("Created",this.idb)}static initialise(e,t,r,n,s,i,o,a,c,u){const l=(0,I.G6)(navigator.userAgent)&&!1,f=[u,n.isAvailable(),!l].every((e=>!0===e)),d=async(t,s,i)=>(0,y.zG)(await t.get(i,e.getNamespacedStorageKey(s)),(async e=>e??n.generateKey(!1)),(async n=>G(e,r,t,o,a,await n))).catch((e=>{const t=(0,b.w)(e);throw r.error(z,"Get crypto key failed. Got\\n",t),t})),p=(e,t,r)=>t.includes(r)?(0,y.Q1)():e.createObjectStore(r),g=()=>U(s,c,{upgrade:e=>{const t=[...e.objectStoreNames];p(e,t,i),p(e,t,o)}}).then((e=>{const t=[...e.objectStoreNames];return t.includes(i)&&t.includes(o)?e:Promise.reject(new Error("Object store(s) missing."))})),_=f?(0,v.Y3)((()=>function(e){if(!(0,I.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},r=0;return new Promise((e=>{const n=()=>(r++,indexedDB.databases().finally((0,q.GL)(e)));t=(0,q.UM)(n,100),n()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:r,labels:{}})}))}(t).then((()=>g())).catch((e=>(r.error(`Re-creating IDB database ${s} due to error`,e),E(s).then((()=>g())))))),String):(0,v.t$)("Connection not attempted. Default to localStorage");return(0,v.g_)((e=>(0,S.t$)(e)),(t=>(0,y.zG)((0,S.Y3)((()=>t.then((async e=>({db:e,cryptoKey:await d(e,a,o)})))),String),(0,S.UI)((t=>{let{db:s,cryptoKey:c}=t;return new x(e,r,n,s,i,o,a,c)})))))(_)}async put(e,t){return(0,y.zG)((async()=>(0,y.bc)(JSON.stringify(e),this.cryptoKey)),(0,k.tS)((e=>{let[t,r]=e;return(0,k.of)(this.cryptoAlg.encrypt(r,t))})),(0,k.tS)((e=>async()=>(await this.recreateIfNecessary(this.puts++),e))),(0,k.tS)((e=>(0,S.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),b.w))),(0,k.UI)((0,v.g_)((r=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \\n",r),"QuotaExceededError"===r.name&&this.forceCompaction(),r}),(()=>t))),(e=>e()))}get(e){return(0,y.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((async e=>e?JSON.parse(await this.cryptoAlg.decrypt(this.cryptoKey,e)):null)).catch((t=>{const r=(0,b.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,r),r}))))}delete(e){return(0,y.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),E(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return U(e).then((t=>(t.close(),E(e))))}recreateIfNecessary(e){return(0,I.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.recreate():Promise.resolve()}async recreate(){const e=this.idb.name,t=this.idb.version,r=await this.idb.getAllKeys(this.mainObjectStore),n=[];for(const e of r)n.push([e,await this.idb.get(this.mainObjectStore,e)]);await this.deleteStore(),this.idb=await U(e,t,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}),await Promise.all(n.map((e=>{let[t,r]=e;return this.idb.put(this.mainObjectStore,r,t)}))),await G(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(z,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(z,...t)}}const U=(0,y.ls)((function(e,t,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=p(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(p(o.result),e.oldVersion,e.newVersion,p(o.transaction))})),r&&o.addEventListener("blocked",(()=>r())),a.then((e=>{i&&e.addEventListener("close",(()=>i())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}),q.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,y.ls)(e.createObjectStore.bind(e),y.Q1),delete:(0,y.ls)(e.delete.bind(e),q.t_),get:(0,y.ls)(e.get.bind(e),q.t_),getAllKeys:(0,y.ls)(e.getAllKeys.bind(e),q.t_),get name(){return e.name},get objectStoreNames(){return e.objectStoreNames},put:(0,y.ls)(e.put.bind(e),q.t_),get version(){return e.version}}))))),E=(0,y.ls)((function(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(()=>t())),p(r).then((()=>{}))}),q.t_)},699:(e,t,r)=>{r.r(t),r.d(t,{make:()=>o});var n=r(275),s=r(343);const i=e=>{const{logger:t,consent:r,prefix:n}=e,s=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=((e,t,r)=>function(){return(r()?t:e)(...arguments)})(super.put.bind(this),s,(()=>!r.current))}},o=(e,t,r,o,a,c,u,l,f,d,p)=>(0,n.zG)(s.K,i({logger:f,consent:d,prefix:s.O})).initialise(e,t,f,r,o,a,c,u,l,p)},414:(e,t,r)=>{r.r(t),r.d(t,{watson:()=>l});var n=r(460),s=r(275),i=r(492),o=r(385),a=r(583),c=r(29),u=r(569);const l=e=>(0,s.zG)(d(e),n.YO("data"),n.Hr("replacementMap",(e=>{let{data:t}=e;return(0,s.zG)(t,i.YO("data"),i.Hr("taxonomyLabels",(e=>{let{data:t}=e;return function(e){const t=e=>{const t=e.split("/").filter((e=>e));return t.map(((e,r)=>"/"+t.slice(0,r+1).join("/")))},r=a.xH(e.filter(Boolean).map((e=>t(e.label))));return a.jj(c.Eq)(r)}(t.taxonomy??[])})),i.UI((e=>{var t,r,n;let{data:i,taxonomyLabels:o}=e;return{$alchemy_concepts:i.concepts??[],$alchemy_document_emotion:(null===(t=i.emotion)||void 0===t||null===(r=t.document)||void 0===r?void 0:r.emotion)??null,$alchemy_document_sentiment:(null===(n=i.sentiment)||void 0===n?void 0:n.document)??null,$alchemy_entities:i.entities??[],$alchemy_entity_names:(0,s.zG)(i.entities??[],a.UI((e=>e.text))),$alchemy_keywords:i.keywords??[],$alchemy_taxonomy:i.taxonomy??[],$alchemy_taxonomy_labels:o,$taxonomy_labels:o}})))})),n.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,s.zG)(t,i.EQ((()=>({})),(e=>({watson:e}))))})),(e=>({permutiveContext:(0,s.zG)(e,n.UI((e=>e.permutiveContext))),replacementMap:(0,s.zG)(e,n.UI((e=>e.replacementMap)))}))),f=()=>n.a9(i.G({})),d=e=>(0,s.zG)(n.vP(e.watsonEnabled,e.pageUrl),n.UI((0,s.ls)(i.DT(u.li),i.tS(u.Yg))),n.UI(i.UI((0,s.ls)(p(e.permutiveApi,e.metrics,e.config,e.permutiveUrls,e.trace),n.p4,n.UI(i.UI(o.fS((()=>({})))))))),n.VS(i.fS(f))),p=(e,t,r,n,s)=>o=>{const a=t.startTimer("sdk_http_watson_seconds",{}),c=s.startSpan("watson_data_retrieval");return e.req({url:n.getEndpointUrl("/watson",i.G(r.apiVersion)),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1,payload:{url:o,classify:!0}}).then((e=>(t.stopTimer("sdk_http_watson_seconds",a),t.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"watson_data_ready",time_origin:"sdk_init"},performance.now()),c.finish(),e)))}},925:(e,t,r)=>{r.d(t,{N:()=>o,Qt:()=>c,Yt:()=>p,a1:()=>a,ap:()=>i,gz:()=>d});var n=r(275),s=r(963);function i(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t){return function(r){return e.ap(e.map(r,(function(e){return function(){return e}})),t)}}}function a(e){return function(t){return function(r){return e.ap(e.map(r,(function(){return function(e){return e}})),t)}}}function c(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function u(e,t,r){return function(n){for(var s=Array(r.length+1),i=0;i<r.length;i++)s[i]=r[i];return s[r.length]=n,0===t?e.apply(null,s):u(e,t-1,s)}}var l={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(s){return[e,t,r,n,s]}}}}}};function f(e){return s.e$.call(l,e)||(l[e]=u(n.bc,e-1,[])),l[e]}function d(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,s=f(n),i=e.map(t[0],s),o=1;o<n;o++)i=e.ap(i,t[o]);return i}}function p(e){return function(t){for(var r=Object.keys(t),n=r.length,s=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var s;return(s={})[e[0]]=t,s[e[1]]=r,s[e[2]]=n,s}}};case 4:return function(t){return function(r){return function(n){return function(s){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i[e[3]]=s,i}}}};case 5:return function(t){return function(r){return function(n){return function(s){return function(i){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=s,o[e[4]]=i,o}}}}};default:return u((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var s={},i=0;i<t;i++)s[e[i]]=r[i];return s}),t-1,[])}}(r),i=e.map(t[r[0]],s),o=1;o<n;o++)i=e.ap(i,t[r[o]]);return i}}},358:(e,t,r)=>{r.d(t,{Ce:()=>u,DY:()=>S,Eh:()=>M,GY:()=>k,Gb:()=>g,KB:()=>f,Lx:()=>O,Od:()=>c,Qp:()=>b,Su:()=>U,UI:()=>G,YM:()=>p,f2:()=>v,fw:()=>T,hX:()=>D,ke:()=>_,md:()=>m,oA:()=>C,pR:()=>R,tS:()=>x,yL:()=>I,yW:()=>F,zT:()=>w});var n=r(275),s=(r(560),r(963)),i=r(586),o=r(583),a=(r(219),r(511),function(e){return 0===e.length}),c=i.Od,u=i.Ce,l=(i.ws,i.R3),f=(i.Im,function(e,t){return e<=0?[]:i.KB(t)(e)});var d=i.dC,p=(o.P5,o.YM),g=(o.Z$,function(e){return c(e)?s.G(i.Gb(e)):s.YP}),_=function(e){return function(t){return d(e,t)?y(t):t.slice(0,e)}};var h=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function w(e){return function(t){var r=q(h(t,e))(t);return{init:r[0],rest:r[1]}}}var m=function(e){return function(t){return e<=0||a(t)?y(t):e>=t.length?[]:t.slice(e,t.length)}};function b(e){return function(t){return t.slice(h(t,e))}}o.cx;var v=o.f2;o.JO,o.qr;var y=function(e){return e.slice()},k=function(e){return a(e)?[]:e.slice().reverse()},S=function(e){return function(t){return t.length<=1?y(t):t.slice().sort(e.compare)}},I=function(e,t,r){for(var n=[],s=Math.min(e.length,t.length),i=0;i<s;i++)n[i]=r(e[i],t[i]);return n};o.t9;var q=function(e){return function(t){return e>=1&&c(t)?i.lx(e)(t):a(t)?[y(t),[]]:[[],y(t)]}};o.kp,o.Eq;var z=i.of,G=function(e){return function(t){return t.map((function(t){return e(t)}))}},x=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},U=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},E=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);s.pC(i)&&r.push(i.value)}return r}},P=function(e){return E((function(t,r){return e(r)}))},C=P(n.yR),D=function(e){return function(t){return t.filter(e)}},O=o.Lx,j=(o.xP,o.u4,o.OE),T=(o.nq,o.iw,function(e){var t=A(e);return function(e){return t((function(t,r){return e(r)}))}}),A=function(e){return function(t){return j(e.of([]),(function(r,s,i){return e.ap(e.map(s,(function(e){return function(t){return(0,n.zG)(e,l(t))}})),t(r,i))}))}},M=(o.ZN,o.Eh),R=o.pR,F=(o.pJ,o.oR,i.oo,o.yW);o.j0,s.F4,i.w6,i.QI,i.Ss},543:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function s(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>s,m:()=>n})},385:(e,t,r)=>{r.d(t,{g1:()=>v,G5:()=>b,dO:()=>h,Pd:()=>I,ak:()=>Q,YO:()=>Y,tS:()=>k,g_:()=>D,ij:()=>A,Yo:()=>x,DT:()=>G,Eh:()=>g,fS:()=>O,nM:()=>U,t$:()=>c,UI:()=>_,Vn:()=>q,EQ:()=>C,aD:()=>P,of:()=>w,vx:()=>T,F2:()=>u,LF:()=>j,KC:()=>L,i$:()=>F,Y3:()=>M,it:()=>R});var n=r(543),s=r(162),i=r(275),o=r(560),a=r(963),c=a.t$,u=a.F2,l=function(e,t){return(0,i.zG)(e,_(t))},f=function(e,t){return(0,i.zG)(e,m(t))},d=function(e,t){return(0,i.zG)(e,k(t))},p="Either",g=function(e,t){return{equals:function(r,n){return r===n||(U(r)?U(n)&&e.equals(r.left,n.left):E(n)&&t.equals(r.right,n.right))}}},_=function(e){return function(t){return U(t)?t:u(e(t.right))}},h={URI:p,map:l},w=u,m=function(e){return function(t){return U(t)?t:U(e)?e:u(t.right(e.right))}},b={URI:p,map:l,ap:f},v={URI:p,map:l,ap:f,of:w},y=function(e){return function(t){return U(t)?t:e(t.right)}},k=y,S={URI:p,map:l,ap:f,chain:d},I=function(e,t){return function(r){return U(r)?c(e(r.left)):u(t(r.right))}},q=function(e){return function(t){return U(t)?c(e(t.left)):t}},z={URI:p,fromEither:i.yR},G=(0,s.DT)(z),x=(0,s.Yo)(z),U=a.nM,E=a.tO,P=function(e,t){return function(r){return U(r)?e(r.left):t(r.right)}},C=P,D=C,O=function(e){return function(t){return U(t)?e(t.left):t.right}},j=function(e){return U(e)?u(e.left):c(e.right)},T=function(e){return function(t){return U(t)?e(t.left):t}},A=function(e){return function(t){return null==t?c(e):u(t)}},M=function(e,t){try{return u(e())}catch(e){return c(t(e))}},R=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return M((function(){return e.apply(void 0,r)}),t)}},F=P(i.yR,i.yR);function L(e){return e instanceof Error?e:new Error(String(e))}a.F4;var Y=(0,o.YO)(h),Q=(0,n.a)(S);a.Xl},890:(e,t,r)=>{r.d(t,{EQ:()=>v,F2:()=>a,KQ:()=>d,LF:()=>z,LU:()=>q,LV:()=>y,NG:()=>p,Pd:()=>m,UI:()=>g,Vn:()=>b,ap:()=>_,dQ:()=>I,fS:()=>k,i$:()=>G,ij:()=>f,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>h,vx:()=>S,wp:()=>w});var n=r(925),s=r(385),i=r(275),o=r(560);function a(e){return(0,i.ls)(s.F2,e.of)}function c(e){return(0,i.ls)(s.t$,e.of)}function u(e){return function(t){return e.map(t,s.F2)}}function l(e){return function(t){return e.map(t,s.t$)}}function f(e){return function(t){return(0,i.ls)(s.ij(t),e.of)}}function d(e){var t=f(e);return function(e){var r=t(e);return function(e){return(0,i.ls)(e,r)}}}function p(e){var t=h(e),r=d(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function g(e){return(0,o.UI)(e,s.dO)}function _(e){return(0,n.ap)(e,s.G5)}function h(e){return function(t){return function(r){return e.chain(r,(function(r){return s.nM(r)?e.of(r):t(r.right)}))}}}function w(e){return function(t){return function(r){return e.chain(r,(function(r){return s.nM(r)?t():e.of(r)}))}}}function m(e){return function(t,r){return function(n){return e.map(n,s.Pd(t,r))}}}function b(e){return function(t){return function(r){return e.map(r,s.Vn(t))}}}function v(e){return function(t,r){return function(n){return e.map(n,s.EQ(t,r))}}}function y(e){return function(t,r){return function(n){return e.chain(n,s.EQ(t,r))}}}function k(e){return function(t){return function(r){return e.chain(r,s.EQ(t,e.of))}}}function S(e){return function(t){return function(r){return e.chain(r,(function(r){return s.nM(r)?t(r.left):e.of(r)}))}}}function I(e){var t=S(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return s.nM(e)?e:s.t$(t)}))}))}}function q(e){return function(t){return function(r){return e.chain(r,s.EQ((function(r){return e.map(t(r),s.t$)}),(function(t){return e.of(s.F2(t))})))}}}function z(e){return function(t){return e.map(t,s.LF)}}function G(e){return function(t){return e.map(t,s.i$)}}},191:(e,t,r)=>{r.d(t,{MW:()=>c,Uz:()=>o,bc:()=>i,f7:()=>n,n_:()=>s,w4:()=>a});r(275);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},s=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n((function(t,r){return e.every((function(e,n){return e.equals(t[n],r[n])}))}))},o=function(e){return function(t){return n((function(r,n){return t.equals(e(r),e(n))}))}},a={equals:function(e,t){return e===t}},c=s;a.equals},162:(e,t,r)=>{r.d(t,{DT:()=>o,Dj:()=>a,Yo:()=>i,fX:()=>c});var n=r(275),s=r(963);function i(e){return function(t){return function(r){return e.fromEither(s.Wi(r)?s.t$(t()):s.F2(r.value))}}}function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?s.F2(n):s.t$(r(n)))}}}function a(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function c(e,t){var r=a(e);return function(e){return function(n){return t.chain(n,r(e))}}}},395:(e,t,r)=>{r.d(t,{At:()=>o,oU:()=>i});var n=r(543),s=r(275);function i(e,t){return function(r){var n=(0,s.ls)(r,e.fromIO);return function(e){return t.chain(e,n)}}}function o(e,t){var r=(0,n.m)(t);return function(t){return r((0,s.ls)(t,e.fromIO))}}},272:(e,t,r)=>{r.d(t,{oU:()=>i,wt:()=>s});var n=r(275);function s(e){return function(t){return(0,n.ls)(t,e.fromTask)}}function i(e,t){return function(r){var s=(0,n.ls)(r,e.fromTask);return function(e){return t.chain(e,s)}}}},560:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function s(e){return function(t){return function(r){return e.map(r,(function(e){return e(t)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function o(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>o,OV:()=>s,UI:()=>n,YO:()=>i})},444:(e,t,r)=>{r.d(t,{G5:()=>p,PM:()=>d,RD:()=>b,UA:()=>_,UI:()=>c,dO:()=>f,of:()=>u,qo:()=>g});var n=r(275),s=(r(560),r(963)),i=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},a=function(e,t){return function(){return t(e())()}},c=function(e){return function(t){return i(t,e)}},u=n.a9,l="IO",f={URI:l,map:i},d={URI:l,of:u},p={URI:l,map:i,ap:o},g={URI:l,map:i,ap:o,chain:a},_={URI:l,map:i,ap:o,of:u,chain:a},h=(n.yR,n.yR,s.F4,u(s.Xl)),w=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,s.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return s.Od(e)?t(e):h}},m=function(e){return w((function(t,r){return e(r)}))},b=m(n.yR)},586:(e,t,r)=>{r.d(t,{Ce:()=>l,Eh:()=>k,Gb:()=>I,Im:()=>f,KB:()=>h,Od:()=>a,QI:()=>z,R3:()=>d,Ss:()=>G,dC:()=>c,lx:()=>y,nI:()=>_,of:()=>b,oo:()=>p,ur:()=>q,w6:()=>w,ws:()=>u,yL:()=>v});var n=r(275),s=(r(560),r(963)),i=r(350),o=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},a=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},u=function(e){return function(t){return o([e],t,!0)}},l=u,f=function(e){return function(t){return o(o([],t,!0),[e],!1)}},d=f,p=function(e,t,r){if(a(r)){var n=g(r);return n.splice(e,0,t),n}return[t]},g=s.r1,_=function(e){return a(e)?s.G(e):s.YP},h=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],s=1;s<r;s++)n.push(e(s));return n}},w=function(e,t){return e<=t?h((function(t){return e+t}))(t-e+1):[e]};var m=g,b=function(e){return[e]},v=function(e,t,r){for(var n=[r(e[0],t[0])],s=Math.min(e.length,t.length),i=1;i<s;i++)n[i]=r(e[i],t[i]);return n};i.xP,i.Lx;var y=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[m(t),[]]:[(0,n.zG)(t.slice(1,r),l(S(t))),t.slice(r)]}},k=(i.u4,i.OE,i.nq,i.iw,i.YM,i.ZN,i.Eh),S=(s.F4,i.YM),I=function(e){return e.slice(1)},q=(i.Z$,i.VV,i.Fp,function(e){return function(t){return t.reduce(e.concat)}});i.j0;function z(e,t){return void 0===t?l(e):(0,n.zG)(t,l(e))}var G=function(e,t){return(0,n.zG)(e,d(t))};i.ur},492:(e,t,r)=>{r.d(t,{DT:()=>g,Dj:()=>ue,Do:()=>me,EK:()=>h,EQ:()=>ne,Eh:()=>q,FS:()=>we,G:()=>p,G5:()=>D,Gk:()=>A,Hr:()=>ve,IS:()=>_,KQ:()=>ge,NG:()=>_e,OV:()=>ae,Qt:()=>ke,Ri:()=>$,UI:()=>x,Uo:()=>X,WG:()=>he,Wi:()=>te,Y3:()=>de,YO:()=>be,YP:()=>d,aD:()=>re,ak:()=>ye,bM:()=>R,dO:()=>U,fS:()=>oe,fX:()=>le,fw:()=>W,g1:()=>O,g_:()=>se,hX:()=>B,ij:()=>fe,it:()=>pe,lo:()=>L,pC:()=>ee,pF:()=>ie,pR:()=>z,tS:()=>j,uZ:()=>G,wp:()=>M,xH:()=>ce,xu:()=>J});var n=r(925),s=r(543),i=r(162),o=r(275),a=r(560),c=r(963),u=r(491),l=r(219),f=(r(511),r(957)),d=c.YP,p=c.G;function g(e){return function(t){return e(t)?p(t):d}}var _=function(e){return"Right"===e._tag?d:p(e.left)},h=function(e){return"Left"===e._tag?d:p(e.right)},w=function(e,t){return(0,o.zG)(e,x(t))},m=function(e,t){return(0,o.zG)(e,C(t))},b=function(e,t){return(0,o.zG)(e,j(t))},v=function(e,t){return(0,o.zG)(e,B(t))},y=function(e,t){return(0,o.zG)(e,H(t))},k=function(e,t){return(0,o.zG)(e,V(t))},S=function(e,t){return(0,o.zG)(e,K(t))},I="Option",q=function(e){return{equals:function(t,r){return t===r||(te(t)?te(r):!te(r)&&e.equals(t.value,r.value))}}},z=function(e){return{equals:q(e).equals,compare:function(t,r){return t===r?0:ee(t)?ee(r)?e.compare(t.value,r.value):1:-1}}},G=function(e){return{concat:function(t,r){return te(t)?r:te(r)?t:p(e.concat(t.value,r.value))},empty:d}},x=function(e){return function(t){return te(t)?d:p(e(t.value))}},U={URI:I,map:w},E=p,P={URI:I,of:E},C=function(e){return function(t){return te(t)||te(e)?d:p(t.value(e.value))}},D={URI:I,map:w,ap:m},O={URI:I,map:w,ap:m,of:E},j=function(e){return function(t){return te(t)?d:e(t.value)}},T={URI:I,map:w,ap:m,chain:b},A=function(e){return function(t){return te(t)?e():t}},M=A,R=function(){return d},F={URI:I,zero:R},L=(0,f.l)(F,P),Y=j(o.yR),Q=(0,l.s4)(d,d),N=function(e){return te(e)?Q:(0,l.s4)(_(e.value),h(e.value))},$={URI:I,compact:Y,separate:N},B=function(e){return function(t){return te(t)?d:e(t.value)?t:d}},H=function(e){return function(t){return te(t)?d:e(t.value)}},V=function(e){return function(t){return(0,l.s4)(v(t,(0,u.ff)(e)),v(t,e))}},K=function(e){return(0,o.ls)(x(e),N)},J={URI:I,map:w,compact:Y,separate:N,filter:v,filterMap:y,partition:k,partitionMap:S},W=function(e){return function(t){return function(r){return te(r)?e.of(d):e.map(t(r.value),p)}}},X=h,Z={URI:I,fromEither:X},ee=c.pC,te=function(e){return"None"===e._tag},re=function(e,t){return function(r){return te(r)?e():t(r.value)}},ne=re,se=ne,ie=function(e){return function(t){return te(t)?e():t.value}},oe=ie,ae=(0,a.OV)(U),ce=Y,ue=(0,i.Dj)(Z),le=(0,i.fX)(Z,T),fe=function(e){return null==e?d:p(e)},de=function(e){try{return p(e())}catch(e){return d}},pe=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return de((function(){return e.apply(void 0,t)}))}},ge=function(e){return(0,o.ls)(e,fe)},_e=function(e){return function(t){return te(t)?d:fe(e(t.value))}},he=ne(o.gn,o.yR),we=ne(o.r5,o.yR);var me=E(c.F4),be=(0,a.YO)(U),ve=(0,a.Hr)(U),ye=(0,s.a)(T),ke=(0,n.Qt)(D);c.Xl},881:(e,t,r)=>{r.d(t,{Fp:()=>d,Uz:()=>a,VV:()=>f,Zt:()=>o,gf:()=>l,gt:()=>u,lt:()=>c});var n=r(191),s=r(275),i=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:i(e),compare:function(t,r){return t===r?0:e(t,r)}}},a=function(e){return function(t){return o((function(r,n){return t.compare(e(r),e(n))}))}},c=(s.W8,function(e){return function(t,r){return-1===e.compare(t,r)}}),u=function(e){return function(t,r){return 1===e.compare(t,r)}},l=function(e){return function(t,r){return-1!==e.compare(t,r)}},f=function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}},d=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}};n.w4.equals},491:(e,t,r)=>{r.d(t,{ff:()=>n,xD:()=>s});r(275);var n=function(e){return function(t){return!e(t)}},s=function(e){return function(t){return function(r){return t(r)&&e(r)}}}},583:(e,t,r)=>{r.d(t,{Ce:()=>_,DZ:()=>J,EQ:()=>m,Eh:()=>fe,Eq:()=>L,Ew:()=>G,G:()=>Se,Hr:()=>qe,JO:()=>U,Lx:()=>re,N7:()=>C,OE:()=>ne,OV:()=>ge,Od:()=>g,P5:()=>v,R3:()=>h,Su:()=>H,UI:()=>B,YM:()=>y,Yo:()=>w,Z$:()=>k,ZN:()=>ce,bM:()=>Q,bj:()=>P,cS:()=>ye,cx:()=>z,f2:()=>x,hX:()=>V,iw:()=>ie,j0:()=>Ie,jG:()=>ue,jj:()=>O,kp:()=>F,lo:()=>we,md:()=>q,nI:()=>ve,nq:()=>se,oA:()=>W,oR:()=>be,of:()=>Y,pJ:()=>me,pO:()=>j,pR:()=>de,pc:()=>A,qr:()=>E,t9:()=>D,tS:()=>N,u4:()=>te,uK:()=>X,uZ:()=>le,vP:()=>oe,xH:()=>$,xP:()=>ee,xb:()=>p,yW:()=>ke,zT:()=>I});var n=r(191),s=r(275),i=r(560),o=r(963),a=r(627),c=r(881),u=r(350),l=r(219),f=(r(511),r(957)),d=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},p=function(e){return 0===e.length},g=u.Od,_=u.Ce,h=(u.ws,u.R3);u.Im;var w=function(e){return o.Wi(e)?ye:[e.value]},m=function(e,t){return function(r){return g(r)?t(r):e()}},b=u.dC;function v(e,t){return void 0===t?function(t){return v(e,t)}:b(e,t)?o.YP:o.G(t[e])}var y=function(e){return g(e)?o.G(u.YM(e)):o.YP},k=function(e){return g(e)?o.G(u.Z$(e)):o.YP};var S=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function I(e){return function(t){var r=T(S(t,e))(t);return{init:r[0],rest:r[1]}}}var q=function(e){return function(t){return e<=0||p(t)?t:e>=t.length?ye:t.slice(e,t.length)}};var z=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function G(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var x=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var U=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},E=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},P=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};var C=function(e){for(var t=[],r=[],n=0;n<e.length;n++)t[n]=e[n][0],r[n]=e[n][1];return[t,r]};function D(e){return function(t,r){if(void 0===r){var n=D(e);return function(e){return n(t,e)}}for(var s,i=0;i<r.length;i++)if(s=r[i],e.equals(s,t))return!0;return!1}}var O=function(e){var t=u.jj(e);return function(e){return g(e)?t(e):e}},j=function(e){var t=u.pO(e);return function(e){return g(e)?t(e):ye}},T=function(e){return function(t){return e>=1&&g(t)?u.lx(e)(t):p(t)?[t,ye]:[ye,t]}},A=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return w(e.apply(void 0,t))}};var M=function(e,t){return(0,s.zG)(e,B(t))},R=function(e,t,r){return(0,s.zG)(e,te(t,r))},F=function(e,t){return(0,s.zG)(e,me(t))},L=function(e,t){return(0,s.zG)(e,be(t))},Y=u.of,Q=function(){return ye},N=function(e){return function(t){return(0,s.zG)(t,function(e){return function(t){if(p(t))return ye;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},$=N(s.yR),B=function(e){return function(t){return t.map((function(t){return e(t)}))}},H=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},V=function(e){return function(t){return t.filter(e)}},K=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var s=e(n,t[n]);o.pC(s)&&r.push(s.value)}return r}},J=function(e){return K((function(t,r){return e(r)}))},W=J(s.yR),X=function(e){return Z((function(t,r){return e(r)}))},Z=function(e){return function(t){for(var r=[],n=[],s=0;s<t.length;s++){var i=t[s];e(s,i)?n.push(i):r.push(i)}return(0,l.s4)(r,n)}},ee=function(e){return function(t){return function(r){return r.reduce((function(r,n,s){return e.concat(r,t(s,n))}),e.empty)}}},te=function(e,t){return ne(e,(function(e,r,n){return t(r,n)}))},re=function(e){var t=ee(e);return function(e){return t((function(t,r){return e(r)}))}},ne=function(e,t){return function(r){for(var n=r.length,s=e,i=0;i<n;i++)s=t(i,s,r[i]);return s}},se=function(e,t){return ie(e,(function(e,r,n){return t(r,n)}))},ie=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},oe=function(e){return function(t){return R(t,e.of(Q()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,s.zG)(e,h(t))}})),r)}))}},ae="ReadonlyArray",ce=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},ue=function(){return{concat:function(e,t){return p(e)?t:p(t)?e:e.concat(t)}}},le=function(){return{concat:ue().concat,empty:ye}},fe=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},de=function(e){return(0,c.Zt)((function(t,r){for(var n=t.length,s=r.length,i=Math.min(n,s),o=0;o<i;o++){var c=e.compare(t[o],r[o]);if(0!==c)return c}return a.Df.compare(n,s)}))},pe={URI:ae,map:M},ge=(0,i.OV)(pe),_e={URI:ae,of:Y},he={URI:ae,zero:Q},we=(0,f.l)(he,_e),me=function(e){return function(t){for(var r=d([],e(t),!0),n=[];r.length>0;){var s=r.shift();o.nM(s)?r.unshift.apply(r,e(s.left)):n.push(s.right)}return n}},be=function(e){return function(t){var r=e(t),n=[],s=[];function i(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):s.push(t.right)}for(var a=0,c=r;a<c.length;a++){i(c[a])}for(;n.length>0;)i(n.shift());return s}},ve=(u.oo,function(e){return p(e)?ye:e.slice()}),ye=u.cS;function ke(e){return function(t){return t.every(e)}}var Se=function(e){return function(t){return t.some(e)}},Ie=function(e){var t=u.j0(e);return function(r){return m((function(){return e.empty}),t(r))}},qe=(o.F4,(0,i.Hr)(pe));u.w6,u.QI,u.Ss},350:(e,t,r)=>{r.d(t,{Ce:()=>d,Eh:()=>j,Fp:()=>L,Im:()=>p,Lx:()=>x,OE:()=>E,Od:()=>u,QI:()=>B,R3:()=>g,Ss:()=>H,UI:()=>q,VV:()=>F,YM:()=>T,Z$:()=>M,ZN:()=>O,aL:()=>Q,c2:()=>w,cS:()=>c,dC:()=>l,iw:()=>C,j0:()=>$,jj:()=>h,lx:()=>S,nq:()=>U,of:()=>I,oo:()=>_,pO:()=>k,u4:()=>G,ur:()=>Y,ut:()=>N,w6:()=>b,ws:()=>f,xP:()=>P});var n=r(191),s=r(275),i=(r(560),r(963)),o=r(199),a=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},c=i.Xl,u=i.Od,l=function(e,t){return e<0||e>=t.length},f=function(e){return function(t){return a([e],t,!0)}},d=f,p=function(e){return function(t){return a(a([],t,!0),[e],!1)}},g=p,_=function(e,t,r){if(u(r)){var n=i.r1(r);return n.splice(e,0,t),n}return[t]},h=function(e){return function(t){if(1===t.length)return t;for(var r=[T(t)],n=function(t){r.every((function(r){return!e.equals(r,t)}))&&r.push(t)},s=0,i=A(t);s<i.length;s++){n(i[s])}return r}},w=function(e){return u(e)?i.G(e):i.YP},m=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],s=1;s<r;s++)n.push(e(s));return n}},b=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]};function v(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var y=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},k=function(e){return function(t){for(var r=e(t),n=[r[0]],s=r[1];u(s);){var i=e(s),o=i[0],a=i[1];n.push(o),s=a}return n}},S=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[t,c]:[(0,s.zG)(t.slice(1,r),d(T(t))),t.slice(r)]}},I=i.ri,q=function(e){return z((function(t,r){return e(r)}))},z=function(e){return function(t){for(var r=[e(0,T(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},G=function(e,t){return E(e,(function(e,r,n){return t(r,n)}))},x=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},U=function(e,t){return C(e,(function(e,r,n){return t(r,n)}))},E=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},P=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,s){return e.concat(r,t(s+1,n))}),t(0,r[0]))}}},C=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},D=i.YM,O=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},j=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},T=(i.F4,D),A=i.Gb,M=function(e){return e[e.length-1]},R=function(e){return e.slice(0,-1)},F=function(e){var t=o.VV(e);return function(e){return e.reduce(t.concat)}},L=function(e){var t=o.Fp(e);return function(e){return e.reduce(t.concat)}},Y=function(e){return function(t){return t.reduce(e.concat)}},Q=function(e){return function(t){return e(T(t),A(t))}},N=function(e){return function(t){return e(R(t),M(t))}},$=function(e){var t=Y(e);return function(e){return(0,s.ls)(function(e){return function(t){var r=A(t);return u(r)?(0,s.zG)(r,y(e),d(T(t))):t}}(e),t)}};function B(e,t){return void 0===t?d(e):(0,s.zG)(t,d(e))}var H=function(e,t){return(0,s.zG)(e,v([t]))}},54:(e,t,r)=>{r.d(t,{Bu:()=>w,CC:()=>R,DZ:()=>re,EG:()=>h,EW:()=>B,Eh:()=>fe,G:()=>O,HA:()=>T,Hd:()=>x,I8:()=>L,P5:()=>m,RF:()=>F,RJ:()=>Q,SW:()=>V,Su:()=>v,UI:()=>y,Ub:()=>J,V_:()=>$,XP:()=>f,Yz:()=>P,_Y:()=>N,_r:()=>G,cS:()=>b,dp:()=>c,dx:()=>g,e$:()=>_,hX:()=>te,jt:()=>U,kp:()=>M,mK:()=>Z,mS:()=>Y,nn:()=>A,nr:()=>pe,nu:()=>H,oA:()=>ce,oh:()=>ue,qS:()=>X,ri:()=>q,sq:()=>C,t9:()=>j,tV:()=>se,uK:()=>ne,uZ:()=>de,vA:()=>W,vP:()=>z,xb:()=>u,yW:()=>D,z7:()=>E,zV:()=>K});var n=r(191),s=r(275),i=r(963),o=r(219),a=r(29),c=(r(511),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(i.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},f=l(a.Df);function d(e){if("function"==typeof e)return d(a.Df)(e);var t=l(e);return function(e){return function(r){for(var n=[],s=0,i=t(r);s<i.length;s++){var o=i[s];n.push(e(o,r[o]))}return n}}}var p=d(a.Df)((function(e,t){return[e,t]}));var g=function(e,t){return function(r){if(i.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},_=function(e,t){return i.e$.call(t,e)};function h(e){return function(t){if(!i.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function w(e){return function(t,r){if(void 0===r){var n=w(e);return function(e){return n(e,t)}}for(var s in t)if(!i.e$.call(r,s)||!e.equals(t[s],r[s]))return!1;return!0}}function m(e,t){return void 0===t?function(t){return m(e,t)}:i.e$.call(t,e)?i.G(t[e]):i.YP}var b={};function v(e){return function(t){var r={};for(var n in t)i.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function y(e){return v((function(t,r){return e(r)}))}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return k(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var s=e,i=r(n),o=i.length,a=0;a<o;a++){var c=i[a];s=t(c,s,n[c])}return s}}}function S(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var s=e.empty,i=t(n),o=i.length,a=0;a<o;a++){var c=i[a];s=e.concat(s,r(c,n[c]))}return s}}}}return S(a.Df)(e)}function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return I(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var s=e,i=r(n),o=i.length-1;o>=0;o--){var a=i[o];s=t(a,n[a],s)}return s}}}var q=function(e,t){var r;return(r={})[e]=t,r};function z(e){return Z(a.Df)(e)}function G(e){return function(t){var r={},n={};for(var s in t)if(i.e$.call(t,s)){var a=e(s,t[s]);switch(a._tag){case"Left":r[s]=a.left;break;case"Right":n[s]=a.right}}return(0,o.s4)(r,n)}}function x(e){return function(t){var r={},n={};for(var s in t)if(i.e$.call(t,s)){var a=t[s];e(s,a)?n[s]=a:r[s]=a}return(0,o.s4)(r,n)}}function U(e){return function(t){var r={};for(var n in t)if(i.e$.call(t,n)){var s=e(n,t[n]);i.pC(s)&&(r[n]=s.value)}return r}}function E(e){return function(t){var r={},n=!1;for(var s in t)if(i.e$.call(t,s)){var o=t[s];e(s,o)?r[s]=o:n=!0}return n?r:t}}var P=p,C=function(e){for(var t={},r=0,n=e;r<n.length;r++){var s=n[r];t[s[0]]=s[1]}return t};function D(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function O(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function j(e){return function(t,r){if(void 0===r){var n=j(e);return function(e){return n(t,e)}}for(var s in r)if(e.equals(r[s],t))return!0;return!1}}var T=function(e,t){return(0,s.zG)(e,y(t))},A=function(e,t){return(0,s.zG)(e,v(t))},M=function(e){var t=ie(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},R=function(e){return function(t){var r=oe(e)(t);return function(e,t){return(0,s.zG)(e,r(t))}}},F=function(e){var t=ae(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},L=function(e,t){return(0,s.zG)(e,te(t))},Y=function(e,t){return(0,s.zG)(e,re(t))},Q=function(e,t){return(0,s.zG)(e,ne(t))},N=function(e,t){return(0,s.zG)(e,se(t))},$=function(e){var t=k(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},B=function(e){var t=S(e);return function(e){var r=t(e);return function(e,t){return(0,s.zG)(e,r(t))}}},H=function(e){var t=I(e);return function(e,r,n){return(0,s.zG)(e,t(r,n))}},V=function(e,t){return(0,s.zG)(e,G(t))},K=function(e,t){return(0,s.zG)(e,x(t))},J=function(e,t){return(0,s.zG)(e,U(t))},W=function(e,t){return(0,s.zG)(e,E(t))},X=function(e){var t=ee(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,s.ls)(s.SK,t))}}},Z=function(e){var t=X(e);return function(e){var r=t(e);return function(e){return r(e,s.yR)}}},ee=function(e){return function(t){var r=l(e);return function(e,n){var s=r(e);if(0===s.length)return t.of(b);for(var i=t.of({}),o=function(r){i=t.ap(t.map(i,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},a=0,c=s;a<c.length;a++){o(c[a])}return i}}},te=function(e){return E((function(t,r){return e(r)}))},re=function(e){return U((function(t,r){return e(r)}))},ne=function(e){return x((function(t,r){return e(r)}))},se=function(e){return G((function(t,r){return e(r)}))};function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=k(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ie(a.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=S(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return oe(a.Df)(e)}function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=I(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ae(a.Df).apply(void 0,e)}var ce=function(e){var t={};for(var r in e)if(i.e$.call(e,r)){var n=e[r];i.pC(n)&&(t[r]=n.value)}return t},ue=function(e){var t={},r={};for(var n in e)if(i.e$.call(e,n)){var s=e[n];i.nM(s)?t[n]=s.left:r[n]=s.right}return(0,o.s4)(t,r)},le="ReadonlyRecord";function fe(e){var t=w(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function de(e){return{concat:function(t,r){if(u(t))return r;if(u(r))return t;var n=Object.assign({},t);for(var s in r)i.e$.call(r,s)&&(n[s]=i.e$.call(t,s)?e.concat(t[s],r[s]):r[s]);return n},empty:b}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function pe(e,t){return i.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},495:(e,t,r)=>{r.d(t,{H5:()=>a,Kl:()=>c,Lx:()=>l,Pd:()=>i,Yg:()=>s,li:()=>n,nq:()=>f,pL:()=>o,u4:()=>u});r(275);function n(e){return e[0]}function s(e){return e[1]}var i=function(e,t){return function(r){return[t(n(r)),e(s(r))]}},o=function(e){return function(t){return[e(n(t)),s(t)]}},a=function(e){return function(t){return[n(t),e(s(t))]}},c=n,u=function(e,t){return function(r){return t(e,n(r))}},l=function(){return function(e){return function(t){return e(n(t))}}},f=function(e,t){return function(r){return t(n(r),e)}}},199:(e,t,r)=>{r.d(t,{Z$:()=>u,Fp:()=>a,VV:()=>o,n_:()=>c});var n,s=r(963),i=r(881),o=function(e){return{concat:i.VV(e)}},a=function(e){return{concat:i.Fp(e)}},c=function(e){return{concat:function(t,r){var n={};for(var i in e)s.e$.call(e,i)&&(n[i]=e[i].concat(t[i],r[i]));return n}}},u=function(){return{concat:function(e,t){return t}}};n=void 0},219:(e,t,r)=>{r.d(t,{F2:()=>o,Vn:()=>s,s4:()=>n});r(275);var n=function(e,t){return{left:e,right:t}},s=function(e){return function(t){return n(e(i(t)),o(t))}},i=function(e){return e.left},o=function(e){return e.right}},940:(e,t,r)=>{r.d(t,{At:()=>q,Do:()=>z,Hi:()=>b,Hr:()=>x,PM:()=>m,UA:()=>k,UI:()=>d,YO:()=>G,ak:()=>U,ap:()=>p,dO:()=>w,mU:()=>S,of:()=>g,pE:()=>O,qA:()=>v,qo:()=>y,tD:()=>c,tS:()=>_,uU:()=>D});var n=r(543),s=r(395),i=r(275),o=r(560),a=r(963),c=function(e){return function(){return Promise.resolve().then(e)}};var u=function(e,t){return(0,i.zG)(e,d(t))},l=function(e,t){return(0,i.zG)(e,p(t))},f=function(e,t){return(0,i.zG)(e,_(t))},d=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},p=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},g=function(e){return function(){return Promise.resolve(e)}},_=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},h="Task";var w={URI:h,map:u},m={URI:h,of:g},b={URI:h,map:u,ap:l},v={URI:h,map:u,ap:l,of:g},y={URI:h,map:u,ap:l,chain:f},k={URI:h,map:u,of:g,ap:l,chain:f},S=(i.yR,(0,n.m)(y)),I={URI:h,fromIO:c},q=(0,s.At)(I,y),z=g(a.F4),G=(0,o.YO)(w),x=(0,o.Hr)(w),U=(0,n.a)(y),E=g(a.Xl),P=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return a.Od(e)?t(e):E}},C=function(e){var t=function(e){return function(t){return function(){return a.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,a.YM(t))).then(a.ri))}}}(e);return function(e){return a.Od(e)?t(e):E}},D=function(e){return P((function(t,r){return e(r)}))},O=function(e){return C((function(t,r){return e(r)}))}},716:(e,t,r)=>{r.d(t,{At:()=>Z,DT:()=>J,EQ:()=>S,Hi:()=>B,Hr:()=>ne,Ij:()=>oe,LV:()=>I,OV:()=>$,Qt:()=>ie,UI:()=>O,Vn:()=>T,Y3:()=>z,YO:()=>re,Zl:()=>R,ak:()=>se,fF:()=>y,fS:()=>q,fX:()=>K,it:()=>G,oU:()=>X,of:()=>L,t$:()=>_,tD:()=>v,tS:()=>M,wE:()=>te,wp:()=>F});var n=r(925),s=r(543),i=r(890),o=r(162),a=r(395),c=r(272),u=r(275),l=r(560),f=r(963),d=r(940),p=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},g=function(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},_=i.t$(d.PM),h=i.F2(d.PM),w=i.m8(d.dO),m=i.pk(d.dO),b=(0,u.ls)(d.tD,w),v=(d.tD,b),y=w,k=d.of,S=(d.tD,i.EQ(d.dO)),I=i.LV(d.UA),q=i.fS(d.UA),z=function(e,t){return function(){return p(void 0,void 0,void 0,(function(){var r;return g(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(f.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,f.t$(t(r))];case 3:return[2]}}))}))}},G=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return z((function(){return e.apply(void 0,r)}),t)}},x=(d.dO,d.PM,d.PM,d.UA,d.UA,d.UA,d.UA,d.dO,function(e,t){return(0,u.zG)(e,O(t))}),U=function(e,t){return(0,u.zG)(e,A(t))},E=function(e,t){return(0,u.zG)(e,M(t))},P=function(e,t,r){return(0,u.zG)(e,j(t,r))},C=function(e,t){return(0,u.zG)(e,T(t))},D=function(e,t){return(0,u.zG)(e,F(t))},O=i.UI(d.dO),j=i.Pd(d.dO),T=i.Vn(d.dO),A=i.ap(d.Hi),M=i.tS(d.UA),R=M,F=i.wp(d.UA),L=h,Y=_,Q="TaskEither";var N={URI:Q,map:x},$=(0,l.OV)(N),B={URI:Q,map:x,ap:U},H={URI:Q,map:x,ap:U,chain:E},V={URI:Q,fromEither:k},K=(0,o.fX)(V,H),J=(0,o.DT)(V),W={URI:Q,fromIO:v},X=(0,a.oU)(W,H),Z=(0,a.At)(W,H),ee={URI:Q,fromIO:v,fromTask:y},te=(0,c.oU)(ee,H);f.F4;var re=(0,l.YO)(N),ne=(0,l.Hr)(N),se=(0,s.a)(H),ie=(0,n.Qt)(B),oe=(f.Xl,{URI:Q,bimap:P,mapLeft:C,map:x,of:L,ap:U,chain:E,alt:D,fromIO:v,fromTask:y,throwError:Y})},569:(e,t,r)=>{r.d(t,{H5:()=>o,Yg:()=>i,li:()=>s});var n=r(495),s=(r(275),n.li),i=n.Yg;var o=function(e){return function(t){return[s(t),e(i(t))]}};n.Kl,n.Lx,n.u4,n.nq},511:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,s){return r.map(n(e,s),t.separate)}}}function s(e,t){return function(r){var n=e.traverse(r);return function(e,s){return r.map(n(e,s),t.compact)}}}r.d(t,{BL:()=>s,Fj:()=>n})},957:(e,t,r)=>{function n(e,t){return function(r){return r?t.of(void 0):e.zero()}}r.d(t,{l:()=>n})},275:(e,t,r)=>{r.d(t,{MZ:()=>s,Q1:()=>u,SK:()=>p,W8:()=>o,a9:()=>i,bc:()=>f,gn:()=>a,ls:()=>l,r5:()=>c,yR:()=>n,zG:()=>d});function n(e){return e}var s=n;function i(e){return function(){return e}}var o=i(!0),a=i(null),c=i(void 0),u=c;function l(e,t,r,n,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return s(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return i(s(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(s(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(i(s(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(o(i(s(n(r(t(e.apply(this,arguments)))))))))}}}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,r,n,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return s(n(r(t(e))));case 6:return i(s(n(r(t(e)))));case 7:return o(i(s(n(r(t(e))))));case 8:return a(o(i(s(n(r(t(e)))))));case 9:return c(a(o(i(s(n(r(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var p=function(e,t){return t}},963:(e,t,r)=>{r.d(t,{F2:()=>f,F4:()=>w,G:()=>a,Gb:()=>_,Od:()=>p,Wi:()=>s,Xl:()=>h,YM:()=>g,YP:()=>o,e$:()=>m,nM:()=>c,pC:()=>i,r1:()=>b,ri:()=>d,t$:()=>l,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e){return"None"===e._tag},i=function(e){return"Some"===e._tag},o={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},f=function(e){return{_tag:"Right",right:e}},d=function(e){return[e]},p=function(e){return e.length>0},g=function(e){return e[0]},_=function(e){return e.slice(1)},h=[],w={},m=Object.prototype.hasOwnProperty,b=function(e){return n([e[0]],e.slice(1),!0)}},627:(e,t,r)=>{r.d(t,{Df:()=>s,Eq:()=>n,Pc:()=>o});var n={equals:function(e,t){return e===t}},s={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},i=(n.equals,s.compare,{concat:function(e,t){return e+t}}),o={concat:i.concat,empty:0}},29:(e,t,r)=>{r.d(t,{Df:()=>s,Eq:()=>n,HD:()=>i,xb:()=>o});var n={equals:function(e,t){return e===t}},s={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},i=function(e){return"string"==typeof e},o=function(e){return 0===e.length}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(812),t=__webpack_require__(460),r=__webpack_require__(275),n=__webpack_require__(936),s=__webpack_require__(492),i=__webpack_require__(583),o=__webpack_require__(387),a=__webpack_require__(716);function c(e,n){return(0,r.zG)(a.Y3((()=>e.get(n)),(e=>`Failed to read previous state from IndexedDB: ${e}.`)),a.UI((e=>e??void 0)),a.UI((s=>i=>(0,r.ls)((0,o.rO)({previousState:()=>s}),i,(i=>{let{value:a,state:c}=i;const[u,l]=t.Ue(!1),f=(0,r.zG)(c,t.Rp(-1,(e=>e+1)));return{value:(0,r.bc)(u,a),state:(0,r.zG)(t.vP(c,f),(0,o.bw)(t.YP((t=>{let[r,i]=t;if(0!==i||r!==s)switch(l(!1),typeof r){case"undefined":e.delete(n).then((()=>l(!0)));break;case"object":null===r?e.delete(n).then((()=>l(!0))):e.put(r,n).then((()=>l(!0)));break;default:e.put(r,n).then((()=>l(!0)))}}))))}})))))}function u(e){return n=>(0,r.ls)((0,o.rO)({previousState:t=>e.current?t:void 0}),n,(0,o.rO)({state:(0,r.ls)((r=>t.vP(e,r)),t.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}var l=__webpack_require__(385);class f extends Error{static errorName="NetworkRequestFailedError";name=f.errorName;constructor(){super(f.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class d extends Error{static errorName="NetworkRequestTimeoutError";name=d.errorName;constructor(){super(d.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}var p=__webpack_require__(963),g=function(e){return"Left"===e._tag},_=function(e){return"Right"===e._tag};function h(e){return{_tag:"Left",left:e}}function w(e){return{_tag:"Right",right:e}}function m(e,t){return{_tag:"Both",left:e,right:t}}var b=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},v=b;v(w,h,(function(e,t){return m(t,e)}));var y=w,k="These";r.yR,r.yR,p.Xl;class S{metrics;constructor(e){this.metrics=e}req(e){return this.reqImpl(e).then((e=>(0,r.MZ)(e)))}reqWithBeacon(e){var t,r;let{url:n,payload:s}=e;const i=JSON.stringify(s),o=(null===(t=navigator)||void 0===t||null===(r=t.sendBeacon)||void 0===r?void 0:r.call(t,n,JSON.stringify(s)))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!o,request:{method:"POST",url:n,content_length:i.length}}),o}reqImpl(t){const n="arraybuffer",{url:i,dataType:a,contentType:c,method:u,withCredentials:g,timeout:_}=t;return new Promise(((h,b)=>{const v=new XMLHttpRequest,y="POST"===t.method?"string"==typeof(k=t.payload)?k:JSON.stringify(k):null;var k;const S=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:u,url:i,content_length:(null==y?void 0:y.length)??0},response:e});v.onload=(0,e.GL)((()=>{var e,t;return(0,r.zG)(v.status,l.DT((e=>e<400),(()=>{const e="text"===v.responseType||""===v.responseType?v.responseText:"Couldn\'t access response text";return`Failed ajax request. Status code was ${v.status}. ${e}`})),l.tS((()=>"json"===a?v.responseText?l.Y3((()=>JSON.parse(v.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(v.responseText)}. Got ${e}`)):l.F2(null):"text"===a?l.F2(v.responseText):l.F2(v.response))),(0,o.bw)((0,r.ls)(s.IS,(t={content_length:"text"===v.responseType||""===v.responseType?(null===(e=v.responseText)||void 0===e?void 0:e.length)??0:v.responseType===n?v.response.byteLength:0,response_time_ms:self.performance.now()-I,status_code:v.status},function(e){return p.Wi(e)?w(t):m(e.value,t)}),S)),l.EQ(b,h))})),v.onerror=(0,e.GL)((()=>{S(l.t$("network error")),b(new f)})),v.ontimeout=(0,e.GL)((()=>{S(l.t$("timeout")),b(new d)})),v.open(u,i,!0),c&&v.setRequestHeader("content-type",c),v.timeout=_||v.timeout,v.withCredentials=g||v.withCredentials,v.responseType="binary"===a?n:v.responseType;const I=self.performance.now();v.send(y)}))}trackRequestMetrics(e){var t;if(null===(t=this.metrics)||void 0===t||!t.isEnabled())return;const n=new URL(e.request.url).pathname;if(n.includes("metrics"))return;const i=t=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:n,request_content_length:e.request.content_length,...t}});var o;!0===e.is_beacon?i({is_beacon:!0,is_error:e.is_error}):(0,r.zG)((o=e.response,g(o)?p.YP:(_(o),p.G(o.right))),s.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!_(e.response),...t})),i)}}class I{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=`${e}/${r}/audiences`;return this.getUrl("audience-matching",s,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const i=this.getUrlPrefix(e),o=(0,s.g_)((()=>""),(e=>`/${e}`))(r),a=`${this.getBaseUrl()}${i}${o}${t}`;return this.makeUrlWithQueryParams(a,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}var q=__webpack_require__(343),z=__webpack_require__(925);class G{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=E();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=U(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,r.zG)(z.gz(s.G5)(this.timeOriginForContext,this.timeOriginSdkInit),s.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,r.zG)(this.synchroniseTimeBetweenContexts(n),s.UI((e=>(e-this.sdkInitTimestamp)/1e3)),s.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class x{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const U=(e,t)=>({...e,value:e.value+t}),E=()=>(0,r.zG)(s.Y3((()=>performance.timeOrigin)),s.hX((e=>"number"==typeof e&&!Number.isNaN(e))));class P{sdkInitTimestamp;prefix="[Permutive]"+(self.document?"[Main]":"[Worker]");debugStyle=["color: blue"].join(";");constructor(e){this.sdkInitTimestamp=e}get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}debug(){return console.debug.bind(self.console,"%s%c%s",this.timeDeltaFromInit,this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}error(){return console.error.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}}class C{log(){}debug(){}warn(){}error(){}}class D{crypto=self.crypto||self.msCrypto;ALG_NAME="AES-GCM";isAvailable(){var e;return!(null===(e=this.crypto)||void 0===e||!e.subtle)}generateKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,e.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},t,["encrypt","decrypt"]))}encrypt(e,t){const[r,n]=this._encrypt(e,this.str2bytes(t));return r.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(n,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const r=new Uint8Array(t,0,12),n=new Uint32Array(t,12,1)[0],s=t.slice(16,16+n);return this._decrypt(e,r,s).then(this.bytes2str)}_encrypt(t,r){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,e.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},t,r)),n]}_decrypt(t,r,n){return(0,e.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:r},t,n))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}class O{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var j=__webpack_require__(940),T=__webpack_require__(444),A=__webpack_require__(54),M=__webpack_require__(491),R=__webpack_require__(350);var F=__webpack_require__(865),L=__webpack_require__(277);class Y{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,o.aT)(e)}debounce(t,r,n,s){let i,a,c,u=[];return l=>{s&&(c=s.concat(c??s.empty,l));const f=(0,o.b2)();u.push(f);var d;return null===(d=i)||void 0===d||d(),i=(0,e.HJ)((()=>{var e;null===(e=a)||void 0===e||e(),a=void 0;const r=t(c||l);u.forEach((e=>e.resolve(r))),c=null==s?void 0:s.empty,u=[]}),r),a||(a=(0,e.HJ)((()=>{var e;null===(e=i)||void 0===e||e(),a=void 0;const r=t(c||l);u.forEach((e=>e.resolve(r))),c=null==s?void 0:s.empty,u=[]}),n)),f.promise}}}class Q extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const N="permutive-events-cache",$="permutive-events-for-page",B="[EVENTSCACHE]",H=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class V{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=this.makeEventsRepository(N);eventsForPage=this.makeEventsRepository($);eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new Y(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,n,s,i,o,c){return(0,r.zG)(c(),a.UI((r=>new V(e,t,n,s,i,o,c,r))))}constructor(e,t,n,i,a,c,u,l){this.config=e,this.logger=t,this.reportError=n,this.trace=i,this.metrics=a,this.userId=c,this.makeEventsStore=u,this.eventStore=l,this.eventsTTLInMilliseconds=(0,r.zG)((0,s.ij)(this.config.eventsTTLInDays),(0,s.tS)((e=>"number"==typeof e&&e>0?(0,s.G)(24*e*3600):s.YP))),this.eventsCache.events=(0,o.HP)((()=>(0,o.PQ)((0,r.zG)(j.tD((()=>this.trace.startSpan("load_event_cache"))),j.tS((e=>(0,r.zG)(this.loadFromDisk(),j.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),c.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,j.pE)((e=>(0,a.Y3)((()=>e.flush()),F.w)));return(0,r.zG)([this.eventsForPage,this.eventsCache],t,(0,j.UI)((t=>{const r=i.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\\n${r.join("\\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(i.xH)}async add(e,t){let{persistOnDisk:n}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,r.zG)(this.eventsForPage.events,j.UI((t=>[...t,e])),o.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,s=[...e];for(;t>r;)s.splice(0,n),n*=2,t=2*JSON.stringify(s).length;return this.logDebug("Events after pruning",{count:s.length,sizeInBytes:t}),{events:s,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,r.zG)(this.eventsTTLInMilliseconds,s.EQ((()=>r.yR),(e=>i.hX((t=>e>Date.now()-t.time.getTime())))));return(0,r.zG)(j.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),j.YO("loadEventsCacheTask"),j.ak("eventsFromDisk",(()=>(0,r.zG)(i.nI([this.eventStore.get(N),this.eventStore.get($)]),i.UI(a.LV((0,o.lo)([[e=>e instanceof Q,(0,r.ls)(e,j.of)],t=>(0,r.zG)(j.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),j.tS((()=>()=>this.reset("historical"))),j.UI(e))]),(0,r.ls)(s.fS(e),j.of))),i.vP(j.qA)))),j.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),j.UI((0,r.ls)((0,o.vg)("eventsFromDisk"),i.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),i.UI(L.k),t)))}async reset(e){return(0,r.zG)(j.tD((()=>this.logDebug("Resetting Events Cache"))),j.tS((()=>this.eventStore.deleteStore())),a.tS((()=>this.makeEventsStore())),a.Zl((t=>(this.eventStore=t,"historical"===e?z.gz(a.Ij)(this.eventsCache.reset,this.eventsForPage.flush):z.gz(a.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),a.wE((()=>()=>this.all())),a.fS((()=>j.of(K()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(l.F2((0,r.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,r.zG)(j.tD((()=>this.logDebug(`Writing ${e.length} events to ${g.key}`))),j.tS((()=>this.eventStore.put(e.map(L.X),g.key))),a.UI(r.Q1)),s=(0,r.zG)(j.tD((()=>this.logDebug(`Deleting events for ${g.key}`))),j.tS((()=>this.eventStore.delete(g.key))),a.Vn(F.w)),i=(0,r.ls)(j.of,j.At((e=>()=>this.logError(`Events cache failed to put ${g.key}. Got ${e}`))),j.tS((0,o.lo)([[e=>H(e)&&g.retryAttempts<9,()=>(0,r.zG)(j.tD((()=>{g.retryAttempts+=1,this.logDebug(`Attempt #${g.retryAttempts} to write ${g.key} to EventsStore`)})),j.tS((()=>p)),j.tS((()=>u)))],[e=>H(e),e=>(0,r.zG)(j.tD((()=>this.logDebug(`Attempted ${g.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),j.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${g.key}. Got ${e}`,userId:this.userId.current}))),j.tS((()=>a.t$(e))))],a.t$]))),c=e=>a.tD((()=>{this.logDebug(`Successfully wrote events for ${g.key} after ${g.retryAttempts} attempts`),g.retryAttempts=0,g.sizeInBytes=2*JSON.stringify(e).length,g.sizeInBytesLastSuccessfulWrite=g.sizeInBytes})),u=(0,r.zG)((()=>g.events()),j.tS((e=>(0,r.zG)(n(e),j.mU(l.EQ(i,(()=>c(e)))))))),f=(e,t)=>(0,r.zG)(e.events,j.UI((r=>{const n=2*JSON.stringify(r).length,s=this.pruneEventsToSizeLimit(r,n,t);return e.events=j.of(s.events),e.sizeInBytes=s.sizeInBytes,t-e.sizeInBytes}))),d=(e,t)=>{let[n,...s]=e;return n&&0!==t?(0,r.zG)(f(n,t),j.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),d(s,e))))):j.of((0,r.Q1)())},p=(0,r.zG)(a.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),a.fX(l.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),a.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,r.zG)(d(n,t),a.fF)}))),g={key:e,events:j.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,r.zG)(j.tD((()=>this.trace.startSpan(`write_${g.key}`))),j.tS((e=>(0,r.zG)(u,j.At((()=>()=>e.finish()))))),t),reset:()=>(0,r.zG)(j.tD((()=>{g.events=j.of([]),g.sizeInBytes=0,g.sizeInBytesLastSuccessfulWrite=0})),j.tS((()=>s)),t)};return g}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(B,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(B,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(B,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(B,...t)}}const K=()=>[],J=`permutive.${self.document?"main":"worker"}.`;class W{config;shouldUsePerformanceMark=!1;constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=((null===(t=self.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(t){const r=this.generateSpan(`${t}_since_init`);return r.start({startTime:e.NC}),{spanId:r.spanId,finish:r.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=W.generateUniqueMarkerNames(e);return{spanId:r,start:e=>{var t;return null===(t=self.performance)||void 0===t?void 0:t.mark(r,e)},finish:e=>{var s,i,o;null===(s=self.performance)||void 0===s||s.mark(n,{startTime:(null==e?void 0:e.startTime)??performance.now()}),null===(i=self.performance)||void 0===i||null===(o=i.measure)||void 0===o||o.call(i,t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${J}${e}`,r=`${t}${W.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}class X{db;static version=3;static connect(t,n,s,i,o,c,u,l,f,d){return(0,r.zG)(a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,699))),String),e.N1,a.tS((e=>e.make(t,n,s,i,o,c,u,X.version,l,f,d))),a.UI((e=>new X(Promise.resolve(e)))))}constructor(e){this.db=e}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new Q(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,a.Y3)((()=>this.db.then((r=>r.put(e,t)))),(e=>{const t=(0,F.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(s.ij)),(e=>{const t=(0,F.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}const Z=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};class ee{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>s.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=i,this.webClient=o}async reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const o=(0,F.w)(e);if(this.logError("Reporting error:\\n",o),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const a=(0,r.zG)(this.webClient,T.UI(s.fS((()=>{var e,t,r,n;return{domain:(null===(e=self.location)||void 0===e?void 0:e.hostname)??"",referrer:"document"in self?null===(t=self.document)||void 0===t?void 0:t.referrer:"",url:(null===(r=self.location)||void 0===r?void 0:r.href)??"",user_agent:(null===(n=navigator)||void 0===n?void 0:n.userAgent)??""}}))),T.UI((e=>{var r,s;const i={error_message:(null==o||null===(r=o.message)||void 0===r?void 0:r.toString())??"",stack_trace:null==o||null===(s=o.stack)||void 0===s?void 0:s.split("\\n")},a=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.17.0",ql_runtime_version:"v13.1.0",timestamp:n,domain:e.domain,url:Z(e.url),referrer:Z(e.referrer),user_agent:e.user_agent,error_message:i.error_message??String(o),stack_trace:i.stack_trace,...a}}))),c=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),u=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,r.zG)([f,d],i.Ew((e=>o.name===e.errorName||o.message.indexOf(e.errorName)>=0||o.message.indexOf(e.defaultMessage)>=0)),s.g_((()=>{const e=a();return c(e).catch((0,r.ls)(F.w,(e=>this.logError(e))))}),(async e=>u(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}var te=__webpack_require__(238);const re=e=>{const t=ne(e.javaScriptInput),{env:r,...n}=(0,te.N)({hash:e.hash,runtimeInput:t});return n},ne=e=>{if(e&&"object"==typeof e)return e;throw new Error("Invalid runtime input specified.")},se=("undefined"!=typeof globalThis?globalThis:void 0)?.crypto||("undefined"!=typeof global?global:void 0)?.crypto||("undefined"!=typeof window?window:void 0)?.crypto||("undefined"!=typeof self?self:void 0)?.crypto||("undefined"!=typeof frames?frames:void 0)?.[0]?.crypto;let ie;ie=se?e=>{const t=[];for(let r=0;r<e;r+=4)t.push(se.getRandomValues(new Uint32Array(1))[0]);return new ae(t,e)}:e=>{const t=[],r=e=>{let t=e,r=987654321;const n=4294967295;return()=>{r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;let e=(r<<16)+t&n;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let n,s=0;s<e;s+=4){const e=r(4294967296*(n||Math.random()));n=987654071*e(),t.push(4294967296*e()|0)}return new ae(t,e)};class oe{static create(...e){return new this(...e)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class ae extends oe{constructor(e=[],t=4*e.length){super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){const e=r.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=r[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=ie;toString(e=ce){return e.stringify(this)}concat(e){const t=this.words,r=e.words,n=this.sigBytes,s=e.sigBytes;if(this.clamp(),n%4)for(let e=0;e<s;e+=1){const s=r[e>>>2]>>>24-e%4*8&255;t[n+e>>>2]|=s<<24-(n+e)%4*8}else for(let e=0;e<s;e+=4)t[n+e>>>2]=r[e>>>2];return this.sigBytes+=s,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const ce={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new ae(r,t/2)}},ue={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new ae(r,t)}},le={stringify(e){try{return decodeURIComponent(escape(ue.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>ue.parse(unescape(encodeURIComponent(e)))};class fe extends oe{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ae,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=le.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:r,blockSize:n}=this,s=r.words,i=r.sigBytes;let o=i/(4*n);o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0);const a=o*n,c=Math.min(4*a,i);if(a){for(let e=0;e<a;e+=n)this._doProcessBlock(s,e);t=s.splice(0,a),r.sigBytes-=c}return new ae(t,c)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class de extends fe{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new oe,e),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new pe(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e);return this._doFinalize()}}class pe extends oe{constructor(e,t){super();const r=new e;this._hasher=r;let n=t;"string"==typeof n&&(n=le.parse(n));const s=r.blockSize,i=4*s;n.sigBytes>i&&(n=r.finalize(t)),n.clamp();const o=n.clone();this._oKey=o;const a=n.clone();this._iKey=a;const c=o.words,u=a.words;for(let e=0;e<s;e+=1)c[e]^=1549556828,u[e]^=909522486;o.sigBytes=i,a.sigBytes=i,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}}const ge=[];class _e extends de{_doReset(){this._hash=new ae([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const r=this._hash.words;let n=r[0],s=r[1],i=r[2],o=r[3],a=r[4];for(let r=0;r<80;r+=1){if(r<16)ge[r]=0|e[t+r];else{const e=ge[r-3]^ge[r-8]^ge[r-14]^ge[r-16];ge[r]=e<<1|e>>>31}let c=(n<<5|n>>>27)+a+ge[r];c+=r<20?1518500249+(s&i|~s&o):r<40?1859775393+(s^i^o):r<60?(s&i|s&o|i&o)-1894007588:(s^i^o)-899497514,a=o,o=i,i=s<<30|s>>>2,s=n,n=c}r[0]=r[0]+n|0,r[1]=r[1]+s|0,r[2]=r[2]+i|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const he=de._createHelper(_e),we=(de._createHmacHelper(_e),{stringify(e){const{words:t,sigBytes:r}=e,n=this._map;e.clamp();const s=[];for(let e=0;e<r;e+=3){const i=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)s.push(n.charAt(i>>>6*(3-t)&63))}const i=n.charAt(64);if(i)for(;s.length%4;)s.push(i);return s.join("")},parse(e){let t=e.length;const r=this._map;let n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let e=0;e<r.length;e+=1)n[r.charCodeAt(e)]=e}const s=r.charAt(64);if(s){const r=e.indexOf(s);-1!==r&&(t=r)}return((e,t,r)=>{const n=[];let s=0;for(let i=0;i<t;i+=1)if(i%4){const t=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;n[s>>>2]|=t<<24-s%4*8,s+=1}return ae.create(n,s)})(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="});const me=function(e){let t=s.YP;const r=s.fS((()=>{const r=e();return t=s.G(r),r}));return()=>r(t)}((()=>({metadata:{39204:"0c8b70cdb7",41376:"4bd77cc3a7",41414:"d2f664deef",56344:"917d5f981b",56634:"608d95acf4",56691:"44cde31524",58133:"612652e2be",62161:"1b0d23fd0f",62212:"870878c03e",64766:"ef2efae223",64767:"e150a98c1e",64768:"b1a9a44a5b",64911:"810e7ffc28",65451:"91a96e3c14",65452:"3bf350e506",65454:"b40d19b295",66683:"b6651a8c42",66684:"e996b67aed",70302:"b5306aafc5",73008:"dced81e1b6",73331:"a0b1e4511f",73342:"b976303717",74314:"5399a8daa1",74820:"f6aa6937b1",74822:"aa73153f68",75548:"d7dba2dabf",77811:"f5e8dc27ad",79654:"c14696be07",79655:"b383c91676",80707:"f811a1d094",81843:"14fd905353",82015:"6cc94b651a",82106:"8dca228fa0",82234:"58243d05a2",84002:"55c74290e7",84072:"176f4d22bd",84222:"2bb1193ce0",85209:"d7a36ef2e6",85210:"64fb259806",87159:"b47634ce12",87319:"9c1aadd5a2",88024:"ee8520da5b",88026:"ebb273bda2",88489:"5f02f603ab",88504:"7ffc9f0336",88505:"bafbd2a52b",88624:"e7b8b1b22e",88766:"9924f53742",89492:"1d7afecc14",89493:"47ab3e71ab",89494:"dec2b24bd8",89495:"b277e0e4be",89496:"a2afadd8b5",89497:"f2f5b7a9ee",89747:"ad1877712f",89780:"3fbe77a018",89781:"00cbefc3f4",89782:"62b5c3a54c",89783:"ca819548b2",89784:"b7b2df1aab",89786:"8ddf82084c",90007:"73425b73a2",90032:"2fcf32a703",90033:"eb060da10b",90034:"e8caedcdd8",90449:"ab84fb4ca6",90876:"2720a16372",91149:"2cc579a35f",91291:"8317f2ea4b",91448:"63202b8b24",91449:"dfab9676c6",91628:"e015fa01f9",91654:"f652bf0988",91819:"07bd1d5586",91821:"6d49fa0947",92886:"621489374c",92946:"55bc4f648b",92947:"f45f0546bb",92956:"7c5797abac",92957:"6beeb11182",92973:"3ec8ad2b40",93845:"51ea81c1ed",93846:"2408111945",93847:"bc206503f5",94397:"6ccb50da4f",94752:"f5d7aee65e",94903:"b6dc6b56a2",94908:"022c534e9d",94909:"14b515f499",95077:"6022bedc62",95078:"c3352031cf",95079:"d22dbd9dfc",95080:"3963c4f90f",95081:"504c6efc80",95201:"b72366f7a0",96020:"6b2c325eaf",97261:"0bab3a61a3",97262:"bd67c3c6dd",98239:"5ffc72a768",98469:"ea9d67612f",98706:"e3ec77bb51",99059:"6b10e4219a",99365:"bf568cff64",99366:"88cb355e19",99387:"a7b85baf39",100580:"37966acb43",100608:"2f3ea1c6fe",100609:"63d30a6baa",100803:"7930ecd078",100882:"836a18e528",100886:"204dbba2d2",100887:"7bf2f7c8f2",101196:"defcef9093",101197:"5e37f37fd3",102092:"30d8fea2e1",103853:"bc8db87583",103854:"1338fa5251",104004:"30907d6f33",105312:"5585cda390",105314:"fd862ca0f2",105315:"a7c48413d3",105316:"68c7ba78cf",105318:"7ed6c01d50",105320:"1ae90e5bdd",105321:"3a793e11a7",105526:"09af6fb4a0",105532:"78e08c84e0",105717:"6314b9bf3e",105718:"4677d0eb1b",105719:"85b1a80152",105851:"e58e154f7c",106050:"b556f00eb6",106248:"f9f5b8c466",106249:"a618d45e2a",106370:"260a6674c9",106371:"469eb918af",106567:"83e1e09003",106906:"868ef83416",106920:"4e7dfb2e61",106921:"8d3a595052",107324:"050974bd6e",107326:"cd899aa4b1",109402:"76a9090faa",109408:"b526a9df8b",109523:"1b7301a9ad",109524:"815034a20f",109585:"19e9efb9a1",109586:"3c68c4e48a",109669:"29298bd51b",109700:"e48a1c706e",110071:"1a4b743dc1",113969:"49f218ce85",113994:"0439f28c8a",114028:"bccc3df53d",114096:"655d96843b",114097:"76f91cf60f",114098:"f5cdb4aa98",114192:"796726b92f",114701:"6519efae75",114702:"47703aa2ae",114973:"3f8013b701",115754:"8a1871a342",115801:"f980cc9b22",116152:"c72ffc765b",116153:"46773104ad",116495:"1760edddc9",116930:"c2ce12ea90",116942:"7b1ab08c36",117139:"685467e8f5",117409:"72a890e220",117410:"b1416ee46d",117411:"79b38fa35e",120508:"56bbe7201a",120510:"f7c401379d",120744:"7366a7ce0c",120787:"65efbf4f32",120920:"8b1d964126",121269:"ce4c9e7caf",122439:"45535ad59b",122535:"042a95ad49",122601:"1adb06e001",122871:"bfbf871dee",122872:"a04a28cce3",122873:"b68c398637",122874:"713e64b1b4",123650:"cb9759d224",124030:"3a26880714",124278:"7322d89ac8",124335:"8f832a57a5",124336:"b73045bb63",124337:"2929fe6dd5",124338:"a72a0b9ed3",124339:"04ffa8f472",124354:"9e87361148",124359:"efed972e15",124361:"5d454d2d0e",124365:"0b6b23ff50",124457:"8c75cc6e82",124656:"c21ec407fe",125103:"b33787b90a",125148:"326f4fe3aa",125544:"3e48ba3f3e",127898:"97077fc000",128247:"9feb832422",131504:"431061e712",131874:"f35dd04a37",132233:"93ad798aba",132236:"2e21e0df97",132239:"e0da94f266",132240:"f9c1f587cc",132243:"5389638bae",132345:"182a0a1d7a",132347:"2ab2c51e9a",132352:"4c7670b035",133758:"eff39c9091",133789:"9907cbc853",133840:"3e4c334057",134038:"bbda45aaaa",134129:"364bb88d86",134178:"58d93c870a",134502:"1f45ab3249",134592:"0324989dc7",134610:"dcf747f86e",135510:"8bcf40926d",135961:"220d6a15a6",135985:"65cd104289",136107:"7b1f4e112e",136420:"403ce3e152",137285:"525d57a393",137537:"073cd0438a",139769:"9a4953c686",139856:"c8630cba93",139861:"b20226e0d1",139919:"d86ff134de",139922:"4fa7fb24dd",139926:"7ae7993409",139930:"56ab7fed2c",139943:"0c44f4a259",139946:"b39a4e4bbe",139950:"1a66689bfe",139957:"2f506fce5b",140685:"431a01ca9d",141010:"72e3c05a95",141174:"df9241da5d",141365:"c5ae982d07",141817:"d7988683e4",142852:"a34eab84dd",143329:"9f98d175a2",143330:"f6e885e9bf",144127:"dc16c1baa1",144128:"3320013a0e",144129:"5221cf3203",144132:"bac1ffa3a9",144133:"491c4dbff9",144148:"582007da7d",144149:"f6802aba30",144151:"bf6759e8df",144152:"2381a88fcb",144153:"50c4c8538e",144154:"db7b8a060b",144155:"9406d15402",145008:"f720751df5",146705:"0029f4c0c5",146734:"b206d7800f",146736:"292057a4a6",147496:"a281336a96",147582:"d4044a06bc",147805:"d6ac538ad3",148633:"ef70184bf2",149125:"22737ee52b",149396:"6b7114aabf",149409:"df096bd97d",149449:"6891432458",149477:"07f3850888",150667:"e71ced6f36",153381:"a080d58deb",154181:"be139ee48b",154321:"19e80596d4",154552:"8d5d05f1c3",154903:"8d839734d9",156082:"f224289728",157232:"78d9caa6c7",157446:"54bb4acf9c",157502:"c6e0e10354",158127:"e6d70c9c2d",158629:"24ec19f3c1",158810:"27ebc28943",162087:"5f84d87b99",162553:"39b0c1032c",162554:"adec5538ca",164010:"e8846f4ac0",164201:"e681b02e5d",165229:"2970f987aa",165789:"7ffe69af08",166027:"724ae03056",166039:"c02fc4ae4a",166283:"33d64e18e7",166526:"32791dfc30",167455:"37cac2e1d3",167456:"2027db35d8",167457:"ff23f6a472",167458:"569b0c5262",167459:"8f4a795789",167460:"5c2467d5d0",167461:"ac9f9ef83d",167462:"dd055fade8",167463:"8042549f07",167464:"4679f5ccd1",167466:"2f0c86351e",167467:"1f33963ccc",167468:"f0cda18071",167471:"66fae3bad1",167472:"c2f5642b64",167473:"fceae0e2bf",167474:"73b03dbb17",167475:"42ee0c65a1",167476:"84b4769a46",167477:"901f0150e7",167607:"8212a5f456",168072:"108b4b08d9",168149:"6952cba742",168154:"ae486ba250",168172:"ec50dec834",169423:"dcc2429f5c",171207:"1b39caaf9b",172214:"15b838e3c1",172215:"63a3261c38",172216:"199c3457b1",172217:"0557b81c47",172218:"f7dc299a4c",172219:"653b85f7da",172220:"1ff50eaf28",172221:"e1527b3f4e",172225:"62a1197b29",172275:"f2c98f27b8",172883:"a33b7439c6",172884:"707b06b800",172948:"4fdc2db5ff",173106:"2a77625669",173167:"adcd1cabe1",173168:"6143239e1f",173626:"a1ccb16b53",173664:"d266308f55",173762:"10be3521bf",173876:"51ebe5bc18",173877:"92b06116db",173878:"2d2acb9e64",173879:"a22c340191",173880:"8c23f51c28",173881:"179243fb79",173882:"7327e513ca",173883:"f2eb3fdbd7",173884:"4b9b66ea7f",173888:"c9a154f19d",173889:"da6c0b3df3",173890:"3356df03c6",173891:"fb58ac2d0d",173895:"ec91bf1151",173896:"7b2619c887",173897:"a18a6bc286",173898:"e5c208af9e",173900:"f4f845569c",173901:"0a98d2e8a8",173902:"bf9d58c2cc",173903:"c7f6e80376",173906:"2a0244ccbf",173907:"0128fb97cc",173908:"056c7d10d4",173909:"47dc5fdc40",173910:"bbe7011c14",173911:"358b6c86d7",173912:"e482409342",173913:"1f0633a193",173914:"3206e81322",173915:"e579d4d251",173916:"f1d15fb3dc",173917:"f364b298b7",173918:"9e000f34b6",173919:"aece6ff07b",173920:"250555097f",173921:"ff7ed1de43",173922:"4985ad62f6",173923:"363943e7b3",173924:"303e5193f2",173925:"65df911c42",173926:"6b3dea9a6f",173927:"606f405c2b",173928:"f95960223c",173929:"94f711fd47",173930:"998367ac05",173931:"ba10ef9dac",173932:"68c4d6e862",173936:"8e9b2b6a12",174344:"76e9d5125c",174345:"4840114fc5",174346:"22fe75e789",175012:"99708211ba",175038:"f99966c4db",175049:"09c917d2ea",175197:"60ad2078c5",175448:"a70bdaf56a",175451:"07af591b0e",175454:"3d16f4fd7c",175456:"e5e751f24d",175458:"06ee2c7e96",175459:"4b6dbf3ad9",175461:"d10a514c45",175553:"7071a78829",175555:"3b4b996e7c",175557:"b189051be3",175616:"7be1292ac0",175771:"8ae1f9377e",175798:"d1353d7a79",175800:"09d9c8c86d",175801:"8862b5a287",175803:"d51a9e0f82",175804:"5608eb1c5d",175806:"7f92f890a4",175808:"6a1efd2eac",175810:"6b187e41ad",175812:"bce8c91c38",175814:"b09859d513",175816:"7bfd52fb13",175818:"589955f34d",175820:"dec36f7661",175822:"ced4c9e1eb",175824:"70d0738e4c",175826:"7c7daba99e",175828:"23d4f6cab4",175830:"017644d01d",175832:"1edbb85d18",175835:"b0f92a30be",175837:"eeded9bca7",175840:"16583b5baf",175842:"9cbb245278",175844:"883786eb8e",175995:"96db046f4d",176180:"55997bba70",176425:"9571a084e2",176427:"3cb9a3ef33",176558:"24c87846d3",176883:"c8c66cf5c7",176884:"1fb982c9d7",176887:"74b56053bb",176888:"a4e0de2e69",176889:"4c388b54eb",176890:"21986b2243",176891:"7888b5dbf6",176892:"c00234f2fb",176893:"113a76ea49",176894:"1f642ab1ae",176895:"b9fd4673a9",176896:"34343519e4",176897:"a49be9584b",176898:"75f9fd2dc9",176899:"d3446842c6",176900:"fc1dd32d70",176901:"fc77c655cd",176902:"abb26f8a30",176903:"8d165c25fc",176904:"ded3d6893b",176905:"db849031eb",176906:"6f8a2172b7",176907:"1e449e5185",176908:"df52b8ed30",176910:"81c0325678",176911:"c58b8e55cb",176912:"6ad0687550",176913:"eeb8de91d5",176914:"32e99573f1",176915:"333ccfed28",176916:"be3c281611",176917:"b4d920d994",176918:"2020da1a3b",176919:"66a878e3d9",176920:"419c850c8e",176921:"fb063d7e2f",176922:"c67803f7ae",176923:"338c1f5896",176924:"1259fb7f7c",176953:"7f2022501a",176955:"833e4ede63",176957:"a58aac4797",176967:"8676872361",176968:"294a036ca5",177016:"d4c9c77d1e",177226:"e8e7ddb6f4",177419:"59123ac7bc",177588:"6c6e62c067",177658:"fb5d5efc11",178814:"0f63b34664",179682:"ba6fec6314",179771:"e53b33568f",180084:"fe05be34ec",180085:"980548c068",180784:"527191f0c0",180785:"3d5f44907c",180951:"fa98e2bbcb",180952:"ad86061065",180953:"efc9abb28e",180956:"11092331e1",180957:"47c87f1108",180959:"38ae09af88",181008:"9b07e47b33",181367:"a572f09b00",183024:"892139340c",183350:"5ff3e43d7a",183448:"58e3093645",184006:"389ab93df5",184577:"7422eb8805",184706:"fa1afe4aa1",184708:"bbb17221f4",184958:"371a55f081",185040:"51efa42815",185107:"96a2ac8553",185201:"ecb9da0775",185357:"fd264639a4",185405:"1c0c08c331",185420:"647409507a",185434:"1b6ceed4ee",185652:"731ebe7794",186155:"065797a26d",186185:"813190f4f8",186327:"9cd4cf2596",186328:"9cd4cf2596",186897:"1d99c00bb6",186911:"9a2cae5dc4",187063:"9be48a81e8",187218:"2080ed6722",187251:"21f2378300",187358:"506109d890",188096:"8acea7dc2d",188160:"a4dcf457fd",188161:"f4eb9bdfc6",188217:"8120232561",188255:"500defc835",188392:"50e242fe2a",188393:"f81258f163",188919:"72996875a1",188920:"119d56badb",188921:"99cece4d3a",188922:"89ae3e2ee4",189307:"b03a0bf64c",189330:"55b5711ac4",189338:"24c7585ca2",189339:"4a5dfdd7fe",189340:"a8739db261",189341:"45331bd742",189342:"3ae7a8ceba",189948:"933571ad34",189949:"284dd4a862",189976:"7270db792d",191557:"5e7f99c428",192091:"bc09eec15c",192184:"6f1be58436",192341:"14d7740e42",193201:"16577f5f07",194111:"3753c4fd8e",194112:"da844a967c",194113:"d27233bfcc",194541:"f407355e20",194542:"203efdf419",194543:"5fadf10810",194857:"7348b28863",195124:"dc987d01e7",195230:"c8ad5892d4",196328:"87888c701c",196454:"a346b7e4fa",196455:"d96340f20a",196815:"87c832b91f",196843:"5ad9d0f25b",196939:"6a80406721",197769:"c109ddc2a2",203327:"2ef9edecc3",204945:"189ebc2973",205e3:"19837b16a2",206653:"5fb2867f18",206662:"3a2d2c6378",207465:"b3fec59d81",1e7:"14dcdbd1b8",10000001:"85e2135ebf",10000002:"6f0530b847",10000003:"9aebeaabdc",10000004:"ec30be261c",10000005:"42e269ebcb",10000006:"fe46ec1a7c",10000007:"c7c5b41643",10000008:"e017e3296e",10000010:"c8a4da1342",10000011:"d0033013c8",10000012:"c920a1872b",10000013:"5cb1560e95",10000014:"945d12984c",10000015:"3f0af1c616",10000016:"e9cff35b9e",10000017:"809a140d15",10000018:"a3f294e223",10000019:"26c5369243",10000020:"2895ae0549",10000021:"7e463b1f7b",10000022:"3ac8066b24",10000023:"05688314fe",10000024:"2b9b203f0f",10000025:"d8c2189403",10000026:"abaa9c1f9a",10000035:"a41083a929",10000036:"8e74dd4bab",10000037:"cafae725da",10000038:"a121dfa9da",10000039:"ff48cf981d",10000040:"254b287491",10000041:"95cf182700",10000042:"7c449193e6",10000043:"7cf4199d2c",10000044:"7d70b943e5",10000045:"d6ebb8fae4",10000046:"6ec2e4a903",10000047:"6b9d9c6b43",10000048:"c697613553",10000049:"154b668a0c",10000050:"06c11d3a67",10000051:"79b306f4fb",10000052:"4ddf4d4f00",10000053:"d4f3f248fb",10000054:"5f1da0f4d3",10000055:"a258c98d13",10000056:"46ae6a0b78",10000057:"484950e70c",10000058:"b0f2c06862",10000059:"81c7d9a013",10000060:"b2774f9b84",10000061:"8d357982ec",10000062:"f17475be77",10000063:"2e17bf9dba",10000064:"5ab5b328ac",10000065:"746301201f",10000066:"74a3fa3235",10000067:"445aec4c58",10000068:"166c8e0df7",10000069:"3c1d1ce2d1",10000070:"41b1a04aca",10000071:"8f48e4fe18",10000072:"ce3f903a4a",10000073:"facdeec66b",10000074:"5bdce48fc9",10000075:"4263c32baa",10000076:"da12137035",10000077:"befae0dd8d",10000078:"3789f175c4",10000079:"8f0ede6d58",10000080:"2c8374dc79",10000081:"939ab96a5d",10000082:"65edb8587b",10000083:"5d51ce9468",10000084:"31758176d8",10000085:"3f06c3645c",10000086:"570293b21e",10000087:"c8ca3f3a91",10000088:"3f8c611719",10000089:"ec5bacbf42",10000090:"b1a46cb9ba",10000324:"7b7e80f204",10000325:"dbc6c5bd69",10000327:"ac86d06eda",10000328:"29283373d0",10000329:"e1abc69b32",10000330:"c319f17ac6",10000687:"559415b345",10000688:"59bcb90348",10000689:"3d5058c75a",10000690:"02beff69b3",10000691:"ef2d717c50",10000692:"ed824f7075",10000693:"855e7d694d",10000694:"3d35d48a1e",10000695:"76f5459105",10000696:"836eb3c3a8",10000697:"f6898d79aa",10000698:"034cb96ed7",10000699:"2ab0be4b8e",10000700:"f9ff676abf",10000701:"b1198dc297",10000702:"9aa495d2d0",10000703:"94466aef62",10000704:"bbe993efa8",10000705:"08e87b19e5",10000706:"30af89e371",10000707:"c615bda81b",10000708:"3439a7f2c6",10000709:"fe2a0450ee",10000710:"d3b1c6970b",10000711:"e8e7936872",10000712:"62ade9a5d9",10000713:"cd2d7202ce",10000714:"f5f5c0c726",10000715:"c8940defa7",10000716:"d4c3511f1c",10000717:"c0b33b2707",10000718:"b7898a96a4",10000719:"0afe21c711",10000720:"15bc4cd75c",10000721:"236acfc33e",10000722:"4252e4f621",10000723:"5532721500",10000724:"cf7ee7c557",10000725:"8e10bb4c62",10000726:"8f9461820c",10000727:"ab5e6c0d6e",10000728:"b0f2c06862",10000729:"a6aa48da2f",10000730:"81fed62109",10000731:"60450684ad",10000732:"91ada79e5f",10000733:"d7bc2d75d2",10000734:"96023b30a9",10000735:"d1f5fdd3ee",10000736:"d1f5fdd3ee",10000737:"4626475287",10000738:"9140be25d5",10000739:"6d7e163aeb",10000740:"9c25789148",10000741:"b9c34da79c",10000742:"4051b7098a",10000743:"b1b7157e01",10000744:"a09ed2c549",10000745:"a058ff2a49",10000746:"a0c8d3019b",10000747:"ac3fdffff0",10000748:"3dd97e8055",10000749:"b754ebaa69",10000750:"51d3b9564c",10000751:"96023b30a9",10000752:"96a9c2bea3",10000753:"0a09c2d0cf",10000754:"38685c8612",10000755:"f8e27f95ef",10000756:"c3e7efdce7",10000757:"b5a29565a3",10000758:"45d836f255",10000759:"1a2a833310",10000760:"c1b09c8fc2",10000761:"5c53c1c7b6",10000762:"76f62be96f",10000763:"34f8564abc",10000764:"d1cf01d5ca",10000765:"dd3bd8d139",10000766:"153a809ae6",10000767:"937f54123d",10000768:"428ccdd665",10000769:"6cd7b24a28",10000770:"f29ba8726d",10000771:"919f452aa2",10000772:"fe2b83f925",10000773:"e1451f31f3",10000774:"7cc13def5b",10000775:"838dd6be01",10000776:"5f08966e98",10000777:"77eae04846",10000778:"84a83ac33b",10000779:"4c0a1b312e",10000780:"36cb533b06",10000781:"eda27d241c",10000782:"bf47ef634c",10000783:"0e5b38bf4e",10000784:"575b94fc50",10000785:"b2bf9497c0",10000786:"3b9d152ebb",10000787:"2573f87eeb",10000788:"6a97ae4ea8",10000789:"50a9a213be",10000790:"b184d9ab96",10000791:"e7684adb8a",10000792:"ebf99bd12f",10000793:"3f7d61c4a9",10000794:"0f02072bd7",10000795:"11e00f9535",10000796:"dcfaea9c78",10000797:"63427e14ff",10000798:"0045fe2ae5",10000799:"e2d6b5bc78",10000800:"96257b0908",10000801:"4b1efa07d3",10000802:"f7c7d3a0ac",10000803:"bb1889cd06"},runtime:re({hash:function(e){return he(e).toString(we).slice(0,8)},javaScriptInput:{ahoCorasickLookup:e=>[],eventSegments:e=>({"!UpdateLookalikeModels":["109585","109586","114096","114973","89780","89781","89782","89783","89784","89786","90032","90033","90034","91149"],"!UpdateSecondPartyData":["141365","95201"],"!UpdateThirdPartyData":["93845","93846","93847"],DeclaredData:["116152","116153","180953","89492","89493","89494","89495","89496","89497"],FormSubmission:["176904"],Grapeshot:["100580","100882","100886","100887","104004","106050","116930","120744","124278","124339","125148","132347","132352","136107","140685","162553","162554","173898","187251","75548","88489","91654"],LinkClick:["106050","115801","120744","124278","125544","132347","140685","147582","153381","162554","167455","167456","167459","167461","167462","167463","167466","167467","167468","167471","167472","167474","167475","167476","167477","172214","172215","172216","172218","172219","172221","172948","173876","173877","173878","173879","173880","173881","173882","173883","173884","173888","173889","173890","173891","173896","173897","173898","173900","173903","173906","173907","173908","173909","173910","173911","173912","173913","173914","173915","173918","173919","173924","173925","173926","173928","173932","174344","174345","174346","175448","175454","175800","175810","175812","175814","175818","175820","175822","175830","175832","175835","175837","175842","175844","176892","176895","176896","176897","176898","176899","176904","176911","176913","176915","176924","176968","185107","189338","189339","189340","189341","75548","98239"],Pageview:["10000000","10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025","10000026","10000035","10000036","10000037","10000038","10000039","10000040","10000041","10000042","10000043","10000044","10000045","10000046","10000047","10000048","10000049","10000050","10000051","10000052","10000053","10000054","10000055","10000056","10000057","10000058","10000059","10000060","10000061","10000062","10000063","10000064","10000065","10000066","10000067","10000068","10000069","10000070","10000071","10000072","10000073","10000074","10000075","10000076","10000077","10000078","10000079","10000080","10000081","10000082","10000083","10000084","10000085","10000086","10000087","10000088","10000089","10000090","10000324","10000325","10000327","10000328","10000329","10000330","10000687","10000688","10000689","10000690","10000691","10000692","10000693","10000694","10000695","10000696","10000697","10000698","10000699","10000700","10000701","10000702","10000703","10000704","10000705","10000706","10000707","10000708","10000709","10000710","10000711","10000712","10000713","10000714","10000715","10000716","10000717","10000718","10000719","10000720","10000721","10000722","10000723","10000724","10000725","10000726","10000727","10000728","10000729","10000730","10000731","10000732","10000733","10000734","10000735","10000736","10000737","10000738","10000739","10000740","10000741","10000742","10000743","10000744","10000745","10000746","10000747","10000748","10000749","10000750","10000751","10000752","10000753","10000754","10000755","10000756","10000757","10000758","10000759","10000760","10000761","10000762","10000763","10000764","10000765","10000766","10000767","10000768","10000769","10000770","10000771","10000772","10000773","10000774","10000775","10000776","10000777","10000778","10000779","10000780","10000781","10000782","10000783","10000784","10000785","10000786","10000787","10000788","10000789","10000790","10000791","10000792","10000793","10000794","10000795","10000796","10000797","10000798","10000799","10000800","10000801","10000802","10000803","100580","100608","100609","100882","100886","100887","101196","101197","102092","103853","103854","104004","105312","105314","105315","105316","105318","105320","105321","105526","105532","105717","105718","105719","106567","106906","106920","106921","109402","109408","109669","109700","110071","113969","113994","114097","114098","114702","115754","115801","116495","116930","116942","117139","120508","120744","120787","121269","122871","122872","122873","122874","124030","124278","124335","124336","124337","124338","124339","124354","124359","124361","124365","125103","125544","127898","131504","132233","132236","132239","132240","132243","132345","132352","133840","134038","134129","134178","134502","135510","135985","136420","137285","139919","139922","139926","139930","139943","139946","139950","139957","140685","141010","141174","141817","142852","143329","143330","144127","144128","144129","144132","144133","144148","144149","144151","144152","144153","144154","145008","146705","146734","146736","147496","147582","147805","148633","149396","149409","149449","149477","150667","153381","154181","154321","154552","156082","158127","158629","158810","162087","162553","162554","166039","166283","166526","167455","167456","167457","167458","167459","167460","167461","167462","167463","167464","167466","167467","167468","167471","167472","167473","167474","167475","167476","167477","168072","168149","168154","169423","172214","172215","172216","172217","172218","172219","172220","172221","172225","172884","172948","173106","173626","173876","173877","173878","173879","173880","173881","173882","173883","173884","173888","173889","173890","173891","173895","173896","173897","173898","173900","173901","173902","173903","173906","173907","173908","173909","173910","173911","173912","173913","173914","173915","173916","173917","173918","173919","173920","173921","173922","173923","173924","173925","173926","173927","173928","173929","173930","173931","173932","173936","174344","174345","174346","175038","175049","175197","175448","175451","175454","175456","175458","175459","175461","175553","175555","175557","175616","175798","175800","175801","175803","175804","175806","175808","175810","175812","175814","175816","175818","175820","175822","175824","175826","175828","175830","175832","175835","175837","175840","175842","175844","175995","176180","176425","176427","176558","176883","176884","176887","176888","176889","176890","176891","176892","176893","176894","176895","176896","176897","176898","176899","176900","176901","176902","176903","176904","176905","176906","176907","176908","176910","176911","176912","176913","176914","176915","176916","176917","176918","176919","176920","176921","176922","176923","176924","176953","176955","176957","176967","176968","177226","177588","177658","178814","179682","179771","180084","180085","180784","180785","180951","180952","180953","183350","184006","184708","184958","185107","185357","185405","185420","185434","186155","187218","187358","188096","188160","188161","189330","189338","189339","189340","189341","189342","189948","189949","189976","191557","192091","192341","194541","194542","194543","194857","195230","196454","196455","196815","196843","196939","204945","206653","39204","41376","56634","56691","62212","64766","64767","64768","65451","65452","65454","73008","74314","74820","74822","79654","79655","82106","84072","85209","85210","87159","88024","88026","88489","91448","91449","91628","91819","91821","92886","92973","94397","94908","94909","95077","95078","95079","95080","95081","97261","97262","98239","99365","99366"],PageviewComplete:["100882","132347","136107","147496","149125","167458","176893","176916","180951","180952","180953","73342","88489","92886"],PageviewEngagement:["100882","100887","147496","149125","176893","73342","88489"],SegmentEntry:["132347","136107","167458","176916","180951","180952","180953","92886"],SegmentExit:[],SlotClicked:["100803","105851","106248","106371","109523","109524","114701","117409","117411","120510","120920","122439","122535","123650","124457","124656","128247","131874","132347","133758","133789","134592","134610","135961","137537","139769","139856","139861","144155","154903","157232","157446","157502","164010","164201","165229","165789","166027","167607","168172","172275","172883","173167","173168","173664","173762","175012","175771","176905","177016","177419","180956","180957","180959","181008","181367","183024","183448","184577","184706","185040","185201","185652","186185","186327","186328","186897","186911","187063","188217","188255","188392","188393","188919","189307","193201","195124","203327","205000","41414","58133","73331","84222","87159","88504","88505","88624","90449","92946","92957","94903","99059"],SlotViewable:["100803","106249","106370","107324","107326","114028","114192","114701","117410","117411","120510","122439","122601","123650","124457","124656","133758","133789","134592","137537","139769","157232","157446","157502","164201","167607","171207","172275","172883","173664","177016","180956","180957","180959","184577","184706","186897","188919","188920","188921","188922","193201","194111","194112","194113","195124","196328","196454","196455","197769","203327","206662","207465","56344","62161","64911","66683","66684","70302","77811","80707","81843","82015","82234","84002","87319","88766","89747","90007","90876","91291","92947","92956","94752","96020","98469","98706","99387"],SocialShare:["106050","109402","109408"],VideoAdClick:["192184"]}),eventsLookup:e=>["Pageview","LinkClick","SlotClicked","SlotViewable","PageviewComplete","Grapeshot","SegmentEntry","DeclaredData","PageviewEngagement","SocialShare"],interpretOnlyQueries:e=>({}),literalsLookup:e=>e.frontDecode("\\t\\t/art and entertainment/books and literature\\t43\\t/poetry\\t23\\tcomics and animation\\t23\\tdance\\t28\\t/ballet\\t23\\tmovies and tv\\t36\\t/animated\\t37\\tchildren\'s\\t38\\tomedies\\t37\\tdocumentaries\\t37\\treality\\t38\\tomantic comedies\\t37\\ttelevision\\t24\\tusic\\t28\\t/music genres/classical music\\t42\\topera\\t42\\tpop music\\t42\\tsoundtracks\\t23\\tshows and events/classical concert\\t23\\ttheatre\\t2\\tutomotive\\t11\\t and vehicles/cars/hybrid\\t30\\tluxury\\t30\\tsedan\\t25\\telectric vehicles\\t25\\tmotorcycles\\t11\\t/auto type/green vehicles\\t22\\tluxury cars\\t1\\tbooks and literature\\t2\\tusiness and finance/business/business banking & finance\\t31\\tgreen solutions\\t22\\tindustries/civil engineering industry\\t33\\tlogistics and transportation industry\\t33\\tmechanical and industrial engineering industry\\t33\\tpharmaceutical industry\\t34\\tower and energy industry\\t14\\tindustrial\\t24\\t/business news\\t34\\toperations\\t25\\tconstruction\\t25\\tenergy\\t25\\tfashion industry\\t25\\tgreen solutions\\t25\\tpharmaceutical industry\\t1\\tcareers\\t1\\teducation\\t10\\t/adult education\\t11\\tcollege education/postgraduate education\\t11\\tgraduate school\\t11\\tlanguage learning\\t1\\tfamily and parenting\\t12\\trelationships/parenting\\t2\\tinance\\t8\\t/accounting and auditing/tax preparation and planning\\t9\\tbank\\t9\\tfinancial news\\t9\\tinvesting\\t9\\tpersonal finance\\t25\\t/debt management\\t4\\te art/theater\\t2\\tood and drink\\t15\\t/beverages/alcoholic beverages\\t16\\tdining out\\t16\\tfood/fruits and vegetables\\t21\\tsalads\\t16\\thealthy eating\\t16\\tvegan\\t19\\tetarian\\t1\\thealth and fitness\\t7\\ty living/fitness and exercise\\t2\\tobbies and interests/arts and crafts/photography\\t23\\tbirdwatching\\t23\\tgames/video and computer games\\t3\\tme and garden\\t16\\t/gardening and landscaping\\t17\\thome improvement and repair\\t1\\tlaw, govt and politics/politics\\t1\\tmovies\\t2\\tusic and audio\\t1\\tnews\\t5\\t/national news\\t1\\tpersonal finance/personal investing\\t3\\tts\\t5\\t/birds\\t6\\tlarge animals\\t1\\treal estate\\t12\\t/apartments\\t14\\trchitects\\t13\\tbuying and selling homes\\t13\\thouses\\t13\\tlow income housing\\t13\\treal estate buying and selling\\t1\\tscience\\t8\\t/computer science/artificial intelligence\\t9\\tecology/pollution\\t10\\tngineering\\t11\\tvironment\\t9\\tsocial science\\t9\\tweather\\t2\\tociety\\t8\\t/crime\\t9\\tdating\\t2\\tports\\t7\\t/auto racing\\t8\\tbasketball\\t8\\tcricket\\t8\\tdiving\\t8\\tfootball\\t8\\tgolf\\t8\\thorse racing\\t13\\ts\\t8\\tolympics/paralympic games\\t8\\trugby\\t8\\tskiing\\t9\\toccer\\t8\\ttennis\\t8\\tvolleyball/beach volleyball\\t2\\ttyle & fashion\\t16\\t/high fashion\\t7\\tand fashion\\t18\\t/accessories\\t19\\tbeauty/cosmetics\\t19\\tclothing\\t19\\tfashion designers\\t19\\tjewelry\\t19\\tluxury goods\\t19\\tmen \'s fashion\\t1\\ttechnology & computing\\t23\\t/consumer electronics\\t12\\tand computing\\t25\\t/consumer electronics\\t46\\t/tv and video equipment\\t26\\ttech news\\t3\\tlevision\\t11\\t/drama tv\\t2\\travel\\t7\\t/business travel\\t8\\tspecialty travel\\t24\\t/adventure travel\\t8\\ttourist destinations/europe\\t29\\tfrance\\t29\\tgreece\\t29\\titaly\\t16\\tfacilities\\t9\\transports\\t11\\tvel type/adventure travel\\t20\\tbusiness travel\\t14\\ting with kids\\t\\t2\\t\\t3\\t\\t401k\\t\\tA&W\\t1\\tfrica\\t1\\trmenia\\t1\\tustralia\\t1\\tzerbaijan\\t\\tBurger King\\t\\tCyprus\\t\\tElectric-cars\\t\\tFrance\\t\\tGeorgia\\t\\tIndia\\t2\\tternational-sanctions\\t1\\treland\\t\\tJapan\\t\\tKFC\\t1\\tazakhstan\\t1\\tyrgyzstan\\t\\tMoney\\t\\tPakistan\\t1\\tizza Hut\\t\\tQSR\\t\\tRussia\\t6\\t-Ukraine-war\\t\\tSubway\\t\\tTajikistan\\t1\\television\\t1\\the-Hague\\t1\\turkey\\t4\\tmenistan\\t\\tUkraine\\t7\\t-conflict\\t1\\tnited Kingdom\\t7\\tStates\\t1\\tzbekistan\\t\\tVladimir-Putin\\t1\\tolodymyr-Zelensky\\t\\tWendy\'s\\t\\t_energy_&_industrial_strategy\\t1\\tprincess_of_wales\\t\\taberdeen asset management\\t1\\tcademic\\t8\\t degree\\t2\\tcor.com\\t2\\ter\\t1\\tdventure\\t9\\ts\\t3\\tisor\\t1\\tfrica\\t1\\tgoda\\t1\\ti_v_the_mind\\t2\\tr_travel\\t3\\talo.com\\t3\\tfarewatchdog.com\\t3\\tline\\t3\\tpaz.com\\t1\\tlcohol\\t2\\tlianz\\t1\\tmerican express\\t3\\tx\\t2\\ttrak\\t1\\tpple\\t1\\trchitecture\\t2\\tgentina\\t2\\tmani\\t2\\tt\\t3\\t_galleries\\t4\\thistory\\t5\\touse_cinema\\t3\\tificial intelligence\\t10\\t_intelligence\\t1\\tsia\\t4\\t_business\\t2\\tton martin\\t3\\trazeneca\\t3\\tute\\t1\\tthletics\\t2\\tuomobile\\t1\\tudi\\t2\\tstralia\\t2\\tto\\t4\\t racing\\t4\\tmobiles\\t4\\ts\\t1\\tverage\\t2\\tiva\\t1\\tware\\t1\\txa\\t\\tb2b\\t1\\tallet\\t2\\tndb\\t3\\tgladesh\\t3\\tk\\t4\\t of america\\t4\\ting\\t4\\tman-fried\'s crypto trading firm alameda research\\t2\\trclays\\t2\\tseball\\t3\\tketball\\t1\\tbcapp\\t3\\tcom\\t6\\t.live.site.future\\t1\\teach\\t5\\tes\\t3\\tuty\\t2\\ter\\t2\\tntley\\t2\\trlin_film_festival\\t1\\tiking\\t2\\tnance\\t3\\tnance\\t2\\to tech\\t3\\tfuel\\t3\\ttech\\t2\\ttcoin\\t3\\ttrex\\t1\\tlackrock\\t2\\tock chain\\t5\\t_chain\\t5\\tchain\\t5\\tfi\\t3\\tomberg\\t1\\tmw\\t1\\tnb\\t1\\tofa\\t2\\toking.com\\t4\\ts\\t3\\tze\\t2\\tttega venetta\\t2\\turbon\\t3\\ttique\\t2\\txing\\t1\\trazil\\t2\\tight sparks\\t3\\ttish_fashion\\t1\\ttc\\t1\\tudget\\t2\\tgatti\\t2\\tilder\\t2\\tlgari\\t2\\tngee jumping\\t2\\tsiness\\t8\\t guru\\t9\\tleader\\t9\\tschool\\t10\\tize\\t8\\t_size\\t9\\ttrip\\t8\\tperson\\t2\\ty\\t3\\ter\\t3\\ting\\t\\tcadillac\\t2\\tmilla parker\\t3\\tping\\t2\\tnada\\t3\\tnes_film_festival\\t2\\tpital one\\t2\\tr\\t3\\t industry\\t3\\tdano\\t3\\teers\\t3\\tgo\\t3\\ts\\t1\\telebrity lifestyle\\t9\\t_style\\t2\\tntral bank\\t2\\to\\t1\\tfo\\t1\\thampagne\\t3\\tnel\\t3\\trles schwab\\t3\\ttgpt\\t2\\teapair.com\\t5\\toair\\t2\\tief adviser\\t6\\teconomist\\t7\\txecution officer\\t13\\tve\\t15\\t of the company\\t18\\tficer\\t6\\ttechnical officer\\t5\\t_executive\\t3\\tld_health\\t5\\tren\\t8\\t\'s_television\\t4\\te\\t3\\tna\\t2\\tristian loubutin\\t3\\tome\\t4\\tnicle\\t1\\tinema\\t2\\to\\t1\\tlimate\\t7\\t change\\t7\\t_solutions\\t3\\tnical trial\\t2\\tothing\\t1\\toal\\t3\\tts\\t2\\tcktail\\t2\\tin hako\\t4\\tbase\\t4\\tdesk\\t4\\tmama\\t2\\tllege\\t3\\tombia\\t2\\tmmercial bank\\t11\\tcorporations\\t3\\tpany\\t7\\t size\\t4\\tuter\\t2\\tnglomerate\\t3\\tscious\\t2\\to\\t3\\tking\\t2\\tronavirus\\t3\\tporate governance\\t8\\tion\\t3\\tvette\\t2\\tsmetics\\t1\\treator\\t3\\tdit\\t6\\t card\\t7\\tsuisse\\t7\\tunion\\t6\\t-card\\t2\\ticket\\t2\\to\\t3\\tss over\\t5\\t-over\\t5\\tover\\t2\\tuisedirect.com\\t2\\typto\\t6\\tcurrency\\t14\\t exchange ftx\\t1\\tto\\t1\\tultural\\t8\\t-experiences\\t6\\te\\t2\\tstom_made\\t1\\tycling\\t\\td2c\\t1\\tai\\t2\\tytrip\\t1\\tean\\t2\\tbt\\t2\\tcision maker\\t3\\tor\\t2\\tsign\\t2\\tv\\t3\\teloper\\t1\\tirector\\t2\\tversity\\t3\\ting\\t1\\tna\\t1\\to kwon\\t2\\tctor\\t6\\tate\\t3\\tumentaries\\t10\\ty_film\\t2\\tdgecoin\\t2\\tge\\t2\\tnation\\t1\\tress\\t2\\tink\\t3\\tve\\t4\\ting\\t1\\tuchess of cambridge\\t2\\tke of cambridge\\t2\\tsit.com\\t\\te-commerce\\t1\\tarth\\t1\\tco-conscious\\t4\\tfriendly\\t4\\ttourism\\t3\\tlogy\\t3\\tmmerce\\t3\\ttourism\\t1\\tducate\\t6\\tion\\t6\\tor\\t1\\tlderly care\\t2\\tectric cars\\t9\\tvehicles\\t8\\tity\\t2\\ti lilly\\t1\\tmerging technology\\t2\\tployee number\\t15\\ts\\t2\\tt\\t1\\tndowment fund\\t2\\tergy\\t6\\t industry\\t7\\tsector\\t6\\t_industry\\t7\\tservice_companies\\t2\\tgineering\\t2\\tormous\\t2\\ttertainment-arts\\t14\\tnews\\t13\\t_and_arts\\t3\\trepreneur\\t12\\tship\\t1\\tth\\t2\\toro\\t2\\tx\\t1\\turope\\t6\\tan commission\\t9\\tparliament\\t9\\tunion\\t1\\txchanges\\t2\\tecutive\\t9\\t compensation\\t10\\tdirector\\t10\\tofficer\\t10\\tvice-president of strategy\\t9\\ts\\t2\\tpedia\\t4\\trimental drug\\t2\\ttreme sport\\t\\tfacebook\\t2\\tmily\\t6\\t car\\t7\\toffice\\t7\\ttravel\\t7\\tvehicle\\t6\\t_&_education\\t7\\ttree\\t2\\tshion\\t7\\t_design\\t2\\tther\\t1\\tda\\t2\\tic\\t1\\tedex\\t2\\tndi\\t2\\trrari\\t1\\tidelity\\t2\\tfa\\t2\\tlm\\t4\\t-tv\\t4\\ts\\t2\\tnance\\t7\\t_and_economy\\t7\\ts\\t6\\tial adviser\\t10\\tdecisions\\t10\\tinsurance\\t10\\tmanagement\\t16\\tr\\t10\\tservice\\t17\\ts\\t2\\trst class\\t5\\t-class\\t1\\tlight\\t2\\tying\\t1\\tood\\t3\\ttball\\t2\\treign exchange\\t3\\tmula 1\\t8\\tone\\t7\\t1\\t2\\tunder\\t1\\treight\\t1\\ttx\\t1\\tuture\\t6\\t of transport - bbc reel\\t6\\t-planet\\t6\\t_planet\\t\\tgaming\\t2\\ts\\t3\\toline\\t2\\tza strip\\t1\\temini marketplace\\t2\\tne\\t4\\talogy\\t4\\tration_project\\t4\\tsis\\t3\\tome\\t5\\tics\\t1\\tin\\t1\\tlobal markets\\t6\\tly minded\\t1\\tm\\t1\\tocity.com\\t2\\tldman\\t7\\t sachs\\t3\\tf\\t2\\togle flights\\t2\\tvernment investment\\t11\\tlinked companies\\t20\\trporation\\t1\\tphc\\t1\\traduate school\\t3\\tf\\t2\\te\\t3\\ten\\t5\\t_cities\\t6\\tliving\\t6\\ttech\\t5\\thouse_gas_emissions\\t1\\ts_tech\\t1\\tucci\\t\\thandbag\\t2\\trdware\\t1\\tealth\\t6\\t_gap\\t6\\tcare worker\\t10\\t_in_the_us\\t2\\tdge fund\\t1\\tigh end\\t5\\tlevel\\t6\\tife\\t7\\tving\\t5\\tstreet\\t4\\t-end\\t8\\t shopping\\t5\\tspending quarter\\t4\\t_lift\\t4\\ter education\\t6\\t_education\\t2\\tking\\t2\\tlton.com\\t2\\tre\\t3\\ting\\t2\\tspanic\\t3\\ttory\\t1\\tockey\\t2\\tme\\t4\\t buyer\\t8\\ting\\t5\\tloan\\t5\\towner\\t4\\t-and-garden\\t5\\timprovement\\t2\\tnda\\t2\\tpper\\t2\\trse-racing\\t2\\tt springs\\t3\\tel\\t5\\tplanner.com\\t5\\ts.com\\t3\\twire\\t1\\tttp://instagram.com\\t7\\tm.facebook.com\\t7\\twww.google.com/search\\t4\\ts://google.com\\t14\\tads.g.doubleclick.net\\t8\\tl.facebook.com\\t9\\tm.facebook.com\\t8\\tmobile.facebook.com\\t8\\tpartner.googleadservices.com\\t8\\twww.bbc.com/culture/tags/documentaries\\t20\\tfuture/\\t20\\tnews/business\\t25\\tworld/africa\\t20\\tsport/olympics\\t21\\ttoryworks/beneath-the-surface\\t31\\tmastery-at-sea/mastery-at-sea\\t46\\tqueen-of-the-ocean-a-new-era-of-mastery-at-sea\\t31\\ttravel/a-way-to-get-away/only-at-sea\\t56\\tsolo-serenity-the-appeal-of-travelling-on-your-own\\t12\\tfacebook.com\\t12\\tinstagram.com\\t1\\tulu\\t1\\tybrid\\t2\\tundai\\t\\tihg.com\\t1\\tn-market\\t2\\tdia\\t4\\te_film\\t4\\tgenous\\t3\\tustrialist\\t7\\ty\\t2\\tfiniti\\t3\\tormation technology\\t11\\t_technology\\t3\\trastructure\\t2\\tnovation\\t2\\tsight\\t3\\ttagram\\t3\\turance\\t5\\ter\\t2\\ttender\\t4\\trest rate\\t3\\tuitive\\t2\\tvesment advisor\\t5\\tt\\t6\\t in government\\t6\\ting\\t6\\tment\\t10\\t advisor\\t11\\ttrust\\t10\\ts\\t6\\tor\\t1\\tos\\t1\\tran\\t3\\tq\\t2\\teland\\t1\\tsp\\t2\\trael\\t1\\tt\\t2\\top\\t\\tjaguar\\t2\\tpan\\t1\\teep\\t2\\twellery\\t6\\try\\t1\\tohnson & johnson\\t2\\turnalism\\t1\\tp morgan\\t\\tkate middleton\\t2\\tyak.com\\t1\\tellogg school of management\\t1\\tia\\t2\\twi.com\\t1\\tlook\\t1\\tnowledgeable\\t1\\toenigsegg\\t1\\tucoin\\t2\\tga\\t\\tlakeside shopping centre\\t2\\tmborghini\\t2\\tnd rover\\t4\\trover\\t4\\tscape\\t2\\trge\\t5\\t business\\t2\\ttin\\t5\\t america\\t1\\teader\\t6\\ts\\t2\\tnovo\\t2\\tss than 50\\t2\\txus\\t1\\tifestyle\\t2\\tnkedin\\t2\\tquor\\t2\\tterature\\t1\\toan\\t2\\tckdown\\t2\\tgistics\\t2\\tndon+fashion_week\\t6\\t_film_festival\\t2\\ttus car\\t2\\tuis vuitton\\t5\\t-vuitton\\t1\\tuna\\t2\\txury\\t6\\t goods\\t7\\tlife\\t7\\tretail\\t6\\tescapes.com\\t1\\tvmh\\t\\tm&a\\t1\\tacro\\t2\\tnagement\\t6\\tr\\t2\\trket\\t6\\t (economics)\\t6\\ting\\t6\\twatch\\t2\\tserati\\t3\\ttercard\\t6\\ts\\t2\\ttter_of_life_&_tech\\t1\\tba\\t1\\tclaren\\t1\\tedical school\\t7\\t_myths\\t5\\tine\\t4\\tum\\t2\\tghan markle\\t2\\tn\'s_health\\t3\\ttal-health\\t6\\t_health\\t2\\trcedes\\t7\\tz\\t3\\tger\\t2\\ttamask\\t4\\tverse\\t2\\txico\\t1\\ticro\\t2\\td-size\\t3\\tdle east\\t2\\tllennials\\t2\\tning\\t4\\tvan\\t3\\tuscule\\t1\\tlb\\t1\\tma\\t1\\toderna\\t2\\tm car\\t3\\tondo\\t2\\tney\\t2\\trgan stanley\\t3\\ttgage\\t8\\t loan\\t2\\ttel\\t3\\ther\\t2\\tvie theater\\t1\\ttv_video_music_awards\\t1\\tuseum\\t6\\ts\\t3\\tic\\t2\\ttual fund\\t11\\ts\\t\\tnanotechnology\\t2\\tscar\\t3\\tdaq\\t2\\ttural_gas\\t1\\tba\\t1\\tetflix\\t2\\tw medication\\t3\\ts\\t4\\t_business_content\\t5\\teurope_content\\t5\\tlive_content\\t5\\tuscanada_content\\t5\\tworld_content\\t1\\tft\\t3\\ts\\t1\\ton-fungible token\\t2\\trth america\\t2\\tvartis\\t1\\tpa\\t1\\tuclear disaster\\t8\\tfuel\\t7\\t_power\\t2\\tmber of employees\\t2\\trse\\t5\\try\\t1\\tyse\\t\\toil\\t3\\t reserves\\t3\\t_&_gas_industry\\t1\\tlympics\\t1\\tmega\\t1\\tnline and offline\\t7\\tshopping\\t6\\t_shopping\\t1\\tpera\\t2\\ttions\\t2\\tulence\\t1\\trbitz\\t1\\twner\\t1\\txfam\\t\\tpagani\\t2\\tnama\\t3\\tdemic\\t3\\tts\\t2\\tralympics\\t3\\tent\\t6\\ting\\t6\\ts\\t1\\telago.co\\t2\\tnsion\\t7\\t fund\\t8\\tscheme\\t2\\trceptive\\t3\\tseco\\t4\\tonal finance\\t8\\t_debt\\t9\\tfinance\\t1\\tfizer\\t1\\tharma\\t6\\tceutical drug\\t15\\tindustry\\t14\\t_industry\\t2\\td\\t2\\tilanthropy\\t2\\totography\\t2\\tysician\\t1\\tinterest\\t1\\tlanet\\t4\\tner\\t4\\tt based diet\\t3\\tystation\\t2\\tug-in hybrid\\t1\\tolitics\\t2\\tp_culture\\t3\\tular_culture\\t2\\trsche\\t2\\ts_bbc_ukrainewar\\t3\\titive\\t1\\tre-owned\\t3\\tmier league\\t5\\tum_family_tree\\t2\\ticeline\\t3\\tmary school\\t3\\tnce harry\\t7\\twilliam\\t3\\tvate banking\\t8\\tjet\\t8\\tplacement\\t8\\tshopping\\t2\\tocurement\\t3\\tfessional\\t7\\tor\\t3\\tof of stake\\t9\\twork\\t3\\tperty\\t2\\tudential\\t1\\tublic_health\\t5\\tshing\\t2\\trchase\\t7\\ting\\t\\tracing\\t2\\til\\t4\\t_travel\\t4\\tway technology\\t3\\tse capital\\t2\\tnge rover\\t2\\tv4\\t1\\teal estate\\t11\\t appraisal\\t4\\t_estate\\t2\\tcycling\\t2\\tddit\\t2\\tfinance\\t2\\tgulation of the crypto market\\t2\\tit\\t2\\tmodel\\t2\\tnewable\\t9\\t energy\\t10\\tresource\\t10\\tsources\\t9\\t_energy\\t3\\tting\\t2\\tstaurant\\t1\\tich\\t1\\toad trip\\t4\\t_trips\\t2\\tlex\\t3\\tls royce\\t2\\tth ira\\t1\\tugby\\t2\\tm\\t2\\tssia\\t\\tsafari\\t2\\tlesforce\\t2\\tudi arabia\\t5\\t-arabia\\t2\\tvvy\\t1\\tchool\\t6\\ts\\t3\\troders\\t2\\tience\\t7\\t_&_environment\\t8\\tand_environment\\t2\\tottscheapflights.com\\t2\\tuba_diving\\t1\\tedan\\t2\\tlf-employed\\t2\\tnior executive\\t7\\tmanagement\\t2\\tries 7\\t2\\txual_health\\t1\\thipping\\t3\\trt\\t2\\toes\\t3\\tp\\t4\\tper\\t5\\ting\\t3\\trts\\t1\\tize\\t4\\t of company\\t1\\tkiing\\t3\\tplagged.com\\t3\\trt\\t2\\tyscanner\\t1\\tmall\\t5\\t businesses\\t5\\t_businesses\\t3\\trt\\t5\\tbook\\t2\\te\\t1\\tnapchat\\t2\\tow_&_skiing\\t1\\tocial security\\t6\\t_media_influencers\\t2\\tftware\\t2\\tlar energy\\t6\\tpanels\\t7\\tower\\t5\\t_energy\\t6\\tpower\\t2\\tngs_that_made_history\\t2\\tuth america\\t2\\tvereign wealth fund\\t1\\tpa\\t2\\tort\\t5\\t_football_content\\t1\\ttablecoin\\t3\\tte street\\t2\\tock\\t5\\t market\\t5\\ts\\t2\\treaming\\t2\\tudent_finance\\t2\\tyle\\t5\\ts of contemporary stars\\t1\\tummer-olympics\\t2\\tstainabiliity\\t12\\tty\\t14\\t_on_a_shoestring\\t9\\tle\\t11\\t development\\t13\\triving\\t12\\tsolutions\\t11\\t_business\\t12\\tliving\\t7\\tbility\\t8\\tle\\t2\\tv\\t2\\tzuki\\t1\\tweater\\t2\\timming\\t1\\tyria\\t\\tt rowe price\\t1\\tablet\\t2\\tx\\t1\\teach\\t5\\ter\\t5\\ting\\t2\\tch\\t4\\tnologies\\t9\\ty\\t10\\t-of-business\\t10\\t_of_business\\t2\\tlevision\\t2\\tnnis\\t2\\tquila\\t2\\trra\\t1\\the_specialist\\t4\\tvegan_factor\\t3\\tatre\\t2\\treadneedle\\t3\\till\\t1\\tiffany\\t2\\tktok\\t2\\tmepiece\\t2\\tny\\t2\\tqets.com\\t1\\top gear\\t3\\tgear\\t2\\tronto_film_festival\\t2\\tte bag\\t2\\turist\\t2\\tyota\\t1\\trade\\t4\\ting\\t3\\tin\\t5\\ting\\t5\\ts\\t3\\tnsport\\t3\\tvel\\t6\\t_destinations-asia\\t6\\tocity\\t7\\tka\\t6\\tzoo.com\\t2\\tends\\t2\\tip\\t4\\t.com\\t4\\tadvisor.com\\t2\\tuck\\t1\\twitter\\t\\tuae\\t1\\tk\\t2\\t_high_streets\\t3\\troyal_family\\t1\\tnicef\\t3\\tt trust\\t4\\ted states\\t6\\t_states\\t3\\tversities\\t9\\ty\\t1\\tps\\t1\\truguay\\t1\\ts\\t2\\t-canada\\t2\\t_culture\\t2\\tdc\\t3\\tt\\t1\\ttilities\\t6\\ty\\t\\tvacation\\t3\\tcination\\t6\\te\\t1\\teganism\\t3\\tetarian\\t10\\tism\\t2\\thicle\\t2\\tnice_film_festival\\t1\\tia rail\\t3\\ttor.com\\t2\\tce president\\t3\\ttoria station\\t2\\tsa\\t1\\toice-activated_technology\\t2\\tlkswagon\\t1\\tp\\t\\twales\\t2\\ttches\\t1\\tearable_technology\\t8\\ts\\t2\\tll-being\\t4\\tness\\t1\\tharton\\t2\\tiskey\\t1\\tind energy\\t5\\tfarm\\t5\\tpower\\t4\\t_farms\\t5\\tpower\\t4\\tsor\\t3\\te\\t3\\tter-olympics\\t2\\tse\\t1\\tomen\'s_health\\t2\\trkforce\\t3\\tld cup\\t5\\t\'s biggest cryptocurrency exchanges\\t7\\t_table\\t5\\t_health_organization_(who)\\t6\\tof_wonder\\t1\\trist-watch\\t3\\tter\\t\\txrp\\t\\tyemen\\t1\\toutube"),propertiesLookup:e=>[["classifications_watson","taxonomy_labels"],["client","url"],["text"],["prod"],["campaign_id"],["top_tags"],["label"],["sect"],["dfp_adUnit2"],["dest_url"],["pillar"],["coll"],["classifications_watson","sentiment","label"],["grapeshot"],["section"],["geo_info","country"],["segment_number"],["topics"],["client","referrer"],["dfp_adUnit1"],["channel"],["jKmNjKmN"],["client","title"],["column"],["tags"],["geo_info","continent"],["client","user_agent"],["advertiser_id"],["aggregations","PageviewEngagement","engaged_time"],["article","keyword"],["article","name"],["subsection"],["client","domain"],["line_item_id"],["slot","slot_element_id"],["story_id"]],queries:e=>({1e7:e.r(109,93,49),10000001:e.r(114,0,1,0,"/automotive and vehicles"),10000002:e.r(109,3,1),10000003:e.r(109,53,37),10000004:e.r(109,47,45),10000005:e.r(114,0,1,0,46),10000006:e.r(102,51,102,"/society/social institution/marriage"),10000007:e.r(107,2,4,15,16,19,20,"/art and entertainment/visual art and design/art museums and galleries","/art and entertainment/visual art and design/arts education","/art and entertainment/visual art and design/performance art","/art and entertainment/visual art and design/restoration","/art and entertainment/visual art and design/sculpture","/education/art history",71),10000008:e.r(102,"/business and industrial/food industry",61,"/food and drink/food and grocery retailers"),10000010:e.r(109,69,66),10000011:e.r(114,0,1,0,"/hobbies and interests"),10000012:e.r(114,0,1,0,74),10000013:e.r(109,6,"/art and entertainment/movies"),10000014:e.r(114,0,1,0,14),10000015:e.r(105,38,56,"/law, govt and politics",80,101,"/sports/sports news",133),10000016:e.r(102,55,56,58),10000017:e.r(114,0,1,0,83),10000018:e.r(103,"/art and entertainment/celebrity fan and gossip",11,13,17),10000019:e.r(114,0,1,0,86),10000020:e.r(114,0,1,0,"/shopping"),10000021:e.r(109,103,69),10000022:e.r(109,120,42),10000023:e.r(102,"/business and industrial/automation","/science/computer science",130),10000024:e.r(103,"/art and entertainment/movies and tv/movies/reviews",13,"/art and entertainment/tv",132),10000025:e.r(114,0,1,0,136),10000026:e.r(109,"/technology and computing/consumer electronics/game systems and consoles",73),10000035:e.r(109,"/science/physics",96),10000036:e.r(114,0,1,0,"/automotive and vehicles/buying and selling cars"),10000037:e.r(114,0,1,0,"/automotive and vehicles/motor shows"),10000038:e.r(109,25,22),10000039:e.r(114,0,1,0,26),10000040:e.r(114,0,1,0,"/automotive and vehicles/cars/performance vehicles"),10000041:e.r(109,"/art and entertainment/comics and animation/comics",3),10000042:e.r(114,0,1,0,39),10000043:e.r(114,0,1,0,102),10000044:e.r(114,0,1,0,51),10000045:e.r(114,0,1,0,4),10000046:e.r(114,0,1,0,"/art and entertainment/visual art and design"),10000047:e.r(114,0,1,0,62),10000048:e.r(114,0,1,0,"/food and drink/barbecues and grilling"),10000049:e.r(109,"/food and drink/food and grocery retailers/bakeries","/food and drink/desserts and baking"),10000050:e.r(109,"/food and drink/food/fast food",63),10000051:e.r(114,0,1,0,"/food and drink/food allergies"),10000052:e.r(103,64,65,"/food and drink/health and lowfat cooking",66),10000053:e.r(114,0,1,0,68),10000054:e.r(109,"/health and fitness/sports medicine","/health and fitness/exercise"),10000055:e.r(114,0,1,0,"/health and fitness/men\'s health"),10000056:e.r(114,0,1,0,"/health and fitness/nutrition"),10000057:e.r(114,0,1,0,"/health and fitness/women\'s health"),10000058:e.r(119),10000059:e.r(114,0,1,0,"/art and entertainment/movies and tv/action"),10000060:e.r(114,0,1,0,7),10000061:e.r(114,0,1,0,8),10000062:e.r(114,0,1,0,"/art and entertainment/movies and tv/horror"),10000063:e.r(114,0,1,0,101),10000064:e.r(109,"/law, govt and politics/legal issues","/law, govt and politics/law enforcement"),10000065:e.r(114,0,1,0,81),10000066:e.r(109,77,"/law, govt and politics/government"),10000067:e.r(114,0,1,0,99),10000068:e.r(114,0,1,0,84),10000069:e.r(114,0,1,0,"/pets/cats"),10000070:e.r(114,0,1,0,"/pets/dogs"),10000071:e.r(114,0,1,0,85),10000072:e.r(114,0,1,0,"/pets/reptiles"),10000073:e.r(114,0,1,0,108),10000074:e.r(114,0,1,0,"/sports/baseball"),10000075:e.r(114,0,1,0,105),10000076:e.r(114,0,1,0,"/sports/bodybuilding"),10000077:e.r(114,0,1,0,"/sports/bowling"),10000078:e.r(114,0,1,0,"/sports/boxing"),10000079:e.r(114,0,1,0,"/sports/bicycling"),10000080:e.r(114,0,1,0,"/sports/fishing"),10000081:e.r(114,0,1,0,109),10000082:e.r(114,0,1,0,"/sports/hunting and shooting"),10000083:e.r(114,0,1,0,113),10000084:e.r(114,0,1,0,114),10000085:e.r(114,0,1,0,116),10000086:e.r(114,0,1,0,"/sports/walking"),10000087:e.r(103,"/business and industrial/tanning","/style and fashion/beauty",122,"/style and fashion/beauty/cosmetology and beauty professionals"),10000088:e.r(109,"/style and fashion/body art","/style and fashion/beauty/tattoos"),10000089:e.r(114,0,1,0,127),10000090:e.r(114,0,1,0,131),10000324:e.r(114,0,1,0,37),10000325:e.r(104,"/business and industrial/company/annual report","/business and industrial/company/bankruptcy","/business and industrial/company/earnings","/business and industrial/company/joint venture","/business and industrial/company/merger and acquisition"),10000327:e.r(114,0,1,0,59),10000328:e.r(114,0,1,0,"/finance/personal finance/insurance"),10000329:e.r(102,"/finance/accounting and auditing/billing and invoicing","/finance/accounting and auditing/bookkeeping",54),10000330:e.r(114,0,1,0,57),10000687:e.r(114,0,1,0,98),10000688:e.r(114,0,1,0,50),10000689:e.r(109,"/automotive and vehicles/scooters and mopeds",26),10000690:e.r(106,"/automotive and vehicles/vehicle brands/fiat","/automotive and vehicles/vehicle brands/ford","/automotive and vehicles/vehicle brands/honda","/automotive and vehicles/vehicle brands/hyundai","/automotive and vehicles/vehicle brands/nissan","/automotive and vehicles/vehicle brands/peugeot","/automotive and vehicles/vehicle brands/subaru","/automotive and vehicles/vehicle brands/suzuki"),10000691:e.r(107,23,"/automotive and vehicles/vehicle brands/audi","/automotive and vehicles/vehicle brands/bentley","/automotive and vehicles/vehicle brands/ferrari","/automotive and vehicles/vehicle brands/lamborghini","/automotive and vehicles/vehicle brands/land rover","/automotive and vehicles/vehicle brands/maserati","/automotive and vehicles/vehicle brands/mercedes-benz","/automotive and vehicles/vehicle brands/porsche","/automotive and vehicles/vehicle brands/rolls-royce","/automotive and vehicles/vehicle brands/toyota","/automotive and vehicles/vehicle brands/volkswagen","/automotive and vehicles/vehicle brands/volvo"),10000692:e.r(114,0,1,0,"/automotive and vehicles/cars/coupe"),10000693:e.r(109,"/automotive and vehicles/auto repair","/automotive and vehicles/auto parts"),10000694:e.r(114,0,1,0,"/automotive and vehicles/cars"),10000695:e.r(114,0,1,0,24),10000696:e.r(114,0,1,0,"/art and entertainment/books and literature/children\'s books"),10000697:e.r(114,0,1,0,2),10000698:e.r(109,"/careers/resume writing and advice","/careers/career advice"),10000699:e.r(114,0,1,0,"/careers/telecommuting"),10000700:e.r(114,0,1,0,"/careers/career planning"),10000701:e.r(109,"/careers/job search","/careers/job fairs"),10000702:e.r(114,0,1,0,47),10000703:e.r(114,0,1,0,"/education/distance learning"),10000704:e.r(114,0,1,0,"/education/special education"),10000705:e.r(109,50,1),10000706:e.r(102,"/education/homework and study tips","/education/teaching and classroom resources/lesson plans","/education/teaching and classroom resources/school supplies"),10000707:e.r(114,0,1,0,71),10000708:e.r(114,0,1,0,20),10000709:e.r(114,0,1,0,16),10000710:e.r(103,66,67,68,"/pets/animal welfare"),10000711:e.r(114,0,1,0,"/food and drink/beverages/non alcoholic beverages"),10000712:e.r(102,"/food and drink/kosher food",67,68),10000713:e.r(114,0,1,0,"/food and drink/cuisines"),10000714:e.r(106,"/food and drink/food/condiments and dressings","/food and drink/food/frozen food",64,"/food and drink/food/grains and pasta","/food and drink/food/herbs and spices",65,"/food and drink/food/snack foods","/food and drink/gastronomy/slow food"),10000715:e.r(114,0,1,0,"/health and fitness/aging"),10000716:e.r(114,0,1,0,"/health and fitness/weight loss"),10000717:e.r(114,0,1,0,"/hobbies and interests/arts and crafts"),10000718:e.r(109,"/hobbies and interests/collecting/stamps and coins","/hobbies and interests/collecting"),10000719:e.r(114,0,1,0,"/hobbies and interests/games/board games and puzzles"),10000720:e.r(114,0,1,0,"/hobbies and interests/magic and illusion"),10000721:e.r(114,0,1,0,"/art and entertainment/music/musical instruments"),10000722:e.r(109,84,72),10000723:e.r(109,"/technology and computing/consumer electronics/radios","/art and entertainment/radio"),10000724:e.r(109,"/art and entertainment/books and literature/science fiction","/art and entertainment/books and literature/fan fiction"),10000725:e.r(114,0,1,0,"/home and garden/appliances"),10000726:e.r(114,0,1,0,76),10000727:e.r(80,e.tw(e.cw(0,e.pc_(0,"/art and entertainment/visual art and design/design/interior design"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/art and entertainment/visual art and design/drawing"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/art and entertainment/visual art and design/painting"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/hobbies and interests/arts and crafts/woodworking"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,76),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/home and garden/remodeling and construction"),e.ge(1)),2592e6)),10000728:e.r(119),10000729:e.r(104,"/home and garden/bed and bath/bathroom","/home and garden/bed and bath/bedroom","/home and garden/home furnishings","/home and garden/home furnishings/lamps and lighting","/home and garden/interior decorating"),10000730:e.r(114,0,1,0,"/art and entertainment/movies and tv/independent"),10000731:e.r(114,0,1,0,10),10000732:e.r(114,0,1,0,"/art and entertainment/movies and tv/dramas"),10000733:e.r(114,0,1,0,12),10000734:e.r(110),10000735:e.r(118),10000736:e.r(118),10000737:e.r(114,0,1,0,"/art and entertainment/music/music genres/jazz"),10000738:e.r(114,0,1,0,15),10000739:e.r(114,0,1,0,"/art and entertainment/music/music genres/blues"),10000740:e.r(114,0,1,0,"/art and entertainment/music/music genres/country music"),10000741:e.r(114,0,1,0,"/art and entertainment/music/music genres/hip hop"),10000742:e.r(114,0,1,0,17),10000743:e.r(109,17,"/art and entertainment/music/music genres/electronic music"),10000744:e.r(102,15,16,19),10000745:e.r(114,0,1,0,"/news/local news"),10000746:e.r(114,0,1,0,"/news/international news"),10000747:e.r(114,0,1,0,"/finance/personal finance/financial planning/retirement and pension"),10000748:e.r(109,"/finance/personal finance/financial planning",54),10000749:e.r(109,111,110),10000750:e.r(114,0,1,0,"/pets/aquariums"),10000751:e.r(110),10000752:e.r(114,0,1,0,88),10000753:e.r(114,0,1,0,87),10000754:e.r(103,"/business and industrial/agriculture and forestry","/business and industrial/agriculture and forestry/organic farming",72,85),10000755:e.r(114,0,1,0,89),10000756:e.r(114,0,1,0,117),10000757:e.r(114,0,1,0,"/sports/water polo"),10000758:e.r(114,0,1,0,"/sports/table tennis and ping-pong"),10000759:e.r(114,0,1,0,"/sports/softball"),10000760:e.r(109,117,"/sports/volleyball"),10000761:e.r(114,0,1,0,112),10000762:e.r(114,0,1,0,"/sports/rowing"),10000763:e.r(114,0,1,0,"/sports/badminton"),10000764:e.r(114,0,1,0,"/sports/sailing"),10000765:e.r(102,110,111,"/sports/polo"),10000766:e.r(114,0,1,0,"/sports/skating/figure skating"),10000767:e.r(114,0,1,0,"/sports/cheerleading"),10000768:e.r(114,0,1,0,104),10000769:e.r(114,0,1,0,"/sports/weightlifting"),10000770:e.r(114,0,1,0,"/sports/gymnastics"),10000771:e.r(114,0,1,0,"/sports/swimming"),10000772:e.r(114,0,1,0,"/sports/running and jogging"),10000773:e.r(109,"/sports/hockey/field hockey","/sports/hockey"),10000774:e.r(114,0,1,0,107),10000775:e.r(81,e.tw(e.cw(0,e.pc_(0,"/sports/bicycling/mountain biking"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/climbing"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,107),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/go kart"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/parachuting"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/scuba diving"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/skating"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,114),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/skiing/waterskiing"),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,"/sports/snowboarding"),e.ge(1)),2592e6),0,0,e.pc_(0,"/sports/surfing and bodyboarding"),0,"/sports/canoeing and kayaking",1,1),10000776:e.r(114,0,1,0,"/sports/wrestling"),10000777:e.r(109,112,"/sports/olympics"),10000778:e.r(114,0,1,0,"/sports/martial arts"),10000779:e.r(114,0,1,0,106),10000780:e.r(114,0,1,0,115),10000781:e.r(105,"/art and entertainment/shows and events",23,42,63,"/home and garden/luxury homes",124,126),10000782:e.r(114,0,1,0,"/style and fashion/beauty/hair care"),10000783:e.r(102,121,122,125),10000784:e.r(114,0,1,0,123),10000785:e.r(114,0,1,0,"/business and industrial/automation/robotics"),10000786:e.r(114,0,1,0,94),10000787:e.r(108,10),10000788:e.r(108,11),10000789:e.r(108,9),10000790:e.r(108,6),10000791:e.r(108,7),10000792:e.r(108,8),10000793:e.r(114,0,1,0,"/travel/tourist destinations/seaside resort"),10000794:e.r(114,0,1,0,"/travel/tourist destinations/africa"),10000795:e.r(114,0,1,0,"/travel/tourist facilities/camping"),10000796:e.r(114,0,1,0,"/travel/tourist destinations/south america"),10000797:e.r(114,0,1,0,"/travel/transports/road travel/road accident"),10000798:e.r(114,0,1,0,"/travel/tourist destinations/japan"),10000799:e.r(114,0,1,0,"/travel/tourist destinations/australia and new zealand"),10000800:e.r(104,"/travel/tourist destinations/eastern europe",140,141,142,143),10000801:e.r(114,0,1,0,139),10000802:e.r(114,0,1,0,137),10000803:e.r(114,0,1,0,148),100580:e.r(96,0,e.a([e.y(8,768),e.ref(63)]),5,e.pc_(13,834),0,e.ref(33),1,1,1),100608:e.r(69,"storyworks/future/vision-2022"),100609:e.r(69,"storyworks/reframing-your-world"),100803:e.r(85,3,2,2988317492,2988317492),100882:e.q(e.ocqs([e.tw(e.cw(0,e.a([e.y(8,768),e.ref(63)]),e.ge(1)),2592e6),e.tw(e.cw(5,e.pc_(13,834),e.ge(1)),2592e6),e.scq(e.cw(4,e.pg(28,60)),e.vq(e.sw(8,e.t,["properties","engaged_time"],e.g(60))),e.ge(1))])),100886:e.q(e.ocqs([e.tw(e.cw(0,e.a([e.y(8,768),e.ref(63)]),e.ge(1)),6048e5),e.tw(e.cw(5,e.pc_(13,834),e.ge(1)),6048e5)])),100887:e.r(4,e.vq(e.mxw(8,e.t,["properties","completion"],e.g(.7))),[e.tw(e.cw(0,e.a([e.y(8,768),e.ref(63)]),e.ge(1)),2592e6),e.tw(e.cw(5,e.pc_(13,834),e.ge(1)),2592e6)]),101196:e.r(69,"storyworks/travel/a-way-to-get-away"),101197:e.r(69,"storyworks/future/tech4all/because-learning-should-never-stop"),102092:e.r(66,1,["https://www.bbc.com/storyworks/travel/unforgettable-maldives","storyworks/travel/maldives-calling/"]),103853:e.r(69,"storyworks/travel/wakayama-prefecture/wakayama-a-foodies-delight"),103854:e.r(66,1,["https://www.bbc.com/storyworks/building-a-better-australia/going-green-financing-australias-transition","storyworks/advertiser-content/building-a-better-australia/"]),104004:e.r(96,0,e.ref(63),5,e.pc_(13,834),0,e.ref(33),1,1,1),105312:e.r(65,e.pc_(24,"Future Planet"),8,"future_futureplanet_content"),105314:e.r(67,8,["sCwlyZOv"]),105315:e.r(67,8,["c8MiLko9"]),105316:e.r(64,e.y(20,942)),105318:e.r(86,e.bsc_(23,["83ANvqox"]),"culture_thecollection_content","the-collec"),105320:e.r(92,["Ad3RGDqp"],838),105321:e.r(86,e.ps(23,838),"future_familytree_content","Family Tree"),105526:e.r(92,["JQOLNTzy"],"premium_worlds_table"),105532:e.r(91,0,e.os(e.s,23,["equaity_matters","equalitymatters"]),8,["/zaDnLaD"]),105717:e.r(67,19,["QGoY+hGX","UJt9L8vT","tQCORZi0","zYCjOr7G"]),105718:e.r(67,19,["QGoY+hGX","zYCjOr7G"]),105719:e.r(67,19,["UJt9L8vT","tQCORZi0"]),105851:e.r(71,[324503031,3245598396,3240445614,3244276515,3242649245,3161682140,3161522125,3173182237,3172264779,3154429412,3055937714,3019042483,3019752402,2841568772,2682282610,2999259803,2834193989,2770890848,2799185480,3008409510,2998594294]),106050:e.r(4,e.ocqs([e.cw(9,e.os(e.cx,["article","destinations"],[991,928,891,1081,824,631,869,687,1017,472]),e.ge(2)),e.cw(9,e.os(e.s,["platform"],[472,631,687,824,869,891,928,991,1017,1081]),e.ge(2))]),[e.tw(e.cw(1,e.ref(25),e.ge(2)),5184e6),e.tw(e.cw(5,e.os(e.cx,13,[552,"gs_business"]),e.ge(2)),5184e6)]),106248:e.r(73,2156579277),106249:e.r(75,2156579277),106370:e.r(75,3018925106),106371:e.r(73,3018925106),106567:e.r(69,"www.bbc.com/storyworks/travel/experience-serbia"),106906:e.r(69,"https://www.bbc.com/storyworks/be-it-building-on-excellence"),106920:e.r(69,"https://www.bbc.com/storyworks/brewing-ambition"),106921:e.r(66,1,["bbc.com/storyworks/caring-with-courage","https://www.bbc.com/storyworks/specials/advanced-nursing-research-is-helping-us-live-longer-happier-lives/","https://www.bbc.com/storyworks/specials/caring-with-courage","https://www.bbc.com/storyworks/specials/how-a-marriage-of-traditional-and-modern-midwifery-is-transforming-lives-in-rural-mexico/"]),107324:e.r(75,3023028146),107326:e.r(74,4,[3022411165,3022606940]),109402:e.r(1,9,e.y(20,1007),52),109408:e.r(0,e.bsc_(8,["2KmJ+CJc","GLoai4Us","oyY5gTNy","pFi3CyVJ","s5Rl7av5"]),e.ge(1),9,e.y(20,942),e.ge(1)),109523:e.r(73,3032522764),109524:e.r(73,3019826589),109585:e.r(93,"416134c4-057e-4254-bee6-870dff0f3f81","109402",.7381523),109586:e.r(93,"7d505c3c-29c7-4f64-a47f-a520a5a13d78","109408",.6895669),109669:e.r(69,"storyworks/crafted-with-purpose/"),109700:e.r(69,"storyworks/travel/unplugged/"),110071:e.r(69,"https://www.bbc.com/storyworks/future/blancpain-beyond-the-waves"),113969:e.r(66,1,["https://www.bbc.com/storyworks/age-of-change/","https://www.bbc.com/storyworks/specials/age-of-change/"]),113994:e.r(53,1,43,e.os(e.cx,24,["Gender","Gadget","programming","Housing","idea","Grand Challenges","light","law","Japan 2020",162,"Mars","mangrove","love","Materials science","Medicine","mega build","mental health","Unmanned aerial vehicle","Mobile phone",169,758,"Ocean","Moon","quantum mechanics","Religion","Philosophy","satellite","Sex","slow travel","Climate change","snake","Vaccine","Universe","Social Media"]),1),114028:e.r(75,3042182312),114096:e.r(94,.7369714),114097:e.r(69,"storyworks/travel/time-to-escape/"),114098:e.r(69,"storyworks/advertiser-content/mori-building/"),114192:e.r(75,2989138504),114701:e.r(85,3,2,3043169964,3043169964),114702:e.r(69,"storyworks/advertiser-content/go-beyond/"),114973:e.r(94,.66708475),115754:e.r(116,6048e5,0,e.o([e.y(20,942),e.ps(8,942)]),1),115801:e.r(98,6048e5,6048e5,1,e.os(e.s,9,[292,318,"co-working","commerce",365,682,"profit","revenue",927,"startup"]),0,e.y(8,766),1,1),116152:e.q(e.cw(7,e.as(e.x,["ctry"],[null,0]),e.ge(1))),116153:e.q(e.sq(e.cw(7,e.as(e.x,21,[null,0]),e.ge(1)))),116495:e.r(66,1,["https://www.bbc.com/storyworks/the-power-of-investing-in-africas-potential/arts-","https://www.bbc.com/storyworks/the-power-of-investing-in-africas-potential/creative-solutions","https://www.bbc.com/storyworks/the-power-of-investing-in-africas-potential/education-","https://www.bbc.com/storyworks/the-power-of-investing-in-africas-potential/home-"]),116930:e.r(99,e.a([e.pc_(17,177),e.bsc_(8,["FFuxT0z/","hDe4Oq6q"])]),2,2,["gs_entertain_tv","gs_predicts_trendingtelevision"]),116942:e.r(69,"storyworks/future/tech4all/thinking-digitally-thinking-critically"),117139:e.r(69,"storyworks/travel/grand-openings/wellness-on-the-move"),117409:e.r(73,3065098272),117410:e.r(75,3065098272),117411:e.q(e.ocqs([e.cw(2,e.pe(4,3067388564),e.ge(1)),e.cw(3,e.pe(4,3067388564),e.ge(1)),e.cw(2,e.pe(4,3067388114),e.ge(1)),e.cw(3,e.pe(4,3067388114),e.ge(1))])),120508:e.r(66,1,["https://www.bbc.com/storyworks/travel/luxury-of-time/alaska-cruising-americas-last-frontier","https://www.bbc.com/storyworks/travel/luxury-of-time/solo-serenity-the-appeal-of-traveling-on-your-own","https://www.bbc.com/storyworks/travel/luxury-of-time/the-calm-of-the-sea","storyworks/specials/cunard-luxury-reimagined/","storyworks/travel/a-way-to-get-away/only-at-sea"]),120510:e.r(85,3,2,3059224949,3059224949),120744:e.q(e.ocqs([e.tw(e.cw(1,e.a([e.ps(1,605),e.ref(62)]),e.ge(2)),7776e6),e.tw(e.cw(5,e.os(e.cx,13,["pr_gs_predicts_finance_institutionalinvestor","apac_institutionalinvestments"]),e.ge(2)),7776e6),e.tw(e.cw(0,e.a([e.ps(1,605),e.ref(28)]),e.ge(2)),7776e6),e.tw(e.cw(0,e.a([e.os(e.cx,17,["Pensions","Banking","Investment-management"]),e.os(e.cx,24,[169,"Business"]),e.os(e.s,31,[292,318,638,"private bank","trust fund",1023])]),e.ge(2)),7776e6)])),120787:e.r(66,1,["https://www.bbc.com/culture/article/20220825-longshots-2022-the-directors-behind-the-shortlisted-films","https://www.bbc.com/culture/article/20220825-longshots-festival-six-films-that-take-us-on-a-journey","https://www.bbc.com/culture/article/20220826-longshots-2022-meet-the-esteemed-film-festival-jury","https://www.bbc.com/culture/article/20220830-longshots-2022-six-outstanding-short-films-to-stream","https://www.bbc.com/reel/longshots"]),120920:e.r(73,3075074301),121269:e.r(66,1,[608,"https://www.bbc.com/storyworks/specials/beneath-the-surface"]),122439:e.r(85,3,2,3084542392,3084542392),122535:e.r(73,3085442608),122601:e.r(75,3084542392),122871:e.r(69,"https://www.bbc.com/storyworks/thailand-gateway-to-asia/home"),122872:e.r(69,"https://www.bbc.com/storyworks/thailand-gateway-to-asia/easing-the-expat-experience-new-visa-makes-thailand-more-business-friendly"),122873:e.r(69,"https://www.bbc.com/storyworks/thailand-gateway-to-asia/beyond-farming-finding-opportunities-in-thailands-green-fields"),122874:e.r(69,"https://www.bbc.com/storyworks/thailand-gateway-to-asia/business-in-the-fast-lane-how-thailand-is-supercharging-connectivity"),123650:e.r(85,3,2,3091748046,3091748046),124030:e.r(66,1,["https://www.bbc.co.uk/news/av/business-63304623","https://www.bbc.co.uk/news/business-62894499","https://www.bbc.co.uk/news/business-63260648","https://www.bbc.com/news/av/business-63459642","https://www.bbc.com/news/business-44813754","https://www.bbc.com/news/business-63460919"]),124278:e.q(e.ocqs([e.tw(e.cw(1,e.os(e.s,22,[293,398,403,463,681,707,708,1047,1052]),e.ge(2)),7776e6),e.tw(e.cw(5,e.os(e.cx,13,["gs_predicts_businessandfinance","gs_business_management"]),e.ge(2)),7776e6),e.tw(e.cw(0,e.a([e.os(e.s,19,["bbccom.live.site.news","bbccom.live.site.worklife"]),e.os(e.s,8,[766,"news_technology_content"]),e.os(e.s,1,[292,398,403,"evp",463,681,707,708,"svp",1047])]),e.ge(2)),7776e6)])),124335:e.r(69,"https://www.bbc.com/storyworks/travel/its-time-for-bali/discover-bali-the-island-of-the-gods"),124336:e.r(69,"https://www.bbc.com/storyworks/advertiser-content/its-time-for-bali/the-charming-vibrant-and-unique-cultural-richness-of-bali"),124337:e.r(69,"https://www.bbc.com/storyworks/advertiser-content/its-time-for-bali/bali-a-destination-for-the-body-and-mind"),124338:e.r(69,"https://www.bbc.com/storyworks/advertiser-content/its-time-for-bali/the-endless-adventure-of-bali"),124339:e.q(e.ocqs([e.tw(e.cw(5,e.os(e.cx,13,["gs_busfin_business_smb","gs_business_sme"]),e.ge(3)),2592e6),e.tw(e.cw(0,e.os(e.s,30,["small and medium-sized enterprise",927]),e.ge(3)),2592e6)])),124354:e.r(69,"https://www.bbc.com/storyworks/travel/an-invitation-to-dream/the-wonder-and-allure-of-phu-quoc"),124359:e.r(69,"https://www.bbc.com/storyworks/travel/an-invitation-to-dream/a-crafted-culinary-affair"),124361:e.r(69,"https://www.bbc.com/storyworks/travel/experience-tokyo/tokyos-great-outdoors"),124365:e.r(69,"https://www.bbc.com/storyworks/travel/experience-tokyo/it-all-started-with-anime-moving-to-tokyo-and-why-we-stayed"),124457:e.r(85,3,2,3097249439,3097249439),124656:e.r(85,3,2,3093551512,3093551512),125103:e.r(69,"https://www.bbc.com/storyworks/thailand-gateway-to-asia/gateway-to-asia"),125148:e.r(114,5,3,13,"pr_bbc_tradeevent"),125544:e.r(87,1,e.cx,17,["Business of Sport","Business-of-Sport"],["R0vQ4ArI"]),127898:e.r(66,1,["storyworks/advertiser-content/ngk-innovators-of-tomorrow","storyworks/future/ngk-innovators-of-tomorrow"]),128247:e.r(73,3098855998),131504:e.r(66,1,["https://www.bbc.com/storyworks/specials/a-culinary-tour-of-lombardy/","https://www.bbc.com/storyworks/the-wonders-of-lombardy/lombardy-the-unesco-capital-of-italy","https://www.bbc.com/storyworks/the-wonders-of-lombardy/the-ten-hidden-gems-of-lombardy","https://www.bbc.com/storyworks/the-wonders-of-lombardy/the-wonders-of-lombardy"]),131874:e.r(116,864e5,2,e.pe(4,2850054406),1),132233:e.r(66,1,["https://www.bbc.com/storyworks/in-pursuit-of-wellness/","https://www.bbc.com/storyworks/specials/in-pursuit-of-wellness/"]),132236:e.r(66,1,["https://www.bbc.com/storyworks/specials/the-way-we-move-transporting-stories/","https://www.bbc.com/storyworks/the-way-we-move"]),132239:e.r(69,"https://www.bbc.com/storyworks/transforming-cities/"),132240:e.r(66,1,[608,"https://www.bbc.com/storyworks/specials/beneath-the-surface/"]),132243:e.r(66,1,["https://www.bbc.com/storyworks/caring-with-courage","https://www.bbc.com/storyworks/specials/caring-with-courage/"]),132345:e.r(66,1,["https://www.bbc.com/storyworks/travel/japans-heart-and-spirit/plan-your-activity-filled-holiday-in-japan","https://www.bbc.com/storyworks/travel/japans-heart-and-spirit/plan-your-relaxing-holiday-in-japan"]),132347:e.r(81,e.cw(2,e.os(e.e,4,[3135720647,3128365881,3126381090,157696578,3029418957,147517218,3019030689,3085514596,2828085084,380042178,3039727134,3094157412,3095799304,3095665084,3080268137,3107783189,3101434967,3117529182]),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],92185)),e.cw(6,e.pe(16,92185)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],91050)),e.cw(6,e.pe(16,91050)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],91049)),e.cw(6,e.pe(16,91049)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],75270)),e.cw(6,e.pe(16,75270)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],71816)),e.cw(6,e.pe(16,71816)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],55747)),e.cw(6,e.pe(16,55747)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],88505)),e.cw(6,e.pe(16,88505)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],88504)),e.cw(6,e.pe(16,88504)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],77811)),e.cw(6,e.pe(16,77811)),e.ge(1)),5,1,e.os(e.s,9,[194,200,203,204,206,276,324,325,383,421,469,535,539,573,587,591,592,593,618,663,666,"kkday",667,703,744,795,806,839,901,919,921,994,1009,1010,1011,1014,1015,1046]),13,"gs_travel",3,3),132352:e.r(100,e.os(e.s,29,["action sports","adventure sport","alpine ski racing","backpacking","bodyboard",291,305,"canyoning",405,"extreme pogo","extreme skiing",471,"fishing","flowriding","freeride","freerunning","freeskiing",572,"hunting","ice climbing","ironman triathlon","kayaking","motocross","mountain biking","mountian climbing","outdoor adventure","paragliding","parkour","power boating","rock climbing","rowing","slacklining","surfing","trekking","wakeboard","waterski","wildlife safari"]),5,e.cx,13,["gs_sport_extreme_scuba","gs_sport_extreme_surfing","gs_sport_autorace_motorbike","gs_sport_autorace_rally","gs_sport_rodeo","gs_sport_fishing","gs_sport_huntingshooting","gs_sport_powerboats","gs_sport_rowing","gs_sport_surfing_bodyboarding","gs_sport_waterski_wakeboard","gs_sport_diving","gs_sport_climbing","gs_sport_canoe","gs_sport_extreme","gs_attractions_outdoor"]),133758:e.r(85,2,3,3067488692,3067488692),133789:e.r(85,2,3,3109367699,3109367699),133840:e.r(112,0,e.o([e.os(e.cx,24,["Public Transport","Transport","Train","Electric car"]),e.os(e.cx,17,["Aviation-safety","Rail-travel","Air-travel","Bus-travel","Electric-bikes-and-scooters","Motoring","Driverless-cars",159]),e.os(e.s,30,[310,"department for transport - bbc news",517]),e.ref(44)]),1),134038:e.r(66,1,["https://www.bbc.com/storyworks/travel/a-new-way-to-explore-japan/from-kintsugi-to-tsuiki-lessons-from-japanese-craft-masters","https://www.bbc.com/storyworks/travel/a-new-way-to-explore-japan/lessons-on-mindfulness-and-self-discovery-from-japans-mountains"]),134129:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/making-a-material-difference/hitachi-metals-has-now-become-proterial","https://www.bbc.com/storyworks/advertiser-content/making-a-material-difference/hitachi-metals-will-become-proterial"]),134178:e.r(66,1,["storyworks/travel/wakayama-prefecture"]),134502:e.r(67,1,["Acf4UOdU","GHo7JJeB"]),134592:e.r(85,3,2,3129366900,3129366900),134610:e.r(73,3133746626),135510:e.r(66,1,["https://www.bbc.com/storyworks/travel/graceful-luxury"]),135961:e.r(73,3138184478),135985:e.r(69,"https://www.bbc.com/storyworks/future/tech4all/building-resilient-schools-for-africa-children"),136107:e.q(e.acqs([e.tw(e.cw(5,e.os(e.cx,13,["gs_science_environment","gs_science_environ","gs_busfin_business_green","gs_auto_type_green"]),e.ge(3)),2592e6),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],63713)),e.cw(6,e.pe(16,63713)),e.ge(1))])),136420:e.r(69,"https://www.bbc.com/storyworks/pfizer-healthcare-for-all/rwanda-a-case-study-in-how-public-health-plans-uplift-communities"),137285:e.r(66,1,["https://www.bbc.com/storyworks/travel/reintroducing-japan-ten-regions-endless-discovery"]),137537:e.r(85,3,2,3110897439,3110897439),139769:e.r(85,3,2,3099250060,3099250060),139856:e.r(73,3156440592),139861:e.r(82,2,2,e.pe(4,3109962952),e.e,4,[3164157829,23217213]),139919:e.r(67,8,["2KmJ+CJc"]),139922:e.r(67,8,["s5Rl7av5"]),139926:e.r(67,8,["oyY5gTNy"]),139930:e.r(67,8,["W+3Kn65Q"]),139943:e.r(67,8,["a2CvlEfd"]),139946:e.r(67,8,["IrZutmFB"]),139950:e.r(67,8,["uNo162Jz"]),139957:e.r(67,8,["ITfSvpTP"]),140685:e.r(101,e.os(e.s,1,[489,"women\'s world cup","womens world cup"]),e.pc_(13,"bbc_womens_football"),[e.y(8,943),e.ps(14,"sportfootballwomensworldcup")]),141010:e.r(69,"https://www.bbc.com/storyworks/think-on/giving-back-with-style"),141174:e.r(66,1,["https://www.bbc.com/storyworks/electrified-luxury","https://www.bbc.com/storyworks/specials/the-ambience-of-modern-luxury/"]),141365:e.r(111,"1592843896","141365"),141817:e.r(69,"https://www.bbc.com/storyworks/future/mice-20-a-singaporean-approach-to-innovative-business-events"),142852:e.r(69,"https://www.bbc.com/storyworks/culture/empire-of-light/british-cinema-takes-on-british-cinema"),143329:e.r(69,"https://www.bbc.com/storyworks/the-house-of-rohl/designing-for-a-life-well-crafted"),143330:e.r(1,0,e.os(e.s,1,["https://www.bbc.com/news/av/stories-62325802","https://www.bbc.com/news/av/world-62519493","https://www.bbc.com/news/av/world-asia-china-59906706","https://www.bbc.com/news/av/world-europe-62637627","https://www.bbc.com/news/av/world-latin-america-62392233","https://www.bbc.com/news/av/world-middle-east-60350876","https://www.bbc.com/news/av/world-us-canada-62696077","https://www.bbc.com/reel/video/p0816p3b/the-secret-lives-of-yakuza-women","https://www.bbc.com/reel/video/p0ckfxtn/the-earthquake-that-changed-the-course-of-history","https://www.bbc.com/reel/video/p0cpl9nf/why-the-mysterious-scottish-broch-is-making-a-return","https://www.bbc.com/reel/video/p0cqglhs/the-complicated-legacy-of-spain-s-super-rich-indianos-","https://www.bbc.com/reel/video/p0cqnfbv/the-japanese-man-who-gets-paid-to-do-nothing-","https://www.bbc.com/reel/video/p0cr5jrj/the-world-s-first-long-distance-car-journey","https://www.bbc.com/reel/video/p0crc7bb/china-s-huge-and-mysterious-xiaozhai-tiankeng-sinkhole","https://www.bbc.com/reel/video/p0cry99y/joseph-boulogne-the-musical-genius-you-ve-never-heard-of","https://www.bbc.com/reel/video/p0ctd635/the-monster-that-terrified-georgian-london"]),32),144127:e.r(88,35,["https://www.bbc.co.uk/news/extra/z8i55dsu8w/spain-morocco-border?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/health-63602501?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/health-63749586?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/uk-64125531?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/uk-64223264?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/world-63297797?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/world-africa-64032268?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/world-asia-63830490?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/world-asia-china-63386954?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/world-europe-62799246?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]","https://www.bbc.com/news/world-us-canada-64034588?xtor=cs3-32-[news_c__gnl_q4_22-23]-[facebook]-[{{campaign.id}}]-[{{creative.id}}]"]),144128:e.r(89,35,["+LEyrbDh","ERbY09gH","LJEpwrBu","UIt5/ce/","WKmnKzM9","cX2IbZeF","mk8+F6QM","nsUBDbRE","tOPUm0g5","zRg8CMyS"]),144129:e.r(1,0,e.bsc_(1,["+9VoZ90Y","0SbsWmRE","27+PCoYb","512SH8Jw","DzuuTVip","b4IQjBty","efBnycUh","iju0Cshj","j2vJ1aqf","oiuQow0K"]),35),144132:e.r(89,35,["9zL65NXW","CI+DhuAz","EHPdbCrX","M/9aS+KT","V6YK8yD2","VMzeqv8B","Yp1v6dTA","tPzZ3JMX","v44XRsTg","yX/HvQVw"]),144133:e.r(0,e.os(e.s,18,[594,595,599,"https://l.instagram.com",600,601,613,614]),e.ge(1),0,e.bsc_(1,["+U66xnSL","9d3mQKFQ","DbCNOmT7","I2GjI529","J1qYb7QS","PJj5SKPY","Z7KdTBjJ","ZN+xhb3+","lmuiQeaS","pAgqlpEv"]),e.ge(1)),144148:e.r(89,8,["0R7He7KE","C4ECKpW5","Gc78Fs61","PruZSN7D","Sv00LIqF","UkZITrD3","ajSt3MWK","fbipJlCw","gxKDCPsO","p7RSCSlx","yDBbl6gD"]),144149:e.r(87,0,e.s,18,[596,597,598],["+IbAIwgt","/3YYpz1w","3v9tUGTx","6/T0y1Ll","7NQqZBXb","IJsd2EJ9","JiXMYsBW","LlvJAl42","OvggfaKa","Z0cqSlym"]),144151:e.r(89,8,["2gVNW0IW","7NSBEIyB","7cOUyIhr","KsceTT39","PpP/yQhH","TOpmE9ov","TP6/24s7","i9wJ7y1N","n2ukP5m6","wlhu7GAh"]),144152:e.r(88,8,["https://www.bbc.com/culture/article/20220727-how-rural-horror-deliverance-set-a-controversial-trend?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20220906-why-documentary-horror-haxan-still-terrifies-a-century-on?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221005-boogie-nights-how-hollywood-and-porn-shaped-each-other?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221006-the-controversy-over-an-incredible-archaeological-discovery?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221013-triangle-of-sadness-and-the-grossest-films-ever-made?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221101-fritz-the-cat-at-50-the-x-rated-cartoon-that-shocked-the-us?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221117-bones-and-all-the-greatest-taboo-of-all?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221201-how-top-gun-maverick-shocked-the-world?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20221213-avatar-the-way-of-water-is-a-damp-squib?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/culture/article/20230109-the-last-of-us-review-the-best-video-game-adaptation-ever?xtor=cs1-12-[culture_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]"]),144153:e.r(88,8,["https://www.bbc.com/worklife/article/20220725-the-rising-curiosity-behind-open-relationships?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20220727-the-covid-couples-struggling-with-post-lockdown-life?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20220831-situationships-why-gen-z-are-embracing-the-grey-area?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20220908-the-jobs-employers-just-cant-fill?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20220920-why-gen-zers-are-growing-up-sober-curious?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20220923-the-life-changing-divorce-coaches-helping-couples-split?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20220929-the-parents-raising-their-children-without-gender?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20221019-the-millennials-in-sexless-marriages?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20221207-the-parents-who-sever-ties-with-their-children?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/worklife/article/20230103-how-to-strengthen-willpower?xtor=cs1-12-[worklife_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]"]),144154:e.r(88,14,["https://www.bbc.com/future/article/20220804-the-lost-nuclear-bombs-that-no-one-can-find?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20220905-is-the-world-overpopulated?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20220927-italys-plan-to-save-venice-from-sinking?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20221005-how-to-hallucinate-without-drugs-and-learn-about-your-brain?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20221006-the-race-to-kill-the-worlds-most-invasive-weed?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20221019-how-a-magician-mathematician-revealed-a-casino-loophole?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20221102-how-a-sand-battery-could-transform-clean-energy?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20221110-how-australia-became-the-worlds-greatest-lithium-supplier?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20230106-the-eerie-emptiness-of-britains-area-51?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]","https://www.bbc.com/future/article/20230120-how-gut-bacteria-are-controlling-your-brain?xtor=cs1-12-[future_c__gnl_q4_22-23]-[google_ads]-[{campaignid}]-[{{creative.id}}]"]),144155:e.r(73,3168851509),145008:e.r(67,1,["1PyHq+bl","3mzHD6Fx","8PlX9cuk","QohSuBhj","zQe7Bkvb"]),146705:e.r(66,1,["https://www.bbc.com/storyworks/travel/selamat-kembali-to-malaysia"]),146734:e.r(65,e.bsc_(8,["9Tl6LLsg","mgS9bl1s"]),23,"discovery"),146736:e.r(65,e.os(e.s,23,[199,"antarctica",222,"australia_and_pacific","caribbean","central_america",458,"middle_east","north_america","south_america"]),14,"destinations"),147496:e.r(2,[e.tw(e.cw(0,e.pc_(17,"COP28"),e.ge(3)),2592e6),e.tw(e.cw(0,e.ps(1,"cop28"),e.ge(1)),7776e6)]),147582:e.q(e.ocqs([e.cw(1,e.ref(0),e.ge(1)),e.cw(0,e.a([e.y(25,153),e.ref(0)]),e.ge(1))])),147805:e.r(112,0,e.os(e.cx,17,["Queen-Consort-Camilla","King-Charles-III","Coronation-of-King-Charles-III"]),3),148633:e.r(66,1,["https://www.bbc.com/storyworks/rogue-heroes"]),149125:e.q(e.scq(e.sw(4,e.y(20,765),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(8,e.y(20,765),["properties","engaged_time"])),e.g(60))),149396:e.r(1,0,e.ps(1,"https://www.bbc.com/news/uk-65342840?xtor=CS1-12-[News_C__Coronation]-[Facebook]-[{{campaign.id}}]-[{{creative.id}}]"),32),149409:e.r(66,1,["ngk-innovators-of-tomorrow"]),149449:e.r(90,"https://www.bbc.com/news/topics/c9wl4m5rqmlt?xtor=SEC-2-[GOO]-[{adgroupid}]-[{creative}]-[{IfSearch:Search}{IfContent:Content}]-[{keyword}]"),149477:e.r(66,1,["bbc.com/storyworks/culture/live-it-electric/"]),150667:e.r(90,"https://www.bbc.com/news/live/uk-65474712?xtor=SEC-2-[GOO]-[{adgroupid}]-[{creative}]-[{IfSearch:Search}{IfContent:Content}]-[{keyword}]"),153381:e.r(98,2592e6,2592e6,0,e.o([e.y(7,787),e.y(14,787),e.os(e.cx,5,["Olympics","Paris 2024 Olympics","paris_2024_olympics","Olympic Games",787]),e.os(e.cx,17,[953,1068,"olympcis","olympic"]),e.os(e.s,14,[787])]),1,e.ps(1,607),3,3),154181:e.r(66,1,["http://www.bbc.com/storyworks/future/manifesto/cream-of-the-crop-what-makes-australian-dairy-special","http://www.bbc.com/storyworks/future/manifesto/how-technology-has-shaped-australian-dairy-farming","https://www.bbc.com/storyworks/future/manifesto"]),154321:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/europe-relaunch/arrive-in-thailand-rested-and-ready-for-action","https://www.bbc.com/storyworks/advertiser-content/europe-relaunch/gourmet-thai-food-at-30000-feet"]),154552:e.r(66,1,["https://www.bbc.com/storyworks/city-of-opportunity/"]),154903:e.r(73,3212067827),156082:e.r(69,"https://www.bbc.com/storyworks/future/sparking-tomorrows-potential/your-personal-powerplant-home-energy-supply-transformed"),157232:e.r(85,2,3,3221701105,3221701105),157446:e.r(85,2,3,3223951663,3223951663),157502:e.r(84,3,2,20,20),158127:e.r(67,1,["RoB21N54","Yi5MdM0i","jICil2Aw"]),158629:e.r(66,1,["http://www.bbc.com/storyworks/advertiser-content/the-endangered-generation/monash-university-addressing-challenges-facing-future-generations","https://www.bbc.com/reel/playlist/future-planet"]),158810:e.r(69,"https://www.bbc.com/storyworks/travel/grand-openings/a-sanctuary-of-bliss"),162087:e.r(41,e.cw(0,e.y(25,153),e.ge(1)),e.y(8,943),3,e.os(e.w,["client","type"],[646,"android"]),e.ge(1)),162553:e.r(99,e.o([e.y(14,787),e.os(e.cx,5,["summer_olympics","summer_olympic"]),e.pc_(17,953)]),3,3,["gs_sport_olympics_summer","gs_event_olympics"]),162554:e.r(101,e.ps(1,607),e.os(e.cx,13,["gs_event_paralympics","gs_sport_olympics_winter"]),[e.pc_(5,"winter_olympics"),e.pc_(17,1068),e.ps(14,1068)]),164010:e.r(73,3228681066),164201:e.r(85,2,3,3232098901,3232098901),165229:e.r(73,3242642807),165789:e.r(73,3244963169),166027:e.r(71,[3202346092,3180189562,3181887792,3244625504]),166039:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/for-a-changing-world/how-ai-and-ml-are-powering-the-future-of-work","https://www.bbc.com/storyworks/advertiser-content/no-progress-without-passion/global-study-c-suite-optimism-on-ai-and-why-first-movers-win","https://www.bbc.com/storyworks/advertiser-content/no-progress-without-passion/how-skills-based-organisations-can-use-ai-to-create-the-jobs-of-tomorrow","https://www.bbc.com/storyworks/no-progress-without-passion/how-is-ai-moving-finance-forward","https://www.bbc.com/storyworks/specials/how-is-ai-changing-the-way-we-work/"]),166283:e.r(66,1,["https://www.bbc.com/storyworks/travel/a-portrait-of-macao/a-feast-for-the-senses","https://www.bbc.com/storyworks/travel/a-portrait-of-macao/macao-through-the-eyes-of-artists","https://www.bbc.com/storyworks/travel/a-portrait-of-macao/macaos-melting-pot-where-history-meets-modernity","https://www.bbc.com/storyworks/travel/specials/a-portrait-of-macao/"]),166526:e.r(69,"https://www.bbc.com/storyworks/qualcomm-ai-solutions/unlocking-ais-future-on-device-innovation"),167455:e.r(12,0,1,e.ref(26),64,61),167456:e.r(96,1,e.os(e.s,9,[194,200,203,204,206,276,324,325,383,421,469,535,539,573,587,591,592,593,618,663,666,667,703,744,795,806,839,901,919,921,994,1009,1010,1011,1014,1015,1046]),0,e.os(e.s,1,[253,"hilton","hyatt","tourism",999,1037]),0,e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"beach vacation"),e.s_(2,"most popular tourism destinations"),e.s_(2,918),e.s_(2,"summer vacations"),e.s_(2,999),e.s_(2,1007),e.s_(2,"vacation days")])),3,3,3),167457:e.r(9,0,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,46),e.s_(6,98)])),3,e.s,1,[192,356,396,432,"faculty","harvard","ivy league","mentor","oxford","princeton",849,974,975,"tenure",1027,"yale"]),167458:e.q(e.acqs([e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],89780)),e.cw(6,e.pe(16,89780)),e.ge(1)),e.cw(0,e.ref(7),e.ge(1))])),167459:e.r(12,1,0,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,30),e.s_(6,37),e.s_(6,57),e.s_(6,82)])),28,62),167460:e.r(9,0,e.ref(13),3,e.s,1,["f1",510,"sport/formula1"]),167461:e.r(11,1,9,[243,301,579,747,796,865,870,"taxes"],e.o([e.s_(6,86)]),[e.s_(2,"apartment buildings"),e.s_(2,580),e.s_(2,583),e.s_(2,"homeowner"),e.s_(2,"homes"),e.s_(2,747),e.s_(2,865),e.s_(2,870)]),167462:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.a([e.ref(25),e.os(e.s,1,[292,681,894,976])]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/business\\tbusiness i.t."),e.s_(6,"/business and finance/business/business operations"),e.s_(6,"/business and finance/industries/technology industry"),e.s_(6,38),e.s_(6,39),e.s_(6,"/business and industrial/business software"),e.s_(6,"/technology & computing/computing/computer networking"),e.s_(6,"/technology & computing/computing/data storage and warehousing"),e.s_(6,"/technology & computing/computing/information and network security"),e.s_(6,"/technology & computing/computing/internet/cloud computing"),e.s_(6,"/technology and computing/hardware"),e.s_(6,133)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"business technology"),e.s_(2,"tech savvy"),e.s_(2,"technology savvy")]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),167463:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.s,1,["celebirty",321,503,504,553,561,564,566,"luxurious",699,794,"opulent",881,914,"vogue"]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[279,"celebrity",321,486,553,564,696,699,704,"opening night",794,881,914,1007]),e.ge(3)),2592e6),e.tw(e.cw(0,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,23),e.s_(6,28),e.s_(6,"/shopping/retail/department stores"),e.s_(6,119),e.s_(6,126),e.s_(6,138)])),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),167464:e.r(11,0,1,[620],e.s_(6,620),[e.s_(2,620)]),167466:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.bsc_(1,["LSXfbeJH","LcBSECIb","LoCtW/pZ","ep/sYBlU","iNEp/2Gl","sl9Zh0TS","tc8R+sxE"]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[292,905,906]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/business"),e.s_(6,39),e.s_(6,"/business and industrial/company")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,299),e.s_(2,331),e.s_(2,"leadership"),e.s_(2,906)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,318),e.s_(2,387),e.s_(2,398),e.s_(2,681),e.s_(2,905)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),167467:e.r(24,["central-america",679,"south-america"],[214,"bolivia",283,"central america",337,357,"costa-rica","economy","ecuador",732,765,799,"paraguay",830,939,1029],["properties","classifications_watson","entities"],[e.s_(2,214),e.s_(2,283),e.s_(2,337),e.s_(2,357),e.s_(2,680),e.s_(2,732),e.s_(2,799),e.s_(2,939),e.s_(2,1029)],[e.s_(2,214),e.s_(2,283),e.s_(2,337),e.s_(2,357),e.s_(2,"costa rica"),e.s_(2,680),e.s_(2,732),e.s_(2,799),e.s_(2,939)]),167468:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.s,1,[681,978]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,9,[220,323,978,1056]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.ref(1),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,681),e.s_(2,906),e.s_(2,"technical director"),e.s_(2,978)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),167471:e.r(33,[344,424,425,429,435,616,955,957],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,22),e.s_(6,25),e.s_(6,27),e.s_(6,95),e.s_(6,97),e.s_(6,98),e.s_(6,"/travel/specialty travel/ecotourism")])),[344,"eco conscious","eco friendly",424,425,429,435,"esg","hybrid-cars",825,955,957],[e.s_(2,344),e.s_(2,"electric car"),e.s_(2,"electric vehicle"),e.s_(2,"pollution"),e.s_(2,955),e.s_(2,958),e.s_(2,"sustainable tourism"),e.s_(2,"sustainable transport")]),167472:e.r(24,[399,400,"diy","hardscape",584,585,"home-interior",676,873],[399,400,"home and garden",584,585,676,873],["properties","classifications_watson","categories"],[e.s_(6,"/home & garden"),e.s_(6,74)],[e.s_(2,399),e.s_(2,"garden design"),e.s_(2,"home improvement"),e.s_(2,"interior design")]),167473:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.s,1,[338,"communist-party",765,830]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,338),e.s_(2,"chinese military")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,338)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),167474:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.s,1,[523,647,648,651,893,969,1018,"united-aram-emeirates",1080]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,["ifaq",647,"isael",893,969,1018,"unite-arab-emirates",1080]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,523),e.s_(2,647),e.s_(2,648),e.s_(2,"island"),e.s_(2,651),e.s_(2,735),e.s_(2,892),e.s_(2,969),e.s_(2,"yemeni revolution")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,647),e.s_(2,648),e.s_(2,"islamabad"),e.s_(2,651),e.s_(2,735),e.s_(2,892),e.s_(2,"saudi pro league"),e.s_(2,969),e.s_(2,1018),e.s_(2,"united arab emirates"),e.s_(2,1080)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),167475:e.r(22,9,[868,875,933,935,957,"waste management",1061,1063],[e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,31),e.s_(6,36),e.s_(6,41),e.s_(6,95),e.s_(6,"/science/ecology/waste management")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,868),e.s_(2,875),e.s_(2,935),e.s_(2,955),e.s_(2,1063)])),e.os(e.s,7,[900,954,"sustainable-business"]),e.os(e.cx,11,[548,549,550,956,961])],e.s,1,[868,875,933,935,"sustainable energy",1061,1063]),167476:e.r(8,0,1,9,[343,387,398,443,522,650,874,"senior leader",935,1035,1036],[e.ref(60),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,875),e.s_(2,876),e.s_(2,906),e.s_(2,935),e.s_(2,"solar wind"),e.s_(2,955),e.s_(2,958),e.s_(2,1063)]))],[e.y(10,629),e.y(7,978),e.os(e.s,1,[343,"ctio",387,398,436,443,522,650,681,"oil & gas",874,906,957]),e.os(e.cx,11,[550,978])]),167477:e.r(22,1,[520,978],[e.y(10,629),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,129),e.s_(6,131),e.s_(6,133)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"educational technology"),e.s_(2,438),e.s_(2,"gadgets"),e.s_(2,758),e.s_(2,"wearable technology")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,438),e.s_(2,"games"),e.s_(2,828),e.s_(2,977)])),e.ref(54),e.os(e.cx,11,[716,550,978])],e.s,1,["fin-tech","gadget",520,828,"ps3",978,"wearable"]),167607:e.r(85,3,2,3251335610,3251335610),168072:e.r(67,1,["0yi1fr5R","qmCo5gHQ"]),168149:e.r(67,1,["0ExOpQ+5","L3yzfCcJ","wM7duuHV"]),168154:e.r(67,1,["4ejBVeiH","GUivFvuI","t1rCUqHp"]),168172:e.r(73,3252779700),169423:e.r(69,"https://www.bbc.com/storyworks/sport/road-to-asian-games-2023/across-borders-and-boundaries-the-future-of-payments"),171207:e.r(75,3244639384),172214:e.r(23,[314,424],[233,234,616,963,964],["automobile",234,616,959],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,22),e.s_(6,25),e.s_(6,27)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"hybrid vehicle"),e.s_(2,"plug-in electric vehicle"),e.s_(2,829),e.s_(2,"tesla motors"),e.s_(2,"toyota prius")])),["properties","classifications_watson","keywords"],[e.s_(2,424),e.s_(2,434),e.s_(2,616),e.s_(2,959)]),172215:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.a([e.os(e.s,9,[229,231,273,303,309,417,418,512,586,616,617,625,656,665,671,675,685,727,833,836,858,863,903,965,966,995,996,1e3,1051]),e.os(e.s,1,[228,229,231,273,303,309,380,382,417,418,512,528,586,616,617,625,665,671,674,685,727,833,836,863,903,965,966,1e3,1051])]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.pc_(24,"Automobile"),e.os(e.s,1,[229,231,273,303,309,417,418,512,586,616,617,625,656,665,671,675,685,727,833,836,858,864,903,965,966,996,1e3]),e.os(e.cx,17,["Hydrogen-vehicles","Green-vehicles",159,"Ford","Mini-(BMW)","BMW","General-Motors"])]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,314),e.s_(2,1043)])),e.ref(22),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,309),e.s_(2,829),e.s_(2,1043)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),172216:e.r(34,[229,231,273,303,309,382,417,418,512,586,616,617,625,656,665,671,675,685,727,738,833,836,858,864,903,965,966,995,996,1e3],e.ref(22),[229,231,273,303,309,417,418,512,586,616,617,625,656,665,671,675,685,727,833,836,858,903,965,966,995,996,1e3,1051],[229,231,273,303,370,381,382,"fiat",528,586,616,617,625,654,665,671,674,675,685,713,727,738,833,836,863,903,965,966,995,996,1e3,1051],["properties","classifications_watson","keywords"],["properties","classifications_watson","concepts"],[e.s_(2,309),e.s_(2,616),e.s_(2,1043)],[e.s_(2,309),e.s_(2,1043)]),172217:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.ps(8,"sport_formula1_content"),e.os(e.cx,17,["Lewis-Hamilton",858,759,"formula-1",512])]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.ref(13),e.af_u(["properties","classifications_watson","concepts"],e.ref(17)),e.af_u(["properties","classifications_watson","keywords"],e.ref(17))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),172218:e.r(23,[314,381,382,424,474,534,"large car",738,743,"soccer mom",965,1016,1043],[233,234,309,381,382,"ford",534,616,738,963,964,965,1016,1043],[231,380,382,738,743,965,1016,1043],e.ref(50),e.ref(50),["properties","classifications_watson","categories"],[e.s_(6,"/automotive and vehicles/cars/crossover"),e.s_(6,24),e.s_(6,"/automotive and vehicles/cars/wagon"),e.s_(6,"/automotive and vehicles/minivan"),e.s_(6,"/automotive/auto body styles/crossover"),e.s_(6,"/automotive/auto body styles/sedan"),e.s_(6,"/automotive/auto body styles/station wagon"),e.s_(6,"/automotive/auto body styles/van")]),172219:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.a([e.os(e.s,9,[229,231,273,302,303,309,417,418,586,616,617,619,625,634,656,665,671,675,685,727,833,836,903,914,965,966,995,996,1e3,1051]),e.os(e.s,1,[228,229,231,273,302,303,309,380,382,"dealership",417,418,528,586,616,617,619,625,634,665,671,674,685,833,836,903,914,965,966,1e3,1051])]),e.ge(3)),2592e6),e.tw(e.cw(0,e.os(e.s,1,[229,231,273,302,303,309,417,418,586,616,617,619,625,656,665,671,675,685,727,833,836,856,864,903,965,966,996,1e3]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.ps(12,835),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,309),e.s_(2,857),e.s_(2,1043)])),e.ref(22),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,434),e.s_(2,1043)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),172220:e.r(16,0,1,[632],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,632)])),e.af_u(["properties","classifications_watson","concepts"],e.ref(34)),["properties","classifications_watson","keywords"],e.ref(34)),172221:e.r(34,["acura",224,229,257,273,288,303,"grand cherokee",625,669,673,675,685,695,718,727,798,833,885,"volvo"],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,23),e.s_(6,28)])),[224,229,257,273,288,303,370,487,528,616,625,654,669,671,673,675,685,695,713,718,727,798,833,863,885,996],[224,229,257,273,288,303,370,528,625,654,669,671,673,674,685,695,713,718,727,798,833,863,885,996],["properties","classifications_watson","concepts"],["properties","classifications_watson","keywords"],[e.s_(2,224),e.s_(2,229),e.s_(2,257),e.s_(2,273),e.s_(2,303),e.s_(2,"jaguar land rover"),e.s_(2,685),e.s_(2,"luxury vehicle"),e.s_(2,"mercedes-amg"),e.s_(2,833),e.s_(2,885)],[e.s_(2,229),e.s_(2,273),e.s_(2,"luxury cars"),e.s_(2,833),e.s_(2,"team mercedes")]),172225:e.r(55,e.pc_(11,"rail_journeys"),e.ref(44),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/automotive and vehicles/cars/diesel"),e.s_(6,"/automotive and vehicles/vehicle rental"),e.s_(6,"/automotive/auto rentals"),e.s_(6,33),e.s_(6,"/business and industrial/business operations/management/supply chain management"),e.s_(6,145),e.s_(6,"/travel/travel type")])),["properties","classifications_watson","concepts"],[e.s_(2,"bus"),e.s_(2,"lyft"),e.s_(2,"planes"),e.s_(2,"taxi"),e.s_(2,1005),e.s_(2,1006),e.s_(2,"uber")],2,1006),172275:e.r(85,2,3,3238350457,3238350457),172883:e.r(85,2,3,3259066027,3259066027),172884:e.r(66,1,["https://www.bbc.com/storyworks/generating-dreams/how-generative-ai-can-work-for-everyone-from-hobbyists-to-holiday-photo-perfectionists","https://www.bbc.com/storyworks/generating-dreams/the-new-realm-of-creativity"]),172948:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.y(10,292),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,151),e.s_(2,243),e.s_(2,496),e.s_(2,"international markets"),e.s_(2,712),e.s_(2,760),e.s_(2,"s&p 500"),e.s_(2,948),e.s_(2,"the dow")])),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,30),e.s_(6,55),e.s_(6,57),e.s_(6,82)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,496),e.s_(2,"financial literacy"),e.s_(2,502),e.s_(2,760),e.s_(2,947)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[151,198,243,493,645,712]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173106:e.r(69,"https://www.bbc.com/storyworks/future/portrait-for-everyone/portrait-for-everyone-with-tecno?"),173167:e.r(73,3262564939),173168:e.r(73,3262564471),173626:e.r(98,2592e6,7776e6,0,e.pc_(17,"Davos"),0,e.bsc_(22,["4mCxt5Hy","a4VKDjov"]),3,1),173664:e.r(85,2,3,3260671082,3260671082),173762:e.r(73,3265666507),173876:e.r(26,[243,265,292,373,384,397,493,635,640,690,745,783,793,946,972],[e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance"),e.s_(6,37)])),e.af_u(["properties","classifications_watson","concepts"],e.ref(23)),e.af_u(["properties","classifications_watson","keywords"],e.ref(23))],[e.y(10,292),e.os(e.cx,5,["department_for_business",980,"business_in_africa",223,298,924,292,"fraud"]),e.os(e.s,7,[292])]),173877:e.r(26,[296,361,440,684,706,733,739,780,917,922,993],[e.af_u(["properties","classifications_watson","concepts"],e.s_(2,"Small business")),e.af_u(["properties","classifications_watson","keywords"],e.s_(2,923))],[e.pc_(5,924),e.os(e.s,1,[296,360,439,684,706,733,739,"minute",780,922,993,1071])]),173878:e.r(28,1,["big",296,361,363,440,449,"grand",677,706,780,917,"vast"],e.pc_(5,"company-size"),e.os(e.s,1,["big company",296,361,363,439,449,"grand size","huge",677,780,"sizable",917,1071]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,361),e.s_(2,369),e.s_(2,678)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,359),e.s_(2,363),e.s_(2,678)]))),173879:e.r(29,[440,677,706,722,733,780,"scale",916,922],[369,"large_business",297,"business-size","medium-business",924],[296,360,439,677,706,722,733,780,922],["properties","classifications_watson","keywords"],[e.s_(2,"businesses"),e.s_(2,359),e.s_(2,678)]),173880:e.r(31,1,[281,292,361,"individual owner","individual proprietor","limited liability company",709,912,917],e.os(e.s,1,[281,292,360,709,733,796,912,922,"sole proprietor"]),[924,"business_owner"],[e.s_(2,299),e.s_(2,"ownership"),e.s_(2,"small business")],[e.s_(2,"business owners"),e.s_(2,923)]),173881:e.r(29,[235,440,722,780,916],["mid_size","medium_size",297],[235,296,361,439,722,734,"midsize",780,917],["properties","classifications_watson","concepts"],[e.s_(2,"medium-size business"),e.s_(2,734)]),173882:e.r(38,[239,393,422,428,"marketers",790,848],[422,790],["direct_to_consumer",428,422,791],["properties","classifications_watson","concepts"],["properties","classifications_watson","keywords"],[e.s_(2,239),e.s_(2,"consumer spending"),e.s_(2,393),e.s_(2,422),e.s_(2,790)],[e.s_(2,239),e.s_(2,393),e.s_(2,"direct to consumer"),e.s_(2,"e-commerce retailers"),e.s_(2,"online retailers"),e.s_(2,790)]),173883:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.s,1,["angel investor",453,513,623,904,"vc"]),e.os(e.cx,5,[623,"self_employed","venture_capital","VC",513,454]),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"exit of its co-founder"),e.s_(2,"incorporate business ventures"),e.s_(2,904),e.s_(2,"tech entrepreneur")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,454),e.s_(2,513),e.s_(2,904)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,["administrator",292,453,463,513,623,645,904,"self-employment"]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173884:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.a([e.ref(37),e.ref(24)]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.ref(6),e.ref(27),e.ref(9)]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173888:e.r(10,1,0,0,e.os(e.cx,5,[813,"credit_cards"]),[e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,59),e.s_(6,"/personal finance/personal debt")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"accreditation"),e.s_(2,287),e.s_(2,374),e.s_(2,"credit management"),e.s_(2,"debt limit"),e.s_(2,"debt management"),e.s_(2,"personal credit"),e.s_(2,"wealth management")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,287),e.s_(2,373),e.s_(2,397)]))],e.s,18,["bankrupt",373,"https://www.clearscore.com/","https://www.equifax.com/","https://www.experianplc.com/","https://www.moneysupermarket.com/","https://www.paysafe.com/","insolvency"]),173889:e.r(20,9,[263,522,"nuclear energy",1035,1036],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,36),e.s_(6,41),e.s_(6,"/business and industrial/mining industry")])),[e.s_(2,349),e.s_(2,"diesel engine"),e.s_(2,443),e.s_(2,521),e.s_(2,778),e.s_(2,"nuclear power"),e.s_(2,785),e.s_(2,"refinery"),e.s_(2,1036)],[878,436,349,779,263,"gaoline",761,1036,447,189,446],"clean energy","diesel generators",445,521,777,784,875),173890:e.r(14,1,3,[e.os(e.cx,5,[878,761,786,"nuclear_fusion_",779,"wind_turbines",1064,1065,189,447,446,"energy_storage",443,937,936]),e.ref(60),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,444),e.s_(2,522),e.s_(2,778),e.s_(2,785),e.s_(2,875),e.s_(2,876),e.s_(2,935),e.s_(2,1062)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,443),e.s_(2,521),e.s_(2,777),e.s_(2,784),e.s_(2,877),e.s_(2,934)])),e.ref(49),e.os(e.s,7,["climate-change","science-environment",900]),e.os(e.cx,11,[961,956,"the_next_giant_leap",346,548,549,550,519])],9,[443,522,650,935,1035,1036]),173891:e.r(7,0,1,e.os(e.s,9,[933,935,1035]),251,[e.ps(7,900),e.os(e.cx,5,[779,551,761,786,936,1064,1065,878,937]),e.ref(60),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,349),e.s_(2,444),e.s_(2,522),e.s_(2,778),e.s_(2,875),e.s_(2,876),e.s_(2,935),e.s_(2,1062)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,445),e.s_(2,521),e.s_(2,875),e.s_(2,877),e.s_(2,934),e.s_(2,1062)])),e.ref(49),e.os(e.cx,11,["carbon_cost",549,550])]),173895:e.r(44,e.pc_(11,479),e.ps(7,473),e.ref(38),e.ref(41),e.s,22,["baby","first-time mom","newborn",782,840,"toddler"],[473,804],[e.s_(2,803)]),173896:e.r(37,22,[335,"family holidays",782,803,895,"special-needs-child","teens"],e.ref(38),e.ref(41),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"families"),e.s_(2,473),e.s_(2,803)])),e.cx,5,["family_planning",478,473,"parenthood",804]),173897:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,47),e.s_(6,48),e.s_(6,49)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,193),e.s_(2,295),e.s_(2,409),e.s_(2,570),e.s_(2,715),e.s_(2,820)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"academic circles"),e.s_(2,193),e.s_(2,295),e.s_(2,409),e.s_(2,570),e.s_(2,"masters degree"),e.s_(2,717),e.s_(2,820)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,["booth school of business",295,"dental school","doctoral",409,544,546,"haas school of business","intend","intention","juris",664,"law school",715,717,719,"nyu stern",820,"post grad","postgrad",1059]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173898:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,9,[301,"buying property","customer",579,634,747,856]),e.ge(3)),2592e6),e.tw(e.cw(5,e.os(e.cx,13,["gs_predicts_buyingahome","gs_busfin_economy_housing"]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(e.s,7,[579,867]),e.os(e.cx,11,[867,"home_buying"]),e.ref(3),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"affordable housing"),e.s_(2,580),e.s_(2,581),e.s_(2,748),e.s_(2,866)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,581),e.s_(2,"issue of second homes"),e.s_(2,747),e.s_(2,"new homes"),e.s_(2,865)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173900:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,["business_school",546,"graduate_degree",571,717,715,896]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,48),e.s_(6,49)])),e.af_u(["properties","classifications_watson","concepts"],e.ref(39)),e.af_u(["properties","classifications_watson","keywords"],e.ref(39))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[295,356,431,544,546,664,717,"school of business","stern","studies","study",1027,1059]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173901:e.r(14,0,3,[e.ps(7,473),e.os(e.cx,11,[335,803,"child",479]),e.os(e.cx,5,["the_100_greatest_children\'s_books",336,"children\'s_books","child_grooming",804,334,335,479,473,478]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,51),e.s_(6,52),e.s_(6,100)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"child care"),e.s_(2,"child education"),e.s_(2,"child grooming"),e.s_(2,"childhood education"),e.s_(2,"children\'s online privacy protection act"),e.s_(2,"children\'s rights"),e.s_(2,"educational stage"),e.s_(2,"elder care"),e.s_(2,473),e.s_(2,803)])),e.af_i(["properties","classifications_watson","keywords"],e.o([e.s_(2,"child\'s imagination"),e.s_(2,335),e.s_(2,431),e.s_(2,433),e.s_(2,473),e.s_(2,"parental guidance"),e.s_(2,805),e.s_(2,895)]))],1,[335,433,473,"gandma","gandpa","grandfather","grandmother",804,805,"school age","school decisions"]),173902:e.r(60,e.ref(30),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,295),e.s_(2,356),e.s_(2,431),e.s_(2,"grammar school"),e.s_(2,"high school"),e.s_(2,719),e.s_(2,"preschool"),e.s_(2,840),e.s_(2,"school shooting"),e.s_(2,"school uniform"),e.s_(2,"secondary school"),e.s_(2,1027)])),5,["national_education_union_",478,571,"early_education",431,"university_college_london","us_college_admissions_scandal","university_and_college_union",1026,896],7,431),173903:e.r(19,[432,849,973,1026],e.ref(30),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,192),e.s_(2,430),e.s_(2,849),e.s_(2,974),e.s_(2,"teaching assisstant")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,396),e.s_(2,432),e.s_(2,849),e.s_(2,974)])),e.s,1,[192,356,430,432,570,849,895,973,1026,1027],e.cx,5,[192,432,"University",356,571,974,849,975]),173906:e.r(10,1,0,1,e.os(e.s,1,[265,268,270,384,413,731,771,773]),[e.os(e.s,1,[605,"https://www.bbc.com/news/technology"]),e.os(e.s,1,[261,265,266,268,270,384,"cryto currency",412,413,641,"investors","metverse",771,773]),e.os(e.cx,5,[260,772,"dodge_coin",265,385,269,731]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,265),e.s_(2,268),e.s_(2,353),e.s_(2,385),e.s_(2,731),e.s_(2,772)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,246),e.s_(2,"behalf of ftx customers"),e.s_(2,265),e.s_(2,266),e.s_(2,386),e.s_(2,"ftx collapse"),e.s_(2,731),e.s_(2,771),e.s_(2,871),e.s_(2,1073)]))],e.s,1,[261,265,266,268,270,271,292,353,355,384,"cryto exchange",412,413,"etf",456,457,462,524,640,644,645,978]),173907:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,1,["airdrop",260,265,266,268,270,271,274,286,311,352,353,354,355,384,394,407,412,413,455,456,457,515,"gas fee",524,670,698,730,850,851,"shitcoin","solana",944,984,1033,1034,1079]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(e.s,1,[260,265,266,268,270,274,286,311,352,353,354,"cold wallet",384,394,407,412,413,455,457,462,515,524,670,698,730,850,851,944,984,1033,1034,1079]),e.os(e.cx,5,[269,"ethereum",772,265,385]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,265),e.s_(2,353),e.s_(2,"crypto waller"),e.s_(2,385),e.s_(2,515)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,246),e.s_(2,265),e.s_(2,386),e.s_(2,871),e.s_(2,1073)]))]),e.ge(3)),3456e6)]),e.cw(0,e.ref(7),e.ge(1))])),173908:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([e.y(7,292),e.os(e.cx,5,[640,745,"tax_haven",494]),e.ref(45),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,493),e.s_(2,496),e.s_(2,"financial institution"),e.s_(2,"financial market"),e.s_(2,502),e.s_(2,"financial transaction"),e.s_(2,635),e.s_(2,745),e.s_(2,807),e.s_(2,843),e.s_(2,947),e.s_(2,"tax rate")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,245),e.s_(2,495),e.s_(2,641),e.s_(2,690),e.s_(2,760),e.s_(2,783),e.s_(2,947)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[151,243,265,373,384,397,484,493,499,500,501,635,640,"ira",690,745,747,783,793,807,930,946,972]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173909:e.r(30,[243,265,373,384,397,493,501,635,640,690,745,747,783,793,946,972],e.ps(7,745),["personal_investment",813,814],[e.s_(6,"/finance/bank/bank account"),e.s_(6,"/finance/bank/checks"),e.s_(6,57),e.s_(6,58),e.s_(6,82)],[e.s_(2,"deposit account"),e.s_(2,"financial transaction tax"),e.s_(2,641),e.s_(2,812),e.s_(2,"savings account"),e.s_(2,"tax planning")],[e.s_(2,245),e.s_(2,"checks"),e.s_(2,644),e.s_(2,"personal account"),e.s_(2,812)]),173910:e.r(30,[151,265,373,384,397,484,493,498,"institutional banking",635,640,690,"mobile banking",747,783,"online banking",807,886,930,946,972],e.ref(5),[814,494],[e.s_(6,30),e.s_(6,55),e.s_(6,57),e.s_(6,58),e.s_(6,"/personal finance/personal debt/personal loans"),e.s_(6,82)],[e.s_(2,"choice"),e.s_(2,497),e.s_(2,"money decisions"),e.s_(2,812)],[e.s_(2,245),e.s_(2,318),e.s_(2,329),e.s_(2,"choices"),e.s_(2,497),e.s_(2,812)]),173911:e.r(27,65,e.ref(4),e.ref(45),e.ref(2),36),173912:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,["analyst","schwab",272,907]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,30),e.s_(6,"/finance/investing/brokerages"),e.s_(6,"/finance/investing/options"),e.s_(6,"/finance/investing/portfolio")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"bloombergy"),e.s_(2,"certified"),e.s_(2,322),e.s_(2,"financial certification"),e.s_(2,907)])),e.af_u(["properties","classifications_watson","keywords"],e.s_(2,"financial certified"))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[151,198,243,267,272,322,493,537,645,712,"t. rowe price","td ameritrade"]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173913:e.r(35,1,[226,237,292,"discerning",630,636,640,644,645,668,"observant",810,894,925,978,"thoughtful",1069],e.os(e.s,1,[226,237,292,630,636,641,645,810,894,925,978,1069]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/business/business banking & finance/angel investment"),e.s_(6,"/business and finance/business/business banking & finance/venture capital"),e.s_(6,57),e.s_(6,82)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,493),e.s_(2,641),e.s_(2,757),e.s_(2,948),e.s_(2,1002)])),e.cx,5,["mutual_funds","ETF","personal_investments",745,"stock_market",640,645,638],["properties","classifications_watson","keywords"],[e.s_(2,495),e.s_(2,644),e.s_(2,745),e.s_(2,757),e.s_(2,1002)]),173914:e.r(18,[209,210,"black card","bought",300,308,"chase sapphire",374,"discover card","gold card","green card",714,"payment","platinum card",856,912,1049],e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,209),e.s_(2,302),e.s_(2,374),e.s_(2,"matercard"),e.s_(2,"online purchases"),e.s_(2,1049)])),e.cx,5,["loyalty_programs","points","platinum_card","black_card",856,"capital_one","gold_gard","AMEX",302,914,791,377,"credit_card",714,1049,"american_express"],e.s,1,[209,"american-express",210,"black-card",300,308,374,377,"gold-card",714,"platinum-card",856,1049],[e.s_(2,209),e.s_(2,374),e.s_(2,"jpmorgan chase"),e.s_(2,714),e.s_(2,857),e.s_(2,1049)],"/personal finance/personal debt/credit cards","/shopping/resources/loyalty programs"),173915:e.r(20,1,["bungalow","cap rate","foreclosure investment","home equity",582,"loan to value","ltv","mortgage broker",748,852,865,"rental lease","semi detached","sfdu","single family dwelling"],e.ref(3),[e.s_(2,580),e.s_(2,748),e.s_(2,852),e.s_(2,866),e.s_(2,"real estate trends"),e.s_(2,870),e.s_(2,879),e.s_(2,"subprime mortgage crisis")],[870,"real-estate","home_loan",879,"property_investor","mortgages",867,852],582,583,747,"new owners",852,865,870),173916:e.r(31,0,["cardiologist",408,"emergency accident","general practice",558,"hospital administrator","midwife",781],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/industries/healthcare industry"),e.s_(6,"/careers/nursing"),e.s_(6,"/science/medicine"),e.s_(6,"/society/welfare/healthcare")])),[823,"british_medical_association_(bma)","medical_research","medical-professional",781,"nhs_scotland","nhs_england","nhs","royal_college_of_nursing","doctors"],[e.s_(2,408),e.s_(2,441),e.s_(2,"medical career"),e.s_(2,719),e.s_(2,"nursing"),e.s_(2,823),e.s_(2,"scottish ambulance service")],[e.s_(2,"ambulances"),e.s_(2,408),e.s_(2,"emergency services"),e.s_(2,441),e.s_(2,558),e.s_(2,"medical professional"),e.s_(2,"nurses"),e.s_(2,823)]),173917:e.q(e.acqs([e.tw(e.cw(0,e.o([e.os(e.w,7,[1058,725,556]),e.os(e.cx,11,["personology",720,557,556]),e.os(e.cx,5,[724,"wellbeing",1058,1070,854,908,726,"ni_health",1075,334,559,556]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,69),e.s_(6,70),e.s_(6,98)])),e.af_u(["properties","classifications_watson","concepts"],e.ref(47)),e.af_u(["properties","classifications_watson","keywords"],e.ref(47))]),e.ge(3)),2592e6),e.tw(e.cw(0,e.ref(7),e.ge(3)),2592e6)])),173918:e.r(25,1,[e.os(e.w,7,[725,556]),e.os(e.cx,11,[557,556]),e.os(e.cx,5,[1058,1070,724,854,908,726,334,559,556]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,69),e.s_(6,70),e.s_(6,"/healthy living/nutrition"),e.s_(6,"/healthy living/wellness")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,556)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,556),e.s_(2,1058)]))],1,["healthy living","https://www.bbc.com/news/health","pilates",1004,"weights","yoga"]),173919:e.r(13,e.o([e.y(7,721),e.os(e.cx,11,[557,720]),e.os(e.cx,5,["clinical_trials","drug_trials","drugs_trade",819,"prescription_drugs"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,35),e.s_(6,44),e.s_(6,"/health and fitness/alternative medicine/herbs for health"),e.s_(6,"/healthy living/wellness\\talternative medicine/herbs and supplements"),e.s_(6,"/medical health/pharmaceutical drugs")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"drug trials"),e.s_(2,817),e.s_(2,"pharmacology"),e.s_(2,"prescription drug")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"pharmacy"),e.s_(2,"prescription painkillers"),e.s_(2,"tentative estimate of clinical hppd patients")]))]),0,1,[347,470,"medical trial",721,764],9,[347,"drug trial",470,764,"new medicine","new prescription","prescriptions"]),173920:e.q(e.acqs([e.tw(e.cw(0,e.o([e.pc_(11,527),e.os(e.cx,5,["genetic_research","genetic_engineering",529,"DNA","genetics"]),e.os(e.s,30,[406,525,529,530]),e.os(e.s,22,[406,525,529,530]),e.os(e.s,1,[406,525,529,530]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/science/genetics"),e.s_(6,"/science/medicine/genetics")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,406),e.s_(2,525),e.s_(2,529),e.s_(2,"genomic imprinting")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"dna test"),e.s_(2,525)]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),173921:e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,["coronavirus_public_inquiry","impact_of_the_covid-19_pandemic_on_children","coronavirus_lockdown_measures","coronavirus_pandemic","coronavirus_vaccines","coronavirus_testing","coronavirus_"]),e.os(e.s,1,[367,800]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,367),e.s_(2,691),e.s_(2,800)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,367),e.s_(2,691),e.s_(2,800),e.s_(2,1039)]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),173922:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.s,1,[225,262,347,437,483,543,659,742,775,776,815,816]),e.os(e.s,1,[225,262,264,"cdc",347,437,483,543,"j&j",659,742,775,776,815,816]),e.os(e.cx,5,["anti_vaccination",1038,"CDC","FDA",264,819,"johnson_&_johnson","J&J","GPhC",1075,"Eli_lilly","astrazenieca",742,815])]),e.ge(3)),2592e6),e.tw(e.cw(0,e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,818),e.s_(2,1038),e.s_(2,1039)])),e.ge(3)),2592e6),e.tw(e.cw(0,e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"antibiotics"),e.s_(2,"bio-tech"),e.s_(2,264),e.s_(2,742),e.s_(2,815),e.s_(2,817),e.s_(2,818),e.s_(2,1038),e.s_(2,1039),e.s_(2,"world health organization")])),e.ge(3)),2592e6),e.tw(e.cw(0,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/industries/biotech and biomedical industry"),e.s_(6,35),e.s_(6,44)])),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173923:e.r(39,e.cw(0,e.ref(7),e.ge(1)),72576e6,0,e.a([e.os(e.cx,5,["plant_based_diet","healthy_diet","vegan",1041]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/food & drink/vegan diets"),e.s_(6,"/food & drink/vegetarian diets"),e.s_(6,67),e.s_(6,68)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,827),e.s_(2,1040),e.s_(2,1042)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,827),e.s_(2,"vegan offerings"),e.s_(2,1041)])),e.os(e.cx,11,[557,986])]),e.ge(3)),173924:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,9,["a.lange & shne","alange-soehne","alpina",215,"arnold & son","audemars","bamford","baume & mercier","bell & ross","blancpain","bovet fleurier","breitling","bremont",290,"bulova","cartier","chopard","f.p.journe","girard-perregaux","glashtte",553,"hamilton","hublot","iwc","jaeger-lecoultre","jaquet droz","junghans","laurent ferrier","liv watches","longines",696,"maurice de mauriac","maurice lacroix","mont blanc","montblanc","nordgreen",788,"oris","panerai","parmigiani fleurier","patek","piaget","rado","ressence","roger dubuis",884,"seiko","tag heuer",990,"tissot","tudor","ulysse nardin","vacheron","van cleef","vincero","weiss","zenith"]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.pc_(5,1054),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,119),e.s_(6,"/style & fashion/men\'s fashion/men\'s accessories/men\'s jewelry and watches"),e.s_(6,"/style & fashion/women\'s fashion/women\'s accessories/women\'s jewelry and watches"),e.s_(6,126),e.s_(6,"fashion/watches")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,699),e.s_(2,992),e.s_(2,1054),e.s_(2,1077)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,699),e.s_(2,788),e.s_(2,"patek philippe"),e.s_(2,884),e.s_(2,992),e.s_(2,1054),e.s_(2,1077)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173925:e.r(5,1,e.ref(12),0,e.a([e.ref(29),e.ref(58),e.ref(15),e.ref(57),e.ref(48)]),3),173926:e.r(37,9,["3.1 phillip lim","alaa","alexander mcqueen","amina muaddi","apc",215,"balenciaga","balmain","bottega veneta","brother vellies","burberry",321,"chlo","coach","cline","d&g","dior","dolce & gabbana",486,"givenchy",553,"hermes","herms","hilde palladino","hspalladino","jill sander","jw anderson","karl","kate spade","loewe",696,"lv","marc jacobs","michael kors","mulberry","off---white","off-white","prada","proenza schouler","staud","stella mccartney","tom ford","valentino","versace","ysl","yves saint laurent"],e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,119),e.s_(6,"/style & fashion/women\'s fashion/women\'s accessories/women\'s handbags and wallets"),e.s_(6,121),e.s_(6,126)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,554),e.s_(2,700),e.s_(2,702),e.s_(2,998)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"bucket bag"),e.s_(2,"designers"),e.s_(2,554),e.s_(2,"high fashion"),e.s_(2,700),e.s_(2,702),e.s_(2,"renowned designer"),e.s_(2,998),e.s_(2,"work bag")])),e.cx,17,["work_tote","handbags","Shopping","Luxury-retail"]),173927:e.r(53,3,40,e.ref(7),3),173928:e.r(3,[e.tw(e.cw(1,e.os(e.s,9,[506,699,914,1007]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.y(10,390),e.ps(7,390),e.os(e.cx,11,[951,391]),e.os(e.cx,5,[914,"a-levels",1020,285,481,686]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,119),e.s_(6,126)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"custom made"),e.s_(2,503),e.s_(2,561),e.s_(2,699),e.s_(2,"premier travel"),e.s_(2,951)]))]),e.ge(3)),2592e6)],e.a([e.y(10,1007),e.af_u(["properties","classifications_watson","categories"],e.s_(6,138))]),3),173929:e.r(56,e.os(e.cx,11,[391,951]),e.ps(7,951),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/style & fashion/designer clothing"),e.s_(6,"/style & fashion/fashion trends"),e.s_(6,119),e.s_(6,"/style & fashion/men\'s fashion"),e.s_(6,"/style & fashion/street style"),e.s_(6,"/style & fashion/women\'s fashion"),e.s_(6,123),e.s_(6,124),e.s_(6,"/style and fashion/footwear"),e.s_(6,125),e.s_(6,127),e.s_(6,"/style and fashion/swimwear")])),5,["men\'s_fashion","women\'s_fashion",911,350,"sweaters","skirts","shirts",801,"dresses","clothes","clothing_industry","designer_fashion","haute couture",1012,686,481,480],["properties","classifications_watson","concepts"],["properties","classifications_watson","keywords"],[e.s_(2,348),e.s_(2,350),e.s_(2,415),e.s_(2,480),e.s_(2,910),e.s_(2,"shoe"),e.s_(2,915),e.s_(2,920),e.s_(2,"slim-fit pants"),e.s_(2,951),e.s_(2,967)],[e.s_(2,348),e.s_(2,350),e.s_(2,415),e.s_(2,480),e.s_(2,801),e.s_(2,910),e.s_(2,911),e.s_(2,915),e.s_(2,920),e.s_(2,967)]),173930:e.r(44,e.ref(46),e.os(e.s,7,[216,389,390,954]),e.af_u(["properties","classifications_watson","categories"],e.s_(6,100)),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,216),e.s_(2,388),e.s_(2,533),e.s_(2,958),e.s_(2,"sustainable living")])),e.cx,11,["culture_&_identity",550,549,961,956,346],["effects_of_global_warming",216,390,962,427],[e.s_(2,"climate conscious"),e.s_(2,388),e.s_(2,427),e.s_(2,"global demand"),e.s_(2,"global interest - for"),e.s_(2,533),e.s_(2,960),e.s_(2,"travel lover")]),173931:e.r(56,e.ref(46),e.os(e.cx,5,["severe_weather","sustainable_agriculture",962,955,551,"green_economy",549,"paris_climate_agreement","uk_climate_change_protests","climate_guardians",346,"climate_change",344]),e.os(e.s,7,[516,954]),11,["frozen_continent",519,"green_getaways",549,550,346,956,961],["properties","classifications_watson","categories"],["properties","classifications_watson","concepts"],[e.s_(6,31),e.s_(6,43),e.s_(6,"/news and politics/weather"),e.s_(6,"/science/ecology"),e.s_(6,97),e.s_(6,99)],[e.s_(2,"bbc earth"),e.s_(2,345),e.s_(2,424),e.s_(2,"green livng"),e.s_(2,955),e.s_(2,"sustainable agriculture"),e.s_(2,958),e.s_(2,"temperate climate")]),173932:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.s,1,[284,292,364,423,"eco living",516,547,638,825,955,957]),e.ref(46),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/business/business utilities"),e.s_(6,31),e.s_(6,36),e.s_(6,41),e.s_(6,43)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"business and technology education council"),e.s_(2,"business ethics"),e.s_(2,331),e.s_(2,345),e.s_(2,"climate solutions")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"business sustainability"),e.s_(2,329),e.s_(2,"climate challenge"),e.s_(2,345),e.s_(2,403),e.s_(2,"environmental sustainability"),e.s_(2,"greener practices"),e.s_(2,960),e.s_(2,"various sustainability initiatives")]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[284,364,423,516,547,638,825,955,957]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),173936:e.r(66,1,["https://www.bbc.com/storyworks/travel/tokyo-for-the-soul/tasting-satoyama-a-guide-to-eating-mindfully-in-tokyo","https://www.bbc.com/storyworks/travel/tokyo-for-the-soul/the-tokyo-you-nearly-missed-a-writers-personal-guide-for-soul-searchers"]),174344:e.r(8,0,1,1,[222,889,"sightsee",1007,1013,"visit"],[e.ps(7,1008),e.os(e.w,15,["Taiwan","Macao","Yemen","Vietnam",185,"United Arab Emirates",180,179,"Timor-Leste",176,"South Korea","Saudi Arabia",173,"Qatar","Philippines",170,"Oman","Nepal","Myanmar","Mongolia","Maldives","Lebanon","Laos",168,167,"Kuwait","Jordan","Israel","Iraq","Indonesia",161,"Egypt",158,"Cocos Islands","Christmas Island","Cambodia","Brunei","Bhutan","Banglasdesh","Bahrain",156,154,"Sri Lanka","China",165,"Thailand","Malaysia","Hong Kong","Singapore",162])],[e.y(10,1007),e.pc_(11,"japan-untold-stories"),e.ps(7,1008),e.af_u(["properties","classifications_watson","categories"],e.s_(6,"travel/asia")),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"central asia"),e.s_(2,"great wall of china"),e.s_(2,1007)]))]),174345:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.y(10,1007),e.os(e.cx,5,[473,803,883,"cruise_ships",929,254]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,144),e.s_(6,"/travel/travel type/family travel"),e.s_(6,148),e.s_(6,"/travel/vacation rentals")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,473),e.s_(2,"seaside resort"),e.s_(2,"ski resort"),e.s_(2,1037)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,253),e.s_(2,"car trip"),e.s_(2,476),e.s_(2,"family vacation"),e.s_(2,882),e.s_(2,918)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,["american airlines",253,476,882,"roadtrip",918,"travel for holidays","united",1037]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),174346:e.r(13,e.a([e.y(10,1007),e.y(7,1031),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,137),e.s_(6,"/travel/tourist destinations"),e.s_(6,144),e.s_(6,"/travel/travel locations/north america travel"),e.s_(6,147)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,306),e.s_(2,473),e.s_(2,482),e.s_(2,732),e.s_(2,750),e.s_(2,774),e.s_(2,803),e.s_(2,"ski"),e.s_(2,1007),e.s_(2,1024)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"beach areas"),e.s_(2,306),e.s_(2,"family trip"),e.s_(2,482),e.s_(2,732),e.s_(2,750),e.s_(2,774),e.s_(2,918),e.s_(2,1007),e.s_(2,1024)]))]),1,0,["alaska","america",306,"hawaii",1007,1024,"usa"],1,[306,732,1024,1030]),175012:e.r(73,3269284748),175038:e.r(66,1,["https://www.bbc.com/storyworks/hong-kong-the-worlds-stage/breaking-boundaries-cueing-destiny","https://www.bbc.com/storyworks/hong-kong-the-worlds-stage/breaking-boundaries-sinking-shots","https://www.bbc.com/storyworks/hong-kong-the-worlds-stage/from-the-trapeze-to-blockchain-tech-why-i-made-hong-kong-my-home"]),175049:e.r(67,1,["Fig+/cye"]),175197:e.r(67,1,["oeuQuyD7"]),175448:e.r(16,1,9,[606,"https://www.bbc.com/sport/africa"],e.os(e.w,7,["africa-live",199]),e.os(e.cx,5,["african-american_civil_rights_movement","central_african_republic","african_national_congress","africa_economy",199]),["properties","classifications_watson","concepts"],e.s_(2,153)),175451:e.q(e.acqs([e.tw(e.cw(0,e.o([e.y(7,230),e.pc_(5,230),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,155))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),175454:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.y(7,458),e.os(e.cx,5,["european_union",458]),e.af_u(["properties","classifications_watson","entities"],e.o([e.s_(2,459),e.s_(2,"european convention on human rights"),e.s_(2,"european court of human rights"),e.s_(2,460),e.s_(2,461)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,459),e.s_(2,"european council"),e.s_(2,460),e.s_(2,461)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,["ecb","euro","the eu"]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),175456:e.r(42,e.pc_(5,"ghana"),e.af_u(["properties","classifications_watson","keywords"],e.s_(2,"Ghana"))),175458:e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(e.w,7,["travel_destinations-africa",199]),e.os(e.cx,5,[890,199]),e.os(e.s,1,[890,"tour operator"]),e.af_u(["properties","classifications_watson","categories"],e.s_(6,"travel/africa"))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),175459:e.q(e.acqs([e.tw(e.cw(0,e.a([e.y(7,199),e.pc_(5,"nigeria"),e.af_u(["properties","classifications_watson","keywords"],e.s_(2,"Nigeria"))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),175461:e.q(e.acqs([e.tw(e.cw(0,e.o([e.y(7,830),e.pc_(5,830),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,77),e.s_(6,"/news and politics/politics")])),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,"Politics"))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),175553:e.r(51,e.os(e.cx,5,["paragliding-and-paramotors",929,918,902,"mountaineering",196]),e.ref(16),7,197,e.s,1,[196,"adventurous",291,"excite","experience","feat","fun","inspiration","inspire","involve","moment","mountain climbing","pleasure",989,1013],["properties","classifications_watson","concepts"],e.o([e.s_(2,"adventure time (season 2)"),e.s_(2,989)])),175555:e.q(e.acqs([e.tw(e.cw(0,e.a([e.y(7,491),e.os(e.cx,5,["the_100_greatest_american_films","the_100_greatest_films_of_the_21st_century","the_100_greatest_films_directed_by_women",258,"the_100_greatest_foreign-language_films",307,997,411,1044,694,"film_industry",621,"cult_films","film_reviews","film_history","talking_movies",342,490]),e.os(e.cx,11,["the_women_who_changed_cinema","films_that_were_never_made"]),e.ref(53)]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),175557:e.r(46,e.y(7,491),e.os(e.cx,5,[981,336,"the_100_greatest_tv_series_of_the_21st_century",752,"reality_tv","tv_review","tv_drama"]),e.cx,17,["Reality-TV","TV-drama",177],["properties","classifications_watson","categories"],e.o([e.s_(6,134)])),175616:e.r(66,1,["https://www.bbc.com/storyworks/future/beyond-silicon-shores-taiwan/how-taiwan-is-shaping-an-ai-fuelled-industry-4-revolution","https://www.bbc.com/storyworks/future/beyond-silicon-shores-taiwan/secrets-from-a-tech-island","https://www.bbc.com/storyworks/future/beyond-silicon-shores-taiwan/the-legend-of-innovation"]),175771:e.r(71,[3265394144,3263033515,3252737407,3245603031]),175798:e.r(46,e.ps(7,1053),e.af_u(["properties","classifications_watson","entities"],e.ref(31)),e.cx,5,["_prince_of_wales",190,1053],["properties","classifications_watson","keywords"],e.ref(31)),175800:e.r(28,1,[774,"north-america","us-congress","us-economy"],e.y(7,1031),e.os(e.cx,5,["us_election_2024","us_supreme_court","us_armed_forces","us_gun_laws","us_immigration","us_&_canada","us_congress","us_politics",1032,"us_economy",1025]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/news and politics/national news"),e.s_(6,81)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,306),e.s_(2,774),e.s_(2,1024)]))),175801:e.r(48,[239,931,422,791],[e.s_(2,422),e.s_(2,790)]),175803:e.r(50,10,765,17,[978,"Social-media-influencers","BBC-Trending"],80),175804:e.r(61,e.ref(56),5,["uk_supreme_court","uk_legislation",1021,"uk_immigration","uk_newspapers","uk_government","uk_parliament","uk_finance","uk_farming","uk_banking","uk_economy","uk_visas","uk_taxes","uk_aid"],1019,e.s,1,["news/england","news/live/uk-england","news/uk-england"]),175806:e.q(e.acqs([e.tw(e.cw(0,e.a([e.y(7,222),e.os(e.cx,5,["north_korea","south_korea",889,"vietnam","philippines",655,"asia_migrant_crisis",223,222]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,222),e.s_(2,"in the news")]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),175808:e.r(43,e.y(7,199),e.pc_(5,242),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,"Bangladesh")),e.af_u(["properties","classifications_watson","keywords"],e.s_(2,242))),175810:e.r(17,1,3,1,[196,259,305,"climbing","free-climb",572,1007],e.os(e.w,7,[197,196]),e.os(e.cx,11,["travel_well",1076,"adventure_&_experience","travel_journeys"]),e.os(e.cx,5,[196,405,"paragliding_and_paramotors",305,902,"free_climbing",572]),e.ref(16)),175812:e.r(32,e.ref(18),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,"Travel")),[1076,1074,985],[929,254,860,202,749,"hotels",426,1007],[211,241,253,395,426,505,506,590,749,918,941,1007]),175814:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,9,["air travel",205,505,"fly","travel by air"]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(e.cx,5,["Virgin-airlines","qatar_airways","ethiopian_airlines_crash","southwest_airlines","british_airways","american_airlines","united_airlines","japan-airlines","delta_airlines",202]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,145),e.s_(6,"/travel/travel type/air travel")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"air-travel"),e.s_(2,205)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),175816:e.r(45,e.pc_(5,298),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,137),e.s_(6,147)])),["properties","classifications_watson","concepts"],e.s_(2,"business-travel")),175818:e.r(15,[211,"train travel",1045,1048],e.os(e.s,1,[211,1003,1045,1048]),[e.s_(6,"/travel/transports/train travel"),e.s_(6,"/travel/travel type/rail travel")],[211,"great_western_railway","chiltern_railways",860,1003]),175820:e.r(32,e.os(e.s,1,["50 reasons",196,205,241,253,"bed and breakfast","destination","discover",426,507,589,590,"lodgings",749,"railway",918,1005,1007,"untold america"]),e.ref(18),["the_world_of_tomorrow","world-changing_ideas",1076,1074,985,"50_reasons_to_love_the_world"],[860,202,883,"disabled_travel","smart_travel","travellers","travelodge","travel_insurance","getaways",590,"travel_&_leisure_industry"],[211,241,253,259,395,426,505,506,572,590,749,918,941,1007]),175822:e.r(15,["agean",458,649,"mediterranean","scotland",1007,1019,"united kingdom",1053],e.pe(7,"travel_destinations-europe"),[e.s_(6,140),e.s_(6,141),e.s_(6,142),e.s_(6,143),e.s_(6,"/travel/travel locations/europe travel")],["travel-europe","eurostar"]),175824:e.r(58,e.ps(22,"Engineering"),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,32),e.s_(6,"/business and finance/industries/construction industry"),e.s_(6,34),e.s_(6,40),e.s_(6,96)])),5,["construction_industry","steel_industry",400,"materials_science","aerospace","physics",628,"engineering_marvels",448],e.cx,11,["sunken_civilisation","future_thinking"]),175826:e.r(49,["nationwide_building_society","trades_union_congress",448,"arts_&_architecture",213,"trade_unions"],e.o([e.s_(2,"architect"),e.s_(2,"construction"),e.s_(2,"electrical engineering"),e.s_(2,"trades union congress")]),[213,289,"business owner","contractors","electrician","painters","plumber","property developer",873,"renovation","renovator","repairer","tradesperson"],[e.s_(6,32),e.s_(6,34),e.s_(6,40),e.s_(6,"/home & garden/home improvement"),e.s_(6,"/home & garden/remodeling & construction"),e.s_(6,88),e.s_(6,96)]),175828:e.r(47,e.cx,5,[1055,631,1017,991,"meta",472,"generation_z",736,931,726,"it_girls"],e.s,7,[390,516,978],516,"generation z",736,"social network"),175830:e.r(36,9,[289,"carbon footprint",372,402,"envionment","global warming",826,"sea level",955,976],e.y(7,978),["humanity","good_cause",1055,1050,627,"the_charity_commission",978],[e.s_(2,"charity (practice)"),e.s_(2,"humanitarianism"),e.s_(2,978)]),175832:e.r(33,["content builder",372,401,976],e.y(7,978),[289,372,401,826,976],[e.s_(2,626),e.s_(2,"source code")]),175835:e.r(35,9,["enthusiast",894,898,978],e.y(12,835),e.os(e.cx,11,[899,550,716]),e.os(e.cx,5,[899,1055,978,"women_in_technology"]),e.s,7,[898,978],["properties","classifications_watson","categories"],[e.s_(6,93),e.s_(6,129),e.s_(6,133)]),175837:e.r(21,9,[220,323,345,978,1056],["properties","classifications_watson","keywords"],[e.s_(6,94),e.s_(6,"/science/computer science/software engineering"),e.s_(6,128),e.s_(6,130)],[e.s_(2,"chat gpt"),e.s_(2,977),e.s_(2,978)],7,978,[221,978]),175840:e.r(17,0,2,1,[195,212,"car lover",362,"early adopter","first adopter","google pixel","influence","ipad",652,668,683,"microsoft",848,926,971,976],e.y(7,978),e.os(e.cx,5,["consumer_behaviour","influencers","medical_technology","military_technology",1050,"financial_technology",627,221,"3d_technology",1055,758,978]),e.ref(1),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"business reading"),e.s_(2,466),e.s_(2,"knowledge"),e.s_(2,978)]))),175842:e.r(36,1,[195,212,"asus",343,"cloud computing","cloud service",362,387,"data scientist","dell",555,652,"laptop","leica",683,847,856,926,"smartphone",932,971,976,"thinkpad"],e.ref(54),["telecommunication",555,932,"cloud services","it service",847,978,980,"information_commissioner\'s_office",627],[e.s_(2,"accumulator (computing)"),e.s_(2,"business computing"),e.s_(2,"business system"),e.s_(2,465),e.s_(2,466),e.s_(2,626),e.s_(2,932),e.s_(2,"user (computing)")]),175844:e.r(38,[313,"energy utility","ericsson","fdi",485,514,"internet",692,"manufacturing","maritime",737,"network computing","ports","raillway",861,909,1001,"transportation",1028],[313,"exports",485,514,"imports",692,737,861,909,1001,"trucking industry",1028],["trucking",737,"Fedex","UPS","freight_transport","shipping_industry"],["properties","classifications_watson","categories"],["properties","classifications_watson","concepts"],[e.s_(6,"/business and finance/business/logistics"),e.s_(6,33),e.s_(6,"/business and industrial/logistics")],[e.s_(2,692),e.s_(2,"mail"),e.s_(2,1006)]),175995:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/invest-in-smart-bangladesh/financial-inclusion","https://www.bbc.com/storyworks/capital/investing-in-smart-bangladesh/mobilising-bangladeshs-demographic-dividend","https://www.bbc.com/storyworks/specials/investing-in-smart-bangladesh/the-innovation-powerhouse/ has context menu"]),176180:e.r(66,1,["https://www.bbc.com/storyworks/travel/tokyo-what-the-future-holds/a-magnet-for-diverse-art-talent","https://www.bbc.com/storyworks/travel/tokyo-what-the-future-holds/the-worlds-next-generation-digital-playground"]),176425:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/green-transformation/decarbonisation-japans-path-to-industrial-competitiveness","https://www.bbc.com/storyworks/advertiser-content/green-transformation/decarbonising-japan-an-opportunity-for-renewed-competitiveness"]),176427:e.r(66,1,["https://www.bbc.com/storyworks/travel/wakayama-prefecture/eat-your-way-through-toretore-ichiba","https://www.bbc.com/storyworks/travel/wakayama-prefecture/splendours-of-the-sea"]),176558:e.r(66,1,["https://www.bbc.com/storyworks/travel/isle-of-rejevunation/a-gourmet-getaway-rediscovering-sentosas-food-scene","https://www.bbc.com/storyworks/travel/isle-of-rejevunation/a-walk-on-the-wild-side-discover-sentosa-singapores-tropical-idyll"]),176883:e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(e.cx,11,["power_of_an_hour","owning_your_time","psychology_of_work","the_future_of_work","worklife_101"]),e.os(e.cx,5,[312,"work"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,45),e.s_(6,"/society/work")]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),176884:e.r(55,e.os(e.cx,5,["long_reads","kindlle","e-book",277,"reading"]),e.ps(1,"https://www.bbc.com/culture/books"),e.ps(7,277),["properties","classifications_watson","categories"],[e.s_(2,277),e.s_(2,"readers")],6,29),176887:e.r(57,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,73),e.s_(6,"/video gaming")])),e.cx,5,["video-game","nintendo","games_workshop",828,"xbox",520],["properties","classifications_watson","concepts"],e.s_(2,"Video game")),176888:e.r(58,e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"art-history"),e.s_(2,822),e.s_(2,"picture book")])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,"photographer"),e.s_(2,822)])),5,[218,822],e.w,7,["in_pictures",822]),176889:e.r(40,e.os(e.s,15,["albania","andorra","armenia","austria","azerbaijan","belarus","belgium","bosnia and herzegovina","bulgaria","croatia","cyprus","czechia","denmark","estonia","faroe islands","finland","france","georgia","germany","gibraltar","greece","greenland","hungary","iceland",649,"italy","kazakhstan","kosovo","kyrgyzstan","latvia","liechtenstein","lithuania","luxembourg","macedonia","malta","moldova","monaco","montenegro","netherlands","norway","poland","portugal","romania",889,"san marino","serbia","slovakia","slovenia","spain","sweden","switzerland","tajikistan","turkey","turkmenistan","ukraine","uzbekistan","vatican city"]),1,e.ge(1),7,e.cw(0,e.as(e.x,15,["Kosovo","Greenland","Gibraltar","Faroe Islands","Vatican City",185,181,180,179,176,"Switzerland","Sweden","Spain","Slovakia","Serbia","San Marino",173,"Romania","Portugal","Poland","Norway","Netherlands","Montenegro","Monaco","Moldova","Malta","Macedonia","Luxembourg","Lithuania","Liechtenstein","Latvia",168,167,"Italy",164,"Iceland","Hungary","Greece","Germany",161,160,"Finland","Estonia","Denmark","Czechia",158,"Croatia","Bulgaria","Bosnia and Herzegovina","Belgium","Belarus",156,"Austria",154,"Andorra","Albania","Slovenia"]),e.ge(1)),1728e5),176890:e.r(48,["holiday shopping",914,"ebay","black_friday",791],[e.s_(2,"black friday"),e.s_(2,"christmas and holiday season"),e.s_(2,790)]),176891:e.r(40,e.y(15,162),1,e.ge(1),7,e.cw(0,e.z(15,162),e.ge(1)),864e5),176892:e.r(25,1,[e.os(e.cx,5,[622,404]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"diversity training"),e.s_(2,"indigenous peoples")]))],9,["bipoc","black and brown people","black lives matter","blm",404,622]),176893:e.q(e.acqs([e.ocqs([e.scq(e.tw(e.sw(4,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),12096e5),e.vq(e.sw(8,e.t,["properties","engaged_time"])),e.ge(120)),e.scq(e.tw(e.cw(4,e.pge(28,90)),2592e6),e.vq(e.sw(8,e.t,["properties","engaged_time"],e.ge(90))),e.ge(3))]),e.cw(0,e.ref(7),e.ge(1))])),176894:e.r(59,e.ref(53),5,[621,411,949,"oscars",342,"movies",490],[410,"longshots",491],e.s,1,["bbc.com/reel/longshots",603]),176895:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,[351,280,688,320,531,"scotch_whisky","alcohol_industry",207,1067,256]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/food & drink/alcoholic beverages"),e.s_(6,62),e.s_(6,"/health and fitness/addiction/alcoholism")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,207),e.s_(2,256),e.s_(2,"drinking"),e.s_(2,688),e.s_(2,"whisky"),e.s_(2,1067)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.a([e.os(e.s,1,[207,256,278,280,320,416,531,688,811,888,"rye",983,"vodka",1060,1067]),e.os(e.s,9,[207,256,278,280,320,351,531,688,"mocktail",811,888,983,1060,1067])]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),176896:e.r(14,1,3,[e.os(e.s,1,[304,419,420,"jubilee",662,723,"prince charles",841,"prince phillip",842,"queen","royal family","royals","sussex","windors"]),e.os(e.cx,5,[190,"princess_beatrice",1021,"monarchy","meghan","prince_william","princess_anne","prince_edward","prince_philip","prince_andrew","king_charles_iii","prince_george","prince_louis","prince_harry","queen_camilla","queen_victoria","queen_elizabeth_ii",1066,"royal_family"])],1,["british royal",304,"coronation",419,420,662,"king charles","megan markle",723,841,842,"queen camilla","queen consort","the royals",1066]),176897:e.r(5,1,e.pe(1,"https://www.bbc.com/news/uk"),0,e.a([e.ps(7,1019),e.os(e.cx,5,["united_kingdom",1019]),e.ref(56)]),3),176898:e.r(19,["anchor","broadcasting","disc jockey","dj","editor","employer","employment","host",624,"information services","journalist",708,"mixed media",765,"occupation",848,855,"radio","reporter","worker",1078],e.os(e.cx,5,[312,855,711,"media"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/business/marketing and advertising"),e.s_(6,"/business and finance/industries/advertising industry"),e.s_(6,"/business and industrial/advertising and marketing")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,711),e.s_(2,"radio host"),e.s_(2,"social media"),e.s_(2,1071)])),e.w,7,[979,"social-media"],e.cx,11,["grand_ideas","missed_genius","future_inc","imagineering"]),176899:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.z(25,153),e.pc_(5,199),e.os(e.w,7,["worldafrica",199]),e.af_u(["properties","classifications_watson","entities"],e.s_(2,153))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.ps(1,606),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),176900:e.r(52,e.s,1,[576,"latin culture","latin heritage","latina","latino","latinx"],7,"latin_america",["hispanic_heritage",679],[e.s_(2,576),e.s_(2,679)]),176901:e.r(51,e.af_u(["properties","classifications_watson","categories"],e.s_(6,"/food and drink/cuisines/japanese cuisine")),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,165)),12,835,e.cx,5,["tokyo","anime","japan_2020","japanese_yen_(jpy)",655],["properties","classifications_watson","keywords"],e.s_(2,165)),176902:e.r(59,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/art and entertainment"),e.s_(6,"/events and attractions"),e.s_(6,"/fine art"),e.s_(6,78),e.s_(6,79),e.s_(6,"/pop culture"),e.s_(6,134)])),11,["design_icons","heroes_of_design",755,216],[755,"art-design",277,951,450,451],e.cx,5,[981,"itv",390,949,277,490,342,987,753,240,400,951,755,792,"entertainment_news",216]),176903:e.r(63,160,160),176904:e.r(3,[e.cw(1,e.bsc_(9,["kvUl5pmh"]),e.ge(1)),e.cw("FormSubmission",e.a([e.ps(["form","action"],"search"),e.af_u(["properties","form","properties"],e.o([e.s_(["value"],306),e.s_(["value"],1024),e.s_(["value"],1030)]))]),e.ge(1)),e.tw(e.cw(0,e.a([e.ps(7,1031),e.os(e.cx,5,[306,1025])]),e.ge(1)),2592e6)],e.as(e.x,15,[306,184]),1),176905:e.q(e.acqs([e.tw(e.cw(2,e.t,e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),176906:e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,["production","producer",931,855,"digital_journalism",660]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/industries/publishing industry"),e.s_(6,"/business and industrial/publishing")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"executive producer"),e.s_(2,660),e.s_(2,855),e.s_(2,1078)]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),176907:e.r(49,["benefits","payroll","career-advice","recruiter","job-retention",574,1004,"human-resources",575,"recruitment"],e.s_(2,"Human resource management"),["coaching","enlistment","enrollment",574,575,"human resources",624,"job function","job role","job title","profession group",848,"recruit","servicing",1004,1071],[e.s_(6,"/business and finance/business/human resources"),e.s_(6,"/business and industrial/business operations/human resources/compensation and benefits"),e.s_(6,"/business and industrial/business operations/human resources/payroll services")]),176908:e.r(63,184,184),176910:e.r(61,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,14),e.s_(6,79)])),11,[938,755],755,e.cx,5,["greatest_hip-hop_songs_of_all_time","official_uk_music_charts",752,"glastonbury_festival",755]),176911:e.r(21,1,[216,240,"consume",390,753,"musical theater",792,822,"reader"],["properties","classifications_watson","concepts"],[e.s_(6,5),e.s_(6,"/art and entertainment/dance/modern dance"),e.s_(6,14),e.s_(6,20),e.s_(6,29),e.s_(6,"/fine art/dance"),e.s_(6,"/fine art/opera"),e.s_(6,60),e.s_(6,79)],[e.s_(2,240),e.s_(2,"book"),e.s_(2,390),e.s_(2,"film festival"),e.s_(2,753),e.s_(2,"music festival"),e.s_(2,792),e.s_(2,822),e.s_(2,987)],10,390,[621,400,"culture_in_quarantine",755,216,218,"galleries",822,987,792,753,240,831,390]),176912:e.r(52,e.w,7,[451,491],10,"reel",["OTT","VOD","CTV",949,"apple+","disney_plus","disney_+",615,"amazon_prime","spotify","streaming_service",763],[e.s_(2,"amazon.com"),e.s_(2,"apple music"),e.s_(2,"ctv"),e.s_(2,"disney channel"),e.s_(2,615),e.s_(2,763),e.s_(2,"ott"),e.s_(2,"streaming media"),e.s_(2,"vod")]),176913:e.r(18,[366,"cuisine","dining",507,"organic"],e.os(e.cx,11,[986,"culinary_roots",985,"taste_of_tomorrow","asia_fast_food","forgotten_foods","soul_food","food_&_hospitality","food_wars","food_fictions"]),e.w,7,["worlds-table","food-hospitality"],e.cx,5,["hospitality","just_eat_takeaway","takeaway_food","cooking_shows",880,507],[e.s_(2,"baking"),e.s_(2,366),e.s_(2,416),e.s_(2,507),e.s_(2,880),e.s_(2,1040),e.s_(2,1042)],"/food & drink",61),176914:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.cx,5,[341,"cronolgy",526,218,"historic_england","natural_history_museum","black_history",577]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(e.s,1,["annals",341,"cronology","diary","historical",577,"legend","medival","rennaiscance"]),e.os(e.cx,11,["ancient_engineering_marvels",527,"homo_spaciens",938,"hidden_histories","in_history"]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"ancient greece"),e.s_(2,"ancient rome"),e.s_(2,526),e.s_(2,577)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),176915:e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,9,["charitable","charity",414,"donor",797,"philanthropist",821,"red cross",1022]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(e.cx,5,[414,"donate","care_quality_commission","red_cross",821,1022,797,"blood_donation","organ_donation","charities"]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"charitable organization"),e.s_(2,"charity shop"),e.s_(2,414),e.s_(2,"giving"),e.s_(2,797),e.s_(2,821),e.s_(2,1022)]))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),176916:e.q(e.acqs([e.ocqs([e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],89493)),e.cw(6,e.pe(16,89493)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],89494)),e.cw(6,e.pe(16,89494)),e.ge(1)),e.tw(e.cw(0,e.a([e.os(e.cx,5,[736,"millennial_bosses","millennial"]),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,"Millennials"))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),176917:e.r(42,e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/business and finance/industries/hospitality industry"),e.s_(6,"/business and industrial/hospitality industry/event planning")])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,"industry events"),e.s_(2,"trade events")]))),176918:e.r(62,e.os(e.w,14,["livecnncricket",378]),"sport_cricket_content",["bat","bowler",378,"wicket"],["properties","classifications_watson","categories"],[e.s_(6,106)]),176919:e.r(41,e.cw(0,e.ref(7),e.ge(1)),e.o([e.pe(8,"sport_golf_content"),e.y(14,538),e.os(e.s,1,[538,"pga","ryder cup","the masters"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,109)]))]),3,e.y(12,835),e.ge(1)),176920:e.q(e.acqs([e.tw(e.cw(0,e.o([e.pe(8,"sport_tennis_content"),e.y(14,982),e.pc_(5,"wimbledon"),e.ps(1,"sport/tennis"),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,116)]))]),e.ge(3)),2592e6),e.cw(0,e.a([e.y(12,835),e.ref(7)]),e.ge(1))])),176921:e.r(43,e.y(12,835),e.y(8,943),e.os(e.s,1,[508,837,"soccer",1072]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,115)]))),176922:e.r(43,e.y(12,835),e.ps(8,"sport_americanfootball_content"),e.os(e.cx,5,["national_football_league","NFL"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/sports/american football"),e.s_(6,"/sports/college sports/college football"),e.s_(6,108)]))),176923:e.r(62,e.y(14,392),"sport_cycling_content",["sport/cycling"],["properties","classifications_watson","concepts"],[e.s_(2,259),e.s_(2,392),e.s_(2,"tour de france")]),176924:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([e.y(20,942),e.os(e.s,1,[227,248,249,282,378,392,"extreme sports",508,510,538,578,740,741,759,762,787,802,887,968,982]),e.ps(8,942),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,103)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,[227,248,249,282,378,392,471,508,510,538,578,"https://www.bbc.com/sport","mixed martial arts",740,741,759,762,"nhl",787,802,887,968,982]),e.ge(3)),2592e6)]),e.cw(0,e.a([e.y(12,835),e.ref(7)]),e.ge(1))])),176953:e.r(45,e.pe(31,"premier-league"),e.os(e.s,1,["arsenal","aston villa","brighton","chelsea","crystal palace","everton","fulham","liverpool","man city","man utd","manchester united","new castle",837,"tottenham"]),["properties","classifications_watson","concepts"],e.s_(2,"Premier League")),176955:e.r(50,12,835,5,["domestic_animal","pets","animal_rights","animal_welfare","animal"],83),176957:e.r(57,e.pc_(5,887),e.w,8,["sport_rugby_content","sport_rugbyunion_content"],["properties","classifications_watson","categories"],e.o([e.s_(6,113)])),176967:e.q(e.acqs([e.tw(e.cw(0,e.o([e.pe(8,"sport_horseracing_content"),e.y(14,588),e.pc_(5,588),e.os(e.s,1,["sport/horse-racing","sport/live/horse-racing"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,"/sports/equine sports/horse racing"),e.s_(6,111)]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),176968:e.r(27,11,e.y(14,249),e.os(e.cx,5,[249,762]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,105)])),11),177016:e.r(85,2,3,3279496948,3279496948),177226:e.r(67,1,["0gfcFMc6","4F9PYg0m","KpejbBYj","VdLfydzn"]),177419:e.r(73,3286187696),177588:e.r(67,1,["Takr52kb"]),177658:e.r(69,"http://www.bbc.com/storyworks/reimagining-applications/why-increasing-it-complexity-requires-a-new-approach"),178814:e.r(63,183,183),179682:e.r(66,3,[250]),179771:e.r(66,1,["https://www.bbc.com/storyworks/a-new-way-to-see-the-world/crafting-the-perfect-cruise-experience","https://www.bbc.com/storyworks/a-new-way-to-see-the-world/cultured-cruising-the-thinking-persons-cruise-line"]),180084:e.r(69,"https://www.bbc.com/storyworks/advertiser-content/windstar-cruises/how-windstar-incorporates-tahitian-culture-and-history-on-a-cruise"),180085:e.r(66,1,["https://www.bbc.com/storyworks/specials/creating-resilient-customer-experiences/","https://www.bbc.com/storyworks/specials/from-digital-twins-to-an-industrial-metaverse/","https://www.bbc.com/storyworks/specials/the-pathway-to-resilience/"]),180784:e.r(68,"influential_with_katty_kay"),180785:e.r(68,"executive_lounge"),180951:e.q(e.acqs([e.tw(e.cw(0,e.ref(55),e.ge(3)),2592e6),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],173884)),e.cw(6,e.pe(16,173884)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],173878)),e.cw(6,e.pe(16,173878)),e.ge(1))])),180952:e.r(54,e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],175828)),e.cw(6,e.pe(16,175828)),e.ge(1)),89781,89781,89782,89782),180953:e.r(54,e.cw(7,e.os(e.s,21,[149,150]),e.ge(1)),141471,141471,175828,175828),180956:e.r(85,2,3,3216005034,3216005034),180957:e.r(85,2,3,3257084782,3257084782),180959:e.r(85,2,3,3272418419,3272418419),181008:e.r(71,[3237583671,3282525080]),181367:e.r(71,[3336942909,3313890162]),183024:e.r(73,3355960487),183350:e.r(69,"http://www.bbc.com/storyworks/a-wellness-ecosystem"),183448:e.r(73,3446959630),184006:e.r(60,e.ps(1,603),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,10),e.s_(6,"/art and entertainment/movies/film festivals and awards"),e.s_(6,"/movies/documentary movies"),e.s_(6,"/movies/indie and arthouse movies")])),5,[997,"sundance_film_festival",694,258,307,1044,621,411],7,410),184577:e.r(85,2,3,3278371131,3278371131),184706:e.r(85,3,2,3521649267,3521649267),184708:e.r(66,1,["http://www.bbc.com/storyworks/culture/singaporean-storytellers/found-in-translation-letters-from-a-multilingual-island","http://www.bbc.com/storyworks/culture/singaporean-storytellers/tracing-identity-and-authenticity-through-singapores-literary-landscape"]),184958:e.r(66,1,["https://www.bbc.com/storyworks/message-home-from-paradise/badminton-and-biryani-the-malaysian-student-life-in-western-australia","https://www.bbc.com/storyworks/message-home-from-paradise/how-volunteering-while-studying-abroad-can-help-unlock-your-future"]),185040:e.r(73,3453290619),185107:e.r(9,1,e.ps(["isp_info","organization"],".gov"),3,e.s,9,["civil servant","congressman","congresswoman","councillor","government","mp","senator"]),185201:e.r(73,3529959272),185357:e.r(69,"https://www.bbc.com/storyworks/designed-for-peace-of-mind/the-superannuation-product-designed-for-peace-of-mind"),185405:e.r(69,"https://www.bbc.com/storyworks/advertiser-content/workplaces-of-the-future/bridging-the-finance-hr-gap-delivers-positive-business-outcomes"),185420:e.r(66,1,["https://www.bbc.com/storyworks/powering-the-future/the-new-tech-accelerating-australia-s-energy-transition","https://www.bbc.com/storyworks/specials/how-much-do-australians-know-about-sustainability/"]),185434:e.r(67,1,["/KczIMzd","0Xj4gyAR","1R8I1E7E","4GpX7taA","9SBxS7MZ","Ae27/sGE","CdajePOr","D69RNR4C","GiEpF0qV","JmbfG/dX","Lz8i7O+/","QtKQg+xj","S7HmDxjp","UZz6RCJj","ViIIQHlD","WIBAcpUC","b0uwKlAM","dK/tYav4","f7Gzs0Cs","hEGGgfZ8","ihZLff67","j5O3GBA9","kLimrIVV","mNzXKwM2","noy0iuKI","s9RjjW1p","tLYjAMEz","tTHG904B","uWHBMb9J","w8X0nP56","wJuH9/j6","zns6CvLo"]),185652:e.r(70,[3535541952,3518387454]),186155:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/nycedc-2024/find-your-path-in-nyc","https://www.bbc.com/storyworks/advertiser-content/nycedc-2024/nycedcnyc-a-capital-of-global-business-","https://www.bbc.com/storyworks/nycedc/why-new-york-city-is-becoming-a-hub-for-climate-tech-startups"]),186185:e.r(70,[3535573107,3533783902]),186327:e.r(72,59),186328:e.r(72,59),186897:e.r(85,2,3,3529069837,3529069837),186911:e.q(e.ocqs([e.cw(2,e.a([e.pe(4,3529069837),e.os(e.s,1,["https://www.bbc.com/storyworks/mastery-at-sea/a-glimpse-inside-the-newest-ship-in-an-iconic-fleet",609,610,"https://www.bbc.com/storyworks/mastery-at-sea/redefining-luxury-ocean-travel",611,612])]),e.ge(1)),e.cw(2,e.os(e.e,33,[6693326389,6718183428,6693325438,6727479517,6693293905,6693325858,6693325894,6693325885,6718183410,6693326527,6727477435]),e.ge(1))])),187063:e.r(71,[3529069837,3320350791,3452745026,3531651257,3287547250]),187218:e.r(48,["exoplanets","planets",825,"nasa_perseverance_mars_rover","Nasa","space_launch_system_(sls)","space_exploration","space_debris","Space debris","space_tourism","Aerospace","space"],[e.s_(2,"outer space"),e.s_(2,"space exploration"),e.s_(2,"space race"),e.s_(2,"space station"),e.s_(2,"spaceflight")]),187251:e.r(112,5,e.as(e.cx,13,["gt_positive","gs_news"]),3),187358:e.r(47,e.s,7,[255,480],e.cx,5,["red_carpet_fashion","london_fashion_week",371,"beauty_standards",255,481,480],255,371,480,"hairstyle"),188096:e.r(117,e.ps(12,835),e.os(e.w,10,[518,"video",1007,292,629,390,765])),188160:e.r(82,0,0,e.pc_(11,"watch_list"),e.s,1,["https://www.bbc.com/culture/article/20240221-dune-part-two-review-denis-villeneuves-science-fiction-sequel-is-jaw-droppingly-weird","https://www.bbc.com/culture/article/20240223-20-days-in-mariupol-the-ukraine-doc-set-to-follow-navalny-oscar-win","https://www.bbc.com/culture/article/20240301-10-of-the-best-tv-shows-to-watch-this-march","https://www.bbc.com/culture/article/20240321-road-house-review-a-less-pleasurable-guilty-pleasure-than-the-original","https://www.bbc.com/culture/article/20240412-challengers-review-a-lot-of-sport-a-lot-of-wigs-and-a-lot-of-sexual-tension-in-luca-guadagninos-menage-tennis","https://www.bbc.com/culture/article/20240425-11-best-films-to-watch-in-may"]),188161:e.r(82,0,0,e.a([e.pc_(11,201),e.pc_(5,201)]),e.s,1,["https://www.bbc.com/future/article/20240501-how-ai-is-testing-the-boundaries-of-human-intelligence","https://www.bbc.com/reel/video/p06qyg6f/can-artificial-intelligence-predict-the-future-of-fashion-","https://www.bbc.com/reel/video/p079x98n/the-tech-keeping-planes-in-the-sky","https://www.bbc.com/reel/video/p07n0fz6/what-happens-to-our-digital-lives-when-we-die-","https://www.bbc.com/reel/video/p093h7hr/what-happens-when-ai-has-an-overactive-imagination-","https://www.bbc.com/reel/video/p0hkflt4/how-ai-and-deepfakes-are-changing-politics","https://www.bbc.com/reel/video/p0hv591s/ai-v-the-mind-who-has-the-edge-"]),188217:e.r(73,3543257935),188255:e.r(73,3337376784),188392:e.r(73,3547210731),188393:e.r(73,3544281243),188919:e.r(85,2,3,3531230354,3531230354),188920:e.r(75,3288620554),188921:e.r(75,3289907741),188922:e.r(75,3288781133),189307:e.r(73,3535221986),189330:e.r(66,1,[609,610,611,612]),189338:e.r(7,1,0,e.o([e.ref(6),e.ref(27),e.ref(9)]),250,[e.ref(37),e.ref(24)]),189339:e.r(6,0,e.o([e.ref(4),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,30),e.s_(6,"/business and finance/economy/financial crisis"),e.s_(6,"/business and finance/economy/financial reform"),e.s_(6,"/business and finance/economy/financial regulation"),e.s_(6,"/business and finance/industries/financial industry"),e.s_(6,53)])),e.ref(36),e.ref(2)]),1,e.ref(65),3,3,250),189340:e.r(6,1,e.ref(12),0,e.o([e.ref(58),e.ref(29),e.ref(15),e.ref(57),e.ref(48)]),3,3,250),189341:e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.ref(61),e.ge(3)),2592e6),e.tw(e.cw(0,e.ref(64),e.ge(3)),2592e6),e.tw(e.cw(1,e.ref(26),e.ge(3)),2592e6)]),e.cw(0,e.y(3,250),e.ge(1))])),189342:e.r(53,3,40,e.y(3,250),3),189948:e.r(66,1,["/storyworks/advertiser-content/outback-spirit/find-your-outback-spirit"]),189949:e.r(66,1,["storyworks/a-wellness-ecosystem/creating-a-wellness-ecosystem","storyworks/a-wellness-ecosystem/from-sports-to-space-nutrition"]),189976:e.r(66,1,["/message-home-from-paradise/badminton-and-biryani-the-malaysian-student-life-in-western-australia","/message-home-from-paradise/how-volunteering-while-studying-abroad-can-help-unlock-your-future","/message-home-from-paradise/recreating-brazilian-culture-in-western-australia","https://www.bbc.com/storyworks/messages-home-from-paradise/badminton-and-biryani-the-malaysian-student-life-in-western-australia","https://www.bbc.com/storyworks/messages-home-from-paradise/how-volunteering-while-studying-abroad-can-help-unlock-your-future","https://www.bbc.com/storyworks/messages-home-from-paradise/recreating-brazilian-culture-in-western-australia"]),191557:e.r(67,1,["4qCIdfBr","E2diVIoc","H8g3La3I"]),192091:e.r(69,"https://www.bbc.com/storyworks/messages-home-from-paradise/western-australia-a-land-of-abundance"),192184:e.q(e.cw("VideoAdClick",e.os(e.e,["ad","creative_id"],[6733981401,6733981374,6733979505]),e.ge(1))),192341:e.r(69,"https://www.bbc.com/storyworks/messages-home-from-paradise/an-engineer-from-indonesia-and-his-family-finds-a-forever-home-in-western-australia"),193201:e.r(83,3,[3560806460,3067488692,3232098901,3260671082],4,[3560806460,3067488692,3260671082,3232098901]),194111:e.r(75,3563398503),194112:e.r(75,3560423515),194113:e.r(75,3562716135),194541:e.r(66,26,["galaxy","samsung"]),194542:e.r(66,26,[212,"iphone"]),194543:e.r(66,26,[340,"google"]),194857:e.r(66,1,["https://www.bbc.com/storyworks/advertiser-content/cloud-vision/aleph-alpha-makes-ai-explainable-and-auditable","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/how-hybrid-cloud-lets-legacy-and-cutting-edge-systems-live-in-harmony-while-easing-upgrade-efforts","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/how-to-break-out-of-the-aiasexperiment-mindset-and-speed-time-to-value","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/see-more-control-more-with-ai-powered-networking","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/speeding-up-delivery-of-healthcare-services","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/the-game-changing-impact-of-accelerating-your-data-driven-transformation","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/the-race-to-innovation-hpe-and-the-mercedes-amg-petronas-formula-one-team","https://www.bbc.com/storyworks/advertiser-content/cloud-vision/to-dare-is-to-do-hpe-and-tottenham-hotspur-football-club"]),195124:e.r(84,2,3,21,21),195230:e.q(e.acqs([e.tw(e.cw(0,e.os(e.w,15,[170,162]),e.ge(3)),145152e5),e.tw(e.cw(0,e.as(e.x,15,[162,170]),e.ge(1)),1728e5),e.cw(0,e.ref(7),e.ge(1))])),196328:e.r(75,3555615773),196454:e.r(79,e.cw(3,e.pe(4,3568444718),e.ge(1)),e.cw(0,e.bsc_(1,["BVW4/Na/"]),e.ge(1)),e.cw(0,e.bsc_(1,["2KT8+HjB"]),e.ge(1))),196455:e.r(91,3,e.pe(4,3566551155),1,["m9rwCXWn"]),196815:e.r(117,e.os(e.w,1,["https://www.bbc.com/news/articles/c87rxk6xmneo","https://www.bbc.com/news/articles/clmyzl7g224o","https://www.bbc.com/news/articles/crg5n9edl4do","https://www.bbc.com/news/articles/cpv3dg31x75o","https://www.bbc.com/news/articles/cv2gx74d87mo","https://www.bbc.com/news/articles/c4ngmrk8gv1o","https://www.bbc.com/news/articles/c3g0mlzd27mo","https://www.bbc.com/news/articles/c6p2zqv305ro","https://www.bbc.com/news/articles/c727md664eyo"]),e.af_i(["properties","classifications_watson","keywords"],e.y_(2,164))),196843:e.r(116,2592e5,0,e.a([e.af_u(["properties","classifications_watson","concepts"],e.o([e.y_(2,172),e.y_(2,152),e.y_(2,171),e.y_(2,175),e.e_(2,"Tim Hortons"),e.y_(2,188),e.e_(2,"Fast food"),e.e_(2,"Fast food restaurant"),e.y_(2,166),e.y_(2,157)])),e.af_i(["properties","classifications_watson","keywords"],e.o([e.e_(2,"Cheeseburger"),e.e_(2,"Burgers"),e.e_(2,"Big Mac"),e.e_(2,"Breakfast"),e.e_(2,"Burger"),e.e_(2,"Fries"),e.e_(2,"Restaurant"),e.e_(2,"Fast Food"),e.y_(2,172),e.y_(2,152),e.e_(2,"Shake Shack"),e.e_(2,"Mary Browns"),e.e_(2,"Popeyes"),e.e_(2,"Dominoes"),e.y_(2,171),e.y_(2,175),e.e_(2,"Tim Horton\'s"),e.y_(2,188),e.y_(2,166),e.y_(2,157)]))]),3),196939:e.r(117,e.pe(1,"https://www.bbc.com/watch-live-news"),e.y(15,155)),197769:e.r(115,3,4,3571470381),203327:e.r(85,3,2,3593700237,3593700237),204945:e.r(112,0,e.bsc_(1,["12EULZ4j","ea7AZOZY","t7LckRJp","xQPi98BY"]),3),205e3:e.r(115,2,4,3577664125),206653:e.r(115,0,32,"https://www.bbc.com/storyworks/advertiser-content/babbel/language-learning-that-works-"),206662:e.r(115,3,4,3609288169),207465:e.r(75,3607951185),39204:e.r(64,e.t),41376:e.q(e.cw(0,e.a([e.nt(e.ps(26,340)),e.os(e.s,26,[646,890])]),e.ge(1))),41414:e.q(e.cw(2,e.t,e.ge(1))),56344:e.r(75,2725338666),56634:e.r(113,0,e.pe(19,"bbccom.live.site.reel"),e.ps(1,"bbc.com/reel")),56691:e.r(69,"the-new-normal"),58133:e.r(113,2,e.os(e.w,34,["bbccom_native_pwa_1","bbccom_native_slice_l","bbccom_native"]),e.os(e.s,34,["native_pwa","native_slice"])),62161:e.r(75,2746577167),62212:e.r(69,"follow-the-food"),64766:e.r(69,"gems-of-jiangsu"),64767:e.r(69,"innovation-and-ip-driving-growth"),64768:e.r(69,"through-new-eyes"),64911:e.r(74,4,[2700822141,2566801081]),65451:e.r(69,"imagining-the-future-of-air-travel"),65452:e.r(69,"bridge-to-a-better-tomorrow"),65454:e.r(69,"the-technology-transforming-agriculture"),66683:e.r(75,2790291991),66684:e.r(75,2805516146),70302:e.r(75,2841341756),73008:e.r(69,"resourcing-our-future"),73331:e.r(112,2,e.t,1),73342:e.r(78,e.scq(e.tw(e.sw(4,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),12096e5),e.vq(e.sw(8,e.t,["properties","engaged_time"])),e.ge(120)),e.scq(e.tw(e.cw(4,e.pge(28,90)),2592e6),e.vq(e.sw(8,e.t,["properties","engaged_time"],e.ge(90))),e.ge(3))),74314:e.r(112,0,e.ref(43),1),74820:e.r(69,"giving-back-to-nature"),74822:e.r(69,"transitioning-to-net-carbon-zero"),75548:e.r(97,5184e6,5184e6,1,e.os(e.s,9,["app development",402,"enterprise",493,"http://www.bbc.com/news/business/",628,652,"operations",847,"product engineer",976,"user experience"]),5,2,2,e.cx,13,["gs_finance",552]),77811:e.r(75,2872219128),79654:e.r(69,"the-new-world-of-work"),79655:e.r(69,"taiwan-the-future-of-smart-tech"),80707:e.r(75,2866909353),81843:e.r(75,2871051266),82015:e.r(75,2865610271),82106:e.r(69,"the-next-wave-empowering-global-change"),82234:e.r(75,2851553710),84002:e.r(74,33,[5770331024,5770329533,5769780646]),84072:e.r(69,"advertiser-content/microsoft-education"),84222:e.r(73,2884226383),85209:e.r(69,"advertiser-content/amazing-thailand"),85210:e.r(69,"future/roborock"),87159:e.q(e.ocqs([e.cw(2,e.pe(4,2907306462),e.ge(1)),e.cw(0,e.ps(1,"www.bbc.com/storyworks/being-your-best"),e.ge(1))])),87319:e.r(75,2914256546),88024:e.r(69,"a-considered-holiday"),88026:e.r(69,"storyworks/pioneers-of-the-sea"),88489:e.r(2,[e.tw(e.cw(0,e.os(e.cx,17,["COP27","COP26"]),e.ge(1)),7776e6),e.tw(e.cw(5,e.pc_(13,"bbc_cop26"),e.ge(1)),7776e6),e.tw(e.cw(0,e.ps(1,"https://www.bbc.com/news/topics/cgdwpywgeegt/cop26"),e.ge(1)),7776e6)]),88504:e.r(97,15552e6,15552e6,2,e.os(e.e,27,[5076836393,5072904230,5058138122,5047638231,4990176602,4970895254,4970460956,4891280791,4886488532,4881151403,4827617267,4754380283,4740987040,4572069502,4567219608,4524357727,4444499458,4436930813,217117098,216122538,208575258,56834418,53072298,48515898,28476858,28415658,28376778,28324098,28314858,28250898,28238898,28025658,27972378,27941658,27910938]),2,1,1,e.e,4,[2925485275,2925485179,2925484969]),88505:e.r(71,[3061668446,3057993263,3057993350,3057993554,3032144578,3034332908,3034333679,3035283801,3002574154,3002451566,3002592370,3003077498,2972262958,2972277497,2972368522,2972942581,2945987886,2944444006,2945021217,2945021718,2926126212,2925485275,2925485179,2925484969]),88624:e.r(83,2,[2816998798,2816889836,2802835618,2379689675,2579030840,2802679106,2824815990,2842871468,2878850083,2805509243,2816999176,2824116142,2824116643,2479899798,2830003663,2805509699,2781633095,2824117675,2905467317,2827721208,2782639197,2827288533,2824026197,2479410394,2843114320,2829987512,2479900473,2866239556,2702669221,2716878473,2716878719,2789220893,2879351968,2893866387,2856436692,2766183250,2688501075,2890603810,2653579816,2494154289,2806266660,2462984099,2759981987,2397342179,2900945649,2692028848,2497378544,2917386217,2387473326,2362258689,2396730683,2424940266,2581973887,2763833695,2862249823,2355707960,2517688288,2439532019,2399604909,2489668016,2918744365,2644337966,2918744296,2415392044,2887071256,2620857003,2835469430,2588885924,2637663767,2856522192,2714727082,2483038024,2746945426,2493023210,2775972662,2691753531,2529264699,2658143995,2634099747,2841981797,2727170613,2800037997,2765628436,2657897666,2760226076,2752754385,2513855473,2522980294,2752752651,2657896271,2790148042,2542921866,2830973757,2753361060,2529595383,2550101925,2667600469,2773395779,2402039968,2675836703,2414159482,2702716490,2682058722,2881934598,2730649189,2754580224,2882624071,2773785973,2773785739,2846384777,2754112213,2847225060,2706955394,2707850634,2871718251,2870994419,2728210473,2774367801,2774333691,2727127373,2820110791,2820110608,2707486021,2871228166,2870995421,2782205234,2783205105,2908955452,2753607014,2783204616,2783203623,2820111298,2819976845,2846635915,2846381243,2706945062,2736728777,2726764484,2833619745,2896195864,2768599578,2685396937,2733899666,2744153175,2721854099,2720130435,2719758223,2654217089,2690442127,2707453091,2816773094,2706235893,2691195332,2730347511,2767845013,2803161014,2738924335,2769629653,2708590491,2708215657,2708217565,2708217805,2740337444,2697276402,2740916609,2885774604,2770166620,2740338620,2718729100,2910915985,2681420800,2913948704,2914188859,2743979201,2769094974,2749623355,2769629656,2885262181,2878005510,2899804276,2718729325,2805814923,2813009204,2676358962,2813056938,2732689569,2773748563,2719519638,2651734682,2838466006,2778339259,2647004099,2732690838,2696908505,2914944452,2841126125,2841121349,2675856878,2866304866,2869354212,2854055194,2884833819,2857412139,2676138407,2745180693,2743322353,2676138668,2721174425,2775143467,2690691589,2615596762,2847564940,2754442686,2905543616,2775836315,2838371930,2615473602,2907965163,2879370622,2897288797,2851553710,2874288867,2868765507,2804427579,2904043399,2823094496,2640831318,2843093261,2773055897,2793335478,2744062291,2700822141,2753805575,2749270799,2798880386,2685963815,2783860281,2793646927,2901019903,2903811060,2799132955,2736542307,2725437484,2790285502,2789973077,2743941249,2622589647,2832889810,2878008882,2688181107,2790440547,2810536246,2920698427,2661634253,2793266593,2904280474,2886376991,2790228626,2844755207,2894649967,2907605503,2751411279,2824476860,2740856799,2845010314,2896847404,2882033950,2774034712,2908020843,2808163860,2889065925,2757151148,2732488977,2740811662,2757283130,2769862701],27,[5068371990,5005294506,5005104362,4940695334,4926838965,4924694773,4913131816,4863619382,4791750912,4692647973,4677041403,4644763394,4632121188,4628308522,4601206509,4572069502,4484577481,218579418,215886618,212663538,198611178,101741778,91522578,84667098,39726018,36644538,28442058,28375818,28346538,28325538,28317378,28287618,28229058,28225578,28209978,28201938,28191618,28185738,28125378,28116258,28108818,28073658,28045338,28041618,28029018,28005618,27948018,27938658,27930138,27927378]),88766:e.r(74,4,[2816889836,2802835618,2379689675,2579030840,2802679106,2824815990,2842871468,2878850083,2805509243,2816999176,2824116142,2824116643,2830003663,2805509699,2781633095,2824117675,2905467317,2827721208,2782639197,2827288533,2824026197,2843114320,2829987512,2479900473,2866239556,2702669221,2716878473,2716878719,2789220893,2879351968,2893866387,2856436692,2766183250,2688501075,2890603810,2653579816,2494154289,2806266660,2462984099,2759981987,2900945649,2692028848,2497378544,2917386217,2362258689,2396730683,2424940266,2581973887,2763833695,2862249823,2355707960,2517688288,2489668016,2918744365,2644337966,2918744296,2415392044,2887071256,2835469430,2588885924,2637663767,2856522192,2714727082,2746945426,2775972662,2691753531,2529264699,2658143995,2634099747,2841981797,2727170613,2800037997,2765628436,2657897666,2760226076,2752754385,2513855473,2522980294,2752752651,2657896271,2790148042,2542921866,2830973757,2753361060,2529595383,2550101925,2667600469,2773395779,2402039968,2675836703,2414159482,2702716490,2682058722,2881934598,2730649189,2754580224,2882624071,2773785973,2773785739,2846384777,2754112213,2847225060,2706955394,2707850634,2871718251,2870994419,2728210473,2774367801,2774333691,2727127373,2820110791,2820110608,2707486021,2871228166,2870995421,2782205234,2783205105,2908955452,2753607014,2783204616,2783203623,2820111298,2819976845,2846635915,2846381243,2706945062,2736728777,2726764484,2833619745,2896195864,2685396937,2733899666,2744153175,2721854099,2720130435,2719758223,2654217089,2690442127,2707453091,2816773094,2706235893,2691195332,2767845013,2738924335,2769629653,2708590491,2708215657,2708217565,2708217805,2740337444,2697276402,2740916609,2885774604,2770166620,2740338620,2718729100,2910915985,2681420800,2914188859,2913948704,2743979201,2769094974,2749623355,2769629656,2885262181,2878005510,2899804276,2718729325,2805814923,2813009204,2676358962,2813056938,2732689569,2773748563,2719519638,2651734682,2838466006,2778339259,2647004099,2732690838,2696908505,2914944452,2841126125,2841121349,2675856878,2866304866,2869354212,2854055194,2884833819,2857412139,2676138407,2745180693,2743322353,2676138668,2721174425,2775143467,2690691589,2615596762,2847564940,2754442686,2905543616,2775836315,2838371930,2615473602,2907965163,2879370622,2897288797,2851553710,2874288867,2868765507,2804427579,2904043399,2823094496,2640831318,2843093261,2773055897,2793335478,2744062291,2700822141,2753805575,2749270799,2798880386,2685963815,2783860281,2793646927,2901019903,2903811060,2799132955,2736542307,2725437484,2790285502,2789973077,2743941249,2746141827,2622589647,2832889810,2878008882,2688181107,2790440547,2810536246,2920698427,2661634253,2793266593,2904280474,2886376991,2790228626,2844755207,2894649967,2907605503,2751411279,2824476860,2740856799,2845010314,2896847404,2882033950,2774034712,2908020843,2808163860,2889065925,2757151148,2732488977,2740811662,2757283130,2769862701]),89492:e.r(77,"1"),89493:e.r(76,149),89494:e.r(76,150),89495:e.r(77,"4"),89496:e.r(77,"5"),89497:e.r(77,"6"),89747:e.r(75,2930747743),89780:e.r(93,"99a76b81-e95a-4414-bda7-fee2c836b6ac","89492",.68464655),89781:e.r(93,"0f87b626-b6bd-494b-b4c1-959ac9648408","89493",.7061623),89782:e.r(93,"b7df4daf-d41e-4b1e-b59b-0de486d002f2","89494",.69690907),89783:e.r(93,"f38f49ef-3896-4718-8d8c-b154cc5bb4b5","89495",.7215554),89784:e.r(93,"fbb35975-7003-4e29-9f26-edd82857979d","89496",.7068782),89786:e.r(93,"4284a398-9bd4-4cef-ba13-d2079de2573f","89497",.725531),90007:e.r(75,2932530920),90032:e.r(95,.7235995),90033:e.r(95,.87724257),90034:e.r(95,.8201423),90449:e.r(116,15552e6,2,e.os(e.e,27,[5067056375,5045316233,4943102608,4411210969,222089058,217566858,194235738,80478498,78819258,73132818,73108458,47436738,28472538,28386378,28346178,28322058,28263378,28209378,28156818,28156458,28050498,28049898,27967098,27929898]),1),90876:e.r(75,2891032075),91149:e.r(93,"df2d4c11-12b5-4676-9f37-ded17d0728e2","90449",.74556607),91291:e.r(75,2897809376),91448:e.r(69,"storyworks/future/tech4all"),91449:e.r(69,"storyworks/future/creating-a-healthier-asia"),91628:e.r(98,7776e6,7776e6,0,e.pe(29,"techbiz"),0,e.pe(35,"11428889"),3,3),91654:e.q(e.tw(e.cw(5,e.os(e.cx,13,["gs_predicts_interestedmillennial","gs_predicts_millennialmoms"]),e.ge(2)),7776e6)),91819:e.r(69,"being-your-best"),91821:e.r(69,"storyworks/uncompromised-elegance"),92886:e.r(39,e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],89780)),e.cw(6,e.pe(16,89780)),e.ge(1)),7776e6,0,e.t,e.ge(3)),92946:e.r(71,[2686060527,2711211814,2725427477,2769245666,2597489220,2805509243,2878850083,2805509699,2890291613,2703570477,2711572794,2707782206,2703926315,2885455891,2599020445,2714852637,2884981855,2699688611,2472635035,2731641572,2802188767,2746325700,2351652932,2805894141,2587316565,2671063808,2662401822,2579678303,2671000210,2671268044,2671000792,2918744296,2804027977,2898341979,2639500789,2863061483,2637663767,2752753581,2756913501,2849841304,2679937908,2826760283,2683160768,2750066595,2687617825,2768986732,2869027574,2685818078,2679909028,2750408116,2726561686,2687470250,2815475267,2805762442,2521120723,2537302486,2724520481,2626308212,2675317081,2552410218,2748496208,2772262796,2411527887,2903043355,2897800263,2736266588,2882508906,2906821320,2727532775,2699546624,2871782065,2769826231,2862992102,2869234936,2872135164,2865301348,2779704363,2885749578,2792309248,2859608362,2820835639,2792897037,2819849417,2734452865,2910358504,2722305593,2779774242,2900464950,2706993293,2890806647,2787737202,2892620786,2746692935,2674055497,2651218771,2823840854,2879213654,2901153531,2900729979,2884874622,2824012269,2780095560,2823840638,2697724316,2722106763,2869792497,2750436628,2815518628,2684839427,2683236201,2715113919,2801798822,2837265505,2804070160,2872516789,2872970076,2872969575,2871595585,2765473844,2682054158,2834842247,2783627950,2688404307,2822770686,2764528984,2757413933,2883115375,2659892041,2722756932,2860113593,2847649907,2891032075,2868140865,2881118308,2733834416,2779811166,2749519613,2783685966,2671974693,2693493022,2711741955,2741556646,2854540952,2682114387,2735545176,2853510714,2918278446,2790228224,2776948781,2911077797,2890371736,2810459886,2801352717,2854091205,2632886152,2884567661,2821519851,2881557003,2867675201,2720615691,2689918282,2687935601,2913453753,2764139032,2859417559,2917552763,2881069171,2875019003,2757222892,2806004542,2757030159,2881069156,2839088305,2753043296,2725557599]),92947:e.r(74,4,[2686060527,2711211814,2725427477,2769245666,2601321818,2816999176,2597489220,2579030840,2805509243,2878850083,2708262641,2805509699,2890291613,2696048525,2700309249,2703926315,2707782206,2711572794,2703570477,2885455891,2599020445,2397342179,2806266660,2362667981,2493528196,2805489980,2523811330,2362665755,2714852637,2884981855,2699688611,2387473326,2379984694,2472635035,2731641572,2802188767,2746325700,2351652932,2805894141,2741383135,2671063808,2662401822,2579678303,2671000210,2671268044,2671000792,2385085188,2918744365,2918744296,2859999066,2400909281,2804027977,2863061483,2639500789,2637663767,2752753581,2756913501,2849841304,2679937908,2826760283,2683160768,2750066595,2687617825,2768986732,2869027574,2685818078,2679909028,2750408116,2726561686,2687470250,2815475267,2805762442,2521120723,2537302486,2724520481,2626308212,2641238577,2675317081,2761711169,2552410218,2748496208,2772262796,2411527887,2903043355,2897800263,2736266588,2882508906,2906821320,2727532775,2699546624,2871782065,2769826231,2862992102,2869234936,2872135164,2865301348,2779704363,2781972931,2885749578,2792309248,2859608362,2820835639,2792897037,2792325748,2819849417,2734452865,2910358504,2722305593,2779774242,2900464950,2706993293,2700080057,2890806647,2787737202,2892620786,2746692935,2674055497,2651218771,2823840854,2879213654,2901153531,2900729979,2884874622,2824012269,2780095560,2769281469,2652291322,2823840638,2697724316,2722106763,2869792497,2750436628,2815518628,2684839427,2683236201,2715113919,2801798822,2837265505,2804070160,2872516789,2872970076,2872969575,2871595585,2682054158,2834842247,2783627950,2688404307,2822770686,2764528984,2757413933,2883115375,2659892041,2810213004,2722756932,2860113593,2746577167,2847649907,2891032075,2868140865,2766033820,2881118308,2790996924,2733834416,2779811166,2749519613,2783685966,2671974693,2693493022,2711741955,2741556646,2854540952,2682114387,2735545176,2853510714,2918278446,2790228224,2911077797,2890371736,2810459886,2801352717,2854091205,2632886152,2884567661,2821519851,2881557003,2867675201,2720615691,2687935601,2851946041,2913453753,2859417559,2917552763,2881069171,2875019003,2757222892,2806004542,2757030159,2881069156,2839088305,2753043296,2725557599]),92956:e.q(e.cw(3,e.ref(42),e.ge(1))),92957:e.r(72,42),92973:e.r(69,"little-red-dot-big-possibilities"),93845:e.r(79,e.itp("liveramp_DunandBradstreet","1001640136",!1,"93845"),e.itp("liveramp_DunandBradstreet","1001640156",!1,"93845"),e.itp("liveramp_DunandBradstreet","1001640126",!1,"93845")),93846:e.r(78,e.itp("liveramp_DunandBradstreet","1001640146",!1,"93846"),e.itp("liveramp_DunandBradstreet","1001640116",!1,"93846")),93847:e.r(80,e.itp("liveramp_DunandBradstreet","1003342619",!1,"93847"),e.itp("liveramp_DunandBradstreet","1000311026",!1,"93847"),e.itp("liveramp_DunandBradstreet","1003342629",!1,"93847"),e.itp("liveramp_DunandBradstreet","1000311006",!1,"93847"),e.itp("liveramp_DunandBradstreet","1000311016",!1,"93847"),e.itp("liveramp_DunandBradstreet","1000310996",!1,"93847")),94397:e.r(69,"future/looking-ahead-with-tecno"),94752:e.r(75,2961520316),94903:e.r(73,2935408077),94908:e.r(69,"storyworks/advertiser-content/spectra"),94909:e.r(69,"storyworks/travel/a-locals-guide-to-the-west-midlands"),95077:e.r(67,19,["xF7RVVdO"]),95078:e.r(67,19,["X45IhsDS"]),95079:e.r(64,e.ref(52)),95080:e.r(67,19,["bkZvoaw5"]),95081:e.r(67,19,["cQg52F3q"]),95201:e.r(111,"276976950","95201"),96020:e.r(75,2970152092),97261:e.r(69,"future/inspire-greatness"),97262:e.r(66,1,["storyworks/happy-chinese-lunar-new-year","storyworks/specials/happy-chinese-lunar-new-year"]),98239:e.r(100,e.o([e.y(8,943),e.pe(14,"Worldcup")]),1,e.s,1,[489,1072]),98469:e.r(75,2978312102),98706:e.r(75,2973000843),99059:e.r(73,2931808062),99365:e.r(69,"storyworks/travel/experience-tokyo/"),99366:e.r(69,"storyworks/travel/japans-heart-and-spirit"),99387:e.r(75,2906261752)}),rootCompressionLookup:e=>[(t,r,n,s,i)=>e.q(e.acqs([e.cw(0,t,r),e.cw(n,s,i)])),(t,r,n)=>e.q(e.acqs([e.cw(0,e.ref(n),e.ge(1)),e.cw(t,r,e.ge(1))])),t=>e.q(e.acqs([e.ocqs(t),e.scq(e.sw(4,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(8,e.t,["properties","engaged_time"])),e.g(45))])),(t,r,n)=>e.q(e.acqs([e.ocqs(t),e.tw(e.cw(0,r,e.ge(n)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r)=>e.q(e.acqs([e.ocqs(r),t])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,r,e.ge(3)),2592e6),e.tw(e.cw(n,s,e.ge(i)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,r,e.ge(3)),2592e6),e.tw(e.cw(n,s,e.ge(i)),2592e6)]),e.cw(0,e.y(o,a),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,e.a(i),e.ge(3)),2592e6),e.tw(e.cw(r,n,e.ge(3)),2592e6)]),e.cw(0,e.y(3,s),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,e.a(o),e.ge(3)),2592e6),e.tw(e.cw(r,e.os(e.s,n,s),e.ge(3)),2592e6),e.tw(e.cw(0,e.a(i),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,e.os(s,i,o),e.ge(3)),2592e6),e.tw(e.cw(0,r,e.ge(n)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,e.os(o,a,c),e.ge(3)),2592e6),e.tw(e.cw(r,e.a(i),e.ge(3)),2592e6),e.tw(e.cw(n,s,e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,e.os(e.s,r,n),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(["properties","classifications_watson","keywords"],e.o(i)),e.af_u(["properties","classifications_watson","categories"],s)]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(t,e.ref(i),e.ge(3)),2592e6),e.tw(e.cw(0,e.ref(s),e.ge(3)),2592e6),e.tw(e.cw(r,n,e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,t,e.ge(3)),2592e6),e.tw(e.cw(r,e.os(e.s,1,s),e.ge(3)),2592e6),e.tw(e.cw(n,e.os(e.s,i,o),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a(n),e.ge(3)),2592e6),e.tw(e.cw(t,e.os(e.s,s,i),e.ge(r)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([r,e.os(e.cx,5,s),e.af_u(["properties","classifications_watson","categories"],e.o(n))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([s,i,e.af_u(o,a)]),e.ge(3)),2592e6),e.tw(e.cw(t,e.os(e.s,r,n),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([i,o,a,c]),e.ge(3)),2592e6),e.tw(e.cw(t,e.os(e.s,n,s),e.ge(r)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u,l,f)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(n,s,i),e.os(o,a,c),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,l),e.s_(6,f)])),e.af_u(["properties","classifications_watson","concepts"],e.o(u)),r]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u,l)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(i,o,a),e.os(c,u,l),r,n,s]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u,l,f,d)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,i),n,e.af_u(["properties","classifications_watson","concepts"],e.o(s)),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,o),e.s_(2,a),e.s_(2,c),e.s_(2,u),e.s_(2,l),e.s_(2,f),e.s_(2,d)]))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,t,r),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.a([e.y(o,a),e.os(e.cx,5,c),e.af_u(["properties","classifications_watson","categories"],e.o(s)),e.af_u(n,e.o(i))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,t,r),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(s,i,o),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,t,r),e.ge(3)),2592e6),e.tw(e.cw(0,e.a(n),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.s,1,t),e.ge(3)),2592e6),e.tw(e.cw(1,e.a([e.os(e.s,1,r),e.os(e.s,9,n)]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(o,e.o(a)),s,i]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.os(e.s,1,r),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.af_u(n,e.o(s)),e.af_u(["properties","classifications_watson","concepts"],e.o(i))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o(r),e.ge(3)),2592e6),e.tw(e.cw(t,e.os(e.s,n,s),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o(n),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6),e.tw(e.cw(0,e.a(r),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([r,n,e.ref(i),s]),e.ge(3)),2592e6),e.tw(e.cw(1,e.ref(t),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([n,s,i,o]),e.ge(3)),2592e6),e.tw(e.cw(t,e.os(e.s,1,r),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([e.os(e.cx,5,r),e.os(e.s,1,n),e.af_u(s,e.o(i))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([e.os(e.cx,5,n),r,e.af_u(["properties","classifications_watson","categories"],e.o(s)),e.af_u(["properties","classifications_watson","concepts"],e.o(i)),e.af_u(["properties","classifications_watson","keywords"],e.o(o))]),e.ge(3)),2592e6),e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([e.os(e.cx,5,s),n,e.af_u(["properties","classifications_watson","concepts"],e.o(i)),e.af_u(["properties","classifications_watson","keywords"],e.o(o))]),e.ge(3)),2592e6),e.tw(e.cw(t,e.os(e.s,1,r),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(0,e.o([e.y(10,1007),e.os(e.cx,11,n),e.os(e.cx,5,s),t,r]),e.ge(3)),2592e6),e.tw(e.cw(1,e.a([e.ref(51),e.os(e.s,1,i)]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.a([e.os(e.s,9,n),e.os(e.s,1,t)]),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([r,e.af_u(["properties","classifications_watson","concepts"],e.o(s))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.a([e.os(e.s,9,n),e.os(e.s,1,s)]),e.ge(3)),2592e6),e.tw(e.cw(0,e.os(e.s,1,t),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([r,e.af_u(i,e.o(a)),e.af_u(o,e.o(c))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u,l)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,t,r),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([n,e.os(o,a,c),s,i,e.af_u(u,e.o(l))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,t,r),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([n,e.os(e.cx,5,s),e.af_u(["properties","classifications_watson","concepts"],e.o(i))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,t,r),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(o,a,c),n,s,i]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.ocqs([e.tw(e.cw(1,e.os(e.s,1,t),e.ge(3)),2592e6),e.tw(e.cw(0,e.a([e.os(e.s,1,r),e.os(e.cx,5,n),e.af_u(s,e.o(o)),e.af_u(i,e.o(a))]),e.ge(3)),2592e6)]),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.tw(e.cw(n,s,i),r),t])),(t,r,n,s,i,o)=>e.q(e.acqs([e.tw(e.cw(0,t,e.ge(r)),2592e6),e.tw(i,o),e.cw(0,e.ref(s),n)])),(t,r,n,s,i)=>e.q(e.acqs([e.tw(e.cw(0,r,e.ge(n)),2592e6),t,e.cw(0,s,i)])),(t,r)=>e.q(e.acqs([e.tw(e.cw(0,e.a([t,r]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.tw(e.cw(0,e.a([t,r,n,s]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u)=>e.q(e.acqs([e.tw(e.cw(0,e.a([t,r,e.os(i,o,a),e.os(e.cx,5,c),n,s,e.af_u(["properties","classifications_watson","keywords"],e.o(u))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.tw(e.cw(0,e.a([t,r,e.af_u(n,s)]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.tw(e.cw(0,e.a([t,e.os(n,s,i),r,e.af_u(o,a)]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u,l)=>e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(t,r,n),e.os(s,i,o),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,a),e.s_(2,c),e.s_(2,u),e.s_(2,l)]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r)=>e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(e.cx,5,t),e.af_u(["properties","classifications_watson","concepts"],e.o(r))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.tw(e.cw(0,e.a([e.os(e.s,1,n),e.os(e.cx,5,t),e.af_u(["properties","classifications_watson","categories"],e.o(s)),e.af_u(["properties","classifications_watson","concepts"],r)]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.tw(e.cw(0,e.a([e.y(t,r),e.os(e.cx,n,s),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,i)]))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u)=>e.q(e.acqs([e.tw(e.cw(0,e.a([e.y(n,s),e.os(i,o,a),t,r,e.af_u(c,u)]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.tw(e.cw(0,e.a([e.pe(s,i),e.os(t,r,n),e.os(e.cx,5,o),e.af_u(["properties","classifications_watson","concepts"],e.o(a))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s)=>e.q(e.acqs([e.tw(e.cw(0,e.ref(r),e.ge(t)),2592e6),e.tw(e.cw(0,n,e.ge(s)),2592e6)])),(t,r,n,s,i)=>e.q(e.acqs([e.tw(e.cw(0,e.ref(55),e.ge(3)),2592e6),t,e.ocqs([e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],r)),e.cw(6,e.pe(16,n)),e.ge(1)),e.scq(e.cw(4,e.pc(["aggregations","SegmentEntry"],s)),e.cw(6,e.pe(16,i)),e.ge(1))])])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.tw(e.cw(0,e.o([t,r,n,e.af_u(s,e.o([e.s_(o,a)])),e.af_u(["properties","classifications_watson","keywords"],e.o(i))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a,c,u)=>e.q(e.acqs([e.tw(e.cw(0,e.o([t,e.os(e.cx,s,i),r,n,e.af_u(o,e.o(c)),e.af_u(a,e.o(u))]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.tw(e.cw(0,e.o([e.os(r,n,s),t,e.af_u(i,o)]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.tw(e.cw(0,e.o([e.os(i,o,a),e.os(e.cx,n,s),t,r]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.tw(e.cw(0,e.o([e.os(e.w,7,s),e.os(e.cx,r,n),e.os(i,o,a),t]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o)=>e.q(e.acqs([e.tw(e.cw(0,e.o([e.y(i,o),e.os(e.cx,n,s),t,r]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i,o,a)=>e.q(e.acqs([e.tw(e.cw(0,e.o([e.y(7,s),e.os(e.cx,r,n),e.os(i,o,a),t]),e.ge(3)),2592e6),e.cw(0,e.ref(7),e.ge(1))])),(t,r,n,s,i)=>e.q(e.acqs([e.tw(e.cw(0,e.o([e.pe(8,r),t,e.os(e.s,1,n),e.af_u(s,e.o(i))]),e.ge(3)),2592e6),e.cw(0,e.a([e.y(12,835),e.ref(7)]),e.ge(1))])),(t,r)=>e.q(e.acqs([e.tw(e.cw(0,e.ps(15,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.z(15,r),e.ge(1)),864e5),e.cw(0,e.ref(7),e.ge(1))])),t=>e.q(e.cw(0,t,e.ge(1))),(t,r,n)=>e.q(e.cw(0,e.a([e.pe(r,n),t]),e.ge(1))),(t,r)=>e.q(e.cw(0,e.os(e.s,t,r),e.ge(1))),(t,r)=>e.q(e.cw(0,e.bsc_(t,r),e.ge(1))),t=>e.q(e.cw(0,e.pc_(5,t),e.ge(1))),t=>e.q(e.cw(0,e.ps(1,t),e.ge(1))),t=>e.q(e.cw(2,e.as(e.e,4,t),e.ge(1))),t=>e.q(e.cw(2,e.os(e.e,4,t),e.ge(1))),t=>e.q(e.cw(2,e.ref(t),e.ge(1))),t=>e.q(e.cw(2,e.pe(4,t),e.ge(1))),(t,r)=>e.q(e.cw(3,e.os(e.e,t,r),e.ge(1))),t=>e.q(e.cw(3,e.pe(4,t),e.ge(1))),t=>e.q(e.cw(7,e.y(21,t),e.ge(1))),t=>e.q(e.cw(7,e.pe(21,t),e.ge(1))),(t,r)=>e.q(e.ocqs([t,r])),(t,r,n)=>e.q(e.ocqs([t,r,n])),(t,r,n,s,i,o)=>e.q(e.ocqs([t,r,n,s,i,o])),(t,r,n,s,i,o,a,c,u,l,f,d,p,g,_,h,w)=>e.q(e.ocqs([t,e.tw(e.cw(f,e.pc_(g,_),e.ge(h)),2592e6),r,n,s,i,o,a,c,u,l,e.tw(e.cw(d,p,e.ge(w)),2592e6)])),(t,r,n,s,i,o)=>e.q(e.ocqs([e.cw(t,e.os(s,i,o),e.ge(1)),e.cw(r,n,e.ge(1))])),(t,r,n,s)=>e.q(e.ocqs([e.cw(t,e.os(e.e,4,r),e.ge(1)),e.cw(2,e.os(e.e,n,s),e.ge(1))])),(t,r,n,s)=>e.q(e.ocqs([e.cw(t,e.ref(n),e.ge(1)),e.cw(r,e.ref(s),e.ge(1))])),(t,r,n,s)=>e.q(e.ocqs([e.cw(t,e.pe(4,n),e.ge(1)),e.cw(r,e.pe(4,s),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.cw(0,e.a([e.pe(8,r),e.pc_(24,n)]),e.ge(1)),e.cw(0,t,e.ge(1))])),(t,r,n,s,i)=>e.q(e.ocqs([e.cw(0,e.os(r,n,s),e.ge(1)),e.cw(t,e.bsc_(1,i),e.ge(1))])),(t,r)=>e.q(e.ocqs([e.cw(0,e.ref(t),e.ge(1)),e.cw(0,e.os(e.s,1,r),e.ge(1))])),(t,r)=>e.q(e.ocqs([e.cw(0,e.ref(t),e.ge(1)),e.cw(0,e.bsc_(1,r),e.ge(1))])),t=>e.q(e.ocqs([e.cw(0,e.ref(14),e.ge(1)),e.cw(0,e.ps(1,t),e.ge(1))])),(t,r,n,s)=>e.q(e.ocqs([e.cw(0,e.bsc_(n,s),e.ge(1)),e.cw(t,r,e.ge(1))])),(t,r)=>e.q(e.ocqs([e.cw(0,e.bsc_(8,t),e.ge(1)),e.cw(0,e.ps(23,r),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.lm(t,e.ge(n)),e.ifp(r)])),t=>e.q(e.ocqs([e.lm("4faff316-9043-402f-bcca-8e50dbf0b34c",e.ge(t)),e.ifp("112089")])),t=>e.q(e.ocqs([e.lm("9be767a9-d9f4-41e0-b5f0-295c0e143145",e.ge(t)),e.ifp("88504")])),(t,r,n,s,i,o,a,c,u)=>e.q(e.ocqs([e.tw(e.cw(t,r,e.ge(a)),2592e6),e.tw(e.cw(n,s,e.ge(c)),2592e6),e.tw(e.cw(i,o,e.ge(u)),2592e6)])),(t,r,n,s,i,o,a,c,u,l)=>e.q(e.ocqs([e.tw(e.cw(n,s,e.ge(o)),t),e.tw(e.cw(i,e.os(c,u,l),e.ge(a)),r)])),(t,r,n,s,i,o,a,c)=>e.q(e.ocqs([e.tw(e.cw(n,s,e.ge(a)),t),e.tw(e.cw(i,o,e.ge(c)),r)])),(t,r,n,s)=>e.q(e.ocqs([e.tw(e.cw(0,t,e.ge(r)),2592e6),e.tw(e.cw(5,e.os(e.cx,13,s),e.ge(n)),2592e6)])),(t,r,n,s,i)=>e.q(e.ocqs([e.tw(e.cw(0,t,e.ge(2)),7776e6),e.tw(e.cw(r,e.os(n,s,i),e.ge(2)),7776e6)])),(t,r,n)=>e.q(e.ocqs([e.tw(e.cw(0,e.o(n),e.ge(3)),2592e6),e.tw(e.cw(1,t,e.ge(3)),2592e6),e.tw(e.cw(5,r,e.ge(3)),2592e6)])),(t,r,n)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,n),e.ge(1)),2592e6)])),(t,r,n,s)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,n),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,s),e.ge(1)),2592e6)])),(t,r,n,s,i)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,n),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,s),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,i),e.ge(1)),2592e6)])),(t,r,n,s,i,o,a)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,n),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,s),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,i),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,o),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,a),e.ge(1)),2592e6)])),(t,r,n,s,i,o,a,c)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,n),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,s),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,i),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,o),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,a),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,c),e.ge(1)),2592e6)])),(t,r,n,s,i,o,a,c,u,l,f,d,p)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,n),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,s),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,i),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,o),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,a),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,c),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,u),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,l),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,f),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,d),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,p),e.ge(1)),2592e6)])),t=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,132),e.ge(1)),2592e6)])),(t,r)=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,r),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,t),e.ge(1)),2592e6)])),()=>e.q(e.ocqs([e.tw(e.cw(0,e.pc_(0,9),e.ge(1)),2592e6),e.tw(e.cw(0,e.pc_(0,12),e.ge(1)),2592e6)])),(t,r)=>e.q(e.isp("liveramp_Citi_bbc_e488cdb0e7cb4d91964860d437d8e491",t,!1,r)),(t,r,n)=>e.q(e.tw(e.cw(t,r,e.ge(n)),2592e6)),(t,r,n)=>e.q(e.tw(e.cw(t,e.o([r,n]),e.ge(1)),7776e6)),(t,r,n,s)=>e.q(e.tw(e.cw(t,e.pc_(n,s),e.ge(r)),2592e6)),(t,r,n)=>e.q(e.tw(e.cw(t,e.pe(r,n),e.ge(3)),2592e6)),(t,r,n,s)=>e.q(e.tw(e.cw(r,n,e.ge(s)),t)),(t,r)=>e.q(e.tw(e.cw(0,e.a([t,r]),e.ge(3)),2592e6)),()=>e.q(e.tw(e.cw(0,e.pc_(0,18),e.ge(1)),2592e6)),()=>e.q(e.tw(e.cw(0,e.pc_(0,75),e.ge(1)),2592e6))],stateSyncReplays:e=>[],subexpressionsLookup:e=>[e.bsc_(1,["2oQJKKrj","A4llCvq4","Hd9s/Md6","IAMmh7wV","OM0I+rC+","uq9ZGmkf","yr4/+aej"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,128),e.s_(6,130)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,495),e.s_(2,532),e.s_(2,690),e.s_(2,745),e.s_(2,812),e.s_(2,843),e.s_(2,1073)])),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,87),e.s_(6,89),e.s_(6,90),e.s_(6,91),e.s_(6,92)])),e.o([e.os(e.cx,5,[814,950,494]),e.ref(5)]),e.os(e.s,7,[493,745]),e.os(e.cx,5,[707,333]),e.os(e.w,3,[250,251]),e.os(e.s,18,[596,597,598,602]),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,318),e.s_(2,330),e.s_(2,332),e.s_(2,467),e.s_(2,468)])),e.o([e.s_(6,36),e.s_(6,41)]),e.os(e.s,1,[249,762]),e.os(e.s,9,[290,302,321,339,400,480,545,553,563,658,696,701,704,844,856,881,913,990,1012]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,104)])),e.os(e.s,18,[596,597,602]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,118),e.s_(6,120)])),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,139),e.s_(6,146)])),e.o([e.s_(2,232),e.s_(2,511),e.s_(2,759)]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,136)])),e.o([e.s_(6,21)]),e.os(e.e,4,[3224726350,3224725894]),e.os(e.e,4,[3319232792,3542769731]),e.af_u(["properties","classifications_watson","categories"],e.ref(19)),e.o([e.s_(2,292)]),e.os(e.s,1,[294,318,319,328,343,379,387,398,463,1047,1052]),e.os(e.s,9,[292,682,894,978]),e.os(e.s,1,[229,240,273,279,321,486,487,503,504,553,561,566,696,699,704,728,792,863,914,1007]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,326),e.s_(2,327),e.s_(2,464),e.s_(2,465),e.s_(2,466),e.s_(2,707),e.s_(2,1047)])),e.os(e.s,1,[191,208,236,238,244,247,267,275,292,317,358,368,375,376,442,475,488,509,536,541,542,560,633,637,639,641,645,661,705,729,746,756,808,809,845,853,872,897,940,945,970,988,1023]),e.os(e.s,1,[290,315,545,553,563,658,704,856,881,914,990]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,46)])),e.o([e.s_(2,1053)]),e.os(e.s,18,[595,599,600,601,613]),e.os(e.s,8,[767,769,770]),e.o([e.s_(2,632)]),e.os(e.s,18,[594,595,599,600,601,613,614]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,243),e.s_(2,385),e.s_(2,493),e.s_(2,690),e.s_(2,710),e.s_(2,789),e.s_(2,807),e.s_(2,946)])),e.os(e.s,22,[293,318,319,343,365,379,387,398,463,653,681,707,708,1047,1052]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,51),e.s_(6,52)])),e.o([e.s_(2,295),e.s_(2,544),e.s_(2,570),e.s_(2,717)]),e.o([e.y(10,390),e.os(e.cx,11,[755,216]),e.os(e.cx,5,[689,792,240,754,219,217,755,987,832,831,1032]),e.os(e.s,7,[389,390,450,452,755]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,5),e.s_(6,20),e.s_(6,29),e.s_(6,60),e.s_(6,78),e.s_(6,135)])),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,216),e.s_(2,240),e.s_(2,390),e.s_(2,689),e.s_(2,751),e.s_(2,753),e.s_(2,792),e.s_(2,987)])),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,216),e.s_(2,240),e.s_(2,390),e.s_(2,492),e.s_(2,689),e.s_(2,753),e.s_(2,792)]))]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,473),e.s_(2,803)])),e.os(e.e,4,[2806266660,2397342179,2478223133,2523811330,2400909281,2739119193,2620857003,2918744365,2918744296,2483038024,2800026204,2722157430,2686060527,2878850083,2689806380,2696048525,2700309249,2742930446,2813285508,2772044079,2687845410,2743529464,2839288200,2777054344,2882901340,2868590860,2741491890,2809739667,2707480994,2747111193,2680657581,2903250888,2821967247,2645745084,2770635248,2914918264,2774578556,2725792010,2871241565,2791592795,2867789276,2898891050,2818618287,2867788700,2902964575]),e.o([e.y(19,252),e.ps(1,604)]),e.os(e.s,22,[310,517]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,30),e.s_(6,53)])),e.os(e.w,10,[518,516]),e.o([e.s_(2,556),e.s_(2,1057),e.s_(2,1058)]),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,480),e.s_(2,567),e.s_(2,699),e.s_(2,952),e.s_(2,1012)])),e.os(e.s,10,[516]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,382),e.s_(2,474),e.s_(2,477),e.s_(2,738)])),e.os(e.s,9,[211,241,253,395,426,505,506,589,590,749,859,918,941,1007]),e.bsc_(19,["5RqQkdCe"]),e.af_u(["properties","classifications_watson","categories"],e.o([e.s_(6,78)])),e.os(e.w,7,[979,978]),e.os(e.s,3,[250,251]),e.af_u(["properties","classifications_watson","concepts"],e.s_(2,183)),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,480),e.s_(2,657),e.s_(2,699),e.s_(2,846)])),e.os(e.cx,5,[693,881,1020,569,699,316,914,697,285,481,480,657]),e.os(e.e,4,[3533895591,3532072684]),e.af_u(["properties","classifications_watson","categories"],e.ref(10)),e.af_u(["properties","classifications_watson","keywords"],e.o([e.s_(2,390),e.s_(2,503),e.s_(2,562),e.s_(2,565),e.s_(2,568),e.s_(2,699),e.s_(2,914)])),e.os(e.s,1,[191,208,236,238,244,247,267,275,292,317,358,368,375,376,442,475,488,509,537,540,541,542,560,633,639,640,642,643,644,645,661,705,729,746,756,808,809,845,853,862,872,897,940,945,970,988,1023]),e.os(e.cx,17,[178,187,173,174,163,186,182,181]),e.af_u(["properties","classifications_watson","concepts"],e.o([e.s_(2,567),e.s_(2,672),e.s_(2,699)])),e.os(e.s,1,[151,243,265,373,384,397,484,493,498,499,500,501,635,640,690,745,747,783,793,807,886,930,946,972])]}})})));var be=__webpack_require__(878),ve=__webpack_require__(29);async function ye(f){let{contextsInitTimestampPerformance:d,master:p}=f;const g=await p.next(),_=performance.now();Object.entries(g.globals??{}).forEach((e=>{let[t,r]=e;Object.defineProperty(self,t,{value:r})}));const h=new W(g.permutiveConfig);h.measureBetween("waiting_worker_high_priority_config",d,_);const w=function(t){var r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.RP;return t.loggingEnabled&&void 0!==(null===(r=self.console)||void 0===r?void 0:r.log)?new P(n):new C}(g.permutiveConfig,g.sdkInitTimestampDate),m=g.metricsEnabled?new G(g.sdkInitTimestampPerformance,g.timeOriginMainContext,w):new x;m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_evaluated",time_origin:"sdk_init"},d),m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_high_priority_config",time_origin:"sdk_init"},_);const b=(0,r.zG)(p.next,h.traceTask("waiting_worker_low_priority_config"))();b.then((()=>m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_low_priority_config",time_origin:"sdk_init"})));const v=(0,r.zG)((()=>p.read()),function(e,n){const s=e=>(0,r.zG)(e,A.Hd((e=>e in n)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return i=>{const{buffers:o,nonBuffers:a}=s(e),[c,u]=t.Ue({...a,...(0,r.zG)(o,A.Su((e=>()=>{const t=o[e];return o[e]=n[e].empty,t})))});return(async()=>{for(;;){const e=(0,r.zG)(await i(),R.UI(s),R.ur({concat:(e,t)=>({nonBuffers:{...e.nonBuffers,...t.nonBuffers},buffers:(()=>{const r={...e.buffers};for(const e in t.buffers)r[e]=e in r?n[e].concat(r[e],t.buffers[e]):t.buffers[e];return r})()})})),t=(0,r.zG)(e.buffers,A.Su(((e,t)=>(o[e]=n[e].concat(o[e],t),()=>{const t=o[e];return o[e]=n[e].empty,t}))));u({...c.current,...e.nonBuffers,...t})}})(),(0,r.zG)(e,A.Su((e=>(0,r.zG)(c,t.UI((t=>t[e]))))))}}({contextualCohorts:s.YP,consent:g.consent,enrichmentReplacementMap:s.YP,eventSourceId:g.eventSourceId,identities:s.YP,newEvents:i.cS,pageviewState:g.pageviewState,priorCachedEventsResponses:i.cS,sessionId:g.sessionId,userId:g.userId,userIdIsNewlyGenerated:g.userIdIsNewlyGenerated,viewId:g.pageviewState.viewId,webClient:s.G(g.webClient)},{newEvents:i.uZ(),priorCachedEventsResponses:i.uZ()}),(0,o.rO)({newEvents:(0,be.F)(m,"pageview_received_by_worker")}),(e=>({...e,currentTimestampSecs:ke((0,r.zG)(g.initialTimestampSecs,s.EQ((()=>0),(e=>e-Date.now()/1e3))))}))),{eventsCachedInWorker:y,coreService:k}=await function(o,f,d,p,g,_){p.debug("SDK core started",o);const h=500,w=new S(_),m=new I(o.permutiveConfig),b=new ee(m,o.permutiveConfig,w,_,p,(()=>d.webClient.current)),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},y=(0,r.zG)(a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,414)).then((e=>e.watson))),(()=>"Failed to import watson.")),a.UI((e=>(0,r.zG)(d.webClient,t.UI(s.UI((e=>e.url))),t.D8(s.Eh(ve.Eq)),(n=>e({config:o.permutiveConfig,metrics:_,permutiveApi:w,permutiveUrls:m,pageUrl:n,trace:g,watsonEnabled:(0,r.zG)(d.pageviewState,t.UI((e=>e.watsonEnabled)))})))))),k=(0,r.zG)(V.initialise(o.permutiveConfig,p,v,g,_,d.userId,(()=>(0,r.zG)(X.connect(new O(o.permutiveConfig),_,new D,o.organizationId,`events_${d.userId.current}`,`keys_${d.userId.current}`,"events",p,d.consent,o.isSecureContext),g.traceTask("connect_idb_events_cache")))),g.traceTask("initialise_events_cache"),a.At((()=>()=>_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"events_cache_initialised",time_origin:"sdk_init"},performance.now()))),a.EQ((e=>{p.error(`Worker failed to initialise IndexedDB event cache: ${e}`);const n={},[s,o]=t.gS(i.uZ()),a=()=>new Promise((e=>{const t=String(Math.random());n[t]=r=>{delete n[t],e(r)},o([[t,void 0]])}));return(0,r.zG)(d.priorCachedEventsResponses,t.UI((e=>(0,r.zG)(e(),i.UI((e=>{var t;let[r,s]=e;return null===(t=n[r])||void 0===t?void 0:t.call(n,s)})))))),{eventsCachedInWorker:!1,coreOutput:{priorCachedEventsRequests:s},coreConfig:{eventsCache:l.t$(a)}}}),(e=>({eventsCachedInWorker:!0,coreOutput:{priorCachedEventsRequests:t.a9(T.of(i.bM()))},coreConfig:{eventsCache:l.F2(e)}})))),G=(0,r.zG)(!0,a.DT(r.yR,(()=>"IndexedDB disabled.")),a.tS((()=>(0,r.zG)(q.K.initialise(new O(o.permutiveConfig),_,p,new D,`worker_${o.organizationId}`,"core_service_state","keys","core_service_state",4,o.isSecureContext),g.traceTask("initialise-core-idb")))),a.tS((e=>(0,z.Yt)(a.Hi)({persistCoreState:c(e,"core"),persistLalState:c(e,"lal")})))),x=()=>new Promise((e=>(0,r.zG)(d.consent,t.YP((t=>{t&&e()}))))),U=i=>(0,r.zG)(a.fF(G),a.YO("servicePersistence"),a.Qt("eventsCache",a.fF((()=>i))),a.Qt("coreService",(0,r.zG)(a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,361)).then((e=>e.service))),(e=>`Failed to import core service: ${e}`)),g.traceTask("import-core-service"))),a.Qt("lookalikeModelsService",a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,965)).then((e=>e.lookalikeModelsService))),(()=>"Failed to import lookalike models."))),a.Qt("optimisedActivationsConfig",a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,41)).then((e=>e.optimisedActivationsConfig))),(()=>"Failed to import lookalike models."))),a.Qt("watson",y),j.mU((()=>x)),a.UI((i=>{let{coreService:a,eventsCache:c,lookalikeModelsService:b,optimisedActivationsConfig:y,servicePersistence:k,watson:S}=i;const I={config:o.permutiveConfig,customQueries:me(),logger:p,metrics:_,optimisedActivationsConfig:y,permutiveApi:w,permutiveUrls:m,reportError:v,trackPageviewComplete:o.trackPageviewComplete,migratedStateMaps:(0,r.zG)(s.lo(!o.isFirstPageview),s.EQ((()=>j.of({external:s.bM(),internal:s.bM()})),(()=>T.of(f.then((e=>e.migratedStateMaps)))))),trace:g,watson:s.G(S)};return(0,r.zG)(k,l.UI((i=>{let{persistCoreState:o,persistLalState:l}=i;return(0,r.zG)(b({...I,...d}),l,n.VS((i=>{let[l,f]=i;return(0,r.zG)(d,a({...I,...c.coreConfig,lookalikeModels:s.G(f)}),(p=h,g=t.a9(!1),n=>s=>{const{value:i,state:o}=n(s),[a,c]=t.Ue(o.current),u=(0,e.UM)((()=>c(o.current)),p),l=(0,r.zG)(t.vP(o,a),t.UI((e=>{let[t,r]=e;return t===r})));return(0,r.zG)(g,t.bw((e=>e&&u()))),{value:(0,r.bc)(l,i),state:(0,r.zG)(t.vP(g,o,a),t.UI((e=>{let[t,r,n]=e;return t?r:n})))}}),u(d.consent),o,n.UI((e=>{let[n,[s,i]]=e;return{...i,stateFlushed:(0,r.zG)(t.vP(l,n,s),t.UI((e=>{let[t,r,n]=e;return t&&r&&n})))}})));var p,g})),(e=>{const{value:r}=e({stopped:t.a9(!1),previousState:{}});return e=>({value:r,state:t.a9(void 0)})}))})),l.fS((e=>(p.warn("Worker running in non-persistent mode.",e),(0,r.zG)(d,a({...I,...c.coreConfig,lookalikeModels:s.YP}),n.Hr("stateFlushed",(()=>t.a9(!0))),u(d.consent))))),n.UI((e=>({...e,...c.coreOutput}))))})));return async()=>{const e=k(),t=U(e)(),{eventsCachedInWorker:r}=await e;return{eventsCachedInWorker:r,coreService:t}}}(g,b,v,w,h,m)();p.send({eventsCachedInWorker:y});const U=await k;var E,F;if(l.nM(U))return w.error(`Failed to start worker: ${U.left}`),void(null===(E=(F=self).close)||void 0===E||E.call(F));const L=U.right,Y=await b,Q=(await L)({stopped:t.a9(!1),previousState:Y.previousState}),[N,$]=t.Ue(m.getNoMetricsTracked());(0,e.UM)((()=>$(m.getNoMetricsTracked())),100),function(e,n,i){const o=(0,r.zG)(t.vP(n),t.UI((0,r.ls)(A.UI((e=>"function"==typeof e?e:T.of(e))),(0,z.Yt)(T.G5))));let a=o.current();e(a),(0,r.zG)(o,t.YP((t=>{const n=t(),o=(0,r.zG)(n,A.z7(((e,t)=>{var r;return t!==a[e]&&(null===(r=i[e])||void 0===r||!r.isEmpty(t))})),s.DT((0,M.ff)(A.xb)));s.pC(o)&&(a={...a,...o.value},e(o.value))})))}(p.send,{activations:t.vP(Q.value.activations),cohorts:t.vP(Q.value.cohorts),context:Q.value.context,eventsToPublish:Q.value.eventsToPublish,eventsToPublishOnPageUnload:Q.value.eventsToPublishOnPageUnload,externalData:Q.value.externalData,geoIP:Q.value.geoIP,metrics:(0,r.zG)(N,t.UI((()=>()=>m.consume()))),priorCachedEventsRequests:Q.value.priorCachedEventsRequests,realtime:Q.value.realtime,state:Q.state,transitionsSinceInit:Q.value.transitionsSinceInit,workerStateFlushed:Q.value.stateFlushed,stateMigratedThisInitialisation:Q.value.stateMigratedThisInitialisation,secureSignal:Q.value.secureSignal},{eventsToPublish:{isEmpty:i.xb},metrics:{isEmpty:i.xb}})}function ke(r){const n=()=>Math.floor(Date.now()/1e3)+r,[s,i]=t.Ue(n());return(0,e.UM)((()=>i(n())),1e3),s}const Se=t=>{const r=[],n=[],s=()=>{for(;r.length>0&&n.length>0;)n.shift()()},i=t=>new Promise((r=>{n.push((()=>r(t()))),(0,e.HJ)(s)}));return t.addEventListener("message",(0,e.GL)((t=>{null!==t.data&&(r.push(t.data),(0,e.HJ)(s))}))),{next:()=>i((()=>r.shift())),read:()=>i((()=>r.splice(0)))}};!async function(){const t=self;ye({contextsInitTimestampPerformance:e.NC,master:{...Se(t),send:e=>t.postMessage(e)}})}()})()})();',"Worker",void 0,void 0)}},1005:e=>{e.exports=function(e,t,r,n){var s=self||window;try{try{var i;try{i=new s.Blob([e])}catch(t){(i=new(s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||s.MSBlobBuilder)).append(e),i=i.getBlob()}var o=s.URL||s.webkitURL,a=o.createObjectURL(i),c=new s[t](a,r);return o.revokeObjectURL(a),c}catch(n){return new s[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new s[t](n,r)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={},_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__;_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3812),(()=>{var e,t;(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.ho)(!0);const r="permutive.main.import_runWebSdk",n=`${r}_start`;null===(e=performance)||void 0===e||null===(t=e.mark)||void 0===t||t.call(e,n),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,4749))))().then((e=>{var t,s;null===(t=performance)||void 0===t||null===(s=t.measure)||void 0===s||s.call(t,r,n),e.runSdk({contextsInitTimestampPerformance:_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.NC,contextsInitTimestamp:_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.RP})})).catch(console.error)})()})();